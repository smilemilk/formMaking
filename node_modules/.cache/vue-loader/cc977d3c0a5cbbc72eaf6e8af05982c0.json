{"remainingRequest":"/Users/shanliguo/Documents/workstudy/vue-form-making/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/shanliguo/Documents/workstudy/vue-form-making/src/components/Container.vue?vue&type=style&index=0&lang=scss&","dependencies":[{"path":"/Users/shanliguo/Documents/workstudy/vue-form-making/src/components/Container.vue","mtime":1557761484109},{"path":"/Users/shanliguo/Documents/workstudy/vue-form-making/node_modules/css-loader/index.js","mtime":499162500000},{"path":"/Users/shanliguo/Documents/workstudy/vue-form-making/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/shanliguo/Documents/workstudy/vue-form-making/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/shanliguo/Documents/workstudy/vue-form-making/node_modules/sass-loader/lib/loader.js","mtime":1533139052000},{"path":"/Users/shanliguo/Documents/workstudy/vue-form-making/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/shanliguo/Documents/workstudy/vue-form-making/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.widget-empty{\n  background: url('../assets/form_empty.png') no-repeat;\n  background-position: 50%;\n}\n\n",{"version":3,"sources":["Container.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqkBA;AACA;AACA;AACA","file":"Container.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <el-container class=\"fm2-container\">\n    <el-main class=\"fm2-main\">\n      <el-container>\n        <el-aside style=\"wdith: 250px;\">\n\n          <div class=\"components-list\">\n            <div class=\"widget-cate\">基础字段</div>\n            <draggable tag=\"ul\" :list=\"basicComponents\"\n              v-bind=\"{group:{ name:'people', pull:'clone',put:false},sort:false, ghostClass: 'ghost'}\"\n              @end=\"handleMoveEnd\"\n              @start=\"handleMoveStart\"\n              :move=\"handleMove\"\n            >\n\n              <li class=\"form-edit-widget-label\" v-for=\"(item, index) in basicComponents\" :key=\"index\">\n                <a>\n                  <i class=\"icon iconfont\" :class=\"item.icon\"></i>\n                  <span>{{item.name}}</span>\n                </a>\n              </li>\n            </draggable>\n\n            <div class=\"widget-cate\">高级字段</div>\n            <draggable tag=\"ul\" :list=\"advanceComponents\"\n              v-bind=\"{group:{ name:'people', pull:'clone',put:false},sort:false, ghostClass: 'ghost'}\"\n              @end=\"handleMoveEnd\"\n              @start=\"handleMoveStart\"\n              :move=\"handleMove\"\n            >\n\n              <li class=\"form-edit-widget-label\" v-for=\"(item, index) in advanceComponents\" :key=\"index\">\n                <a>\n                  <i class=\"icon iconfont\" :class=\"item.icon\"></i>\n                  <span>{{item.name}}</span>\n                </a>\n              </li>\n            </draggable>\n\n            <div class=\"widget-cate\">布局字段</div>\n            <draggable tag=\"ul\" :list=\"layoutComponents\"\n              v-bind=\"{group:{ name:'people', pull:'clone',put:false},sort:false, ghostClass: 'ghost'}\"\n              @end=\"handleMoveEnd\"\n              @start=\"handleMoveStart\"\n              :move=\"handleMove\"\n            >\n\n              <li class=\"form-edit-widget-label data-grid\" v-for=\"(item, index) in layoutComponents\" :key=\"index\">\n                <a>\n                  <i class=\"icon iconfont\" :class=\"item.icon\"></i>\n                  <span>{{item.name}}</span>\n                </a>\n              </li>\n            </draggable>\n          </div>\n\n        </el-aside>\n        <el-container class=\"center-container\" direction=\"vertical\">\n          <el-header class=\"btn-bar\" style=\"height: 45px;\">\n            <slot name=\"action\">\n            </slot>\n            <el-button v-if=\"upload\" type=\"text\" size=\"medium\" icon=\"el-icon-upload2\" @click=\"handleUpload\">导入JSON</el-button>\n            <el-button v-if=\"preview\" type=\"text\" size=\"medium\" icon=\"el-icon-view\" @click=\"handlePreview\">预览</el-button>\n            <el-button v-if=\"generateJson\" type=\"text\" size=\"medium\" icon=\"el-icon-tickets\" @click=\"handleGenerateJson\">生成JSON</el-button>\n            <el-button v-if=\"generateCode\" type=\"text\" size=\"medium\" icon=\"el-icon-document\" @click=\"handleGenerateCode\">生成代码</el-button>\n          </el-header>\n          <el-main :class=\"{'widget-empty': widgetForm.list.length == 0}\">\n\n            <widget-form v-if=\"!resetJson\"  ref=\"widgetForm\" :data=\"widgetForm\" :select.sync=\"widgetFormSelect\"></widget-form>\n          </el-main>\n        </el-container>\n\n        <el-aside class=\"widget-config-container\">\n          <el-container>\n            <el-header height=\"45px\">\n              <div class=\"config-tab\" :class=\"{active: configTab=='widget'}\" @click=\"handleConfigSelect('widget')\">字段属性</div>\n              <div class=\"config-tab\" :class=\"{active: configTab=='form'}\" @click=\"handleConfigSelect('form')\">表单属性</div>\n            </el-header>\n            <el-main class=\"config-content\">\n              <widget-config v-show=\"configTab=='widget'\" :data=\"widgetFormSelect\"></widget-config>\n              <form-config v-show=\"configTab=='form'\" :data=\"widgetForm.config\"></form-config>\n            </el-main>\n          </el-container>\n\n        </el-aside>\n\n        <cus-dialog\n          :visible=\"previewVisible\"\n          @on-close=\"previewVisible = false\"\n          ref=\"widgetPreview\"\n          @on-submit=\"handleTest\"\n          width=\"1000px\"\n          form\n        >\n          <generate-form insite=\"true\" v-if=\"previewVisible\" :data=\"widgetForm\" :value=\"widgetModels\" :remote=\"remoteFuncs\" ref=\"generateForm\">\n\n            <template v-slot:blank=\"scope\">\n              宽度：<el-input v-model=\"scope.model.blank.width\" style=\"width: 100px\"></el-input>\n              高度：<el-input v-model=\"scope.model.blank.height\" style=\"width: 100px\"></el-input>\n            </template>\n          </generate-form>\n        </cus-dialog>\n\n        <cus-dialog\n          :visible=\"uploadVisible\"\n          @on-close=\"uploadVisible = false\"\n          @on-submit=\"handleUploadJson\"\n          ref=\"uploadJson\"\n          width=\"800px\"\n          form\n        >\n          <el-alert type=\"info\" title=\"JSON格式如下，直接复制生成的json覆盖此处代码点击确定即可\"></el-alert>\n          <div id=\"uploadeditor\" style=\"height: 400px;width: 100%;\">{{jsonEg}}</div>\n        </cus-dialog>\n\n        <cus-dialog\n          :visible=\"jsonVisible\"\n          @on-close=\"jsonVisible = false\"\n          ref=\"jsonPreview\"\n          width=\"800px\"\n          form\n        >\n\n          <div id=\"jsoneditor\" style=\"height: 400px;width: 100%;\">{{jsonTemplate}}</div>\n\n          <template slot=\"action\">\n            <el-button id=\"copybtn\" data-clipboard-target=\".ace_text-input\">双击复制</el-button>\n          </template>\n        </cus-dialog>\n\n        <cus-dialog\n          :visible=\"codeVisible\"\n          @on-close=\"codeVisible = false\"\n          ref=\"codePreview\"\n          width=\"800px\"\n          form\n          :action=\"false\"\n        >\n          <div id=\"codeeditor\" style=\"height: 500px; width: 100%;\">{{htmlTemplate}}</div>\n        </cus-dialog>\n      </el-container>\n    </el-main>\n    <el-footer height=\"30px\">Powered by <a target=\"_blank\" href=\"https://github.com/GavinZhuLei/vue-form-making\">GavinZhuLei</a></el-footer>\n  </el-container>\n\n</template>\n\n<script>\nimport Draggable from 'vuedraggable'\nimport WidgetConfig from './WidgetConfig'\nimport FormConfig from './FormConfig'\nimport WidgetForm from './WidgetForm'\nimport CusDialog from './CusDialog'\nimport GenerateForm from './GenerateForm'\nimport Clipboard from 'clipboard'\nimport {basicComponents, layoutComponents, advanceComponents} from './componentsConfig.js'\nimport {loadJs, loadCss} from '../util/index.js'\nimport request from '../util/request.js'\nimport generateCode from './generateCode.js'\n\nexport default {\n  name: 'fm-making-form',\n  components: {\n    Draggable,\n    WidgetConfig,\n    FormConfig,\n    WidgetForm,\n    CusDialog,\n    GenerateForm\n  },\n  props: {\n    preview: {\n      type: Boolean,\n      default: false\n    },\n    generateCode: {\n      type: Boolean,\n      default: false\n    },\n    generateJson: {\n      type: Boolean,\n      default: false\n    },\n    upload: {\n      type: Boolean,\n      default: false\n    }\n  },\n  data () {\n    return {\n      basicComponents,\n      layoutComponents,\n      advanceComponents,\n      resetJson: false,\n      widgetForm: {\n        list: [],\n        config: {\n          labelWidth: 100,\n          labelPosition: 'top',\n          size: 'small'\n        },\n      },\n      configTab: 'widget',\n      widgetFormSelect: null,\n      previewVisible: false,\n      jsonVisible: false,\n      codeVisible: false,\n      uploadVisible: false,\n      remoteFuncs: {\n        func_test (resolve) {\n          setTimeout(() => {\n            const options = [\n              {id: '1', name: '1111'},\n              {id: '2', name: '2222'},\n              {id: '3', name: '3333'}\n            ]\n\n            resolve(options)\n          }, 2000)\n        },\n        funcGetToken (resolve) {\n          request.get('http://tools-server.xiaoyaoji.cn/api/uptoken').then(res => {\n            resolve(res.uptoken)\n          })\n        },\n        func_cascader (resolve) {\n            const options = [{\n              value: 'zhinan',\n              label: '指南',\n              children: [{\n                value: 'shejiyuanze',\n                label: '设计原则',\n                children: [{\n                  value: 'yizhi',\n                  label: '一致'\n                }, {\n                  value: 'fankui',\n                  label: '反馈'\n                }, {\n                  value: 'xiaolv',\n                  label: '效率'\n                }, {\n                  value: 'kekong',\n                  label: '可控'\n                }]\n              }, {\n                value: 'daohang',\n                label: '导航',\n                children: [{\n                  value: 'cexiangdaohang',\n                  label: '侧向导航'\n                }, {\n                  value: 'dingbudaohang',\n                  label: '顶部导航'\n                }]\n              }]\n            }, {\n              value: 'zujian',\n              label: '组件',\n              children: [{\n                value: 'basic',\n                label: 'Basic',\n                children: [{\n                  value: 'layout',\n                  label: 'Layout 布局'\n                }, {\n                  value: 'color',\n                  label: 'Color 色彩'\n                }, {\n                  value: 'typography',\n                  label: 'Typography 字体'\n                }, {\n                  value: 'icon',\n                  label: 'Icon 图标'\n                }, {\n                  value: 'button',\n                  label: 'Button 按钮'\n                }]\n              }, {\n                value: 'form',\n                label: 'Form',\n                children: [{\n                  value: 'radio',\n                  label: 'Radio 单选框'\n                }, {\n                  value: 'checkbox',\n                  label: 'Checkbox 多选框'\n                }, {\n                  value: 'input',\n                  label: 'Input 输入框'\n                }, {\n                  value: 'input-number',\n                  label: 'InputNumber 计数器'\n                }, {\n                  value: 'select',\n                  label: 'Select 选择器'\n                }, {\n                  value: 'cascader',\n                  label: 'Cascader 级联选择器'\n                }, {\n                  value: 'switch',\n                  label: 'Switch 开关'\n                }, {\n                  value: 'slider',\n                  label: 'Slider 滑块'\n                }, {\n                  value: 'time-picker',\n                  label: 'TimePicker 时间选择器'\n                }, {\n                  value: 'date-picker',\n                  label: 'DatePicker 日期选择器'\n                }, {\n                  value: 'datetime-picker',\n                  label: 'DateTimePicker 日期时间选择器'\n                }, {\n                  value: 'upload',\n                  label: 'Upload 上传'\n                }, {\n                  value: 'rate',\n                  label: 'Rate 评分'\n                }, {\n                  value: 'form',\n                  label: 'Form 表单'\n                }]\n              }, {\n                value: 'data',\n                label: 'Data',\n                children: [{\n                  value: 'table',\n                  label: 'Table 表格'\n                }, {\n                  value: 'tag',\n                  label: 'Tag 标签'\n                }, {\n                  value: 'progress',\n                  label: 'Progress 进度条'\n                }, {\n                  value: 'tree',\n                  label: 'Tree 树形控件'\n                }, {\n                  value: 'pagination',\n                  label: 'Pagination 分页'\n                }, {\n                  value: 'badge',\n                  label: 'Badge 标记'\n                }]\n              }, {\n                value: 'notice',\n                label: 'Notice',\n                children: [{\n                  value: 'alert',\n                  label: 'Alert 警告'\n                }, {\n                  value: 'loading',\n                  label: 'Loading 加载'\n                }, {\n                  value: 'message',\n                  label: 'Message 消息提示'\n                }, {\n                  value: 'message-box',\n                  label: 'MessageBox 弹框'\n                }, {\n                  value: 'notification',\n                  label: 'Notification 通知'\n                }]\n              }, {\n                value: 'navigation',\n                label: 'Navigation',\n                children: [{\n                  value: 'menu',\n                  label: 'NavMenu 导航菜单'\n                }, {\n                  value: 'tabs',\n                  label: 'Tabs 标签页'\n                }, {\n                  value: 'breadcrumb',\n                  label: 'Breadcrumb 面包屑'\n                }, {\n                  value: 'dropdown',\n                  label: 'Dropdown 下拉菜单'\n                }, {\n                  value: 'steps',\n                  label: 'Steps 步骤条'\n                }]\n              }, {\n                value: 'others',\n                label: 'Others',\n                children: [{\n                  value: 'dialog',\n                  label: 'Dialog 对话框'\n                }, {\n                  value: 'tooltip',\n                  label: 'Tooltip 文字提示'\n                }, {\n                  value: 'popover',\n                  label: 'Popover 弹出框'\n                }, {\n                  value: 'card',\n                  label: 'Card 卡片'\n                }, {\n                  value: 'carousel',\n                  label: 'Carousel 走马灯'\n                }, {\n                  value: 'collapse',\n                  label: 'Collapse 折叠面板'\n                }]\n              }]\n            }, {\n              value: 'ziyuan',\n              label: '资源',\n              children: [{\n                value: 'axure',\n                label: 'Axure Components'\n              }, {\n                value: 'sketch',\n                label: 'Sketch Templates'\n              }, {\n                value: 'jiaohu',\n                label: '组件交互文档'\n              }]\n            }]\n\n            resolve(options)\n        },\n        upload_callback (response, file, fileList) {\n          console.log('callback', response, file, fileList)\n        }\n      },\n      widgetModels: {\n      },\n      blank: '',\n      htmlTemplate: '',\n      jsonTemplate: '',\n      uploadEditor: null,\n      jsonEg: `{\n  \"list\": [\n    {\n      \"type\": \"input\",\n      \"name\": \"单行文本\",\n      \"icon\": \"icon-input\",\n      \"options\": {\n        \"width\": \"100%\",\n        \"defaultValue\": \"\",\n        \"required\": false,\n        \"dataType\": \"string\",\n        \"pattern\": \"\",\n        \"placeholder\": \"\",\n        \"remoteFunc\": \"func_1540908864000_94322\"\n      },\n      \"key\": \"1540908864000_94322\",\n      \"model\": \"input_1540908864000_94322\",\n      \"rules\": [\n        {\n          \"type\": \"string\",\n          \"message\": \"单行文本格式不正确\"\n        }\n      ]\n    },\n    {\n      \"type\": \"textarea\",\n      \"name\": \"多行文本\",\n      \"icon\": \"icon-diy-com-textarea\",\n      \"options\": {\n        \"width\": \"100%\",\n        \"defaultValue\": \"\",\n        \"required\": false,\n        \"pattern\": \"\",\n        \"placeholder\": \"\",\n        \"remoteFunc\": \"func_1540908876000_19435\"\n      },\n      \"key\": \"1540908876000_19435\",\n      \"model\": \"textarea_1540908876000_19435\",\n      \"rules\": []\n    }\n  ],\n  \"config\": {\n    \"labelWidth\": 100,\n    \"labelPosition\": \"top\",\n    \"size\": \"small\"\n  }\n}`\n    }\n  },\n  mounted () {\n\n  },\n  methods: {\n    handleGoGithub () {\n      window.location.href = 'https://github.com/GavinZhuLei/vue-form-making'\n    },\n    handleConfigSelect (value) {\n      this.configTab = value\n    },\n    handleMoveEnd (evt) {\n      console.log('end', evt)\n        console.log(evt)\n    },\n    handleMoveStart ({oldIndex}) {\n      console.log('start', oldIndex, this.basicComponents)\n    },\n    handleMove () {\n      return true\n    },\n    handlePreview () {\n      console.log(this.widgetForm)\n      this.previewVisible = true\n    },\n    handleTest () {\n      this.$refs.generateForm.getData().then(data => {\n        this.$alert(data, '').catch(e=>{})\n        this.$refs.widgetPreview.end()\n      }).catch(e => {\n        this.$refs.widgetPreview.end()\n      })\n    },\n    handleGenerateJson () {\n      this.jsonVisible = true\n      this.jsonTemplate = this.widgetForm\n      console.log(JSON.stringify(this.widgetForm))\n      this.$nextTick(() => {\n\n        const editor = ace.edit('jsoneditor')\n        editor.session.setMode(\"ace/mode/json\")\n\n        const btnCopy = new Clipboard('#copybtn')\n      })\n    },\n    handleGenerateCode () {\n      this.codeVisible = true\n      this.htmlTemplate = generateCode(JSON.stringify(this.widgetForm))\n      this.$nextTick(() => {\n        const editor = ace.edit('codeeditor')\n        editor.session.setMode(\"ace/mode/html\")\n      })\n    },\n    handleUpload () {\n      this.uploadVisible = true\n      this.$nextTick(() => {\n        this.uploadEditor = ace.edit('uploadeditor')\n        this.uploadEditor.session.setMode(\"ace/mode/json\")\n      })\n    },\n    handleUploadJson () {\n      try {\n        this.setJSON(JSON.parse(this.uploadEditor.getValue()))\n        this.uploadVisible = false\n      } catch (e) {\n        this.$message.error(e.message)\n        this.$refs.uploadJson.end()\n      }\n    },\n    getJSON () {\n      return this.widgetForm\n    },\n    getHtml () {\n      return generateCode(JSON.stringify(this.widgetForm))\n    },\n    setJSON (json) {\n      this.widgetForm = json\n\n      if (json.list.length> 0) {\n        this.widgetFormSelect = json.list[0]\n      }\n    },\n    handleInput (val) {\n      console.log(val)\n      this.blank = val\n    }\n  },\n  watch: {\n    widgetForm: {\n      deep: true,\n      handler: function (val) {\n        console.log(this.$refs.widgetForm)\n      }\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\">\n.widget-empty{\n  background: url('../assets/form_empty.png') no-repeat;\n  background-position: 50%;\n}\n\n</style>\n"]}]}