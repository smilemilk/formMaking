{"remainingRequest":"/Users/shanliguo/Documents/workstudy/vue-form-making/node_modules/babel-loader/lib/index.js!/Users/shanliguo/Documents/workstudy/vue-form-making/node_modules/eslint-loader/index.js??ref--13-0!/Users/shanliguo/Documents/workstudy/vue-form-making/src/lib/tinymce/plugins/table/plugin.js","dependencies":[{"path":"/Users/shanliguo/Documents/workstudy/vue-form-making/src/lib/tinymce/plugins/table/plugin.js","mtime":1551936177000},{"path":"/Users/shanliguo/Documents/workstudy/vue-form-making/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/shanliguo/Documents/workstudy/vue-form-making/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/shanliguo/Documents/workstudy/vue-form-making/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":["(function () {\n  var table = function () {\n    'use strict';\n\n    var global = tinymce.util.Tools.resolve('tinymce.PluginManager');\n\n    var noop = function () {\n      var x = [];\n\n      for (var _i = 0; _i < arguments.length; _i++) {\n        x[_i] = arguments[_i];\n      }\n    };\n\n    var compose = function (fa, fb) {\n      return function () {\n        var x = [];\n\n        for (var _i = 0; _i < arguments.length; _i++) {\n          x[_i] = arguments[_i];\n        }\n\n        return fa(fb.apply(null, arguments));\n      };\n    };\n\n    var constant = function (value) {\n      return function () {\n        return value;\n      };\n    };\n\n    var identity = function (x) {\n      return x;\n    };\n\n    var curry = function (f) {\n      var x = [];\n\n      for (var _i = 1; _i < arguments.length; _i++) {\n        x[_i - 1] = arguments[_i];\n      }\n\n      var args = new Array(arguments.length - 1);\n\n      for (var i = 1; i < arguments.length; i++) args[i - 1] = arguments[i];\n\n      return function () {\n        var x = [];\n\n        for (var _i = 0; _i < arguments.length; _i++) {\n          x[_i] = arguments[_i];\n        }\n\n        var newArgs = new Array(arguments.length);\n\n        for (var j = 0; j < newArgs.length; j++) newArgs[j] = arguments[j];\n\n        var all = args.concat(newArgs);\n        return f.apply(null, all);\n      };\n    };\n\n    var not = function (f) {\n      return function () {\n        var x = [];\n\n        for (var _i = 0; _i < arguments.length; _i++) {\n          x[_i] = arguments[_i];\n        }\n\n        return !f.apply(null, arguments);\n      };\n    };\n\n    var die = function (msg) {\n      return function () {\n        throw new Error(msg);\n      };\n    };\n\n    var apply = function (f) {\n      return f();\n    };\n\n    var never = constant(false);\n    var always = constant(true);\n    var never$1 = never;\n    var always$1 = always;\n\n    var none = function () {\n      return NONE;\n    };\n\n    var NONE = function () {\n      var eq = function (o) {\n        return o.isNone();\n      };\n\n      var call$$1 = function (thunk) {\n        return thunk();\n      };\n\n      var id = function (n) {\n        return n;\n      };\n\n      var noop$$1 = function () {};\n\n      var nul = function () {\n        return null;\n      };\n\n      var undef = function () {\n        return undefined;\n      };\n\n      var me = {\n        fold: function (n, s) {\n          return n();\n        },\n        is: never$1,\n        isSome: never$1,\n        isNone: always$1,\n        getOr: id,\n        getOrThunk: call$$1,\n        getOrDie: function (msg) {\n          throw new Error(msg || 'error: getOrDie called on none.');\n        },\n        getOrNull: nul,\n        getOrUndefined: undef,\n        or: id,\n        orThunk: call$$1,\n        map: none,\n        ap: none,\n        each: noop$$1,\n        bind: none,\n        flatten: none,\n        exists: never$1,\n        forall: always$1,\n        filter: none,\n        equals: eq,\n        equals_: eq,\n        toArray: function () {\n          return [];\n        },\n        toString: constant('none()')\n      };\n      if (Object.freeze) Object.freeze(me);\n      return me;\n    }();\n\n    var some = function (a) {\n      var constant_a = function () {\n        return a;\n      };\n\n      var self = function () {\n        return me;\n      };\n\n      var map = function (f) {\n        return some(f(a));\n      };\n\n      var bind = function (f) {\n        return f(a);\n      };\n\n      var me = {\n        fold: function (n, s) {\n          return s(a);\n        },\n        is: function (v) {\n          return a === v;\n        },\n        isSome: always$1,\n        isNone: never$1,\n        getOr: constant_a,\n        getOrThunk: constant_a,\n        getOrDie: constant_a,\n        getOrNull: constant_a,\n        getOrUndefined: constant_a,\n        or: self,\n        orThunk: self,\n        map: map,\n        ap: function (optfab) {\n          return optfab.fold(none, function (fab) {\n            return some(fab(a));\n          });\n        },\n        each: function (f) {\n          f(a);\n        },\n        bind: bind,\n        flatten: constant_a,\n        exists: bind,\n        forall: bind,\n        filter: function (f) {\n          return f(a) ? me : NONE;\n        },\n        equals: function (o) {\n          return o.is(a);\n        },\n        equals_: function (o, elementEq) {\n          return o.fold(never$1, function (b) {\n            return elementEq(a, b);\n          });\n        },\n        toArray: function () {\n          return [a];\n        },\n        toString: function () {\n          return 'some(' + a + ')';\n        }\n      };\n      return me;\n    };\n\n    var from = function (value) {\n      return value === null || value === undefined ? NONE : some(value);\n    };\n\n    var Option = {\n      some: some,\n      none: none,\n      from: from\n    };\n\n    var typeOf = function (x) {\n      if (x === null) return 'null';\n      var t = typeof x;\n      if (t === 'object' && Array.prototype.isPrototypeOf(x)) return 'array';\n      if (t === 'object' && String.prototype.isPrototypeOf(x)) return 'string';\n      return t;\n    };\n\n    var isType = function (type) {\n      return function (value) {\n        return typeOf(value) === type;\n      };\n    };\n\n    var isString = isType('string');\n    var isArray = isType('array');\n    var isBoolean = isType('boolean');\n    var isFunction = isType('function');\n    var isNumber = isType('number');\n\n    var rawIndexOf = function () {\n      var pIndexOf = Array.prototype.indexOf;\n\n      var fastIndex = function (xs, x) {\n        return pIndexOf.call(xs, x);\n      };\n\n      var slowIndex = function (xs, x) {\n        return slowIndexOf(xs, x);\n      };\n\n      return pIndexOf === undefined ? slowIndex : fastIndex;\n    }();\n\n    var contains = function (xs, x) {\n      return rawIndexOf(xs, x) > -1;\n    };\n\n    var exists = function (xs, pred) {\n      return findIndex(xs, pred).isSome();\n    };\n\n    var map = function (xs, f) {\n      var len = xs.length;\n      var r = new Array(len);\n\n      for (var i = 0; i < len; i++) {\n        var x = xs[i];\n        r[i] = f(x, i, xs);\n      }\n\n      return r;\n    };\n\n    var each = function (xs, f) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        f(x, i, xs);\n      }\n    };\n\n    var eachr = function (xs, f) {\n      for (var i = xs.length - 1; i >= 0; i--) {\n        var x = xs[i];\n        f(x, i, xs);\n      }\n    };\n\n    var filter = function (xs, pred) {\n      var r = [];\n\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n\n        if (pred(x, i, xs)) {\n          r.push(x);\n        }\n      }\n\n      return r;\n    };\n\n    var foldr = function (xs, f, acc) {\n      eachr(xs, function (x) {\n        acc = f(acc, x);\n      });\n      return acc;\n    };\n\n    var foldl = function (xs, f, acc) {\n      each(xs, function (x) {\n        acc = f(acc, x);\n      });\n      return acc;\n    };\n\n    var find = function (xs, pred) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n\n        if (pred(x, i, xs)) {\n          return Option.some(x);\n        }\n      }\n\n      return Option.none();\n    };\n\n    var findIndex = function (xs, pred) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n\n        if (pred(x, i, xs)) {\n          return Option.some(i);\n        }\n      }\n\n      return Option.none();\n    };\n\n    var slowIndexOf = function (xs, x) {\n      for (var i = 0, len = xs.length; i < len; ++i) {\n        if (xs[i] === x) {\n          return i;\n        }\n      }\n\n      return -1;\n    };\n\n    var push = Array.prototype.push;\n\n    var flatten = function (xs) {\n      var r = [];\n\n      for (var i = 0, len = xs.length; i < len; ++i) {\n        if (!Array.prototype.isPrototypeOf(xs[i])) throw new Error('Arr.flatten item ' + i + ' was not an array, input: ' + xs);\n        push.apply(r, xs[i]);\n      }\n\n      return r;\n    };\n\n    var bind = function (xs, f) {\n      var output = map(xs, f);\n      return flatten(output);\n    };\n\n    var forall = function (xs, pred) {\n      for (var i = 0, len = xs.length; i < len; ++i) {\n        var x = xs[i];\n\n        if (pred(x, i, xs) !== true) {\n          return false;\n        }\n      }\n\n      return true;\n    };\n\n    var slice = Array.prototype.slice;\n\n    var reverse = function (xs) {\n      var r = slice.call(xs, 0);\n      r.reverse();\n      return r;\n    };\n\n    var last = function (xs) {\n      return xs.length === 0 ? Option.none() : Option.some(xs[xs.length - 1]);\n    };\n\n    var from$1 = isFunction(Array.from) ? Array.from : function (x) {\n      return slice.call(x);\n    };\n    var keys = Object.keys;\n\n    var each$1 = function (obj, f) {\n      var props = keys(obj);\n\n      for (var k = 0, len = props.length; k < len; k++) {\n        var i = props[k];\n        var x = obj[i];\n        f(x, i, obj);\n      }\n    };\n\n    var map$1 = function (obj, f) {\n      return tupleMap(obj, function (x, i, obj) {\n        return {\n          k: i,\n          v: f(x, i, obj)\n        };\n      });\n    };\n\n    var tupleMap = function (obj, f) {\n      var r = {};\n      each$1(obj, function (x, i) {\n        var tuple = f(x, i, obj);\n        r[tuple.k] = tuple.v;\n      });\n      return r;\n    };\n\n    var Immutable = function () {\n      var fields = [];\n\n      for (var _i = 0; _i < arguments.length; _i++) {\n        fields[_i] = arguments[_i];\n      }\n\n      return function () {\n        var values = [];\n\n        for (var _i = 0; _i < arguments.length; _i++) {\n          values[_i] = arguments[_i];\n        }\n\n        if (fields.length !== values.length) {\n          throw new Error('Wrong number of arguments to struct. Expected \"[' + fields.length + ']\", got ' + values.length + ' arguments');\n        }\n\n        var struct = {};\n        each(fields, function (name, i) {\n          struct[name] = constant(values[i]);\n        });\n        return struct;\n      };\n    };\n\n    var sort$1 = function (arr) {\n      return arr.slice(0).sort();\n    };\n\n    var reqMessage = function (required, keys) {\n      throw new Error('All required keys (' + sort$1(required).join(', ') + ') were not specified. Specified keys were: ' + sort$1(keys).join(', ') + '.');\n    };\n\n    var unsuppMessage = function (unsupported) {\n      throw new Error('Unsupported keys for object: ' + sort$1(unsupported).join(', '));\n    };\n\n    var validateStrArr = function (label, array) {\n      if (!isArray(array)) throw new Error('The ' + label + ' fields must be an array. Was: ' + array + '.');\n      each(array, function (a) {\n        if (!isString(a)) throw new Error('The value ' + a + ' in the ' + label + ' fields was not a string.');\n      });\n    };\n\n    var invalidTypeMessage = function (incorrect, type) {\n      throw new Error('All values need to be of type: ' + type + '. Keys (' + sort$1(incorrect).join(', ') + ') were not.');\n    };\n\n    var checkDupes = function (everything) {\n      var sorted = sort$1(everything);\n      var dupe = find(sorted, function (s, i) {\n        return i < sorted.length - 1 && s === sorted[i + 1];\n      });\n      dupe.each(function (d) {\n        throw new Error('The field: ' + d + ' occurs more than once in the combined fields: [' + sorted.join(', ') + '].');\n      });\n    };\n\n    var MixedBag = function (required, optional) {\n      var everything = required.concat(optional);\n      if (everything.length === 0) throw new Error('You must specify at least one required or optional field.');\n      validateStrArr('required', required);\n      validateStrArr('optional', optional);\n      checkDupes(everything);\n      return function (obj) {\n        var keys$$1 = keys(obj);\n        var allReqd = forall(required, function (req) {\n          return contains(keys$$1, req);\n        });\n        if (!allReqd) reqMessage(required, keys$$1);\n        var unsupported = filter(keys$$1, function (key) {\n          return !contains(everything, key);\n        });\n        if (unsupported.length > 0) unsuppMessage(unsupported);\n        var r = {};\n        each(required, function (req) {\n          r[req] = constant(obj[req]);\n        });\n        each(optional, function (opt) {\n          r[opt] = constant(Object.prototype.hasOwnProperty.call(obj, opt) ? Option.some(obj[opt]) : Option.none());\n        });\n        return r;\n      };\n    };\n\n    var dimensions = Immutable('width', 'height');\n    var grid = Immutable('rows', 'columns');\n    var address = Immutable('row', 'column');\n    var coords = Immutable('x', 'y');\n    var detail = Immutable('element', 'rowspan', 'colspan');\n    var detailnew = Immutable('element', 'rowspan', 'colspan', 'isNew');\n    var extended = Immutable('element', 'rowspan', 'colspan', 'row', 'column');\n    var rowdata = Immutable('element', 'cells', 'section');\n    var elementnew = Immutable('element', 'isNew');\n    var rowdatanew = Immutable('element', 'cells', 'section', 'isNew');\n    var rowcells = Immutable('cells', 'section');\n    var rowdetails = Immutable('details', 'section');\n    var bounds = Immutable('startRow', 'startCol', 'finishRow', 'finishCol');\n    var $_csuubelcjnlpb2sv = {\n      dimensions: dimensions,\n      grid: grid,\n      address: address,\n      coords: coords,\n      extended: extended,\n      detail: detail,\n      detailnew: detailnew,\n      rowdata: rowdata,\n      elementnew: elementnew,\n      rowdatanew: rowdatanew,\n      rowcells: rowcells,\n      rowdetails: rowdetails,\n      bounds: bounds\n    };\n\n    var fromHtml = function (html, scope) {\n      var doc = scope || document;\n      var div = doc.createElement('div');\n      div.innerHTML = html;\n\n      if (!div.hasChildNodes() || div.childNodes.length > 1) {\n        console.error('HTML does not have a single root node', html);\n        throw 'HTML must have a single root node';\n      }\n\n      return fromDom(div.childNodes[0]);\n    };\n\n    var fromTag = function (tag, scope) {\n      var doc = scope || document;\n      var node = doc.createElement(tag);\n      return fromDom(node);\n    };\n\n    var fromText = function (text, scope) {\n      var doc = scope || document;\n      var node = doc.createTextNode(text);\n      return fromDom(node);\n    };\n\n    var fromDom = function (node) {\n      if (node === null || node === undefined) throw new Error('Node cannot be null or undefined');\n      return {\n        dom: constant(node)\n      };\n    };\n\n    var fromPoint = function (docElm, x, y) {\n      var doc = docElm.dom();\n      return Option.from(doc.elementFromPoint(x, y)).map(fromDom);\n    };\n\n    var Element$$1 = {\n      fromHtml: fromHtml,\n      fromTag: fromTag,\n      fromText: fromText,\n      fromDom: fromDom,\n      fromPoint: fromPoint\n    };\n    var $_1skeq9lijnlpb2un = {\n      ATTRIBUTE: Node.ATTRIBUTE_NODE,\n      CDATA_SECTION: Node.CDATA_SECTION_NODE,\n      COMMENT: Node.COMMENT_NODE,\n      DOCUMENT: Node.DOCUMENT_NODE,\n      DOCUMENT_TYPE: Node.DOCUMENT_TYPE_NODE,\n      DOCUMENT_FRAGMENT: Node.DOCUMENT_FRAGMENT_NODE,\n      ELEMENT: Node.ELEMENT_NODE,\n      TEXT: Node.TEXT_NODE,\n      PROCESSING_INSTRUCTION: Node.PROCESSING_INSTRUCTION_NODE,\n      ENTITY_REFERENCE: Node.ENTITY_REFERENCE_NODE,\n      ENTITY: Node.ENTITY_NODE,\n      NOTATION: Node.NOTATION_NODE\n    };\n    var ELEMENT = $_1skeq9lijnlpb2un.ELEMENT;\n    var DOCUMENT = $_1skeq9lijnlpb2un.DOCUMENT;\n\n    var is = function (element, selector) {\n      var elem = element.dom();\n      if (elem.nodeType !== ELEMENT) return false;else if (elem.matches !== undefined) return elem.matches(selector);else if (elem.msMatchesSelector !== undefined) return elem.msMatchesSelector(selector);else if (elem.webkitMatchesSelector !== undefined) return elem.webkitMatchesSelector(selector);else if (elem.mozMatchesSelector !== undefined) return elem.mozMatchesSelector(selector);else throw new Error('Browser lacks native selectors');\n    };\n\n    var bypassSelector = function (dom) {\n      return dom.nodeType !== ELEMENT && dom.nodeType !== DOCUMENT || dom.childElementCount === 0;\n    };\n\n    var all = function (selector, scope) {\n      var base = scope === undefined ? document : scope.dom();\n      return bypassSelector(base) ? [] : map(base.querySelectorAll(selector), Element$$1.fromDom);\n    };\n\n    var one = function (selector, scope) {\n      var base = scope === undefined ? document : scope.dom();\n      return bypassSelector(base) ? Option.none() : Option.from(base.querySelector(selector)).map(Element$$1.fromDom);\n    };\n\n    var $_1mxomdlfjnlpb2tz = {\n      all: all,\n      is: is,\n      one: one\n    };\n\n    var toArray = function (target, f) {\n      var r = [];\n\n      var recurse = function (e) {\n        r.push(e);\n        return f(e);\n      };\n\n      var cur = f(target);\n\n      do {\n        cur = cur.bind(recurse);\n      } while (cur.isSome());\n\n      return r;\n    };\n\n    var $_84ox1wlkjnlpb2v9 = {\n      toArray: toArray\n    };\n    var Global = typeof window !== 'undefined' ? window : Function('return this;')();\n\n    var path = function (parts, scope) {\n      var o = scope !== undefined && scope !== null ? scope : Global;\n\n      for (var i = 0; i < parts.length && o !== undefined && o !== null; ++i) o = o[parts[i]];\n\n      return o;\n    };\n\n    var resolve = function (p, scope) {\n      var parts = p.split('.');\n      return path(parts, scope);\n    };\n\n    var unsafe = function (name, scope) {\n      return resolve(name, scope);\n    };\n\n    var getOrDie = function (name, scope) {\n      var actual = unsafe(name, scope);\n      if (actual === undefined || actual === null) throw name + ' not available on this browser';\n      return actual;\n    };\n\n    var $_7rb9h8lnjnlpb2vl = {\n      getOrDie: getOrDie\n    };\n\n    var node = function () {\n      var f = $_7rb9h8lnjnlpb2vl.getOrDie('Node');\n      return f;\n    };\n\n    var compareDocumentPosition = function (a, b, match) {\n      return (a.compareDocumentPosition(b) & match) !== 0;\n    };\n\n    var documentPositionPreceding = function (a, b) {\n      return compareDocumentPosition(a, b, node().DOCUMENT_POSITION_PRECEDING);\n    };\n\n    var documentPositionContainedBy = function (a, b) {\n      return compareDocumentPosition(a, b, node().DOCUMENT_POSITION_CONTAINED_BY);\n    };\n\n    var $_5xoldwlmjnlpb2vk = {\n      documentPositionPreceding: documentPositionPreceding,\n      documentPositionContainedBy: documentPositionContainedBy\n    };\n\n    var cached = function (f) {\n      var called = false;\n      var r;\n      return function () {\n        var args = [];\n\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n\n        if (!called) {\n          called = true;\n          r = f.apply(null, args);\n        }\n\n        return r;\n      };\n    };\n\n    var firstMatch = function (regexes, s) {\n      for (var i = 0; i < regexes.length; i++) {\n        var x = regexes[i];\n        if (x.test(s)) return x;\n      }\n\n      return undefined;\n    };\n\n    var find$2 = function (regexes, agent) {\n      var r = firstMatch(regexes, agent);\n      if (!r) return {\n        major: 0,\n        minor: 0\n      };\n\n      var group = function (i) {\n        return Number(agent.replace(r, '$' + i));\n      };\n\n      return nu(group(1), group(2));\n    };\n\n    var detect = function (versionRegexes, agent) {\n      var cleanedAgent = String(agent).toLowerCase();\n      if (versionRegexes.length === 0) return unknown();\n      return find$2(versionRegexes, cleanedAgent);\n    };\n\n    var unknown = function () {\n      return nu(0, 0);\n    };\n\n    var nu = function (major, minor) {\n      return {\n        major: major,\n        minor: minor\n      };\n    };\n\n    var Version = {\n      nu: nu,\n      detect: detect,\n      unknown: unknown\n    };\n    var edge = 'Edge';\n    var chrome = 'Chrome';\n    var ie = 'IE';\n    var opera = 'Opera';\n    var firefox = 'Firefox';\n    var safari = 'Safari';\n\n    var isBrowser = function (name, current) {\n      return function () {\n        return current === name;\n      };\n    };\n\n    var unknown$1 = function () {\n      return nu$1({\n        current: undefined,\n        version: Version.unknown()\n      });\n    };\n\n    var nu$1 = function (info) {\n      var current = info.current;\n      var version = info.version;\n      return {\n        current: current,\n        version: version,\n        isEdge: isBrowser(edge, current),\n        isChrome: isBrowser(chrome, current),\n        isIE: isBrowser(ie, current),\n        isOpera: isBrowser(opera, current),\n        isFirefox: isBrowser(firefox, current),\n        isSafari: isBrowser(safari, current)\n      };\n    };\n\n    var Browser = {\n      unknown: unknown$1,\n      nu: nu$1,\n      edge: constant(edge),\n      chrome: constant(chrome),\n      ie: constant(ie),\n      opera: constant(opera),\n      firefox: constant(firefox),\n      safari: constant(safari)\n    };\n    var windows = 'Windows';\n    var ios = 'iOS';\n    var android = 'Android';\n    var linux = 'Linux';\n    var osx = 'OSX';\n    var solaris = 'Solaris';\n    var freebsd = 'FreeBSD';\n\n    var isOS = function (name, current) {\n      return function () {\n        return current === name;\n      };\n    };\n\n    var unknown$2 = function () {\n      return nu$2({\n        current: undefined,\n        version: Version.unknown()\n      });\n    };\n\n    var nu$2 = function (info) {\n      var current = info.current;\n      var version = info.version;\n      return {\n        current: current,\n        version: version,\n        isWindows: isOS(windows, current),\n        isiOS: isOS(ios, current),\n        isAndroid: isOS(android, current),\n        isOSX: isOS(osx, current),\n        isLinux: isOS(linux, current),\n        isSolaris: isOS(solaris, current),\n        isFreeBSD: isOS(freebsd, current)\n      };\n    };\n\n    var OperatingSystem = {\n      unknown: unknown$2,\n      nu: nu$2,\n      windows: constant(windows),\n      ios: constant(ios),\n      android: constant(android),\n      linux: constant(linux),\n      osx: constant(osx),\n      solaris: constant(solaris),\n      freebsd: constant(freebsd)\n    };\n\n    var DeviceType = function (os, browser, userAgent) {\n      var isiPad = os.isiOS() && /ipad/i.test(userAgent) === true;\n      var isiPhone = os.isiOS() && !isiPad;\n      var isAndroid3 = os.isAndroid() && os.version.major === 3;\n      var isAndroid4 = os.isAndroid() && os.version.major === 4;\n      var isTablet = isiPad || isAndroid3 || isAndroid4 && /mobile/i.test(userAgent) === true;\n      var isTouch = os.isiOS() || os.isAndroid();\n      var isPhone = isTouch && !isTablet;\n      var iOSwebview = browser.isSafari() && os.isiOS() && /safari/i.test(userAgent) === false;\n      return {\n        isiPad: constant(isiPad),\n        isiPhone: constant(isiPhone),\n        isTablet: constant(isTablet),\n        isPhone: constant(isPhone),\n        isTouch: constant(isTouch),\n        isAndroid: os.isAndroid,\n        isiOS: os.isiOS,\n        isWebView: constant(iOSwebview)\n      };\n    };\n\n    var detect$1 = function (candidates, userAgent) {\n      var agent = String(userAgent).toLowerCase();\n      return find(candidates, function (candidate) {\n        return candidate.search(agent);\n      });\n    };\n\n    var detectBrowser = function (browsers, userAgent) {\n      return detect$1(browsers, userAgent).map(function (browser) {\n        var version = Version.detect(browser.versionRegexes, userAgent);\n        return {\n          current: browser.name,\n          version: version\n        };\n      });\n    };\n\n    var detectOs = function (oses, userAgent) {\n      return detect$1(oses, userAgent).map(function (os) {\n        var version = Version.detect(os.versionRegexes, userAgent);\n        return {\n          current: os.name,\n          version: version\n        };\n      });\n    };\n\n    var UaString = {\n      detectBrowser: detectBrowser,\n      detectOs: detectOs\n    };\n\n    var checkRange = function (str, substr, start) {\n      if (substr === '') return true;\n      if (str.length < substr.length) return false;\n      var x = str.substr(start, start + substr.length);\n      return x === substr;\n    };\n\n    var contains$1 = function (str, substr) {\n      return str.indexOf(substr) !== -1;\n    };\n\n    var endsWith = function (str, suffix) {\n      return checkRange(str, suffix, str.length - suffix.length);\n    };\n\n    var trim = function (str) {\n      return str.replace(/^\\s+|\\s+$/g, '');\n    };\n\n    var normalVersionRegex = /.*?version\\/\\ ?([0-9]+)\\.([0-9]+).*/;\n\n    var checkContains = function (target) {\n      return function (uastring) {\n        return contains$1(uastring, target);\n      };\n    };\n\n    var browsers = [{\n      name: 'Edge',\n      versionRegexes: [/.*?edge\\/ ?([0-9]+)\\.([0-9]+)$/],\n      search: function (uastring) {\n        var monstrosity = contains$1(uastring, 'edge/') && contains$1(uastring, 'chrome') && contains$1(uastring, 'safari') && contains$1(uastring, 'applewebkit');\n        return monstrosity;\n      }\n    }, {\n      name: 'Chrome',\n      versionRegexes: [/.*?chrome\\/([0-9]+)\\.([0-9]+).*/, normalVersionRegex],\n      search: function (uastring) {\n        return contains$1(uastring, 'chrome') && !contains$1(uastring, 'chromeframe');\n      }\n    }, {\n      name: 'IE',\n      versionRegexes: [/.*?msie\\ ?([0-9]+)\\.([0-9]+).*/, /.*?rv:([0-9]+)\\.([0-9]+).*/],\n      search: function (uastring) {\n        return contains$1(uastring, 'msie') || contains$1(uastring, 'trident');\n      }\n    }, {\n      name: 'Opera',\n      versionRegexes: [normalVersionRegex, /.*?opera\\/([0-9]+)\\.([0-9]+).*/],\n      search: checkContains('opera')\n    }, {\n      name: 'Firefox',\n      versionRegexes: [/.*?firefox\\/\\ ?([0-9]+)\\.([0-9]+).*/],\n      search: checkContains('firefox')\n    }, {\n      name: 'Safari',\n      versionRegexes: [normalVersionRegex, /.*?cpu os ([0-9]+)_([0-9]+).*/],\n      search: function (uastring) {\n        return (contains$1(uastring, 'safari') || contains$1(uastring, 'mobile/')) && contains$1(uastring, 'applewebkit');\n      }\n    }];\n    var oses = [{\n      name: 'Windows',\n      search: checkContains('win'),\n      versionRegexes: [/.*?windows\\ nt\\ ?([0-9]+)\\.([0-9]+).*/]\n    }, {\n      name: 'iOS',\n      search: function (uastring) {\n        return contains$1(uastring, 'iphone') || contains$1(uastring, 'ipad');\n      },\n      versionRegexes: [/.*?version\\/\\ ?([0-9]+)\\.([0-9]+).*/, /.*cpu os ([0-9]+)_([0-9]+).*/, /.*cpu iphone os ([0-9]+)_([0-9]+).*/]\n    }, {\n      name: 'Android',\n      search: checkContains('android'),\n      versionRegexes: [/.*?android\\ ?([0-9]+)\\.([0-9]+).*/]\n    }, {\n      name: 'OSX',\n      search: checkContains('os x'),\n      versionRegexes: [/.*?os\\ x\\ ?([0-9]+)_([0-9]+).*/]\n    }, {\n      name: 'Linux',\n      search: checkContains('linux'),\n      versionRegexes: []\n    }, {\n      name: 'Solaris',\n      search: checkContains('sunos'),\n      versionRegexes: []\n    }, {\n      name: 'FreeBSD',\n      search: checkContains('freebsd'),\n      versionRegexes: []\n    }];\n    var PlatformInfo = {\n      browsers: constant(browsers),\n      oses: constant(oses)\n    };\n\n    var detect$2 = function (userAgent) {\n      var browsers = PlatformInfo.browsers();\n      var oses = PlatformInfo.oses();\n      var browser = UaString.detectBrowser(browsers, userAgent).fold(Browser.unknown, Browser.nu);\n      var os = UaString.detectOs(oses, userAgent).fold(OperatingSystem.unknown, OperatingSystem.nu);\n      var deviceType = DeviceType(os, browser, userAgent);\n      return {\n        browser: browser,\n        os: os,\n        deviceType: deviceType\n      };\n    };\n\n    var PlatformDetection = {\n      detect: detect$2\n    };\n    var detect$3 = cached(function () {\n      var userAgent = navigator.userAgent;\n      return PlatformDetection.detect(userAgent);\n    });\n    var $_4aebialqjnlpb2vq = {\n      detect: detect$3\n    };\n\n    var eq = function (e1, e2) {\n      return e1.dom() === e2.dom();\n    };\n\n    var isEqualNode = function (e1, e2) {\n      return e1.dom().isEqualNode(e2.dom());\n    };\n\n    var member = function (element, elements) {\n      return exists(elements, curry(eq, element));\n    };\n\n    var regularContains = function (e1, e2) {\n      var d1 = e1.dom(),\n          d2 = e2.dom();\n      return d1 === d2 ? false : d1.contains(d2);\n    };\n\n    var ieContains = function (e1, e2) {\n      return $_5xoldwlmjnlpb2vk.documentPositionContainedBy(e1.dom(), e2.dom());\n    };\n\n    var browser = $_4aebialqjnlpb2vq.detect().browser;\n    var contains$2 = browser.isIE() ? ieContains : regularContains;\n    var $_3k22killjnlpb2vb = {\n      eq: eq,\n      isEqualNode: isEqualNode,\n      member: member,\n      contains: contains$2,\n      is: $_1mxomdlfjnlpb2tz.is\n    };\n\n    var owner = function (element) {\n      return Element$$1.fromDom(element.dom().ownerDocument);\n    };\n\n    var documentElement = function (element) {\n      return Element$$1.fromDom(element.dom().ownerDocument.documentElement);\n    };\n\n    var defaultView = function (element) {\n      var el = element.dom();\n      var defaultView = el.ownerDocument.defaultView;\n      return Element$$1.fromDom(defaultView);\n    };\n\n    var parent = function (element) {\n      var dom = element.dom();\n      return Option.from(dom.parentNode).map(Element$$1.fromDom);\n    };\n\n    var findIndex$1 = function (element) {\n      return parent(element).bind(function (p) {\n        var kin = children(p);\n        return findIndex(kin, function (elem) {\n          return $_3k22killjnlpb2vb.eq(element, elem);\n        });\n      });\n    };\n\n    var parents = function (element, isRoot) {\n      var stop = isFunction(isRoot) ? isRoot : constant(false);\n      var dom = element.dom();\n      var ret = [];\n\n      while (dom.parentNode !== null && dom.parentNode !== undefined) {\n        var rawParent = dom.parentNode;\n        var parent = Element$$1.fromDom(rawParent);\n        ret.push(parent);\n        if (stop(parent) === true) break;else dom = rawParent;\n      }\n\n      return ret;\n    };\n\n    var siblings = function (element) {\n      var filterSelf = function (elements) {\n        return filter(elements, function (x) {\n          return !$_3k22killjnlpb2vb.eq(element, x);\n        });\n      };\n\n      return parent(element).map(children).map(filterSelf).getOr([]);\n    };\n\n    var offsetParent = function (element) {\n      var dom = element.dom();\n      return Option.from(dom.offsetParent).map(Element$$1.fromDom);\n    };\n\n    var prevSibling = function (element) {\n      var dom = element.dom();\n      return Option.from(dom.previousSibling).map(Element$$1.fromDom);\n    };\n\n    var nextSibling = function (element) {\n      var dom = element.dom();\n      return Option.from(dom.nextSibling).map(Element$$1.fromDom);\n    };\n\n    var prevSiblings = function (element) {\n      return reverse($_84ox1wlkjnlpb2v9.toArray(element, prevSibling));\n    };\n\n    var nextSiblings = function (element) {\n      return $_84ox1wlkjnlpb2v9.toArray(element, nextSibling);\n    };\n\n    var children = function (element) {\n      var dom = element.dom();\n      return map(dom.childNodes, Element$$1.fromDom);\n    };\n\n    var child = function (element, index) {\n      var children = element.dom().childNodes;\n      return Option.from(children[index]).map(Element$$1.fromDom);\n    };\n\n    var firstChild = function (element) {\n      return child(element, 0);\n    };\n\n    var lastChild = function (element) {\n      return child(element, element.dom().childNodes.length - 1);\n    };\n\n    var childNodesCount = function (element) {\n      return element.dom().childNodes.length;\n    };\n\n    var hasChildNodes = function (element) {\n      return element.dom().hasChildNodes();\n    };\n\n    var spot = Immutable('element', 'offset');\n\n    var leaf = function (element, offset) {\n      var cs = children(element);\n      return cs.length > 0 && offset < cs.length ? spot(cs[offset], 0) : spot(element, offset);\n    };\n\n    var $_2pl1nljjnlpb2ur = {\n      owner: owner,\n      defaultView: defaultView,\n      documentElement: documentElement,\n      parent: parent,\n      findIndex: findIndex$1,\n      parents: parents,\n      siblings: siblings,\n      prevSibling: prevSibling,\n      offsetParent: offsetParent,\n      prevSiblings: prevSiblings,\n      nextSibling: nextSibling,\n      nextSiblings: nextSiblings,\n      children: children,\n      child: child,\n      firstChild: firstChild,\n      lastChild: lastChild,\n      childNodesCount: childNodesCount,\n      hasChildNodes: hasChildNodes,\n      leaf: leaf\n    };\n\n    var firstLayer = function (scope, selector) {\n      return filterFirstLayer(scope, selector, constant(true));\n    };\n\n    var filterFirstLayer = function (scope, selector, predicate) {\n      return bind($_2pl1nljjnlpb2ur.children(scope), function (x) {\n        return $_1mxomdlfjnlpb2tz.is(x, selector) ? predicate(x) ? [x] : [] : filterFirstLayer(x, selector, predicate);\n      });\n    };\n\n    var $_1s67solejnlpb2tp = {\n      firstLayer: firstLayer,\n      filterFirstLayer: filterFirstLayer\n    };\n\n    var name = function (element) {\n      var r = element.dom().nodeName;\n      return r.toLowerCase();\n    };\n\n    var type = function (element) {\n      return element.dom().nodeType;\n    };\n\n    var value = function (element) {\n      return element.dom().nodeValue;\n    };\n\n    var isType$1 = function (t) {\n      return function (element) {\n        return type(element) === t;\n      };\n    };\n\n    var isComment = function (element) {\n      return type(element) === $_1skeq9lijnlpb2un.COMMENT || name(element) === '#comment';\n    };\n\n    var isElement = isType$1($_1skeq9lijnlpb2un.ELEMENT);\n    var isText = isType$1($_1skeq9lijnlpb2un.TEXT);\n    var isDocument = isType$1($_1skeq9lijnlpb2un.DOCUMENT);\n    var $_erx5tem3jnlpb2x3 = {\n      name: name,\n      type: type,\n      value: value,\n      isElement: isElement,\n      isText: isText,\n      isDocument: isDocument,\n      isComment: isComment\n    };\n\n    var rawSet = function (dom, key, value) {\n      if (isString(value) || isBoolean(value) || isNumber(value)) {\n        dom.setAttribute(key, value + '');\n      } else {\n        console.error('Invalid call to Attr.set. Key ', key, ':: Value ', value, ':: Element ', dom);\n        throw new Error('Attribute value was not simple');\n      }\n    };\n\n    var set = function (element, key, value) {\n      rawSet(element.dom(), key, value);\n    };\n\n    var setAll = function (element, attrs) {\n      var dom = element.dom();\n      each$1(attrs, function (v, k) {\n        rawSet(dom, k, v);\n      });\n    };\n\n    var get$1 = function (element, key) {\n      var v = element.dom().getAttribute(key);\n      return v === null ? undefined : v;\n    };\n\n    var has$1 = function (element, key) {\n      var dom = element.dom();\n      return dom && dom.hasAttribute ? dom.hasAttribute(key) : false;\n    };\n\n    var remove = function (element, key) {\n      element.dom().removeAttribute(key);\n    };\n\n    var hasNone = function (element) {\n      var attrs = element.dom().attributes;\n      return attrs === undefined || attrs === null || attrs.length === 0;\n    };\n\n    var clone = function (element) {\n      return foldl(element.dom().attributes, function (acc, attr) {\n        acc[attr.name] = attr.value;\n        return acc;\n      }, {});\n    };\n\n    var transferOne = function (source, destination, attr) {\n      if (has$1(source, attr) && !has$1(destination, attr)) set(destination, attr, get$1(source, attr));\n    };\n\n    var transfer = function (source, destination, attrs) {\n      if (!$_erx5tem3jnlpb2x3.isElement(source) || !$_erx5tem3jnlpb2x3.isElement(destination)) return;\n      each(attrs, function (attr) {\n        transferOne(source, destination, attr);\n      });\n    };\n\n    var $_9u6utvm2jnlpb2wv = {\n      clone: clone,\n      set: set,\n      setAll: setAll,\n      get: get$1,\n      has: has$1,\n      remove: remove,\n      hasNone: hasNone,\n      transfer: transfer\n    };\n\n    var inBody = function (element) {\n      var dom = $_erx5tem3jnlpb2x3.isText(element) ? element.dom().parentNode : element.dom();\n      return dom !== undefined && dom !== null && dom.ownerDocument.body.contains(dom);\n    };\n\n    var body = cached(function () {\n      return getBody(Element$$1.fromDom(document));\n    });\n\n    var getBody = function (doc) {\n      var body = doc.dom().body;\n      if (body === null || body === undefined) throw 'Body is not available yet';\n      return Element$$1.fromDom(body);\n    };\n\n    var $_1ie4uvm6jnlpb2xf = {\n      body: body,\n      getBody: getBody,\n      inBody: inBody\n    };\n\n    var all$1 = function (predicate) {\n      return descendants($_1ie4uvm6jnlpb2xf.body(), predicate);\n    };\n\n    var ancestors = function (scope, predicate, isRoot) {\n      return filter($_2pl1nljjnlpb2ur.parents(scope, isRoot), predicate);\n    };\n\n    var siblings$1 = function (scope, predicate) {\n      return filter($_2pl1nljjnlpb2ur.siblings(scope), predicate);\n    };\n\n    var children$1 = function (scope, predicate) {\n      return filter($_2pl1nljjnlpb2ur.children(scope), predicate);\n    };\n\n    var descendants = function (scope, predicate) {\n      var result = [];\n      each($_2pl1nljjnlpb2ur.children(scope), function (x) {\n        if (predicate(x)) {\n          result = result.concat([x]);\n        }\n\n        result = result.concat(descendants(x, predicate));\n      });\n      return result;\n    };\n\n    var $_cyfw12m5jnlpb2x7 = {\n      all: all$1,\n      ancestors: ancestors,\n      siblings: siblings$1,\n      children: children$1,\n      descendants: descendants\n    };\n\n    var all$2 = function (selector) {\n      return $_1mxomdlfjnlpb2tz.all(selector);\n    };\n\n    var ancestors$1 = function (scope, selector, isRoot) {\n      return $_cyfw12m5jnlpb2x7.ancestors(scope, function (e) {\n        return $_1mxomdlfjnlpb2tz.is(e, selector);\n      }, isRoot);\n    };\n\n    var siblings$2 = function (scope, selector) {\n      return $_cyfw12m5jnlpb2x7.siblings(scope, function (e) {\n        return $_1mxomdlfjnlpb2tz.is(e, selector);\n      });\n    };\n\n    var children$2 = function (scope, selector) {\n      return $_cyfw12m5jnlpb2x7.children(scope, function (e) {\n        return $_1mxomdlfjnlpb2tz.is(e, selector);\n      });\n    };\n\n    var descendants$1 = function (scope, selector) {\n      return $_1mxomdlfjnlpb2tz.all(selector, scope);\n    };\n\n    var $_97aehqm4jnlpb2x5 = {\n      all: all$2,\n      ancestors: ancestors$1,\n      siblings: siblings$2,\n      children: children$2,\n      descendants: descendants$1\n    };\n\n    function ClosestOrAncestor(is, ancestor, scope, a, isRoot) {\n      return is(scope, a) ? Option.some(scope) : isFunction(isRoot) && isRoot(scope) ? Option.none() : ancestor(scope, a, isRoot);\n    }\n\n    var first$1 = function (predicate) {\n      return descendant($_1ie4uvm6jnlpb2xf.body(), predicate);\n    };\n\n    var ancestor = function (scope, predicate, isRoot) {\n      var element = scope.dom();\n      var stop = isFunction(isRoot) ? isRoot : constant(false);\n\n      while (element.parentNode) {\n        element = element.parentNode;\n        var el = Element$$1.fromDom(element);\n        if (predicate(el)) return Option.some(el);else if (stop(el)) break;\n      }\n\n      return Option.none();\n    };\n\n    var closest = function (scope, predicate, isRoot) {\n      var is = function (scope) {\n        return predicate(scope);\n      };\n\n      return ClosestOrAncestor(is, ancestor, scope, predicate, isRoot);\n    };\n\n    var sibling = function (scope, predicate) {\n      var element = scope.dom();\n      if (!element.parentNode) return Option.none();\n      return child$1(Element$$1.fromDom(element.parentNode), function (x) {\n        return !$_3k22killjnlpb2vb.eq(scope, x) && predicate(x);\n      });\n    };\n\n    var child$1 = function (scope, predicate) {\n      var result = find(scope.dom().childNodes, compose(predicate, Element$$1.fromDom));\n      return result.map(Element$$1.fromDom);\n    };\n\n    var descendant = function (scope, predicate) {\n      var descend = function (node) {\n        for (var i = 0; i < node.childNodes.length; i++) {\n          if (predicate(Element$$1.fromDom(node.childNodes[i]))) return Option.some(Element$$1.fromDom(node.childNodes[i]));\n          var res = descend(node.childNodes[i]);\n          if (res.isSome()) return res;\n        }\n\n        return Option.none();\n      };\n\n      return descend(scope.dom());\n    };\n\n    var $_1nfdlmm8jnlpb2xl = {\n      first: first$1,\n      ancestor: ancestor,\n      closest: closest,\n      sibling: sibling,\n      child: child$1,\n      descendant: descendant\n    };\n\n    var first$2 = function (selector) {\n      return $_1mxomdlfjnlpb2tz.one(selector);\n    };\n\n    var ancestor$1 = function (scope, selector, isRoot) {\n      return $_1nfdlmm8jnlpb2xl.ancestor(scope, function (e) {\n        return $_1mxomdlfjnlpb2tz.is(e, selector);\n      }, isRoot);\n    };\n\n    var sibling$1 = function (scope, selector) {\n      return $_1nfdlmm8jnlpb2xl.sibling(scope, function (e) {\n        return $_1mxomdlfjnlpb2tz.is(e, selector);\n      });\n    };\n\n    var child$2 = function (scope, selector) {\n      return $_1nfdlmm8jnlpb2xl.child(scope, function (e) {\n        return $_1mxomdlfjnlpb2tz.is(e, selector);\n      });\n    };\n\n    var descendant$1 = function (scope, selector) {\n      return $_1mxomdlfjnlpb2tz.one(selector, scope);\n    };\n\n    var closest$1 = function (scope, selector, isRoot) {\n      return ClosestOrAncestor($_1mxomdlfjnlpb2tz.is, ancestor$1, scope, selector, isRoot);\n    };\n\n    var $_gdszrpm7jnlpb2xk = {\n      first: first$2,\n      ancestor: ancestor$1,\n      sibling: sibling$1,\n      child: child$2,\n      descendant: descendant$1,\n      closest: closest$1\n    };\n\n    var lookup = function (tags, element, _isRoot) {\n      var isRoot = _isRoot !== undefined ? _isRoot : constant(false);\n      if (isRoot(element)) return Option.none();\n      if (contains(tags, $_erx5tem3jnlpb2x3.name(element))) return Option.some(element);\n\n      var isRootOrUpperTable = function (element) {\n        return $_1mxomdlfjnlpb2tz.is(element, 'table') || isRoot(element);\n      };\n\n      return $_gdszrpm7jnlpb2xk.ancestor(element, tags.join(','), isRootOrUpperTable);\n    };\n\n    var cell = function (element, isRoot) {\n      return lookup(['td', 'th'], element, isRoot);\n    };\n\n    var cells = function (ancestor) {\n      return $_1s67solejnlpb2tp.firstLayer(ancestor, 'th,td');\n    };\n\n    var notCell = function (element, isRoot) {\n      return lookup(['caption', 'tr', 'tbody', 'tfoot', 'thead'], element, isRoot);\n    };\n\n    var neighbours = function (selector, element) {\n      return $_2pl1nljjnlpb2ur.parent(element).map(function (parent) {\n        return $_97aehqm4jnlpb2x5.children(parent, selector);\n      });\n    };\n\n    var neighbourCells = curry(neighbours, 'th,td');\n    var neighbourRows = curry(neighbours, 'tr');\n\n    var firstCell = function (ancestor) {\n      return $_gdszrpm7jnlpb2xk.descendant(ancestor, 'th,td');\n    };\n\n    var table = function (element, isRoot) {\n      return $_gdszrpm7jnlpb2xk.closest(element, 'table', isRoot);\n    };\n\n    var row = function (element, isRoot) {\n      return lookup(['tr'], element, isRoot);\n    };\n\n    var rows = function (ancestor) {\n      return $_1s67solejnlpb2tp.firstLayer(ancestor, 'tr');\n    };\n\n    var attr = function (element, property) {\n      return parseInt($_9u6utvm2jnlpb2wv.get(element, property), 10);\n    };\n\n    var grid$1 = function (element, rowProp, colProp) {\n      var rows = attr(element, rowProp);\n      var cols = attr(element, colProp);\n      return $_csuubelcjnlpb2sv.grid(rows, cols);\n    };\n\n    var $_em4z2mldjnlpb2sz = {\n      cell: cell,\n      firstCell: firstCell,\n      cells: cells,\n      neighbourCells: neighbourCells,\n      table: table,\n      row: row,\n      rows: rows,\n      notCell: notCell,\n      neighbourRows: neighbourRows,\n      attr: attr,\n      grid: grid$1\n    };\n\n    var fromTable = function (table) {\n      var rows = $_em4z2mldjnlpb2sz.rows(table);\n      return map(rows, function (row) {\n        var element = row;\n        var parent = $_2pl1nljjnlpb2ur.parent(element);\n        var parentSection = parent.map(function (parent) {\n          var parentName = $_erx5tem3jnlpb2x3.name(parent);\n          return parentName === 'tfoot' || parentName === 'thead' || parentName === 'tbody' ? parentName : 'tbody';\n        }).getOr('tbody');\n        var cells = map($_em4z2mldjnlpb2sz.cells(row), function (cell) {\n          var rowspan = $_9u6utvm2jnlpb2wv.has(cell, 'rowspan') ? parseInt($_9u6utvm2jnlpb2wv.get(cell, 'rowspan'), 10) : 1;\n          var colspan = $_9u6utvm2jnlpb2wv.has(cell, 'colspan') ? parseInt($_9u6utvm2jnlpb2wv.get(cell, 'colspan'), 10) : 1;\n          return $_csuubelcjnlpb2sv.detail(cell, rowspan, colspan);\n        });\n        return $_csuubelcjnlpb2sv.rowdata(element, cells, parentSection);\n      });\n    };\n\n    var fromPastedRows = function (rows, example) {\n      return map(rows, function (row) {\n        var cells = map($_em4z2mldjnlpb2sz.cells(row), function (cell) {\n          var rowspan = $_9u6utvm2jnlpb2wv.has(cell, 'rowspan') ? parseInt($_9u6utvm2jnlpb2wv.get(cell, 'rowspan'), 10) : 1;\n          var colspan = $_9u6utvm2jnlpb2wv.has(cell, 'colspan') ? parseInt($_9u6utvm2jnlpb2wv.get(cell, 'colspan'), 10) : 1;\n          return $_csuubelcjnlpb2sv.detail(cell, rowspan, colspan);\n        });\n        return $_csuubelcjnlpb2sv.rowdata(row, cells, example.section());\n      });\n    };\n\n    var $_g8jea2lbjnlpb2sm = {\n      fromTable: fromTable,\n      fromPastedRows: fromPastedRows\n    };\n\n    var key = function (row, column) {\n      return row + ',' + column;\n    };\n\n    var getAt = function (warehouse, row, column) {\n      var raw = warehouse.access()[key(row, column)];\n      return raw !== undefined ? Option.some(raw) : Option.none();\n    };\n\n    var findItem = function (warehouse, item, comparator) {\n      var filtered = filterItems(warehouse, function (detail) {\n        return comparator(item, detail.element());\n      });\n      return filtered.length > 0 ? Option.some(filtered[0]) : Option.none();\n    };\n\n    var filterItems = function (warehouse, predicate) {\n      var all = bind(warehouse.all(), function (r) {\n        return r.cells();\n      });\n      return filter(all, predicate);\n    };\n\n    var generate = function (list) {\n      var access = {};\n      var cells = [];\n      var maxRows = list.length;\n      var maxColumns = 0;\n      each(list, function (details, r) {\n        var currentRow = [];\n        each(details.cells(), function (detail, c) {\n          var start = 0;\n\n          while (access[key(r, start)] !== undefined) {\n            start++;\n          }\n\n          var current = $_csuubelcjnlpb2sv.extended(detail.element(), detail.rowspan(), detail.colspan(), r, start);\n\n          for (var i = 0; i < detail.colspan(); i++) {\n            for (var j = 0; j < detail.rowspan(); j++) {\n              var cr = r + j;\n              var cc = start + i;\n              var newpos = key(cr, cc);\n              access[newpos] = current;\n              maxColumns = Math.max(maxColumns, cc + 1);\n            }\n          }\n\n          currentRow.push(current);\n        });\n        cells.push($_csuubelcjnlpb2sv.rowdata(details.element(), currentRow, details.section()));\n      });\n      var grid = $_csuubelcjnlpb2sv.grid(maxRows, maxColumns);\n      return {\n        grid: constant(grid),\n        access: constant(access),\n        all: constant(cells)\n      };\n    };\n\n    var justCells = function (warehouse) {\n      var rows = map(warehouse.all(), function (w) {\n        return w.cells();\n      });\n      return flatten(rows);\n    };\n\n    var $_ein1yumajnlpb2y1 = {\n      generate: generate,\n      getAt: getAt,\n      findItem: findItem,\n      filterItems: filterItems,\n      justCells: justCells\n    };\n\n    var isSupported = function (dom) {\n      return dom.style !== undefined;\n    };\n\n    var $_4sfuxamcjnlpb2yn = {\n      isSupported: isSupported\n    };\n\n    var internalSet = function (dom, property, value) {\n      if (!isString(value)) {\n        console.error('Invalid call to CSS.set. Property ', property, ':: Value ', value, ':: Element ', dom);\n        throw new Error('CSS value must be a string: ' + value);\n      }\n\n      if ($_4sfuxamcjnlpb2yn.isSupported(dom)) dom.style.setProperty(property, value);\n    };\n\n    var internalRemove = function (dom, property) {\n      if ($_4sfuxamcjnlpb2yn.isSupported(dom)) dom.style.removeProperty(property);\n    };\n\n    var set$1 = function (element, property, value) {\n      var dom = element.dom();\n      internalSet(dom, property, value);\n    };\n\n    var setAll$1 = function (element, css) {\n      var dom = element.dom();\n      each$1(css, function (v, k) {\n        internalSet(dom, k, v);\n      });\n    };\n\n    var setOptions = function (element, css) {\n      var dom = element.dom();\n      each$1(css, function (v, k) {\n        v.fold(function () {\n          internalRemove(dom, k);\n        }, function (value) {\n          internalSet(dom, k, value);\n        });\n      });\n    };\n\n    var get$2 = function (element, property) {\n      var dom = element.dom();\n      var styles = window.getComputedStyle(dom);\n      var r = styles.getPropertyValue(property);\n      var v = r === '' && !$_1ie4uvm6jnlpb2xf.inBody(element) ? getUnsafeProperty(dom, property) : r;\n      return v === null ? undefined : v;\n    };\n\n    var getUnsafeProperty = function (dom, property) {\n      return $_4sfuxamcjnlpb2yn.isSupported(dom) ? dom.style.getPropertyValue(property) : '';\n    };\n\n    var getRaw = function (element, property) {\n      var dom = element.dom();\n      var raw = getUnsafeProperty(dom, property);\n      return Option.from(raw).filter(function (r) {\n        return r.length > 0;\n      });\n    };\n\n    var getAllRaw = function (element) {\n      var css = {};\n      var dom = element.dom();\n\n      if ($_4sfuxamcjnlpb2yn.isSupported(dom)) {\n        for (var i = 0; i < dom.style.length; i++) {\n          var ruleName = dom.style.item(i);\n          css[ruleName] = dom.style[ruleName];\n        }\n      }\n\n      return css;\n    };\n\n    var isValidValue = function (tag, property, value) {\n      var element = Element$$1.fromTag(tag);\n      set$1(element, property, value);\n      var style = getRaw(element, property);\n      return style.isSome();\n    };\n\n    var remove$1 = function (element, property) {\n      var dom = element.dom();\n      internalRemove(dom, property);\n\n      if ($_9u6utvm2jnlpb2wv.has(element, 'style') && trim($_9u6utvm2jnlpb2wv.get(element, 'style')) === '') {\n        $_9u6utvm2jnlpb2wv.remove(element, 'style');\n      }\n    };\n\n    var preserve = function (element, f) {\n      var oldStyles = $_9u6utvm2jnlpb2wv.get(element, 'style');\n      var result = f(element);\n      var restore = oldStyles === undefined ? $_9u6utvm2jnlpb2wv.remove : $_9u6utvm2jnlpb2wv.set;\n      restore(element, 'style', oldStyles);\n      return result;\n    };\n\n    var copy = function (source, target) {\n      var sourceDom = source.dom();\n      var targetDom = target.dom();\n\n      if ($_4sfuxamcjnlpb2yn.isSupported(sourceDom) && $_4sfuxamcjnlpb2yn.isSupported(targetDom)) {\n        targetDom.style.cssText = sourceDom.style.cssText;\n      }\n    };\n\n    var reflow = function (e) {\n      return e.dom().offsetWidth;\n    };\n\n    var transferOne$1 = function (source, destination, style) {\n      getRaw(source, style).each(function (value) {\n        if (getRaw(destination, style).isNone()) set$1(destination, style, value);\n      });\n    };\n\n    var transfer$1 = function (source, destination, styles) {\n      if (!$_erx5tem3jnlpb2x3.isElement(source) || !$_erx5tem3jnlpb2x3.isElement(destination)) return;\n      each(styles, function (style) {\n        transferOne$1(source, destination, style);\n      });\n    };\n\n    var $_g8mvdembjnlpb2ya = {\n      copy: copy,\n      set: set$1,\n      preserve: preserve,\n      setAll: setAll$1,\n      setOptions: setOptions,\n      remove: remove$1,\n      get: get$2,\n      getRaw: getRaw,\n      getAllRaw: getAllRaw,\n      isValidValue: isValidValue,\n      reflow: reflow,\n      transfer: transfer$1\n    };\n\n    var before = function (marker, element) {\n      var parent = $_2pl1nljjnlpb2ur.parent(marker);\n      parent.each(function (v) {\n        v.dom().insertBefore(element.dom(), marker.dom());\n      });\n    };\n\n    var after = function (marker, element) {\n      var sibling = $_2pl1nljjnlpb2ur.nextSibling(marker);\n      sibling.fold(function () {\n        var parent = $_2pl1nljjnlpb2ur.parent(marker);\n        parent.each(function (v) {\n          append(v, element);\n        });\n      }, function (v) {\n        before(v, element);\n      });\n    };\n\n    var prepend = function (parent, element) {\n      var firstChild = $_2pl1nljjnlpb2ur.firstChild(parent);\n      firstChild.fold(function () {\n        append(parent, element);\n      }, function (v) {\n        parent.dom().insertBefore(element.dom(), v.dom());\n      });\n    };\n\n    var append = function (parent, element) {\n      parent.dom().appendChild(element.dom());\n    };\n\n    var appendAt = function (parent, element, index) {\n      $_2pl1nljjnlpb2ur.child(parent, index).fold(function () {\n        append(parent, element);\n      }, function (v) {\n        before(v, element);\n      });\n    };\n\n    var wrap = function (element, wrapper) {\n      before(element, wrapper);\n      append(wrapper, element);\n    };\n\n    var $_5hzj77mdjnlpb2yp = {\n      before: before,\n      after: after,\n      prepend: prepend,\n      append: append,\n      appendAt: appendAt,\n      wrap: wrap\n    };\n\n    var before$1 = function (marker, elements) {\n      each(elements, function (x) {\n        $_5hzj77mdjnlpb2yp.before(marker, x);\n      });\n    };\n\n    var after$1 = function (marker, elements) {\n      each(elements, function (x, i) {\n        var e = i === 0 ? marker : elements[i - 1];\n        $_5hzj77mdjnlpb2yp.after(e, x);\n      });\n    };\n\n    var prepend$1 = function (parent, elements) {\n      each(elements.slice().reverse(), function (x) {\n        $_5hzj77mdjnlpb2yp.prepend(parent, x);\n      });\n    };\n\n    var append$1 = function (parent, elements) {\n      each(elements, function (x) {\n        $_5hzj77mdjnlpb2yp.append(parent, x);\n      });\n    };\n\n    var $_a9wtnkmfjnlpb2yu = {\n      before: before$1,\n      after: after$1,\n      prepend: prepend$1,\n      append: append$1\n    };\n\n    var empty = function (element) {\n      element.dom().textContent = '';\n      each($_2pl1nljjnlpb2ur.children(element), function (rogue) {\n        remove$2(rogue);\n      });\n    };\n\n    var remove$2 = function (element) {\n      var dom = element.dom();\n      if (dom.parentNode !== null) dom.parentNode.removeChild(dom);\n    };\n\n    var unwrap = function (wrapper) {\n      var children = $_2pl1nljjnlpb2ur.children(wrapper);\n      if (children.length > 0) $_a9wtnkmfjnlpb2yu.before(wrapper, children);\n      remove$2(wrapper);\n    };\n\n    var $_cybn8qmejnlpb2yr = {\n      empty: empty,\n      remove: remove$2,\n      unwrap: unwrap\n    };\n    var stats = Immutable('minRow', 'minCol', 'maxRow', 'maxCol');\n\n    var findSelectedStats = function (house, isSelected) {\n      var totalColumns = house.grid().columns();\n      var totalRows = house.grid().rows();\n      var minRow = totalRows;\n      var minCol = totalColumns;\n      var maxRow = 0;\n      var maxCol = 0;\n      each$1(house.access(), function (detail) {\n        if (isSelected(detail)) {\n          var startRow = detail.row();\n          var endRow = startRow + detail.rowspan() - 1;\n          var startCol = detail.column();\n          var endCol = startCol + detail.colspan() - 1;\n          if (startRow < minRow) minRow = startRow;else if (endRow > maxRow) maxRow = endRow;\n          if (startCol < minCol) minCol = startCol;else if (endCol > maxCol) maxCol = endCol;\n        }\n      });\n      return stats(minRow, minCol, maxRow, maxCol);\n    };\n\n    var makeCell = function (list, seenSelected, rowIndex) {\n      var row = list[rowIndex].element();\n      var td = Element$$1.fromTag('td');\n      $_5hzj77mdjnlpb2yp.append(td, Element$$1.fromTag('br'));\n      var f = seenSelected ? $_5hzj77mdjnlpb2yp.append : $_5hzj77mdjnlpb2yp.prepend;\n      f(row, td);\n    };\n\n    var fillInGaps = function (list, house, stats, isSelected) {\n      var totalColumns = house.grid().columns();\n      var totalRows = house.grid().rows();\n\n      for (var i = 0; i < totalRows; i++) {\n        var seenSelected = false;\n\n        for (var j = 0; j < totalColumns; j++) {\n          if (!(i < stats.minRow() || i > stats.maxRow() || j < stats.minCol() || j > stats.maxCol())) {\n            var needCell = $_ein1yumajnlpb2y1.getAt(house, i, j).filter(isSelected).isNone();\n            if (needCell) makeCell(list, seenSelected, i);else seenSelected = true;\n          }\n        }\n      }\n    };\n\n    var clean = function (table, stats) {\n      var emptyRows = filter($_1s67solejnlpb2tp.firstLayer(table, 'tr'), function (row) {\n        return row.dom().childElementCount === 0;\n      });\n      each(emptyRows, $_cybn8qmejnlpb2yr.remove);\n\n      if (stats.minCol() === stats.maxCol() || stats.minRow() === stats.maxRow()) {\n        each($_1s67solejnlpb2tp.firstLayer(table, 'th,td'), function (cell) {\n          $_9u6utvm2jnlpb2wv.remove(cell, 'rowspan');\n          $_9u6utvm2jnlpb2wv.remove(cell, 'colspan');\n        });\n      }\n\n      $_9u6utvm2jnlpb2wv.remove(table, 'width');\n      $_9u6utvm2jnlpb2wv.remove(table, 'height');\n      $_g8mvdembjnlpb2ya.remove(table, 'width');\n      $_g8mvdembjnlpb2ya.remove(table, 'height');\n    };\n\n    var extract = function (table, selectedSelector) {\n      var isSelected = function (detail) {\n        return $_1mxomdlfjnlpb2tz.is(detail.element(), selectedSelector);\n      };\n\n      var list = $_g8jea2lbjnlpb2sm.fromTable(table);\n      var house = $_ein1yumajnlpb2y1.generate(list);\n      var stats = findSelectedStats(house, isSelected);\n      var selector = 'th:not(' + selectedSelector + ')' + ',td:not(' + selectedSelector + ')';\n      var unselectedCells = $_1s67solejnlpb2tp.filterFirstLayer(table, 'th,td', function (cell) {\n        return $_1mxomdlfjnlpb2tz.is(cell, selector);\n      });\n      each(unselectedCells, $_cybn8qmejnlpb2yr.remove);\n      fillInGaps(list, house, stats, isSelected);\n      clean(table, stats);\n      return table;\n    };\n\n    var $_df0ycyl5jnlpb2rr = {\n      extract: extract\n    };\n\n    var clone$1 = function (original, deep) {\n      return Element$$1.fromDom(original.dom().cloneNode(deep));\n    };\n\n    var shallow = function (original) {\n      return clone$1(original, false);\n    };\n\n    var deep = function (original) {\n      return clone$1(original, true);\n    };\n\n    var shallowAs = function (original, tag) {\n      var nu = Element$$1.fromTag(tag);\n      var attributes = $_9u6utvm2jnlpb2wv.clone(original);\n      $_9u6utvm2jnlpb2wv.setAll(nu, attributes);\n      return nu;\n    };\n\n    var copy$1 = function (original, tag) {\n      var nu = shallowAs(original, tag);\n      var cloneChildren = $_2pl1nljjnlpb2ur.children(deep(original));\n      $_a9wtnkmfjnlpb2yu.append(nu, cloneChildren);\n      return nu;\n    };\n\n    var mutate = function (original, tag) {\n      var nu = shallowAs(original, tag);\n      $_5hzj77mdjnlpb2yp.before(original, nu);\n      var children = $_2pl1nljjnlpb2ur.children(original);\n      $_a9wtnkmfjnlpb2yu.append(nu, children);\n      $_cybn8qmejnlpb2yr.remove(original);\n      return nu;\n    };\n\n    var $_7sdoc4mhjnlpb2zt = {\n      shallow: shallow,\n      shallowAs: shallowAs,\n      deep: deep,\n      copy: copy$1,\n      mutate: mutate\n    };\n\n    function NodeValue(is, name) {\n      var get = function (element) {\n        if (!is(element)) throw new Error('Can only get ' + name + ' value of a ' + name + ' node');\n        return getOption(element).getOr('');\n      };\n\n      var getOptionIE10 = function (element) {\n        try {\n          return getOptionSafe(element);\n        } catch (e) {\n          return Option.none();\n        }\n      };\n\n      var getOptionSafe = function (element) {\n        return is(element) ? Option.from(element.dom().nodeValue) : Option.none();\n      };\n\n      var browser = $_4aebialqjnlpb2vq.detect().browser;\n      var getOption = browser.isIE() && browser.version.major === 10 ? getOptionIE10 : getOptionSafe;\n\n      var set = function (element, value) {\n        if (!is(element)) throw new Error('Can only set raw ' + name + ' value of a ' + name + ' node');\n        element.dom().nodeValue = value;\n      };\n\n      return {\n        get: get,\n        getOption: getOption,\n        set: set\n      };\n    }\n\n    var api = NodeValue($_erx5tem3jnlpb2x3.isText, 'text');\n\n    var get$3 = function (element) {\n      return api.get(element);\n    };\n\n    var getOption = function (element) {\n      return api.getOption(element);\n    };\n\n    var set$2 = function (element, value) {\n      api.set(element, value);\n    };\n\n    var $_3lolvomkjnlpb304 = {\n      get: get$3,\n      getOption: getOption,\n      set: set$2\n    };\n\n    var getEnd = function (element) {\n      return $_erx5tem3jnlpb2x3.name(element) === 'img' ? 1 : $_3lolvomkjnlpb304.getOption(element).fold(function () {\n        return $_2pl1nljjnlpb2ur.children(element).length;\n      }, function (v) {\n        return v.length;\n      });\n    };\n\n    var isEnd = function (element, offset) {\n      return getEnd(element) === offset;\n    };\n\n    var isStart = function (element, offset) {\n      return offset === 0;\n    };\n\n    var NBSP = '\\xA0';\n\n    var isTextNodeWithCursorPosition = function (el) {\n      return $_3lolvomkjnlpb304.getOption(el).filter(function (text) {\n        return text.trim().length !== 0 || text.indexOf(NBSP) > -1;\n      }).isSome();\n    };\n\n    var elementsWithCursorPosition = ['img', 'br'];\n\n    var isCursorPosition = function (elem) {\n      var hasCursorPosition = isTextNodeWithCursorPosition(elem);\n      return hasCursorPosition || contains(elementsWithCursorPosition, $_erx5tem3jnlpb2x3.name(elem));\n    };\n\n    var $_bqkyudmjjnlpb300 = {\n      getEnd: getEnd,\n      isEnd: isEnd,\n      isStart: isStart,\n      isCursorPosition: isCursorPosition\n    };\n\n    var first$3 = function (element) {\n      return $_1nfdlmm8jnlpb2xl.descendant(element, $_bqkyudmjjnlpb300.isCursorPosition);\n    };\n\n    var last$2 = function (element) {\n      return descendantRtl(element, $_bqkyudmjjnlpb300.isCursorPosition);\n    };\n\n    var descendantRtl = function (scope, predicate) {\n      var descend = function (element) {\n        var children = $_2pl1nljjnlpb2ur.children(element);\n\n        for (var i = children.length - 1; i >= 0; i--) {\n          var child = children[i];\n          if (predicate(child)) return Option.some(child);\n          var res = descend(child);\n          if (res.isSome()) return res;\n        }\n\n        return Option.none();\n      };\n\n      return descend(scope);\n    };\n\n    var $_7srx6vmijnlpb2zw = {\n      first: first$3,\n      last: last$2\n    };\n\n    var cell$1 = function () {\n      var td = Element$$1.fromTag('td');\n      $_5hzj77mdjnlpb2yp.append(td, Element$$1.fromTag('br'));\n      return td;\n    };\n\n    var replace = function (cell, tag, attrs) {\n      var replica = $_7sdoc4mhjnlpb2zt.copy(cell, tag);\n      each$1(attrs, function (v, k) {\n        if (v === null) $_9u6utvm2jnlpb2wv.remove(replica, k);else $_9u6utvm2jnlpb2wv.set(replica, k, v);\n      });\n      return replica;\n    };\n\n    var pasteReplace = function (cellContent) {\n      return cellContent;\n    };\n\n    var newRow = function (doc) {\n      return function () {\n        return Element$$1.fromTag('tr', doc.dom());\n      };\n    };\n\n    var cloneFormats = function (oldCell, newCell, formats) {\n      var first = $_7srx6vmijnlpb2zw.first(oldCell);\n      return first.map(function (firstText) {\n        var formatSelector = formats.join(',');\n        var parents = $_97aehqm4jnlpb2x5.ancestors(firstText, formatSelector, function (element) {\n          return $_3k22killjnlpb2vb.eq(element, oldCell);\n        });\n        return foldr(parents, function (last$$1, parent) {\n          var clonedFormat = $_7sdoc4mhjnlpb2zt.shallow(parent);\n          $_9u6utvm2jnlpb2wv.remove(clonedFormat, 'contenteditable');\n          $_5hzj77mdjnlpb2yp.append(last$$1, clonedFormat);\n          return clonedFormat;\n        }, newCell);\n      }).getOr(newCell);\n    };\n\n    var cellOperations = function (mutate, doc, formatsToClone) {\n      var newCell = function (prev) {\n        var doc = $_2pl1nljjnlpb2ur.owner(prev.element());\n        var td = Element$$1.fromTag($_erx5tem3jnlpb2x3.name(prev.element()), doc.dom());\n        var formats = formatsToClone.getOr(['strong', 'em', 'b', 'i', 'span', 'font', 'h1', 'h2', 'h3', 'h4', 'h5', 'h6', 'p', 'div']);\n        var lastNode = formats.length > 0 ? cloneFormats(prev.element(), td, formats) : td;\n        $_5hzj77mdjnlpb2yp.append(lastNode, Element$$1.fromTag('br'));\n        $_g8mvdembjnlpb2ya.copy(prev.element(), td);\n        $_g8mvdembjnlpb2ya.remove(td, 'height');\n        if (prev.colspan() !== 1) $_g8mvdembjnlpb2ya.remove(prev.element(), 'width');\n        mutate(prev.element(), td);\n        return td;\n      };\n\n      return {\n        row: newRow(doc),\n        cell: newCell,\n        replace: replace,\n        gap: cell$1\n      };\n    };\n\n    var paste = function (doc) {\n      return {\n        row: newRow(doc),\n        cell: cell$1,\n        replace: pasteReplace,\n        gap: cell$1\n      };\n    };\n\n    var $_f80632mgjnlpb2z3 = {\n      cellOperations: cellOperations,\n      paste: paste\n    };\n\n    var fromHtml$1 = function (html, scope) {\n      var doc = scope || document;\n      var div = doc.createElement('div');\n      div.innerHTML = html;\n      return $_2pl1nljjnlpb2ur.children(Element$$1.fromDom(div));\n    };\n\n    var fromTags = function (tags, scope) {\n      return map(tags, function (x) {\n        return Element$$1.fromTag(x, scope);\n      });\n    };\n\n    var fromText$1 = function (texts, scope) {\n      return map(texts, function (x) {\n        return Element$$1.fromText(x, scope);\n      });\n    };\n\n    var fromDom$1 = function (nodes) {\n      return map(nodes, Element$$1.fromDom);\n    };\n\n    var $_1ebm76mmjnlpb30a = {\n      fromHtml: fromHtml$1,\n      fromTags: fromTags,\n      fromText: fromText$1,\n      fromDom: fromDom$1\n    };\n    var TagBoundaries = ['body', 'p', 'div', 'article', 'aside', 'figcaption', 'figure', 'footer', 'header', 'nav', 'section', 'ol', 'ul', 'li', 'table', 'thead', 'tbody', 'tfoot', 'caption', 'tr', 'td', 'th', 'h1', 'h2', 'h3', 'h4', 'h5', 'h6', 'blockquote', 'pre', 'address'];\n\n    function DomUniverse() {\n      var clone = function (element) {\n        return Element$$1.fromDom(element.dom().cloneNode(false));\n      };\n\n      var isBoundary = function (element) {\n        if (!$_erx5tem3jnlpb2x3.isElement(element)) return false;\n        if ($_erx5tem3jnlpb2x3.name(element) === 'body') return true;\n        return contains(TagBoundaries, $_erx5tem3jnlpb2x3.name(element));\n      };\n\n      var isEmptyTag = function (element) {\n        if (!$_erx5tem3jnlpb2x3.isElement(element)) return false;\n        return contains(['br', 'img', 'hr', 'input'], $_erx5tem3jnlpb2x3.name(element));\n      };\n\n      var comparePosition = function (element, other) {\n        return element.dom().compareDocumentPosition(other.dom());\n      };\n\n      var copyAttributesTo = function (source, destination) {\n        var as = $_9u6utvm2jnlpb2wv.clone(source);\n        $_9u6utvm2jnlpb2wv.setAll(destination, as);\n      };\n\n      return {\n        up: constant({\n          selector: $_gdszrpm7jnlpb2xk.ancestor,\n          closest: $_gdszrpm7jnlpb2xk.closest,\n          predicate: $_1nfdlmm8jnlpb2xl.ancestor,\n          all: $_2pl1nljjnlpb2ur.parents\n        }),\n        down: constant({\n          selector: $_97aehqm4jnlpb2x5.descendants,\n          predicate: $_cyfw12m5jnlpb2x7.descendants\n        }),\n        styles: constant({\n          get: $_g8mvdembjnlpb2ya.get,\n          getRaw: $_g8mvdembjnlpb2ya.getRaw,\n          set: $_g8mvdembjnlpb2ya.set,\n          remove: $_g8mvdembjnlpb2ya.remove\n        }),\n        attrs: constant({\n          get: $_9u6utvm2jnlpb2wv.get,\n          set: $_9u6utvm2jnlpb2wv.set,\n          remove: $_9u6utvm2jnlpb2wv.remove,\n          copyTo: copyAttributesTo\n        }),\n        insert: constant({\n          before: $_5hzj77mdjnlpb2yp.before,\n          after: $_5hzj77mdjnlpb2yp.after,\n          afterAll: $_a9wtnkmfjnlpb2yu.after,\n          append: $_5hzj77mdjnlpb2yp.append,\n          appendAll: $_a9wtnkmfjnlpb2yu.append,\n          prepend: $_5hzj77mdjnlpb2yp.prepend,\n          wrap: $_5hzj77mdjnlpb2yp.wrap\n        }),\n        remove: constant({\n          unwrap: $_cybn8qmejnlpb2yr.unwrap,\n          remove: $_cybn8qmejnlpb2yr.remove\n        }),\n        create: constant({\n          nu: Element$$1.fromTag,\n          clone: clone,\n          text: Element$$1.fromText\n        }),\n        query: constant({\n          comparePosition: comparePosition,\n          prevSibling: $_2pl1nljjnlpb2ur.prevSibling,\n          nextSibling: $_2pl1nljjnlpb2ur.nextSibling\n        }),\n        property: constant({\n          children: $_2pl1nljjnlpb2ur.children,\n          name: $_erx5tem3jnlpb2x3.name,\n          parent: $_2pl1nljjnlpb2ur.parent,\n          isText: $_erx5tem3jnlpb2x3.isText,\n          isComment: $_erx5tem3jnlpb2x3.isComment,\n          isElement: $_erx5tem3jnlpb2x3.isElement,\n          getText: $_3lolvomkjnlpb304.get,\n          setText: $_3lolvomkjnlpb304.set,\n          isBoundary: isBoundary,\n          isEmptyTag: isEmptyTag\n        }),\n        eq: $_3k22killjnlpb2vb.eq,\n        is: $_3k22killjnlpb2vb.is\n      };\n    }\n\n    var leftRight = Immutable('left', 'right');\n\n    var bisect = function (universe, parent, child) {\n      var children = universe.property().children(parent);\n      var index = findIndex(children, curry(universe.eq, child));\n      return index.map(function (ind) {\n        return {\n          before: constant(children.slice(0, ind)),\n          after: constant(children.slice(ind + 1))\n        };\n      });\n    };\n\n    var breakToRight = function (universe, parent, child) {\n      return bisect(universe, parent, child).map(function (parts) {\n        var second = universe.create().clone(parent);\n        universe.insert().appendAll(second, parts.after());\n        universe.insert().after(parent, second);\n        return leftRight(parent, second);\n      });\n    };\n\n    var breakToLeft = function (universe, parent, child) {\n      return bisect(universe, parent, child).map(function (parts) {\n        var prior = universe.create().clone(parent);\n        universe.insert().appendAll(prior, parts.before().concat([child]));\n        universe.insert().appendAll(parent, parts.after());\n        universe.insert().before(parent, prior);\n        return leftRight(prior, parent);\n      });\n    };\n\n    var breakPath = function (universe, item, isTop, breaker) {\n      var result = Immutable('first', 'second', 'splits');\n\n      var next = function (child, group, splits) {\n        var fallback = result(child, Option.none(), splits);\n        if (isTop(child)) return result(child, group, splits);else {\n          return universe.property().parent(child).bind(function (parent) {\n            return breaker(universe, parent, child).map(function (breakage) {\n              var extra = [{\n                first: breakage.left,\n                second: breakage.right\n              }];\n              var nextChild = isTop(parent) ? parent : breakage.left();\n              return next(nextChild, Option.some(breakage.right()), splits.concat(extra));\n            }).getOr(fallback);\n          });\n        }\n      };\n\n      return next(item, Option.none(), []);\n    };\n\n    var $_3oyp2cmvjnlpb336 = {\n      breakToLeft: breakToLeft,\n      breakToRight: breakToRight,\n      breakPath: breakPath\n    };\n\n    var all$3 = function (universe, look, elements, f) {\n      var head$$1 = elements[0];\n      var tail = elements.slice(1);\n      return f(universe, look, head$$1, tail);\n    };\n\n    var oneAll = function (universe, look, elements) {\n      return elements.length > 0 ? all$3(universe, look, elements, unsafeOne) : Option.none();\n    };\n\n    var unsafeOne = function (universe, look, head$$1, tail) {\n      var start = look(universe, head$$1);\n      return foldr(tail, function (b, a) {\n        var current = look(universe, a);\n        return commonElement(universe, b, current);\n      }, start);\n    };\n\n    var commonElement = function (universe, start, end) {\n      return start.bind(function (s) {\n        return end.filter(curry(universe.eq, s));\n      });\n    };\n\n    var $_bt5ke0mwjnlpb33g = {\n      oneAll: oneAll\n    };\n\n    var eq$1 = function (universe, item) {\n      return curry(universe.eq, item);\n    };\n\n    var unsafeSubset = function (universe, common, ps1, ps2) {\n      var children = universe.property().children(common);\n      if (universe.eq(common, ps1[0])) return Option.some([ps1[0]]);\n      if (universe.eq(common, ps2[0])) return Option.some([ps2[0]]);\n\n      var finder = function (ps) {\n        var topDown = reverse(ps);\n        var index = findIndex(topDown, eq$1(universe, common)).getOr(-1);\n        var item = index < topDown.length - 1 ? topDown[index + 1] : topDown[index];\n        return findIndex(children, eq$1(universe, item));\n      };\n\n      var startIndex = finder(ps1);\n      var endIndex = finder(ps2);\n      return startIndex.bind(function (sIndex) {\n        return endIndex.map(function (eIndex) {\n          var first = Math.min(sIndex, eIndex);\n          var last$$1 = Math.max(sIndex, eIndex);\n          return children.slice(first, last$$1 + 1);\n        });\n      });\n    };\n\n    var ancestors$2 = function (universe, start, end, _isRoot) {\n      var isRoot = _isRoot !== undefined ? _isRoot : constant(false);\n      var ps1 = [start].concat(universe.up().all(start));\n      var ps2 = [end].concat(universe.up().all(end));\n\n      var prune = function (path) {\n        var index = findIndex(path, isRoot);\n        return index.fold(function () {\n          return path;\n        }, function (ind) {\n          return path.slice(0, ind + 1);\n        });\n      };\n\n      var pruned1 = prune(ps1);\n      var pruned2 = prune(ps2);\n      var shared = find(pruned1, function (x) {\n        return exists(pruned2, eq$1(universe, x));\n      });\n      return {\n        firstpath: constant(pruned1),\n        secondpath: constant(pruned2),\n        shared: constant(shared)\n      };\n    };\n\n    var subset = function (universe, start, end) {\n      var ancs = ancestors$2(universe, start, end);\n      return ancs.shared().bind(function (shared) {\n        return unsafeSubset(universe, shared, ancs.firstpath(), ancs.secondpath());\n      });\n    };\n\n    var $_4j9fa0mxjnlpb33t = {\n      subset: subset,\n      ancestors: ancestors$2\n    };\n\n    var sharedOne = function (universe, look, elements) {\n      return $_bt5ke0mwjnlpb33g.oneAll(universe, look, elements);\n    };\n\n    var subset$1 = function (universe, start, finish) {\n      return $_4j9fa0mxjnlpb33t.subset(universe, start, finish);\n    };\n\n    var ancestors$3 = function (universe, start, finish, _isRoot) {\n      return $_4j9fa0mxjnlpb33t.ancestors(universe, start, finish, _isRoot);\n    };\n\n    var breakToLeft$1 = function (universe, parent, child) {\n      return $_3oyp2cmvjnlpb336.breakToLeft(universe, parent, child);\n    };\n\n    var breakToRight$1 = function (universe, parent, child) {\n      return $_3oyp2cmvjnlpb336.breakToRight(universe, parent, child);\n    };\n\n    var breakPath$1 = function (universe, child, isTop, breaker) {\n      return $_3oyp2cmvjnlpb336.breakPath(universe, child, isTop, breaker);\n    };\n\n    var $_2t6rjjmujnlpb335 = {\n      sharedOne: sharedOne,\n      subset: subset$1,\n      ancestors: ancestors$3,\n      breakToLeft: breakToLeft$1,\n      breakToRight: breakToRight$1,\n      breakPath: breakPath$1\n    };\n    var universe = DomUniverse();\n\n    var sharedOne$1 = function (look, elements) {\n      return $_2t6rjjmujnlpb335.sharedOne(universe, function (universe, element) {\n        return look(element);\n      }, elements);\n    };\n\n    var subset$2 = function (start, finish) {\n      return $_2t6rjjmujnlpb335.subset(universe, start, finish);\n    };\n\n    var ancestors$4 = function (start, finish, _isRoot) {\n      return $_2t6rjjmujnlpb335.ancestors(universe, start, finish, _isRoot);\n    };\n\n    var breakToLeft$2 = function (parent, child) {\n      return $_2t6rjjmujnlpb335.breakToLeft(universe, parent, child);\n    };\n\n    var breakToRight$2 = function (parent, child) {\n      return $_2t6rjjmujnlpb335.breakToRight(universe, parent, child);\n    };\n\n    var breakPath$2 = function (child, isTop, breaker) {\n      return $_2t6rjjmujnlpb335.breakPath(universe, child, isTop, function (u, p, c) {\n        return breaker(p, c);\n      });\n    };\n\n    var $_5iw3l3mrjnlpb31x = {\n      sharedOne: sharedOne$1,\n      subset: subset$2,\n      ancestors: ancestors$4,\n      breakToLeft: breakToLeft$2,\n      breakToRight: breakToRight$2,\n      breakPath: breakPath$2\n    };\n\n    var inSelection = function (bounds, detail) {\n      var leftEdge = detail.column();\n      var rightEdge = detail.column() + detail.colspan() - 1;\n      var topEdge = detail.row();\n      var bottomEdge = detail.row() + detail.rowspan() - 1;\n      return leftEdge <= bounds.finishCol() && rightEdge >= bounds.startCol() && topEdge <= bounds.finishRow() && bottomEdge >= bounds.startRow();\n    };\n\n    var isWithin = function (bounds, detail) {\n      return detail.column() >= bounds.startCol() && detail.column() + detail.colspan() - 1 <= bounds.finishCol() && detail.row() >= bounds.startRow() && detail.row() + detail.rowspan() - 1 <= bounds.finishRow();\n    };\n\n    var isRectangular = function (warehouse, bounds) {\n      var isRect = true;\n      var detailIsWithin = curry(isWithin, bounds);\n\n      for (var i = bounds.startRow(); i <= bounds.finishRow(); i++) {\n        for (var j = bounds.startCol(); j <= bounds.finishCol(); j++) {\n          isRect = isRect && $_ein1yumajnlpb2y1.getAt(warehouse, i, j).exists(detailIsWithin);\n        }\n      }\n\n      return isRect ? Option.some(bounds) : Option.none();\n    };\n\n    var $_6v1gttn0jnlpb34e = {\n      inSelection: inSelection,\n      isWithin: isWithin,\n      isRectangular: isRectangular\n    };\n\n    var getBounds = function (detailA, detailB) {\n      return $_csuubelcjnlpb2sv.bounds(Math.min(detailA.row(), detailB.row()), Math.min(detailA.column(), detailB.column()), Math.max(detailA.row() + detailA.rowspan() - 1, detailB.row() + detailB.rowspan() - 1), Math.max(detailA.column() + detailA.colspan() - 1, detailB.column() + detailB.colspan() - 1));\n    };\n\n    var getAnyBox = function (warehouse, startCell, finishCell) {\n      var startCoords = $_ein1yumajnlpb2y1.findItem(warehouse, startCell, $_3k22killjnlpb2vb.eq);\n      var finishCoords = $_ein1yumajnlpb2y1.findItem(warehouse, finishCell, $_3k22killjnlpb2vb.eq);\n      return startCoords.bind(function (sc) {\n        return finishCoords.map(function (fc) {\n          return getBounds(sc, fc);\n        });\n      });\n    };\n\n    var getBox = function (warehouse, startCell, finishCell) {\n      return getAnyBox(warehouse, startCell, finishCell).bind(function (bounds) {\n        return $_6v1gttn0jnlpb34e.isRectangular(warehouse, bounds);\n      });\n    };\n\n    var $_8cl7xfn1jnlpb34j = {\n      getAnyBox: getAnyBox,\n      getBox: getBox\n    };\n\n    var moveBy = function (warehouse, cell, row, column) {\n      return $_ein1yumajnlpb2y1.findItem(warehouse, cell, $_3k22killjnlpb2vb.eq).bind(function (detail) {\n        var startRow = row > 0 ? detail.row() + detail.rowspan() - 1 : detail.row();\n        var startCol = column > 0 ? detail.column() + detail.colspan() - 1 : detail.column();\n        var dest = $_ein1yumajnlpb2y1.getAt(warehouse, startRow + row, startCol + column);\n        return dest.map(function (d) {\n          return d.element();\n        });\n      });\n    };\n\n    var intercepts = function (warehouse, start, finish) {\n      return $_8cl7xfn1jnlpb34j.getAnyBox(warehouse, start, finish).map(function (bounds) {\n        var inside = $_ein1yumajnlpb2y1.filterItems(warehouse, curry($_6v1gttn0jnlpb34e.inSelection, bounds));\n        return map(inside, function (detail) {\n          return detail.element();\n        });\n      });\n    };\n\n    var parentCell = function (warehouse, innerCell) {\n      var isContainedBy = function (c1, c2) {\n        return $_3k22killjnlpb2vb.contains(c2, c1);\n      };\n\n      return $_ein1yumajnlpb2y1.findItem(warehouse, innerCell, isContainedBy).bind(function (detail) {\n        return detail.element();\n      });\n    };\n\n    var $_7fg8egmzjnlpb346 = {\n      moveBy: moveBy,\n      intercepts: intercepts,\n      parentCell: parentCell\n    };\n\n    var moveBy$1 = function (cell, deltaRow, deltaColumn) {\n      return $_em4z2mldjnlpb2sz.table(cell).bind(function (table) {\n        var warehouse = getWarehouse(table);\n        return $_7fg8egmzjnlpb346.moveBy(warehouse, cell, deltaRow, deltaColumn);\n      });\n    };\n\n    var intercepts$1 = function (table, first, last) {\n      var warehouse = getWarehouse(table);\n      return $_7fg8egmzjnlpb346.intercepts(warehouse, first, last);\n    };\n\n    var nestedIntercepts = function (table, first, firstTable, last, lastTable) {\n      var warehouse = getWarehouse(table);\n      var startCell = $_3k22killjnlpb2vb.eq(table, firstTable) ? first : $_7fg8egmzjnlpb346.parentCell(warehouse, first);\n      var lastCell = $_3k22killjnlpb2vb.eq(table, lastTable) ? last : $_7fg8egmzjnlpb346.parentCell(warehouse, last);\n      return $_7fg8egmzjnlpb346.intercepts(warehouse, startCell, lastCell);\n    };\n\n    var getBox$1 = function (table, first, last) {\n      var warehouse = getWarehouse(table);\n      return $_8cl7xfn1jnlpb34j.getBox(warehouse, first, last);\n    };\n\n    var getWarehouse = function (table) {\n      var list = $_g8jea2lbjnlpb2sm.fromTable(table);\n      return $_ein1yumajnlpb2y1.generate(list);\n    };\n\n    var $_3cf29myjnlpb342 = {\n      moveBy: moveBy$1,\n      intercepts: intercepts$1,\n      nestedIntercepts: nestedIntercepts,\n      getBox: getBox$1\n    };\n\n    var lookupTable = function (container, isRoot) {\n      return $_gdszrpm7jnlpb2xk.ancestor(container, 'table');\n    };\n\n    var identified = MixedBag(['boxes', 'start', 'finish'], []);\n\n    var identify = function (start, finish, isRoot) {\n      var getIsRoot = function (rootTable) {\n        return function (element) {\n          return isRoot(element) || $_3k22killjnlpb2vb.eq(element, rootTable);\n        };\n      };\n\n      if ($_3k22killjnlpb2vb.eq(start, finish)) {\n        return Option.some(identified({\n          boxes: Option.some([start]),\n          start: start,\n          finish: finish\n        }));\n      } else {\n        return lookupTable(start, isRoot).bind(function (startTable) {\n          return lookupTable(finish, isRoot).bind(function (finishTable) {\n            if ($_3k22killjnlpb2vb.eq(startTable, finishTable)) {\n              return Option.some(identified({\n                boxes: $_3cf29myjnlpb342.intercepts(startTable, start, finish),\n                start: start,\n                finish: finish\n              }));\n            } else if ($_3k22killjnlpb2vb.contains(startTable, finishTable)) {\n              var ancestorCells = $_97aehqm4jnlpb2x5.ancestors(finish, 'td,th', getIsRoot(startTable));\n              var finishCell = ancestorCells.length > 0 ? ancestorCells[ancestorCells.length - 1] : finish;\n              return Option.some(identified({\n                boxes: $_3cf29myjnlpb342.nestedIntercepts(startTable, start, startTable, finish, finishTable),\n                start: start,\n                finish: finishCell\n              }));\n            } else if ($_3k22killjnlpb2vb.contains(finishTable, startTable)) {\n              var ancestorCells = $_97aehqm4jnlpb2x5.ancestors(start, 'td,th', getIsRoot(finishTable));\n              var startCell = ancestorCells.length > 0 ? ancestorCells[ancestorCells.length - 1] : start;\n              return Option.some(identified({\n                boxes: $_3cf29myjnlpb342.nestedIntercepts(finishTable, start, startTable, finish, finishTable),\n                start: start,\n                finish: startCell\n              }));\n            } else {\n              return $_5iw3l3mrjnlpb31x.ancestors(start, finish).shared().bind(function (lca) {\n                return $_gdszrpm7jnlpb2xk.closest(lca, 'table', isRoot).bind(function (lcaTable) {\n                  var finishAncestorCells = $_97aehqm4jnlpb2x5.ancestors(finish, 'td,th', getIsRoot(lcaTable));\n                  var finishCell = finishAncestorCells.length > 0 ? finishAncestorCells[finishAncestorCells.length - 1] : finish;\n                  var startAncestorCells = $_97aehqm4jnlpb2x5.ancestors(start, 'td,th', getIsRoot(lcaTable));\n                  var startCell = startAncestorCells.length > 0 ? startAncestorCells[startAncestorCells.length - 1] : start;\n                  return Option.some(identified({\n                    boxes: $_3cf29myjnlpb342.nestedIntercepts(lcaTable, start, startTable, finish, finishTable),\n                    start: startCell,\n                    finish: finishCell\n                  }));\n                });\n              });\n            }\n          });\n        });\n      }\n    };\n\n    var retrieve = function (container, selector) {\n      var sels = $_97aehqm4jnlpb2x5.descendants(container, selector);\n      return sels.length > 0 ? Option.some(sels) : Option.none();\n    };\n\n    var getLast = function (boxes, lastSelectedSelector) {\n      return find(boxes, function (box) {\n        return $_1mxomdlfjnlpb2tz.is(box, lastSelectedSelector);\n      });\n    };\n\n    var getEdges = function (container, firstSelectedSelector, lastSelectedSelector) {\n      return $_gdszrpm7jnlpb2xk.descendant(container, firstSelectedSelector).bind(function (first) {\n        return $_gdszrpm7jnlpb2xk.descendant(container, lastSelectedSelector).bind(function (last$$1) {\n          return $_5iw3l3mrjnlpb31x.sharedOne(lookupTable, [first, last$$1]).map(function (tbl) {\n            return {\n              first: constant(first),\n              last: constant(last$$1),\n              table: constant(tbl)\n            };\n          });\n        });\n      });\n    };\n\n    var expandTo = function (finish, firstSelectedSelector) {\n      return $_gdszrpm7jnlpb2xk.ancestor(finish, 'table').bind(function (table) {\n        return $_gdszrpm7jnlpb2xk.descendant(table, firstSelectedSelector).bind(function (start) {\n          return identify(start, finish).bind(function (identified) {\n            return identified.boxes().map(function (boxes) {\n              return {\n                boxes: constant(boxes),\n                start: constant(identified.start()),\n                finish: constant(identified.finish())\n              };\n            });\n          });\n        });\n      });\n    };\n\n    var shiftSelection = function (boxes, deltaRow, deltaColumn, firstSelectedSelector, lastSelectedSelector) {\n      return getLast(boxes, lastSelectedSelector).bind(function (last$$1) {\n        return $_3cf29myjnlpb342.moveBy(last$$1, deltaRow, deltaColumn).bind(function (finish) {\n          return expandTo(finish, firstSelectedSelector);\n        });\n      });\n    };\n\n    var $_3c1t0amqjnlpb319 = {\n      identify: identify,\n      retrieve: retrieve,\n      shiftSelection: shiftSelection,\n      getEdges: getEdges\n    };\n\n    var retrieve$1 = function (container, selector) {\n      return $_3c1t0amqjnlpb319.retrieve(container, selector);\n    };\n\n    var retrieveBox = function (container, firstSelectedSelector, lastSelectedSelector) {\n      return $_3c1t0amqjnlpb319.getEdges(container, firstSelectedSelector, lastSelectedSelector).bind(function (edges) {\n        var isRoot = function (ancestor) {\n          return $_3k22killjnlpb2vb.eq(container, ancestor);\n        };\n\n        var firstAncestor = $_gdszrpm7jnlpb2xk.ancestor(edges.first(), 'thead,tfoot,tbody,table', isRoot);\n        var lastAncestor = $_gdszrpm7jnlpb2xk.ancestor(edges.last(), 'thead,tfoot,tbody,table', isRoot);\n        return firstAncestor.bind(function (fA) {\n          return lastAncestor.bind(function (lA) {\n            return $_3k22killjnlpb2vb.eq(fA, lA) ? $_3cf29myjnlpb342.getBox(edges.table(), edges.first(), edges.last()) : Option.none();\n          });\n        });\n      });\n    };\n\n    var $_8c8t99mpjnlpb310 = {\n      retrieve: retrieve$1,\n      retrieveBox: retrieveBox\n    };\n    var selected = 'data-mce-selected';\n    var selectedSelector = 'td[' + selected + '],th[' + selected + ']';\n    var attributeSelector = '[' + selected + ']';\n    var firstSelected = 'data-mce-first-selected';\n    var firstSelectedSelector = 'td[' + firstSelected + '],th[' + firstSelected + ']';\n    var lastSelected = 'data-mce-last-selected';\n    var lastSelectedSelector = 'td[' + lastSelected + '],th[' + lastSelected + ']';\n    var $_5gt7rrn2jnlpb34p = {\n      selected: constant(selected),\n      selectedSelector: constant(selectedSelector),\n      attributeSelector: constant(attributeSelector),\n      firstSelected: constant(firstSelected),\n      firstSelectedSelector: constant(firstSelectedSelector),\n      lastSelected: constant(lastSelected),\n      lastSelectedSelector: constant(lastSelectedSelector)\n    };\n\n    var generate$1 = function (cases) {\n      if (!isArray(cases)) {\n        throw new Error('cases must be an array');\n      }\n\n      if (cases.length === 0) {\n        throw new Error('there must be at least one case');\n      }\n\n      var constructors = [];\n      var adt = {};\n      each(cases, function (acase, count) {\n        var keys$$1 = keys(acase);\n\n        if (keys$$1.length !== 1) {\n          throw new Error('one and only one name per case');\n        }\n\n        var key = keys$$1[0];\n        var value = acase[key];\n\n        if (adt[key] !== undefined) {\n          throw new Error('duplicate key detected:' + key);\n        } else if (key === 'cata') {\n          throw new Error('cannot have a case named cata (sorry)');\n        } else if (!isArray(value)) {\n          throw new Error('case arguments must be an array');\n        }\n\n        constructors.push(key);\n\n        adt[key] = function () {\n          var argLength = arguments.length;\n\n          if (argLength !== value.length) {\n            throw new Error('Wrong number of arguments to case ' + key + '. Expected ' + value.length + ' (' + value + '), got ' + argLength);\n          }\n\n          var args = new Array(argLength);\n\n          for (var i = 0; i < args.length; i++) args[i] = arguments[i];\n\n          var match = function (branches) {\n            var branchKeys = keys(branches);\n\n            if (constructors.length !== branchKeys.length) {\n              throw new Error('Wrong number of arguments to match. Expected: ' + constructors.join(',') + '\\nActual: ' + branchKeys.join(','));\n            }\n\n            var allReqd = forall(constructors, function (reqKey) {\n              return contains(branchKeys, reqKey);\n            });\n            if (!allReqd) throw new Error('Not all branches were specified when using match. Specified: ' + branchKeys.join(', ') + '\\nRequired: ' + constructors.join(', '));\n            return branches[key].apply(null, args);\n          };\n\n          return {\n            fold: function () {\n              if (arguments.length !== cases.length) {\n                throw new Error('Wrong number of arguments to fold. Expected ' + cases.length + ', got ' + arguments.length);\n              }\n\n              var target = arguments[count];\n              return target.apply(null, args);\n            },\n            match: match,\n            log: function (label) {\n              console.log(label, {\n                constructors: constructors,\n                constructor: key,\n                params: args\n              });\n            }\n          };\n        };\n      });\n      return adt;\n    };\n\n    var Adt = {\n      generate: generate$1\n    };\n    var type$1 = Adt.generate([{\n      none: []\n    }, {\n      multiple: ['elements']\n    }, {\n      single: ['selection']\n    }]);\n\n    var cata = function (subject, onNone, onMultiple, onSingle) {\n      return subject.fold(onNone, onMultiple, onSingle);\n    };\n\n    var $_35kl4cn3jnlpb34v = {\n      cata: cata,\n      none: type$1.none,\n      multiple: type$1.multiple,\n      single: type$1.single\n    };\n\n    var selection = function (cell, selections) {\n      return $_35kl4cn3jnlpb34v.cata(selections.get(), constant([]), identity, constant([cell]));\n    };\n\n    var unmergable = function (cell, selections) {\n      var hasSpan = function (elem) {\n        return $_9u6utvm2jnlpb2wv.has(elem, 'rowspan') && parseInt($_9u6utvm2jnlpb2wv.get(elem, 'rowspan'), 10) > 1 || $_9u6utvm2jnlpb2wv.has(elem, 'colspan') && parseInt($_9u6utvm2jnlpb2wv.get(elem, 'colspan'), 10) > 1;\n      };\n\n      var candidates = selection(cell, selections);\n      return candidates.length > 0 && forall(candidates, hasSpan) ? Option.some(candidates) : Option.none();\n    };\n\n    var mergable = function (table, selections) {\n      return $_35kl4cn3jnlpb34v.cata(selections.get(), Option.none, function (cells, _env) {\n        if (cells.length === 0) {\n          return Option.none();\n        }\n\n        return $_8c8t99mpjnlpb310.retrieveBox(table, $_5gt7rrn2jnlpb34p.firstSelectedSelector(), $_5gt7rrn2jnlpb34p.lastSelectedSelector()).bind(function (bounds) {\n          return cells.length > 1 ? Option.some({\n            bounds: constant(bounds),\n            cells: constant(cells)\n          }) : Option.none();\n        });\n      }, Option.none);\n    };\n\n    var $_g6cqikmojnlpb30m = {\n      mergable: mergable,\n      unmergable: unmergable,\n      selection: selection\n    };\n\n    var noMenu = function (cell) {\n      return {\n        element: constant(cell),\n        mergable: Option.none,\n        unmergable: Option.none,\n        selection: constant([cell])\n      };\n    };\n\n    var forMenu = function (selections, table, cell) {\n      return {\n        element: constant(cell),\n        mergable: constant($_g6cqikmojnlpb30m.mergable(table, selections)),\n        unmergable: constant($_g6cqikmojnlpb30m.unmergable(cell, selections)),\n        selection: constant($_g6cqikmojnlpb30m.selection(cell, selections))\n      };\n    };\n\n    var notCell$1 = function (element) {\n      return noMenu(element);\n    };\n\n    var paste$1 = Immutable('element', 'clipboard', 'generators');\n\n    var pasteRows = function (selections, table, cell, clipboard, generators) {\n      return {\n        element: constant(cell),\n        mergable: Option.none,\n        unmergable: Option.none,\n        selection: constant($_g6cqikmojnlpb30m.selection(cell, selections)),\n        clipboard: constant(clipboard),\n        generators: constant(generators)\n      };\n    };\n\n    var $_39kmudmnjnlpb30f = {\n      noMenu: noMenu,\n      forMenu: forMenu,\n      notCell: notCell$1,\n      paste: paste$1,\n      pasteRows: pasteRows\n    };\n\n    var extractSelected = function (cells) {\n      return $_em4z2mldjnlpb2sz.table(cells[0]).map($_7sdoc4mhjnlpb2zt.deep).map(function (replica) {\n        return [$_df0ycyl5jnlpb2rr.extract(replica, $_5gt7rrn2jnlpb34p.attributeSelector())];\n      });\n    };\n\n    var serializeElement = function (editor, elm) {\n      return editor.selection.serializer.serialize(elm.dom(), {});\n    };\n\n    var registerEvents = function (editor, selections, actions, cellSelection) {\n      editor.on('BeforeGetContent', function (e) {\n        var multiCellContext = function (cells) {\n          e.preventDefault();\n          extractSelected(cells).each(function (elements) {\n            e.content = map(elements, function (elm) {\n              return serializeElement(editor, elm);\n            }).join('');\n          });\n        };\n\n        if (e.selection === true) {\n          $_35kl4cn3jnlpb34v.cata(selections.get(), noop, multiCellContext, noop);\n        }\n      });\n      editor.on('BeforeSetContent', function (e) {\n        if (e.selection === true && e.paste === true) {\n          var cellOpt = Option.from(editor.dom.getParent(editor.selection.getStart(), 'th,td'));\n          cellOpt.each(function (domCell) {\n            var cell = Element$$1.fromDom(domCell);\n            var table = $_em4z2mldjnlpb2sz.table(cell);\n            table.bind(function (table) {\n              var elements = filter($_1ebm76mmjnlpb30a.fromHtml(e.content), function (content) {\n                return $_erx5tem3jnlpb2x3.name(content) !== 'meta';\n              });\n\n              if (elements.length === 1 && $_erx5tem3jnlpb2x3.name(elements[0]) === 'table') {\n                e.preventDefault();\n                var doc = Element$$1.fromDom(editor.getDoc());\n                var generators = $_f80632mgjnlpb2z3.paste(doc);\n                var targets = $_39kmudmnjnlpb30f.paste(cell, elements[0], generators);\n                actions.pasteCells(table, targets).each(function (rng) {\n                  editor.selection.setRng(rng);\n                  editor.focus();\n                  cellSelection.clear(table);\n                });\n              }\n            });\n          });\n        }\n      });\n    };\n\n    var $_aaekm8l0jnlpb2qo = {\n      registerEvents: registerEvents\n    };\n\n    function Dimension(name, getOffset) {\n      var set = function (element, h) {\n        if (!isNumber(h) && !h.match(/^[0-9]+$/)) throw name + '.set accepts only positive integer values. Value was ' + h;\n        var dom = element.dom();\n        if ($_4sfuxamcjnlpb2yn.isSupported(dom)) dom.style[name] = h + 'px';\n      };\n\n      var get = function (element) {\n        var r = getOffset(element);\n\n        if (r <= 0 || r === null) {\n          var css = $_g8mvdembjnlpb2ya.get(element, name);\n          return parseFloat(css) || 0;\n        }\n\n        return r;\n      };\n\n      var getOuter = get;\n\n      var aggregate = function (element, properties) {\n        return foldl(properties, function (acc, property) {\n          var val = $_g8mvdembjnlpb2ya.get(element, property);\n          var value = val === undefined ? 0 : parseInt(val, 10);\n          return isNaN(value) ? acc : acc + value;\n        }, 0);\n      };\n\n      var max = function (element, value, properties) {\n        var cumulativeInclusions = aggregate(element, properties);\n        var absoluteMax = value > cumulativeInclusions ? value - cumulativeInclusions : 0;\n        return absoluteMax;\n      };\n\n      return {\n        set: set,\n        get: get,\n        getOuter: getOuter,\n        aggregate: aggregate,\n        max: max\n      };\n    }\n\n    var api$1 = Dimension('height', function (element) {\n      var dom = element.dom();\n      return $_1ie4uvm6jnlpb2xf.inBody(element) ? dom.getBoundingClientRect().height : dom.offsetHeight;\n    });\n\n    var set$3 = function (element, h) {\n      api$1.set(element, h);\n    };\n\n    var get$4 = function (element) {\n      return api$1.get(element);\n    };\n\n    var getOuter = function (element) {\n      return api$1.getOuter(element);\n    };\n\n    var setMax = function (element, value) {\n      var inclusions = ['margin-top', 'border-top-width', 'padding-top', 'padding-bottom', 'border-bottom-width', 'margin-bottom'];\n      var absMax = api$1.max(element, value, inclusions);\n      $_g8mvdembjnlpb2ya.set(element, 'max-height', absMax + 'px');\n    };\n\n    var $_6kvman9jnlpb36h = {\n      set: set$3,\n      get: get$4,\n      getOuter: getOuter,\n      setMax: setMax\n    };\n    var api$2 = Dimension('width', function (element) {\n      return element.dom().offsetWidth;\n    });\n\n    var set$4 = function (element, h) {\n      api$2.set(element, h);\n    };\n\n    var get$5 = function (element) {\n      return api$2.get(element);\n    };\n\n    var getOuter$1 = function (element) {\n      return api$2.getOuter(element);\n    };\n\n    var setMax$1 = function (element, value) {\n      var inclusions = ['margin-left', 'border-left-width', 'padding-left', 'padding-right', 'border-right-width', 'margin-right'];\n      var absMax = api$2.max(element, value, inclusions);\n      $_g8mvdembjnlpb2ya.set(element, 'max-width', absMax + 'px');\n    };\n\n    var $_2s7b62nbjnlpb36o = {\n      set: set$4,\n      get: get$5,\n      getOuter: getOuter$1,\n      setMax: setMax$1\n    };\n    var platform = $_4aebialqjnlpb2vq.detect();\n\n    var needManualCalc = function () {\n      return platform.browser.isIE() || platform.browser.isEdge();\n    };\n\n    var toNumber = function (px, fallback) {\n      var num = parseFloat(px);\n      return isNaN(num) ? fallback : num;\n    };\n\n    var getProp = function (elm, name, fallback) {\n      return toNumber($_g8mvdembjnlpb2ya.get(elm, name), fallback);\n    };\n\n    var getCalculatedHeight = function (cell) {\n      var paddingTop = getProp(cell, 'padding-top', 0);\n      var paddingBottom = getProp(cell, 'padding-bottom', 0);\n      var borderTop = getProp(cell, 'border-top-width', 0);\n      var borderBottom = getProp(cell, 'border-bottom-width', 0);\n      var height = cell.dom().getBoundingClientRect().height;\n      var boxSizing = $_g8mvdembjnlpb2ya.get(cell, 'box-sizing');\n      var borders = borderTop + borderBottom;\n      return boxSizing === 'border-box' ? height : height - paddingTop - paddingBottom - borders;\n    };\n\n    var getWidth = function (cell) {\n      return getProp(cell, 'width', $_2s7b62nbjnlpb36o.get(cell));\n    };\n\n    var getHeight = function (cell) {\n      return needManualCalc() ? getCalculatedHeight(cell) : getProp(cell, 'height', $_6kvman9jnlpb36h.get(cell));\n    };\n\n    var $_1pmnnnn8jnlpb367 = {\n      getWidth: getWidth,\n      getHeight: getHeight\n    };\n    var genericSizeRegex = /(\\d+(\\.\\d+)?)(\\w|%)*/;\n    var percentageBasedSizeRegex = /(\\d+(\\.\\d+)?)%/;\n    var pixelBasedSizeRegex = /(\\d+(\\.\\d+)?)px|em/;\n\n    var setPixelWidth = function (cell, amount) {\n      $_g8mvdembjnlpb2ya.set(cell, 'width', amount + 'px');\n    };\n\n    var setPercentageWidth = function (cell, amount) {\n      $_g8mvdembjnlpb2ya.set(cell, 'width', amount + '%');\n    };\n\n    var setHeight = function (cell, amount) {\n      $_g8mvdembjnlpb2ya.set(cell, 'height', amount + 'px');\n    };\n\n    var getHeightValue = function (cell) {\n      return $_g8mvdembjnlpb2ya.getRaw(cell, 'height').getOrThunk(function () {\n        return $_1pmnnnn8jnlpb367.getHeight(cell) + 'px';\n      });\n    };\n\n    var convert = function (cell, number, getter, setter) {\n      var newSize = $_em4z2mldjnlpb2sz.table(cell).map(function (table) {\n        var total = getter(table);\n        return Math.floor(number / 100 * total);\n      }).getOr(number);\n      setter(cell, newSize);\n      return newSize;\n    };\n\n    var normalizePixelSize = function (value, cell, getter, setter) {\n      var number = parseInt(value, 10);\n      return endsWith(value, '%') && $_erx5tem3jnlpb2x3.name(cell) !== 'table' ? convert(cell, number, getter, setter) : number;\n    };\n\n    var getTotalHeight = function (cell) {\n      var value = getHeightValue(cell);\n      if (!value) return $_6kvman9jnlpb36h.get(cell);\n      return normalizePixelSize(value, cell, $_6kvman9jnlpb36h.get, setHeight);\n    };\n\n    var get$6 = function (cell, type, f) {\n      var v = f(cell);\n      var span = getSpan(cell, type);\n      return v / span;\n    };\n\n    var getSpan = function (cell, type) {\n      return $_9u6utvm2jnlpb2wv.has(cell, type) ? parseInt($_9u6utvm2jnlpb2wv.get(cell, type), 10) : 1;\n    };\n\n    var getRawWidth = function (element) {\n      var cssWidth = $_g8mvdembjnlpb2ya.getRaw(element, 'width');\n      return cssWidth.fold(function () {\n        return Option.from($_9u6utvm2jnlpb2wv.get(element, 'width'));\n      }, function (width) {\n        return Option.some(width);\n      });\n    };\n\n    var normalizePercentageWidth = function (cellWidth, tableSize) {\n      return cellWidth / tableSize.pixelWidth() * 100;\n    };\n\n    var choosePercentageSize = function (element, width, tableSize) {\n      if (percentageBasedSizeRegex.test(width)) {\n        var percentMatch = percentageBasedSizeRegex.exec(width);\n        return parseFloat(percentMatch[1]);\n      } else {\n        var intWidth = $_2s7b62nbjnlpb36o.get(element);\n        return normalizePercentageWidth(intWidth, tableSize);\n      }\n    };\n\n    var getPercentageWidth = function (cell, tableSize) {\n      var width = getRawWidth(cell);\n      return width.fold(function () {\n        var intWidth = $_2s7b62nbjnlpb36o.get(cell);\n        return normalizePercentageWidth(intWidth, tableSize);\n      }, function (width) {\n        return choosePercentageSize(cell, width, tableSize);\n      });\n    };\n\n    var normalizePixelWidth = function (cellWidth, tableSize) {\n      return cellWidth / 100 * tableSize.pixelWidth();\n    };\n\n    var choosePixelSize = function (element, width, tableSize) {\n      if (pixelBasedSizeRegex.test(width)) {\n        var pixelMatch = pixelBasedSizeRegex.exec(width);\n        return parseInt(pixelMatch[1], 10);\n      } else if (percentageBasedSizeRegex.test(width)) {\n        var percentMatch = percentageBasedSizeRegex.exec(width);\n        var floatWidth = parseFloat(percentMatch[1]);\n        return normalizePixelWidth(floatWidth, tableSize);\n      } else {\n        return $_2s7b62nbjnlpb36o.get(element);\n      }\n    };\n\n    var getPixelWidth = function (cell, tableSize) {\n      var width = getRawWidth(cell);\n      return width.fold(function () {\n        return $_2s7b62nbjnlpb36o.get(cell);\n      }, function (width) {\n        return choosePixelSize(cell, width, tableSize);\n      });\n    };\n\n    var getHeight$1 = function (cell) {\n      return get$6(cell, 'rowspan', getTotalHeight);\n    };\n\n    var getGenericWidth = function (cell) {\n      var width = getRawWidth(cell);\n      return width.bind(function (width) {\n        if (genericSizeRegex.test(width)) {\n          var match = genericSizeRegex.exec(width);\n          return Option.some({\n            width: constant(match[1]),\n            unit: constant(match[3])\n          });\n        } else {\n          return Option.none();\n        }\n      });\n    };\n\n    var setGenericWidth = function (cell, amount, unit) {\n      $_g8mvdembjnlpb2ya.set(cell, 'width', amount + unit);\n    };\n\n    var $_8c9k1dn7jnlpb35o = {\n      percentageBasedSizeRegex: constant(percentageBasedSizeRegex),\n      pixelBasedSizeRegex: constant(pixelBasedSizeRegex),\n      setPixelWidth: setPixelWidth,\n      setPercentageWidth: setPercentageWidth,\n      setHeight: setHeight,\n      getPixelWidth: getPixelWidth,\n      getPercentageWidth: getPercentageWidth,\n      getGenericWidth: getGenericWidth,\n      setGenericWidth: setGenericWidth,\n      getHeight: getHeight$1,\n      getRawWidth: getRawWidth\n    };\n\n    var halve = function (main, other) {\n      var width = $_8c9k1dn7jnlpb35o.getGenericWidth(main);\n      width.each(function (width) {\n        var newWidth = width.width() / 2;\n        $_8c9k1dn7jnlpb35o.setGenericWidth(main, newWidth, width.unit());\n        $_8c9k1dn7jnlpb35o.setGenericWidth(other, newWidth, width.unit());\n      });\n    };\n\n    var $_8eufztn6jnlpb35m = {\n      halve: halve\n    };\n\n    var attached = function (element, scope) {\n      var doc = scope || Element$$1.fromDom(document.documentElement);\n      return $_1nfdlmm8jnlpb2xl.ancestor(element, curry($_3k22killjnlpb2vb.eq, doc)).isSome();\n    };\n\n    var windowOf = function (element) {\n      var dom = element.dom();\n      if (dom === dom.window && element instanceof Window) return element;\n      return $_erx5tem3jnlpb2x3.isDocument(element) ? dom.defaultView || dom.parentWindow : null;\n    };\n\n    var $_7rx1opngjnlpb37d = {\n      attached: attached,\n      windowOf: windowOf\n    };\n\n    var r = function (left, top) {\n      var translate = function (x, y) {\n        return r(left + x, top + y);\n      };\n\n      return {\n        left: constant(left),\n        top: constant(top),\n        translate: translate\n      };\n    };\n\n    var Position = r;\n\n    var boxPosition = function (dom) {\n      var box = dom.getBoundingClientRect();\n      return Position(box.left, box.top);\n    };\n\n    var firstDefinedOrZero = function (a, b) {\n      return a !== undefined ? a : b !== undefined ? b : 0;\n    };\n\n    var absolute = function (element) {\n      var doc = element.dom().ownerDocument;\n      var body = doc.body;\n      var win = $_7rx1opngjnlpb37d.windowOf(Element$$1.fromDom(doc));\n      var html = doc.documentElement;\n      var scrollTop = firstDefinedOrZero(win.pageYOffset, html.scrollTop);\n      var scrollLeft = firstDefinedOrZero(win.pageXOffset, html.scrollLeft);\n      var clientTop = firstDefinedOrZero(html.clientTop, body.clientTop);\n      var clientLeft = firstDefinedOrZero(html.clientLeft, body.clientLeft);\n      return viewport(element).translate(scrollLeft - clientLeft, scrollTop - clientTop);\n    };\n\n    var relative = function (element) {\n      var dom = element.dom();\n      return Position(dom.offsetLeft, dom.offsetTop);\n    };\n\n    var viewport = function (element) {\n      var dom = element.dom();\n      var doc = dom.ownerDocument;\n      var body = doc.body;\n      var html = Element$$1.fromDom(doc.documentElement);\n      if (body === dom) return Position(body.offsetLeft, body.offsetTop);\n      if (!$_7rx1opngjnlpb37d.attached(element, html)) return Position(0, 0);\n      return boxPosition(dom);\n    };\n\n    var $_2ipv1snfjnlpb37b = {\n      absolute: absolute,\n      relative: relative,\n      viewport: viewport\n    };\n    var rowInfo = Immutable('row', 'y');\n    var colInfo = Immutable('col', 'x');\n\n    var rtlEdge = function (cell) {\n      var pos = $_2ipv1snfjnlpb37b.absolute(cell);\n      return pos.left() + $_2s7b62nbjnlpb36o.getOuter(cell);\n    };\n\n    var ltrEdge = function (cell) {\n      return $_2ipv1snfjnlpb37b.absolute(cell).left();\n    };\n\n    var getLeftEdge = function (index, cell) {\n      return colInfo(index, ltrEdge(cell));\n    };\n\n    var getRightEdge = function (index, cell) {\n      return colInfo(index, rtlEdge(cell));\n    };\n\n    var getTop = function (cell) {\n      return $_2ipv1snfjnlpb37b.absolute(cell).top();\n    };\n\n    var getTopEdge = function (index, cell) {\n      return rowInfo(index, getTop(cell));\n    };\n\n    var getBottomEdge = function (index, cell) {\n      return rowInfo(index, getTop(cell) + $_6kvman9jnlpb36h.getOuter(cell));\n    };\n\n    var findPositions = function (getInnerEdge, getOuterEdge, array) {\n      if (array.length === 0) return [];\n      var lines = map(array.slice(1), function (cellOption, index) {\n        return cellOption.map(function (cell) {\n          return getInnerEdge(index, cell);\n        });\n      });\n      var lastLine = array[array.length - 1].map(function (cell) {\n        return getOuterEdge(array.length - 1, cell);\n      });\n      return lines.concat([lastLine]);\n    };\n\n    var negate = function (step, _table) {\n      return -step;\n    };\n\n    var height = {\n      delta: identity,\n      positions: curry(findPositions, getTopEdge, getBottomEdge),\n      edge: getTop\n    };\n    var ltr = {\n      delta: identity,\n      edge: ltrEdge,\n      positions: curry(findPositions, getLeftEdge, getRightEdge)\n    };\n    var rtl = {\n      delta: negate,\n      edge: rtlEdge,\n      positions: curry(findPositions, getRightEdge, getLeftEdge)\n    };\n    var $_6u52cqnejnlpb36x = {\n      height: height,\n      rtl: rtl,\n      ltr: ltr\n    };\n    var $_1j2xkqndjnlpb36v = {\n      ltr: $_6u52cqnejnlpb36x.ltr,\n      rtl: $_6u52cqnejnlpb36x.rtl\n    };\n\n    function TableDirection(directionAt) {\n      var auto = function (table) {\n        return directionAt(table).isRtl() ? $_1j2xkqndjnlpb36v.rtl : $_1j2xkqndjnlpb36v.ltr;\n      };\n\n      var delta = function (amount, table) {\n        return auto(table).delta(amount, table);\n      };\n\n      var positions = function (cols, table) {\n        return auto(table).positions(cols, table);\n      };\n\n      var edge = function (cell) {\n        return auto(cell).edge(cell);\n      };\n\n      return {\n        delta: delta,\n        edge: edge,\n        positions: positions\n      };\n    }\n\n    var getGridSize = function (table) {\n      var input = $_g8jea2lbjnlpb2sm.fromTable(table);\n      var warehouse = $_ein1yumajnlpb2y1.generate(input);\n      return warehouse.grid();\n    };\n\n    var $_flksaxnijnlpb37k = {\n      getGridSize: getGridSize\n    };\n\n    var Cell = function (initial) {\n      var value = initial;\n\n      var get = function () {\n        return value;\n      };\n\n      var set = function (v) {\n        value = v;\n      };\n\n      var clone = function () {\n        return Cell(get());\n      };\n\n      return {\n        get: get,\n        set: set,\n        clone: clone\n      };\n    };\n\n    var base = function (handleUnsupported, required) {\n      return baseWith(handleUnsupported, required, {\n        validate: isFunction,\n        label: 'function'\n      });\n    };\n\n    var baseWith = function (handleUnsupported, required, pred) {\n      if (required.length === 0) throw new Error('You must specify at least one required field.');\n      validateStrArr('required', required);\n      checkDupes(required);\n      return function (obj) {\n        var keys$$1 = keys(obj);\n        var allReqd = forall(required, function (req) {\n          return contains(keys$$1, req);\n        });\n        if (!allReqd) reqMessage(required, keys$$1);\n        handleUnsupported(required, keys$$1);\n        var invalidKeys = filter(required, function (key) {\n          return !pred.validate(obj[key], key);\n        });\n        if (invalidKeys.length > 0) invalidTypeMessage(invalidKeys, pred.label);\n        return obj;\n      };\n    };\n\n    var handleExact = function (required, keys$$1) {\n      var unsupported = filter(keys$$1, function (key) {\n        return !contains(required, key);\n      });\n      if (unsupported.length > 0) unsuppMessage(unsupported);\n    };\n\n    var exactly = function (required) {\n      return base(handleExact, required);\n    };\n\n    var elementToData = function (element) {\n      var colspan = $_9u6utvm2jnlpb2wv.has(element, 'colspan') ? parseInt($_9u6utvm2jnlpb2wv.get(element, 'colspan'), 10) : 1;\n      var rowspan = $_9u6utvm2jnlpb2wv.has(element, 'rowspan') ? parseInt($_9u6utvm2jnlpb2wv.get(element, 'rowspan'), 10) : 1;\n      return {\n        element: constant(element),\n        colspan: constant(colspan),\n        rowspan: constant(rowspan)\n      };\n    };\n\n    var modification = function (generators, _toData) {\n      contract(generators);\n      var position = Cell(Option.none());\n      var toData = _toData !== undefined ? _toData : elementToData;\n\n      var nu = function (data) {\n        return generators.cell(data);\n      };\n\n      var nuFrom = function (element) {\n        var data = toData(element);\n        return nu(data);\n      };\n\n      var add = function (element) {\n        var replacement = nuFrom(element);\n        if (position.get().isNone()) position.set(Option.some(replacement));\n        recent = Option.some({\n          item: element,\n          replacement: replacement\n        });\n        return replacement;\n      };\n\n      var recent = Option.none();\n\n      var getOrInit = function (element, comparator) {\n        return recent.fold(function () {\n          return add(element);\n        }, function (p) {\n          return comparator(element, p.item) ? p.replacement : add(element);\n        });\n      };\n\n      return {\n        getOrInit: getOrInit,\n        cursor: position.get\n      };\n    };\n\n    var transform = function (scope, tag) {\n      return function (generators) {\n        var position = Cell(Option.none());\n        contract(generators);\n        var list = [];\n\n        var find$$1 = function (element, comparator) {\n          return find(list, function (x) {\n            return comparator(x.item, element);\n          });\n        };\n\n        var makeNew = function (element) {\n          var cell = generators.replace(element, tag, {\n            scope: scope\n          });\n          list.push({\n            item: element,\n            sub: cell\n          });\n          if (position.get().isNone()) position.set(Option.some(cell));\n          return cell;\n        };\n\n        var replaceOrInit = function (element, comparator) {\n          return find$$1(element, comparator).fold(function () {\n            return makeNew(element);\n          }, function (p) {\n            return comparator(element, p.item) ? p.sub : makeNew(element);\n          });\n        };\n\n        return {\n          replaceOrInit: replaceOrInit,\n          cursor: position.get\n        };\n      };\n    };\n\n    var merging = function (generators) {\n      contract(generators);\n      var position = Cell(Option.none());\n\n      var combine = function (cell) {\n        if (position.get().isNone()) position.set(Option.some(cell));\n        return function () {\n          var raw = generators.cell({\n            element: constant(cell),\n            colspan: constant(1),\n            rowspan: constant(1)\n          });\n          $_g8mvdembjnlpb2ya.remove(raw, 'width');\n          $_g8mvdembjnlpb2ya.remove(cell, 'width');\n          return raw;\n        };\n      };\n\n      return {\n        combine: combine,\n        cursor: position.get\n      };\n    };\n\n    var contract = exactly(['cell', 'row', 'replace', 'gap']);\n    var $_7dlzawnkjnlpb384 = {\n      modification: modification,\n      transform: transform,\n      merging: merging\n    };\n    var blockList = ['body', 'p', 'div', 'article', 'aside', 'figcaption', 'figure', 'footer', 'header', 'nav', 'section', 'ol', 'ul', 'table', 'thead', 'tfoot', 'tbody', 'caption', 'tr', 'td', 'th', 'h1', 'h2', 'h3', 'h4', 'h5', 'h6', 'blockquote', 'pre', 'address'];\n\n    var isList = function (universe, item) {\n      var tagName = universe.property().name(item);\n      return contains(['ol', 'ul'], tagName);\n    };\n\n    var isBlock = function (universe, item) {\n      var tagName = universe.property().name(item);\n      return contains(blockList, tagName);\n    };\n\n    var isFormatting = function (universe, item) {\n      var tagName = universe.property().name(item);\n      return contains(['address', 'pre', 'p', 'h1', 'h2', 'h3', 'h4', 'h5', 'h6'], tagName);\n    };\n\n    var isHeading = function (universe, item) {\n      var tagName = universe.property().name(item);\n      return contains(['h1', 'h2', 'h3', 'h4', 'h5', 'h6'], tagName);\n    };\n\n    var isContainer = function (universe, item) {\n      return contains(['div', 'li', 'td', 'th', 'blockquote', 'body', 'caption'], universe.property().name(item));\n    };\n\n    var isEmptyTag = function (universe, item) {\n      return contains(['br', 'img', 'hr', 'input'], universe.property().name(item));\n    };\n\n    var isFrame = function (universe, item) {\n      return universe.property().name(item) === 'iframe';\n    };\n\n    var isInline = function (universe, item) {\n      return !(isBlock(universe, item) || isEmptyTag(universe, item)) && universe.property().name(item) !== 'li';\n    };\n\n    var $_193xmgnpjnlpb39m = {\n      isBlock: isBlock,\n      isList: isList,\n      isFormatting: isFormatting,\n      isHeading: isHeading,\n      isContainer: isContainer,\n      isEmptyTag: isEmptyTag,\n      isFrame: isFrame,\n      isInline: isInline\n    };\n    var universe$1 = DomUniverse();\n\n    var isBlock$1 = function (element) {\n      return $_193xmgnpjnlpb39m.isBlock(universe$1, element);\n    };\n\n    var isList$1 = function (element) {\n      return $_193xmgnpjnlpb39m.isList(universe$1, element);\n    };\n\n    var isFormatting$1 = function (element) {\n      return $_193xmgnpjnlpb39m.isFormatting(universe$1, element);\n    };\n\n    var isHeading$1 = function (element) {\n      return $_193xmgnpjnlpb39m.isHeading(universe$1, element);\n    };\n\n    var isContainer$1 = function (element) {\n      return $_193xmgnpjnlpb39m.isContainer(universe$1, element);\n    };\n\n    var isEmptyTag$1 = function (element) {\n      return $_193xmgnpjnlpb39m.isEmptyTag(universe$1, element);\n    };\n\n    var isFrame$1 = function (element) {\n      return $_193xmgnpjnlpb39m.isFrame(universe$1, element);\n    };\n\n    var isInline$1 = function (element) {\n      return $_193xmgnpjnlpb39m.isInline(universe$1, element);\n    };\n\n    var $_7dfae7nojnlpb39j = {\n      isBlock: isBlock$1,\n      isList: isList$1,\n      isFormatting: isFormatting$1,\n      isHeading: isHeading$1,\n      isContainer: isContainer$1,\n      isEmptyTag: isEmptyTag$1,\n      isFrame: isFrame$1,\n      isInline: isInline$1\n    };\n\n    var merge = function (cells) {\n      var isBr = function (el) {\n        return $_erx5tem3jnlpb2x3.name(el) === 'br';\n      };\n\n      var advancedBr = function (children) {\n        return forall(children, function (c) {\n          return isBr(c) || $_erx5tem3jnlpb2x3.isText(c) && $_3lolvomkjnlpb304.get(c).trim().length === 0;\n        });\n      };\n\n      var isListItem = function (el) {\n        return $_erx5tem3jnlpb2x3.name(el) === 'li' || $_1nfdlmm8jnlpb2xl.ancestor(el, $_7dfae7nojnlpb39j.isList).isSome();\n      };\n\n      var siblingIsBlock = function (el) {\n        return $_2pl1nljjnlpb2ur.nextSibling(el).map(function (rightSibling) {\n          if ($_7dfae7nojnlpb39j.isBlock(rightSibling)) return true;\n\n          if ($_7dfae7nojnlpb39j.isEmptyTag(rightSibling)) {\n            return $_erx5tem3jnlpb2x3.name(rightSibling) === 'img' ? false : true;\n          }\n        }).getOr(false);\n      };\n\n      var markCell = function (cell) {\n        return $_7srx6vmijnlpb2zw.last(cell).bind(function (rightEdge) {\n          var rightSiblingIsBlock = siblingIsBlock(rightEdge);\n          return $_2pl1nljjnlpb2ur.parent(rightEdge).map(function (parent) {\n            return rightSiblingIsBlock === true || isListItem(parent) || isBr(rightEdge) || $_7dfae7nojnlpb39j.isBlock(parent) && !$_3k22killjnlpb2vb.eq(cell, parent) ? [] : [Element$$1.fromTag('br')];\n          });\n        }).getOr([]);\n      };\n\n      var markContent = function () {\n        var content = bind(cells, function (cell) {\n          var children = $_2pl1nljjnlpb2ur.children(cell);\n          return advancedBr(children) ? [] : children.concat(markCell(cell));\n        });\n        return content.length === 0 ? [Element$$1.fromTag('br')] : content;\n      };\n\n      var contents = markContent();\n      $_cybn8qmejnlpb2yr.empty(cells[0]);\n      $_a9wtnkmfjnlpb2yu.append(cells[0], contents);\n    };\n\n    var $_18yv0ennjnlpb38t = {\n      merge: merge\n    };\n    var hasOwnProperty$1 = Object.prototype.hasOwnProperty;\n\n    var shallow$1 = function (old, nu) {\n      return nu;\n    };\n\n    var baseMerge = function (merger) {\n      return function () {\n        var objects = new Array(arguments.length);\n\n        for (var i = 0; i < objects.length; i++) objects[i] = arguments[i];\n\n        if (objects.length === 0) throw new Error('Can\\'t merge zero objects');\n        var ret = {};\n\n        for (var j = 0; j < objects.length; j++) {\n          var curObject = objects[j];\n\n          for (var key in curObject) if (hasOwnProperty$1.call(curObject, key)) {\n            ret[key] = merger(ret[key], curObject[key]);\n          }\n        }\n\n        return ret;\n      };\n    };\n\n    var merge$1 = baseMerge(shallow$1);\n\n    var cat = function (arr) {\n      var r = [];\n\n      var push = function (x) {\n        r.push(x);\n      };\n\n      for (var i = 0; i < arr.length; i++) {\n        arr[i].each(push);\n      }\n\n      return r;\n    };\n\n    var findMap = function (arr, f) {\n      for (var i = 0; i < arr.length; i++) {\n        var r = f(arr[i], i);\n\n        if (r.isSome()) {\n          return r;\n        }\n      }\n\n      return Option.none();\n    };\n\n    var addCell = function (gridRow, index, cell) {\n      var cells = gridRow.cells();\n      var before = cells.slice(0, index);\n      var after = cells.slice(index);\n      var newCells = before.concat([cell]).concat(after);\n      return setCells(gridRow, newCells);\n    };\n\n    var mutateCell = function (gridRow, index, cell) {\n      var cells = gridRow.cells();\n      cells[index] = cell;\n    };\n\n    var setCells = function (gridRow, cells) {\n      return $_csuubelcjnlpb2sv.rowcells(cells, gridRow.section());\n    };\n\n    var mapCells = function (gridRow, f) {\n      var cells = gridRow.cells();\n      var r = map(cells, f);\n      return $_csuubelcjnlpb2sv.rowcells(r, gridRow.section());\n    };\n\n    var getCell = function (gridRow, index) {\n      return gridRow.cells()[index];\n    };\n\n    var getCellElement = function (gridRow, index) {\n      return getCell(gridRow, index).element();\n    };\n\n    var cellLength = function (gridRow) {\n      return gridRow.cells().length;\n    };\n\n    var $_avmeb4nvjnlpb3at = {\n      addCell: addCell,\n      setCells: setCells,\n      mutateCell: mutateCell,\n      getCell: getCell,\n      getCellElement: getCellElement,\n      mapCells: mapCells,\n      cellLength: cellLength\n    };\n\n    var getColumn = function (grid, index) {\n      return map(grid, function (row) {\n        return $_avmeb4nvjnlpb3at.getCell(row, index);\n      });\n    };\n\n    var getRow = function (grid, index) {\n      return grid[index];\n    };\n\n    var findDiff = function (xs, comp) {\n      if (xs.length === 0) return 0;\n      var first = xs[0];\n      var index = findIndex(xs, function (x) {\n        return !comp(first.element(), x.element());\n      });\n      return index.fold(function () {\n        return xs.length;\n      }, function (ind) {\n        return ind;\n      });\n    };\n\n    var subgrid = function (grid, row, column, comparator) {\n      var restOfRow = getRow(grid, row).cells().slice(column);\n      var endColIndex = findDiff(restOfRow, comparator);\n      var restOfColumn = getColumn(grid, column).slice(row);\n      var endRowIndex = findDiff(restOfColumn, comparator);\n      return {\n        colspan: constant(endColIndex),\n        rowspan: constant(endRowIndex)\n      };\n    };\n\n    var $_fvjljunujnlpb3an = {\n      subgrid: subgrid\n    };\n\n    var toDetails = function (grid, comparator) {\n      var seen = map(grid, function (row, ri) {\n        return map(row.cells(), function (col, ci) {\n          return false;\n        });\n      });\n\n      var updateSeen = function (ri, ci, rowspan, colspan) {\n        for (var r = ri; r < ri + rowspan; r++) {\n          for (var c = ci; c < ci + colspan; c++) {\n            seen[r][c] = true;\n          }\n        }\n      };\n\n      return map(grid, function (row, ri) {\n        var details = bind(row.cells(), function (cell, ci) {\n          if (seen[ri][ci] === false) {\n            var result = $_fvjljunujnlpb3an.subgrid(grid, ri, ci, comparator);\n            updateSeen(ri, ci, result.rowspan(), result.colspan());\n            return [$_csuubelcjnlpb2sv.detailnew(cell.element(), result.rowspan(), result.colspan(), cell.isNew())];\n          } else {\n            return [];\n          }\n        });\n        return $_csuubelcjnlpb2sv.rowdetails(details, row.section());\n      });\n    };\n\n    var toGrid = function (warehouse, generators, isNew) {\n      var grid = [];\n\n      for (var i = 0; i < warehouse.grid().rows(); i++) {\n        var rowCells = [];\n\n        for (var j = 0; j < warehouse.grid().columns(); j++) {\n          var element = $_ein1yumajnlpb2y1.getAt(warehouse, i, j).map(function (item) {\n            return $_csuubelcjnlpb2sv.elementnew(item.element(), isNew);\n          }).getOrThunk(function () {\n            return $_csuubelcjnlpb2sv.elementnew(generators.gap(), true);\n          });\n          rowCells.push(element);\n        }\n\n        var row = $_csuubelcjnlpb2sv.rowcells(rowCells, warehouse.all()[i].section());\n        grid.push(row);\n      }\n\n      return grid;\n    };\n\n    var $_83n6k9ntjnlpb3ai = {\n      toDetails: toDetails,\n      toGrid: toGrid\n    };\n\n    var setIfNot = function (element, property, value, ignore) {\n      if (value === ignore) $_9u6utvm2jnlpb2wv.remove(element, property);else $_9u6utvm2jnlpb2wv.set(element, property, value);\n    };\n\n    var render = function (table, grid) {\n      var newRows = [];\n      var newCells = [];\n\n      var renderSection = function (gridSection, sectionName) {\n        var section = $_gdszrpm7jnlpb2xk.child(table, sectionName).getOrThunk(function () {\n          var tb = Element$$1.fromTag(sectionName, $_2pl1nljjnlpb2ur.owner(table).dom());\n          $_5hzj77mdjnlpb2yp.append(table, tb);\n          return tb;\n        });\n        $_cybn8qmejnlpb2yr.empty(section);\n        var rows = map(gridSection, function (row) {\n          if (row.isNew()) {\n            newRows.push(row.element());\n          }\n\n          var tr = row.element();\n          $_cybn8qmejnlpb2yr.empty(tr);\n          each(row.cells(), function (cell) {\n            if (cell.isNew()) {\n              newCells.push(cell.element());\n            }\n\n            setIfNot(cell.element(), 'colspan', cell.colspan(), 1);\n            setIfNot(cell.element(), 'rowspan', cell.rowspan(), 1);\n            $_5hzj77mdjnlpb2yp.append(tr, cell.element());\n          });\n          return tr;\n        });\n        $_a9wtnkmfjnlpb2yu.append(section, rows);\n      };\n\n      var removeSection = function (sectionName) {\n        $_gdszrpm7jnlpb2xk.child(table, sectionName).each($_cybn8qmejnlpb2yr.remove);\n      };\n\n      var renderOrRemoveSection = function (gridSection, sectionName) {\n        if (gridSection.length > 0) {\n          renderSection(gridSection, sectionName);\n        } else {\n          removeSection(sectionName);\n        }\n      };\n\n      var headSection = [];\n      var bodySection = [];\n      var footSection = [];\n      each(grid, function (row) {\n        switch (row.section()) {\n          case 'thead':\n            headSection.push(row);\n            break;\n\n          case 'tbody':\n            bodySection.push(row);\n            break;\n\n          case 'tfoot':\n            footSection.push(row);\n            break;\n        }\n      });\n      renderOrRemoveSection(headSection, 'thead');\n      renderOrRemoveSection(bodySection, 'tbody');\n      renderOrRemoveSection(footSection, 'tfoot');\n      return {\n        newRows: constant(newRows),\n        newCells: constant(newCells)\n      };\n    };\n\n    var copy$2 = function (grid) {\n      var rows = map(grid, function (row) {\n        var tr = $_7sdoc4mhjnlpb2zt.shallow(row.element());\n        each(row.cells(), function (cell) {\n          var clonedCell = $_7sdoc4mhjnlpb2zt.deep(cell.element());\n          setIfNot(clonedCell, 'colspan', cell.colspan(), 1);\n          setIfNot(clonedCell, 'rowspan', cell.rowspan(), 1);\n          $_5hzj77mdjnlpb2yp.append(tr, clonedCell);\n        });\n        return tr;\n      });\n      return rows;\n    };\n\n    var $_ekkk7tnwjnlpb3ax = {\n      render: render,\n      copy: copy$2\n    };\n\n    var repeat = function (repititions, f) {\n      var r = [];\n\n      for (var i = 0; i < repititions; i++) {\n        r.push(f(i));\n      }\n\n      return r;\n    };\n\n    var range$1 = function (start, end) {\n      var r = [];\n\n      for (var i = start; i < end; i++) {\n        r.push(i);\n      }\n\n      return r;\n    };\n\n    var unique = function (xs, comparator) {\n      var result = [];\n      each(xs, function (x, i) {\n        if (i < xs.length - 1 && !comparator(x, xs[i + 1])) {\n          result.push(x);\n        } else if (i === xs.length - 1) {\n          result.push(x);\n        }\n      });\n      return result;\n    };\n\n    var deduce = function (xs, index) {\n      if (index < 0 || index >= xs.length - 1) return Option.none();\n      var current = xs[index].fold(function () {\n        var rest = reverse(xs.slice(0, index));\n        return findMap(rest, function (a, i) {\n          return a.map(function (aa) {\n            return {\n              value: aa,\n              delta: i + 1\n            };\n          });\n        });\n      }, function (c) {\n        return Option.some({\n          value: c,\n          delta: 0\n        });\n      });\n      var next = xs[index + 1].fold(function () {\n        var rest = xs.slice(index + 1);\n        return findMap(rest, function (a, i) {\n          return a.map(function (aa) {\n            return {\n              value: aa,\n              delta: i + 1\n            };\n          });\n        });\n      }, function (n) {\n        return Option.some({\n          value: n,\n          delta: 1\n        });\n      });\n      return current.bind(function (c) {\n        return next.map(function (n) {\n          var extras = n.delta + c.delta;\n          return Math.abs(n.value - c.value) / extras;\n        });\n      });\n    };\n\n    var $_95ie8gnzjnlpb3ci = {\n      repeat: repeat,\n      range: range$1,\n      unique: unique,\n      deduce: deduce\n    };\n\n    var columns = function (warehouse) {\n      var grid = warehouse.grid();\n      var cols = $_95ie8gnzjnlpb3ci.range(0, grid.columns());\n      var rows = $_95ie8gnzjnlpb3ci.range(0, grid.rows());\n      return map(cols, function (col) {\n        var getBlock = function () {\n          return bind(rows, function (r) {\n            return $_ein1yumajnlpb2y1.getAt(warehouse, r, col).filter(function (detail) {\n              return detail.column() === col;\n            }).fold(constant([]), function (detail) {\n              return [detail];\n            });\n          });\n        };\n\n        var isSingle = function (detail) {\n          return detail.colspan() === 1;\n        };\n\n        var getFallback = function () {\n          return $_ein1yumajnlpb2y1.getAt(warehouse, 0, col);\n        };\n\n        return decide(getBlock, isSingle, getFallback);\n      });\n    };\n\n    var decide = function (getBlock, isSingle, getFallback) {\n      var inBlock = getBlock();\n      var singleInBlock = find(inBlock, isSingle);\n      var detailOption = singleInBlock.orThunk(function () {\n        return Option.from(inBlock[0]).orThunk(getFallback);\n      });\n      return detailOption.map(function (detail) {\n        return detail.element();\n      });\n    };\n\n    var rows$1 = function (warehouse) {\n      var grid = warehouse.grid();\n      var rows = $_95ie8gnzjnlpb3ci.range(0, grid.rows());\n      var cols = $_95ie8gnzjnlpb3ci.range(0, grid.columns());\n      return map(rows, function (row) {\n        var getBlock = function () {\n          return bind(cols, function (c) {\n            return $_ein1yumajnlpb2y1.getAt(warehouse, row, c).filter(function (detail) {\n              return detail.row() === row;\n            }).fold(constant([]), function (detail) {\n              return [detail];\n            });\n          });\n        };\n\n        var isSingle = function (detail) {\n          return detail.rowspan() === 1;\n        };\n\n        var getFallback = function () {\n          return $_ein1yumajnlpb2y1.getAt(warehouse, row, 0);\n        };\n\n        return decide(getBlock, isSingle, getFallback);\n      });\n    };\n\n    var $_7erelxnyjnlpb3c4 = {\n      columns: columns,\n      rows: rows$1\n    };\n\n    var col = function (column, x, y, w, h) {\n      var blocker = Element$$1.fromTag('div');\n      $_g8mvdembjnlpb2ya.setAll(blocker, {\n        position: 'absolute',\n        left: x - w / 2 + 'px',\n        top: y + 'px',\n        height: h + 'px',\n        width: w + 'px'\n      });\n      $_9u6utvm2jnlpb2wv.setAll(blocker, {\n        'data-column': column,\n        'role': 'presentation'\n      });\n      return blocker;\n    };\n\n    var row$1 = function (row, x, y, w, h) {\n      var blocker = Element$$1.fromTag('div');\n      $_g8mvdembjnlpb2ya.setAll(blocker, {\n        position: 'absolute',\n        left: x + 'px',\n        top: y - h / 2 + 'px',\n        height: h + 'px',\n        width: w + 'px'\n      });\n      $_9u6utvm2jnlpb2wv.setAll(blocker, {\n        'data-row': row,\n        'role': 'presentation'\n      });\n      return blocker;\n    };\n\n    var $_4g9efto0jnlpb3cs = {\n      col: col,\n      row: row$1\n    };\n\n    var css = function (namespace) {\n      var dashNamespace = namespace.replace(/\\./g, '-');\n\n      var resolve = function (str) {\n        return dashNamespace + '-' + str;\n      };\n\n      return {\n        resolve: resolve\n      };\n    };\n\n    var styles = css('ephox-snooker');\n    var $_68goq0o1jnlpb3cz = {\n      resolve: styles.resolve\n    };\n\n    function Toggler(turnOff, turnOn, initial) {\n      var active = initial || false;\n\n      var on = function () {\n        turnOn();\n        active = true;\n      };\n\n      var off = function () {\n        turnOff();\n        active = false;\n      };\n\n      var toggle = function () {\n        var f = active ? off : on;\n        f();\n      };\n\n      var isOn = function () {\n        return active;\n      };\n\n      return {\n        on: on,\n        off: off,\n        toggle: toggle,\n        isOn: isOn\n      };\n    }\n\n    var read = function (element, attr) {\n      var value = $_9u6utvm2jnlpb2wv.get(element, attr);\n      return value === undefined || value === '' ? [] : value.split(' ');\n    };\n\n    var add = function (element, attr, id) {\n      var old = read(element, attr);\n      var nu = old.concat([id]);\n      $_9u6utvm2jnlpb2wv.set(element, attr, nu.join(' '));\n      return true;\n    };\n\n    var remove$3 = function (element, attr, id) {\n      var nu = filter(read(element, attr), function (v) {\n        return v !== id;\n      });\n      if (nu.length > 0) $_9u6utvm2jnlpb2wv.set(element, attr, nu.join(' '));else $_9u6utvm2jnlpb2wv.remove(element, attr);\n      return false;\n    };\n\n    var $_e2xnpfo6jnlpb3df = {\n      read: read,\n      add: add,\n      remove: remove$3\n    };\n\n    var supports = function (element) {\n      return element.dom().classList !== undefined;\n    };\n\n    var get$7 = function (element) {\n      return $_e2xnpfo6jnlpb3df.read(element, 'class');\n    };\n\n    var add$1 = function (element, clazz) {\n      return $_e2xnpfo6jnlpb3df.add(element, 'class', clazz);\n    };\n\n    var remove$4 = function (element, clazz) {\n      return $_e2xnpfo6jnlpb3df.remove(element, 'class', clazz);\n    };\n\n    var toggle = function (element, clazz) {\n      if (contains(get$7(element), clazz)) {\n        return remove$4(element, clazz);\n      } else {\n        return add$1(element, clazz);\n      }\n    };\n\n    var $_apsphgo5jnlpb3dc = {\n      get: get$7,\n      add: add$1,\n      remove: remove$4,\n      toggle: toggle,\n      supports: supports\n    };\n\n    var add$2 = function (element, clazz) {\n      if ($_apsphgo5jnlpb3dc.supports(element)) element.dom().classList.add(clazz);else $_apsphgo5jnlpb3dc.add(element, clazz);\n    };\n\n    var cleanClass = function (element) {\n      var classList = $_apsphgo5jnlpb3dc.supports(element) ? element.dom().classList : $_apsphgo5jnlpb3dc.get(element);\n\n      if (classList.length === 0) {\n        $_9u6utvm2jnlpb2wv.remove(element, 'class');\n      }\n    };\n\n    var remove$5 = function (element, clazz) {\n      if ($_apsphgo5jnlpb3dc.supports(element)) {\n        var classList = element.dom().classList;\n        classList.remove(clazz);\n      } else $_apsphgo5jnlpb3dc.remove(element, clazz);\n\n      cleanClass(element);\n    };\n\n    var toggle$1 = function (element, clazz) {\n      return $_apsphgo5jnlpb3dc.supports(element) ? element.dom().classList.toggle(clazz) : $_apsphgo5jnlpb3dc.toggle(element, clazz);\n    };\n\n    var toggler = function (element, clazz) {\n      var hasClasslist = $_apsphgo5jnlpb3dc.supports(element);\n      var classList = element.dom().classList;\n\n      var off = function () {\n        if (hasClasslist) classList.remove(clazz);else $_apsphgo5jnlpb3dc.remove(element, clazz);\n      };\n\n      var on = function () {\n        if (hasClasslist) classList.add(clazz);else $_apsphgo5jnlpb3dc.add(element, clazz);\n      };\n\n      return Toggler(off, on, has$2(element, clazz));\n    };\n\n    var has$2 = function (element, clazz) {\n      return $_apsphgo5jnlpb3dc.supports(element) && element.dom().classList.contains(clazz);\n    };\n\n    var $_fy8l6zo3jnlpb3d8 = {\n      add: add$2,\n      remove: remove$5,\n      toggle: toggle$1,\n      toggler: toggler,\n      has: has$2\n    };\n    var resizeBar = $_68goq0o1jnlpb3cz.resolve('resizer-bar');\n    var resizeRowBar = $_68goq0o1jnlpb3cz.resolve('resizer-rows');\n    var resizeColBar = $_68goq0o1jnlpb3cz.resolve('resizer-cols');\n    var BAR_THICKNESS = 7;\n\n    var clear = function (wire) {\n      var previous = $_97aehqm4jnlpb2x5.descendants(wire.parent(), '.' + resizeBar);\n      each(previous, $_cybn8qmejnlpb2yr.remove);\n    };\n\n    var drawBar = function (wire, positions, create) {\n      var origin = wire.origin();\n      each(positions, function (cpOption, i) {\n        cpOption.each(function (cp) {\n          var bar = create(origin, cp);\n          $_fy8l6zo3jnlpb3d8.add(bar, resizeBar);\n          $_5hzj77mdjnlpb2yp.append(wire.parent(), bar);\n        });\n      });\n    };\n\n    var refreshCol = function (wire, colPositions, position, tableHeight) {\n      drawBar(wire, colPositions, function (origin, cp) {\n        var colBar = $_4g9efto0jnlpb3cs.col(cp.col(), cp.x() - origin.left(), position.top() - origin.top(), BAR_THICKNESS, tableHeight);\n        $_fy8l6zo3jnlpb3d8.add(colBar, resizeColBar);\n        return colBar;\n      });\n    };\n\n    var refreshRow = function (wire, rowPositions, position, tableWidth) {\n      drawBar(wire, rowPositions, function (origin, cp) {\n        var rowBar = $_4g9efto0jnlpb3cs.row(cp.row(), position.left() - origin.left(), cp.y() - origin.top(), tableWidth, BAR_THICKNESS);\n        $_fy8l6zo3jnlpb3d8.add(rowBar, resizeRowBar);\n        return rowBar;\n      });\n    };\n\n    var refreshGrid = function (wire, table, rows, cols, hdirection, vdirection) {\n      var position = $_2ipv1snfjnlpb37b.absolute(table);\n      var rowPositions = rows.length > 0 ? hdirection.positions(rows, table) : [];\n      refreshRow(wire, rowPositions, position, $_2s7b62nbjnlpb36o.getOuter(table));\n      var colPositions = cols.length > 0 ? vdirection.positions(cols, table) : [];\n      refreshCol(wire, colPositions, position, $_6kvman9jnlpb36h.getOuter(table));\n    };\n\n    var refresh = function (wire, table, hdirection, vdirection) {\n      clear(wire);\n      var list = $_g8jea2lbjnlpb2sm.fromTable(table);\n      var warehouse = $_ein1yumajnlpb2y1.generate(list);\n      var rows = $_7erelxnyjnlpb3c4.rows(warehouse);\n      var cols = $_7erelxnyjnlpb3c4.columns(warehouse);\n      refreshGrid(wire, table, rows, cols, hdirection, vdirection);\n    };\n\n    var each$2 = function (wire, f) {\n      var bars = $_97aehqm4jnlpb2x5.descendants(wire.parent(), '.' + resizeBar);\n      each(bars, f);\n    };\n\n    var hide = function (wire) {\n      each$2(wire, function (bar) {\n        $_g8mvdembjnlpb2ya.set(bar, 'display', 'none');\n      });\n    };\n\n    var show = function (wire) {\n      each$2(wire, function (bar) {\n        $_g8mvdembjnlpb2ya.set(bar, 'display', 'block');\n      });\n    };\n\n    var isRowBar = function (element) {\n      return $_fy8l6zo3jnlpb3d8.has(element, resizeRowBar);\n    };\n\n    var isColBar = function (element) {\n      return $_fy8l6zo3jnlpb3d8.has(element, resizeColBar);\n    };\n\n    var $_cr2z98nxjnlpb3bk = {\n      refresh: refresh,\n      hide: hide,\n      show: show,\n      destroy: clear,\n      isRowBar: isRowBar,\n      isColBar: isColBar\n    };\n\n    var fromWarehouse = function (warehouse, generators) {\n      return $_83n6k9ntjnlpb3ai.toGrid(warehouse, generators, false);\n    };\n\n    var deriveRows = function (rendered, generators) {\n      var findRow = function (details) {\n        var rowOfCells = findMap(details, function (detail) {\n          return $_2pl1nljjnlpb2ur.parent(detail.element()).map(function (row) {\n            var isNew = $_2pl1nljjnlpb2ur.parent(row).isNone();\n            return $_csuubelcjnlpb2sv.elementnew(row, isNew);\n          });\n        });\n        return rowOfCells.getOrThunk(function () {\n          return $_csuubelcjnlpb2sv.elementnew(generators.row(), true);\n        });\n      };\n\n      return map(rendered, function (details) {\n        var row = findRow(details.details());\n        return $_csuubelcjnlpb2sv.rowdatanew(row.element(), details.details(), details.section(), row.isNew());\n      });\n    };\n\n    var toDetailList = function (grid, generators) {\n      var rendered = $_83n6k9ntjnlpb3ai.toDetails(grid, $_3k22killjnlpb2vb.eq);\n      return deriveRows(rendered, generators);\n    };\n\n    var findInWarehouse = function (warehouse, element) {\n      var all = flatten(map(warehouse.all(), function (r) {\n        return r.cells();\n      }));\n      return find(all, function (e) {\n        return $_3k22killjnlpb2vb.eq(element, e.element());\n      });\n    };\n\n    var run = function (operation, extract, adjustment, postAction, genWrappers) {\n      return function (wire, table, target, generators, direction) {\n        var input = $_g8jea2lbjnlpb2sm.fromTable(table);\n        var warehouse = $_ein1yumajnlpb2y1.generate(input);\n        var output = extract(warehouse, target).map(function (info) {\n          var model = fromWarehouse(warehouse, generators);\n          var result = operation(model, info, $_3k22killjnlpb2vb.eq, genWrappers(generators));\n          var grid = toDetailList(result.grid(), generators);\n          return {\n            grid: constant(grid),\n            cursor: result.cursor\n          };\n        });\n        return output.fold(function () {\n          return Option.none();\n        }, function (out) {\n          var newElements = $_ekkk7tnwjnlpb3ax.render(table, out.grid());\n          adjustment(table, out.grid(), direction);\n          postAction(table);\n          $_cr2z98nxjnlpb3bk.refresh(wire, table, $_6u52cqnejnlpb36x.height, direction);\n          return Option.some({\n            cursor: out.cursor,\n            newRows: newElements.newRows,\n            newCells: newElements.newCells\n          });\n        });\n      };\n    };\n\n    var onCell = function (warehouse, target) {\n      return $_em4z2mldjnlpb2sz.cell(target.element()).bind(function (cell) {\n        return findInWarehouse(warehouse, cell);\n      });\n    };\n\n    var onPaste = function (warehouse, target) {\n      return $_em4z2mldjnlpb2sz.cell(target.element()).bind(function (cell) {\n        return findInWarehouse(warehouse, cell).map(function (details) {\n          return merge$1(details, {\n            generators: target.generators,\n            clipboard: target.clipboard\n          });\n        });\n      });\n    };\n\n    var onPasteRows = function (warehouse, target) {\n      var details = map(target.selection(), function (cell) {\n        return $_em4z2mldjnlpb2sz.cell(cell).bind(function (lc) {\n          return findInWarehouse(warehouse, lc);\n        });\n      });\n      var cells = cat(details);\n      return cells.length > 0 ? Option.some(merge$1({\n        cells: cells\n      }, {\n        generators: target.generators,\n        clipboard: target.clipboard\n      })) : Option.none();\n    };\n\n    var onMergable = function (warehouse, target) {\n      return target.mergable();\n    };\n\n    var onUnmergable = function (warehouse, target) {\n      return target.unmergable();\n    };\n\n    var onCells = function (warehouse, target) {\n      var details = map(target.selection(), function (cell) {\n        return $_em4z2mldjnlpb2sz.cell(cell).bind(function (lc) {\n          return findInWarehouse(warehouse, lc);\n        });\n      });\n      var cells = cat(details);\n      return cells.length > 0 ? Option.some(cells) : Option.none();\n    };\n\n    var $_dkrxmunqjnlpb39s = {\n      run: run,\n      toDetailList: toDetailList,\n      onCell: onCell,\n      onCells: onCells,\n      onPaste: onPaste,\n      onPasteRows: onPasteRows,\n      onMergable: onMergable,\n      onUnmergable: onUnmergable\n    };\n\n    var value$1 = function (o) {\n      var is = function (v) {\n        return o === v;\n      };\n\n      var or = function (opt) {\n        return value$1(o);\n      };\n\n      var orThunk = function (f) {\n        return value$1(o);\n      };\n\n      var map = function (f) {\n        return value$1(f(o));\n      };\n\n      var each = function (f) {\n        f(o);\n      };\n\n      var bind = function (f) {\n        return f(o);\n      };\n\n      var fold = function (_, onValue) {\n        return onValue(o);\n      };\n\n      var exists = function (f) {\n        return f(o);\n      };\n\n      var forall = function (f) {\n        return f(o);\n      };\n\n      var toOption = function () {\n        return Option.some(o);\n      };\n\n      return {\n        is: is,\n        isValue: always,\n        isError: never,\n        getOr: constant(o),\n        getOrThunk: constant(o),\n        getOrDie: constant(o),\n        or: or,\n        orThunk: orThunk,\n        fold: fold,\n        map: map,\n        each: each,\n        bind: bind,\n        exists: exists,\n        forall: forall,\n        toOption: toOption\n      };\n    };\n\n    var error = function (message) {\n      var getOrThunk = function (f) {\n        return f();\n      };\n\n      var getOrDie = function () {\n        return die(String(message))();\n      };\n\n      var or = function (opt) {\n        return opt;\n      };\n\n      var orThunk = function (f) {\n        return f();\n      };\n\n      var map = function (f) {\n        return error(message);\n      };\n\n      var bind = function (f) {\n        return error(message);\n      };\n\n      var fold = function (onError, _) {\n        return onError(message);\n      };\n\n      return {\n        is: never,\n        isValue: never,\n        isError: always,\n        getOr: identity,\n        getOrThunk: getOrThunk,\n        getOrDie: getOrDie,\n        or: or,\n        orThunk: orThunk,\n        fold: fold,\n        map: map,\n        each: noop,\n        bind: bind,\n        exists: never,\n        forall: always,\n        toOption: Option.none\n      };\n    };\n\n    var Result = {\n      value: value$1,\n      error: error\n    };\n\n    var measure = function (startAddress, gridA, gridB) {\n      if (startAddress.row() >= gridA.length || startAddress.column() > $_avmeb4nvjnlpb3at.cellLength(gridA[0])) return Result.error('invalid start address out of table bounds, row: ' + startAddress.row() + ', column: ' + startAddress.column());\n      var rowRemainder = gridA.slice(startAddress.row());\n      var colRemainder = rowRemainder[0].cells().slice(startAddress.column());\n      var colRequired = $_avmeb4nvjnlpb3at.cellLength(gridB[0]);\n      var rowRequired = gridB.length;\n      return Result.value({\n        rowDelta: constant(rowRemainder.length - rowRequired),\n        colDelta: constant(colRemainder.length - colRequired)\n      });\n    };\n\n    var measureWidth = function (gridA, gridB) {\n      var colLengthA = $_avmeb4nvjnlpb3at.cellLength(gridA[0]);\n      var colLengthB = $_avmeb4nvjnlpb3at.cellLength(gridB[0]);\n      return {\n        rowDelta: constant(0),\n        colDelta: constant(colLengthA - colLengthB)\n      };\n    };\n\n    var fill = function (cells, generator) {\n      return map(cells, function () {\n        return $_csuubelcjnlpb2sv.elementnew(generator.cell(), true);\n      });\n    };\n\n    var rowFill = function (grid, amount, generator) {\n      return grid.concat($_95ie8gnzjnlpb3ci.repeat(amount, function (_row) {\n        return $_avmeb4nvjnlpb3at.setCells(grid[grid.length - 1], fill(grid[grid.length - 1].cells(), generator));\n      }));\n    };\n\n    var colFill = function (grid, amount, generator) {\n      return map(grid, function (row) {\n        return $_avmeb4nvjnlpb3at.setCells(row, row.cells().concat(fill($_95ie8gnzjnlpb3ci.range(0, amount), generator)));\n      });\n    };\n\n    var tailor = function (gridA, delta, generator) {\n      var fillCols = delta.colDelta() < 0 ? colFill : identity;\n      var fillRows = delta.rowDelta() < 0 ? rowFill : identity;\n      var modifiedCols = fillCols(gridA, Math.abs(delta.colDelta()), generator);\n      var tailoredGrid = fillRows(modifiedCols, Math.abs(delta.rowDelta()), generator);\n      return tailoredGrid;\n    };\n\n    var $_1s1cajo8jnlpb3do = {\n      measure: measure,\n      measureWidth: measureWidth,\n      tailor: tailor\n    };\n\n    var merge$2 = function (grid, bounds, comparator, substitution) {\n      if (grid.length === 0) return grid;\n\n      for (var i = bounds.startRow(); i <= bounds.finishRow(); i++) {\n        for (var j = bounds.startCol(); j <= bounds.finishCol(); j++) {\n          $_avmeb4nvjnlpb3at.mutateCell(grid[i], j, $_csuubelcjnlpb2sv.elementnew(substitution(), false));\n        }\n      }\n\n      return grid;\n    };\n\n    var unmerge = function (grid, target, comparator, substitution) {\n      var first = true;\n\n      for (var i = 0; i < grid.length; i++) {\n        for (var j = 0; j < $_avmeb4nvjnlpb3at.cellLength(grid[0]); j++) {\n          var current = $_avmeb4nvjnlpb3at.getCellElement(grid[i], j);\n          var isToReplace = comparator(current, target);\n\n          if (isToReplace === true && first === false) {\n            $_avmeb4nvjnlpb3at.mutateCell(grid[i], j, $_csuubelcjnlpb2sv.elementnew(substitution(), true));\n          } else if (isToReplace === true) {\n            first = false;\n          }\n        }\n      }\n\n      return grid;\n    };\n\n    var uniqueCells = function (row, comparator) {\n      return foldl(row, function (rest, cell) {\n        return exists(rest, function (currentCell) {\n          return comparator(currentCell.element(), cell.element());\n        }) ? rest : rest.concat([cell]);\n      }, []);\n    };\n\n    var splitRows = function (grid, index, comparator, substitution) {\n      if (index > 0 && index < grid.length) {\n        var rowPrevCells = grid[index - 1].cells();\n        var cells = uniqueCells(rowPrevCells, comparator);\n        each(cells, function (cell) {\n          var replacement = Option.none();\n\n          for (var i = index; i < grid.length; i++) {\n            for (var j = 0; j < $_avmeb4nvjnlpb3at.cellLength(grid[0]); j++) {\n              var current = grid[i].cells()[j];\n              var isToReplace = comparator(current.element(), cell.element());\n\n              if (isToReplace) {\n                if (replacement.isNone()) {\n                  replacement = Option.some(substitution());\n                }\n\n                replacement.each(function (sub) {\n                  $_avmeb4nvjnlpb3at.mutateCell(grid[i], j, $_csuubelcjnlpb2sv.elementnew(sub, true));\n                });\n              }\n            }\n          }\n        });\n      }\n\n      return grid;\n    };\n\n    var $_dod35voajnlpb3e0 = {\n      merge: merge$2,\n      unmerge: unmerge,\n      splitRows: splitRows\n    };\n\n    var isSpanning = function (grid, row, col, comparator) {\n      var candidate = $_avmeb4nvjnlpb3at.getCell(grid[row], col);\n      var matching = curry(comparator, candidate.element());\n      var currentRow = grid[row];\n      return grid.length > 1 && $_avmeb4nvjnlpb3at.cellLength(currentRow) > 1 && (col > 0 && matching($_avmeb4nvjnlpb3at.getCellElement(currentRow, col - 1)) || col < currentRow.length - 1 && matching($_avmeb4nvjnlpb3at.getCellElement(currentRow, col + 1)) || row > 0 && matching($_avmeb4nvjnlpb3at.getCellElement(grid[row - 1], col)) || row < grid.length - 1 && matching($_avmeb4nvjnlpb3at.getCellElement(grid[row + 1], col)));\n    };\n\n    var mergeTables = function (startAddress, gridA, gridB, generator, comparator) {\n      var startRow = startAddress.row();\n      var startCol = startAddress.column();\n      var mergeHeight = gridB.length;\n      var mergeWidth = $_avmeb4nvjnlpb3at.cellLength(gridB[0]);\n      var endRow = startRow + mergeHeight;\n      var endCol = startCol + mergeWidth;\n\n      for (var r = startRow; r < endRow; r++) {\n        for (var c = startCol; c < endCol; c++) {\n          if (isSpanning(gridA, r, c, comparator)) {\n            $_dod35voajnlpb3e0.unmerge(gridA, $_avmeb4nvjnlpb3at.getCellElement(gridA[r], c), comparator, generator.cell);\n          }\n\n          var newCell = $_avmeb4nvjnlpb3at.getCellElement(gridB[r - startRow], c - startCol);\n          var replacement = generator.replace(newCell);\n          $_avmeb4nvjnlpb3at.mutateCell(gridA[r], c, $_csuubelcjnlpb2sv.elementnew(replacement, true));\n        }\n      }\n\n      return gridA;\n    };\n\n    var merge$3 = function (startAddress, gridA, gridB, generator, comparator) {\n      var result = $_1s1cajo8jnlpb3do.measure(startAddress, gridA, gridB);\n      return result.map(function (delta) {\n        var fittedGrid = $_1s1cajo8jnlpb3do.tailor(gridA, delta, generator);\n        return mergeTables(startAddress, fittedGrid, gridB, generator, comparator);\n      });\n    };\n\n    var insert = function (index, gridA, gridB, generator, comparator) {\n      $_dod35voajnlpb3e0.splitRows(gridA, index, comparator, generator.cell);\n      var delta = $_1s1cajo8jnlpb3do.measureWidth(gridB, gridA);\n      var fittedNewGrid = $_1s1cajo8jnlpb3do.tailor(gridB, delta, generator);\n      var secondDelta = $_1s1cajo8jnlpb3do.measureWidth(gridA, fittedNewGrid);\n      var fittedOldGrid = $_1s1cajo8jnlpb3do.tailor(gridA, secondDelta, generator);\n      return fittedOldGrid.slice(0, index).concat(fittedNewGrid).concat(fittedOldGrid.slice(index, fittedOldGrid.length));\n    };\n\n    var $_iqv78o7jnlpb3dj = {\n      merge: merge$3,\n      insert: insert\n    };\n\n    var insertRowAt = function (grid, index, example, comparator, substitution) {\n      var before = grid.slice(0, index);\n      var after = grid.slice(index);\n      var between = $_avmeb4nvjnlpb3at.mapCells(grid[example], function (ex, c) {\n        var withinSpan = index > 0 && index < grid.length && comparator($_avmeb4nvjnlpb3at.getCellElement(grid[index - 1], c), $_avmeb4nvjnlpb3at.getCellElement(grid[index], c));\n        var ret = withinSpan ? $_avmeb4nvjnlpb3at.getCell(grid[index], c) : $_csuubelcjnlpb2sv.elementnew(substitution(ex.element(), comparator), true);\n        return ret;\n      });\n      return before.concat([between]).concat(after);\n    };\n\n    var insertColumnAt = function (grid, index, example, comparator, substitution) {\n      return map(grid, function (row) {\n        var withinSpan = index > 0 && index < $_avmeb4nvjnlpb3at.cellLength(row) && comparator($_avmeb4nvjnlpb3at.getCellElement(row, index - 1), $_avmeb4nvjnlpb3at.getCellElement(row, index));\n        var sub = withinSpan ? $_avmeb4nvjnlpb3at.getCell(row, index) : $_csuubelcjnlpb2sv.elementnew(substitution($_avmeb4nvjnlpb3at.getCellElement(row, example), comparator), true);\n        return $_avmeb4nvjnlpb3at.addCell(row, index, sub);\n      });\n    };\n\n    var splitCellIntoColumns = function (grid, exampleRow, exampleCol, comparator, substitution) {\n      var index = exampleCol + 1;\n      return map(grid, function (row, i) {\n        var isTargetCell = i === exampleRow;\n        var sub = isTargetCell ? $_csuubelcjnlpb2sv.elementnew(substitution($_avmeb4nvjnlpb3at.getCellElement(row, exampleCol), comparator), true) : $_avmeb4nvjnlpb3at.getCell(row, exampleCol);\n        return $_avmeb4nvjnlpb3at.addCell(row, index, sub);\n      });\n    };\n\n    var splitCellIntoRows = function (grid, exampleRow, exampleCol, comparator, substitution) {\n      var index = exampleRow + 1;\n      var before = grid.slice(0, index);\n      var after = grid.slice(index);\n      var between = $_avmeb4nvjnlpb3at.mapCells(grid[exampleRow], function (ex, i) {\n        var isTargetCell = i === exampleCol;\n        return isTargetCell ? $_csuubelcjnlpb2sv.elementnew(substitution(ex.element(), comparator), true) : ex;\n      });\n      return before.concat([between]).concat(after);\n    };\n\n    var deleteColumnsAt = function (grid, start, finish) {\n      var rows = map(grid, function (row) {\n        var cells = row.cells().slice(0, start).concat(row.cells().slice(finish + 1));\n        return $_csuubelcjnlpb2sv.rowcells(cells, row.section());\n      });\n      return filter(rows, function (row) {\n        return row.cells().length > 0;\n      });\n    };\n\n    var deleteRowsAt = function (grid, start, finish) {\n      return grid.slice(0, start).concat(grid.slice(finish + 1));\n    };\n\n    var $_8e5qwrobjnlpb3e8 = {\n      insertRowAt: insertRowAt,\n      insertColumnAt: insertColumnAt,\n      splitCellIntoColumns: splitCellIntoColumns,\n      splitCellIntoRows: splitCellIntoRows,\n      deleteRowsAt: deleteRowsAt,\n      deleteColumnsAt: deleteColumnsAt\n    };\n\n    var replaceIn = function (grid, targets, comparator, substitution) {\n      var isTarget = function (cell) {\n        return exists(targets, function (target) {\n          return comparator(cell.element(), target.element());\n        });\n      };\n\n      return map(grid, function (row) {\n        return $_avmeb4nvjnlpb3at.mapCells(row, function (cell) {\n          return isTarget(cell) ? $_csuubelcjnlpb2sv.elementnew(substitution(cell.element(), comparator), true) : cell;\n        });\n      });\n    };\n\n    var notStartRow = function (grid, rowIndex, colIndex, comparator) {\n      return $_avmeb4nvjnlpb3at.getCellElement(grid[rowIndex], colIndex) !== undefined && rowIndex > 0 && comparator($_avmeb4nvjnlpb3at.getCellElement(grid[rowIndex - 1], colIndex), $_avmeb4nvjnlpb3at.getCellElement(grid[rowIndex], colIndex));\n    };\n\n    var notStartColumn = function (row, index, comparator) {\n      return index > 0 && comparator($_avmeb4nvjnlpb3at.getCellElement(row, index - 1), $_avmeb4nvjnlpb3at.getCellElement(row, index));\n    };\n\n    var replaceColumn = function (grid, index, comparator, substitution) {\n      var targets = bind(grid, function (row, i) {\n        var alreadyAdded = notStartRow(grid, i, index, comparator) || notStartColumn(row, index, comparator);\n        return alreadyAdded ? [] : [$_avmeb4nvjnlpb3at.getCell(row, index)];\n      });\n      return replaceIn(grid, targets, comparator, substitution);\n    };\n\n    var replaceRow = function (grid, index, comparator, substitution) {\n      var targetRow = grid[index];\n      var targets = bind(targetRow.cells(), function (item, i) {\n        var alreadyAdded = notStartRow(grid, index, i, comparator) || notStartColumn(targetRow, i, comparator);\n        return alreadyAdded ? [] : [item];\n      });\n      return replaceIn(grid, targets, comparator, substitution);\n    };\n\n    var $_69d1pfocjnlpb3ei = {\n      replaceColumn: replaceColumn,\n      replaceRow: replaceRow\n    };\n\n    var none$1 = function () {\n      return folder(function (n, o, l, m, r) {\n        return n();\n      });\n    };\n\n    var only = function (index) {\n      return folder(function (n, o, l, m, r) {\n        return o(index);\n      });\n    };\n\n    var left = function (index, next) {\n      return folder(function (n, o, l, m, r) {\n        return l(index, next);\n      });\n    };\n\n    var middle = function (prev, index, next) {\n      return folder(function (n, o, l, m, r) {\n        return m(prev, index, next);\n      });\n    };\n\n    var right = function (prev, index) {\n      return folder(function (n, o, l, m, r) {\n        return r(prev, index);\n      });\n    };\n\n    var folder = function (fold) {\n      return {\n        fold: fold\n      };\n    };\n\n    var $_4ks4roofjnlpb3ex = {\n      none: none$1,\n      only: only,\n      left: left,\n      middle: middle,\n      right: right\n    };\n\n    var neighbours$1 = function (input, index) {\n      if (input.length === 0) return $_4ks4roofjnlpb3ex.none();\n      if (input.length === 1) return $_4ks4roofjnlpb3ex.only(0);\n      if (index === 0) return $_4ks4roofjnlpb3ex.left(0, 1);\n      if (index === input.length - 1) return $_4ks4roofjnlpb3ex.right(index - 1, index);\n      if (index > 0 && index < input.length - 1) return $_4ks4roofjnlpb3ex.middle(index - 1, index, index + 1);\n      return $_4ks4roofjnlpb3ex.none();\n    };\n\n    var determine = function (input, column, step, tableSize) {\n      var result = input.slice(0);\n      var context = neighbours$1(input, column);\n\n      var zero = function (array) {\n        return map(array, constant(0));\n      };\n\n      var onNone = constant(zero(result));\n\n      var onOnly = function (index) {\n        return tableSize.singleColumnWidth(result[index], step);\n      };\n\n      var onChange = function (index, next) {\n        if (step >= 0) {\n          var newNext = Math.max(tableSize.minCellWidth(), result[next] - step);\n          return zero(result.slice(0, index)).concat([step, newNext - result[next]]).concat(zero(result.slice(next + 1)));\n        } else {\n          var newThis = Math.max(tableSize.minCellWidth(), result[index] + step);\n          var diffx = result[index] - newThis;\n          return zero(result.slice(0, index)).concat([newThis - result[index], diffx]).concat(zero(result.slice(next + 1)));\n        }\n      };\n\n      var onLeft = onChange;\n\n      var onMiddle = function (prev, index, next) {\n        return onChange(index, next);\n      };\n\n      var onRight = function (prev, index) {\n        if (step >= 0) {\n          return zero(result.slice(0, index)).concat([step]);\n        } else {\n          var size = Math.max(tableSize.minCellWidth(), result[index] + step);\n          return zero(result.slice(0, index)).concat([size - result[index]]);\n        }\n      };\n\n      return context.fold(onNone, onOnly, onLeft, onMiddle, onRight);\n    };\n\n    var $_dns8meoejnlpb3er = {\n      determine: determine\n    };\n\n    var getSpan$1 = function (cell, type) {\n      return $_9u6utvm2jnlpb2wv.has(cell, type) && parseInt($_9u6utvm2jnlpb2wv.get(cell, type), 10) > 1;\n    };\n\n    var hasColspan = function (cell) {\n      return getSpan$1(cell, 'colspan');\n    };\n\n    var hasRowspan = function (cell) {\n      return getSpan$1(cell, 'rowspan');\n    };\n\n    var getInt = function (element, property) {\n      return parseInt($_g8mvdembjnlpb2ya.get(element, property), 10);\n    };\n\n    var $_eoi5lkohjnlpb3f8 = {\n      hasColspan: hasColspan,\n      hasRowspan: hasRowspan,\n      minWidth: constant(10),\n      minHeight: constant(10),\n      getInt: getInt\n    };\n\n    var getRaw$1 = function (cell, property, getter) {\n      return $_g8mvdembjnlpb2ya.getRaw(cell, property).fold(function () {\n        return getter(cell) + 'px';\n      }, function (raw) {\n        return raw;\n      });\n    };\n\n    var getRawW = function (cell) {\n      return getRaw$1(cell, 'width', $_8c9k1dn7jnlpb35o.getPixelWidth);\n    };\n\n    var getRawH = function (cell) {\n      return getRaw$1(cell, 'height', $_8c9k1dn7jnlpb35o.getHeight);\n    };\n\n    var getWidthFrom = function (warehouse, direction, getWidth, fallback, tableSize) {\n      var columns = $_7erelxnyjnlpb3c4.columns(warehouse);\n      var backups = map(columns, function (cellOption) {\n        return cellOption.map(direction.edge);\n      });\n      return map(columns, function (cellOption, c) {\n        var columnCell = cellOption.filter(not($_eoi5lkohjnlpb3f8.hasColspan));\n        return columnCell.fold(function () {\n          var deduced = $_95ie8gnzjnlpb3ci.deduce(backups, c);\n          return fallback(deduced);\n        }, function (cell) {\n          return getWidth(cell, tableSize);\n        });\n      });\n    };\n\n    var getDeduced = function (deduced) {\n      return deduced.map(function (d) {\n        return d + 'px';\n      }).getOr('');\n    };\n\n    var getRawWidths = function (warehouse, direction) {\n      return getWidthFrom(warehouse, direction, getRawW, getDeduced);\n    };\n\n    var getPercentageWidths = function (warehouse, direction, tableSize) {\n      return getWidthFrom(warehouse, direction, $_8c9k1dn7jnlpb35o.getPercentageWidth, function (deduced) {\n        return deduced.fold(function () {\n          return tableSize.minCellWidth();\n        }, function (cellWidth) {\n          return cellWidth / tableSize.pixelWidth() * 100;\n        });\n      }, tableSize);\n    };\n\n    var getPixelWidths = function (warehouse, direction, tableSize) {\n      return getWidthFrom(warehouse, direction, $_8c9k1dn7jnlpb35o.getPixelWidth, function (deduced) {\n        return deduced.getOrThunk(tableSize.minCellWidth);\n      }, tableSize);\n    };\n\n    var getHeightFrom = function (warehouse, direction, getHeight, fallback) {\n      var rows = $_7erelxnyjnlpb3c4.rows(warehouse);\n      var backups = map(rows, function (cellOption) {\n        return cellOption.map(direction.edge);\n      });\n      return map(rows, function (cellOption, c) {\n        var rowCell = cellOption.filter(not($_eoi5lkohjnlpb3f8.hasRowspan));\n        return rowCell.fold(function () {\n          var deduced = $_95ie8gnzjnlpb3ci.deduce(backups, c);\n          return fallback(deduced);\n        }, function (cell) {\n          return getHeight(cell);\n        });\n      });\n    };\n\n    var getPixelHeights = function (warehouse, direction) {\n      return getHeightFrom(warehouse, direction, $_8c9k1dn7jnlpb35o.getHeight, function (deduced) {\n        return deduced.getOrThunk($_eoi5lkohjnlpb3f8.minHeight);\n      });\n    };\n\n    var getRawHeights = function (warehouse, direction) {\n      return getHeightFrom(warehouse, direction, getRawH, getDeduced);\n    };\n\n    var $_g1addgogjnlpb3ez = {\n      getRawWidths: getRawWidths,\n      getPixelWidths: getPixelWidths,\n      getPercentageWidths: getPercentageWidths,\n      getPixelHeights: getPixelHeights,\n      getRawHeights: getRawHeights\n    };\n\n    var total = function (start, end, measures) {\n      var r = 0;\n\n      for (var i = start; i < end; i++) {\n        r += measures[i] !== undefined ? measures[i] : 0;\n      }\n\n      return r;\n    };\n\n    var recalculateWidth = function (warehouse, widths) {\n      var all = $_ein1yumajnlpb2y1.justCells(warehouse);\n      return map(all, function (cell) {\n        var width = total(cell.column(), cell.column() + cell.colspan(), widths);\n        return {\n          element: cell.element,\n          width: constant(width),\n          colspan: cell.colspan\n        };\n      });\n    };\n\n    var recalculateHeight = function (warehouse, heights) {\n      var all = $_ein1yumajnlpb2y1.justCells(warehouse);\n      return map(all, function (cell) {\n        var height = total(cell.row(), cell.row() + cell.rowspan(), heights);\n        return {\n          element: cell.element,\n          height: constant(height),\n          rowspan: cell.rowspan\n        };\n      });\n    };\n\n    var matchRowHeight = function (warehouse, heights) {\n      return map(warehouse.all(), function (row, i) {\n        return {\n          element: row.element,\n          height: constant(heights[i])\n        };\n      });\n    };\n\n    var $_ew57pqoijnlpb3fg = {\n      recalculateWidth: recalculateWidth,\n      recalculateHeight: recalculateHeight,\n      matchRowHeight: matchRowHeight\n    };\n\n    var percentageSize = function (width, element) {\n      var floatWidth = parseFloat(width);\n      var pixelWidth = $_2s7b62nbjnlpb36o.get(element);\n\n      var getCellDelta = function (delta) {\n        return delta / pixelWidth * 100;\n      };\n\n      var singleColumnWidth = function (width, _delta) {\n        return [100 - width];\n      };\n\n      var minCellWidth = function () {\n        return $_eoi5lkohjnlpb3f8.minWidth() / pixelWidth * 100;\n      };\n\n      var setTableWidth = function (table, _newWidths, delta) {\n        var total = floatWidth + delta;\n        $_8c9k1dn7jnlpb35o.setPercentageWidth(table, total);\n      };\n\n      return {\n        width: constant(floatWidth),\n        pixelWidth: constant(pixelWidth),\n        getWidths: $_g1addgogjnlpb3ez.getPercentageWidths,\n        getCellDelta: getCellDelta,\n        singleColumnWidth: singleColumnWidth,\n        minCellWidth: minCellWidth,\n        setElementWidth: $_8c9k1dn7jnlpb35o.setPercentageWidth,\n        setTableWidth: setTableWidth\n      };\n    };\n\n    var pixelSize = function (width) {\n      var intWidth = parseInt(width, 10);\n      var getCellDelta = identity;\n\n      var singleColumnWidth = function (width, delta) {\n        var newNext = Math.max($_eoi5lkohjnlpb3f8.minWidth(), width + delta);\n        return [newNext - width];\n      };\n\n      var setTableWidth = function (table, newWidths, _delta) {\n        var total = foldr(newWidths, function (b, a) {\n          return b + a;\n        }, 0);\n        $_8c9k1dn7jnlpb35o.setPixelWidth(table, total);\n      };\n\n      return {\n        width: constant(intWidth),\n        pixelWidth: constant(intWidth),\n        getWidths: $_g1addgogjnlpb3ez.getPixelWidths,\n        getCellDelta: getCellDelta,\n        singleColumnWidth: singleColumnWidth,\n        minCellWidth: $_eoi5lkohjnlpb3f8.minWidth,\n        setElementWidth: $_8c9k1dn7jnlpb35o.setPixelWidth,\n        setTableWidth: setTableWidth\n      };\n    };\n\n    var chooseSize = function (element, width) {\n      if ($_8c9k1dn7jnlpb35o.percentageBasedSizeRegex().test(width)) {\n        var percentMatch = $_8c9k1dn7jnlpb35o.percentageBasedSizeRegex().exec(width);\n        return percentageSize(percentMatch[1], element);\n      } else if ($_8c9k1dn7jnlpb35o.pixelBasedSizeRegex().test(width)) {\n        var pixelMatch = $_8c9k1dn7jnlpb35o.pixelBasedSizeRegex().exec(width);\n        return pixelSize(pixelMatch[1]);\n      } else {\n        var fallbackWidth = $_2s7b62nbjnlpb36o.get(element);\n        return pixelSize(fallbackWidth);\n      }\n    };\n\n    var getTableSize = function (element) {\n      var width = $_8c9k1dn7jnlpb35o.getRawWidth(element);\n      return width.fold(function () {\n        var fallbackWidth = $_2s7b62nbjnlpb36o.get(element);\n        return pixelSize(fallbackWidth);\n      }, function (width) {\n        return chooseSize(element, width);\n      });\n    };\n\n    var $_3yegniojjnlpb3fo = {\n      getTableSize: getTableSize\n    };\n\n    var getWarehouse$1 = function (list) {\n      return $_ein1yumajnlpb2y1.generate(list);\n    };\n\n    var sumUp = function (newSize) {\n      return foldr(newSize, function (b, a) {\n        return b + a;\n      }, 0);\n    };\n\n    var getTableWarehouse = function (table) {\n      var list = $_g8jea2lbjnlpb2sm.fromTable(table);\n      return getWarehouse$1(list);\n    };\n\n    var adjustWidth = function (table, delta, index, direction) {\n      var tableSize = $_3yegniojjnlpb3fo.getTableSize(table);\n      var step = tableSize.getCellDelta(delta);\n      var warehouse = getTableWarehouse(table);\n      var widths = tableSize.getWidths(warehouse, direction, tableSize);\n      var deltas = $_dns8meoejnlpb3er.determine(widths, index, step, tableSize);\n      var newWidths = map(deltas, function (dx, i) {\n        return dx + widths[i];\n      });\n      var newSizes = $_ew57pqoijnlpb3fg.recalculateWidth(warehouse, newWidths);\n      each(newSizes, function (cell) {\n        tableSize.setElementWidth(cell.element(), cell.width());\n      });\n\n      if (index === warehouse.grid().columns() - 1) {\n        tableSize.setTableWidth(table, newWidths, step);\n      }\n    };\n\n    var adjustHeight = function (table, delta, index, direction) {\n      var warehouse = getTableWarehouse(table);\n      var heights = $_g1addgogjnlpb3ez.getPixelHeights(warehouse, direction);\n      var newHeights = map(heights, function (dy, i) {\n        return index === i ? Math.max(delta + dy, $_eoi5lkohjnlpb3f8.minHeight()) : dy;\n      });\n      var newCellSizes = $_ew57pqoijnlpb3fg.recalculateHeight(warehouse, newHeights);\n      var newRowSizes = $_ew57pqoijnlpb3fg.matchRowHeight(warehouse, newHeights);\n      each(newRowSizes, function (row) {\n        $_8c9k1dn7jnlpb35o.setHeight(row.element(), row.height());\n      });\n      each(newCellSizes, function (cell) {\n        $_8c9k1dn7jnlpb35o.setHeight(cell.element(), cell.height());\n      });\n      var total = sumUp(newHeights);\n      $_8c9k1dn7jnlpb35o.setHeight(table, total);\n    };\n\n    var adjustWidthTo = function (table, list, direction) {\n      var tableSize = $_3yegniojjnlpb3fo.getTableSize(table);\n      var warehouse = getWarehouse$1(list);\n      var widths = tableSize.getWidths(warehouse, direction, tableSize);\n      var newSizes = $_ew57pqoijnlpb3fg.recalculateWidth(warehouse, widths);\n      each(newSizes, function (cell) {\n        tableSize.setElementWidth(cell.element(), cell.width());\n      });\n      var total = foldr(widths, function (b, a) {\n        return a + b;\n      }, 0);\n\n      if (newSizes.length > 0) {\n        tableSize.setElementWidth(table, total);\n      }\n    };\n\n    var $_ed8i3sodjnlpb3em = {\n      adjustWidth: adjustWidth,\n      adjustHeight: adjustHeight,\n      adjustWidthTo: adjustWidthTo\n    };\n\n    var prune = function (table) {\n      var cells = $_em4z2mldjnlpb2sz.cells(table);\n      if (cells.length === 0) $_cybn8qmejnlpb2yr.remove(table);\n    };\n\n    var outcome = Immutable('grid', 'cursor');\n\n    var elementFromGrid = function (grid, row, column) {\n      return findIn(grid, row, column).orThunk(function () {\n        return findIn(grid, 0, 0);\n      });\n    };\n\n    var findIn = function (grid, row, column) {\n      return Option.from(grid[row]).bind(function (r) {\n        return Option.from(r.cells()[column]).bind(function (c) {\n          return Option.from(c.element());\n        });\n      });\n    };\n\n    var bundle = function (grid, row, column) {\n      return outcome(grid, findIn(grid, row, column));\n    };\n\n    var uniqueRows = function (details) {\n      return foldl(details, function (rest, detail) {\n        return exists(rest, function (currentDetail) {\n          return currentDetail.row() === detail.row();\n        }) ? rest : rest.concat([detail]);\n      }, []).sort(function (detailA, detailB) {\n        return detailA.row() - detailB.row();\n      });\n    };\n\n    var uniqueColumns = function (details) {\n      return foldl(details, function (rest, detail) {\n        return exists(rest, function (currentDetail) {\n          return currentDetail.column() === detail.column();\n        }) ? rest : rest.concat([detail]);\n      }, []).sort(function (detailA, detailB) {\n        return detailA.column() - detailB.column();\n      });\n    };\n\n    var insertRowBefore = function (grid, detail, comparator, genWrappers) {\n      var example = detail.row();\n      var targetIndex = detail.row();\n      var newGrid = $_8e5qwrobjnlpb3e8.insertRowAt(grid, targetIndex, example, comparator, genWrappers.getOrInit);\n      return bundle(newGrid, targetIndex, detail.column());\n    };\n\n    var insertRowsBefore = function (grid, details, comparator, genWrappers) {\n      var example = details[0].row();\n      var targetIndex = details[0].row();\n      var rows = uniqueRows(details);\n      var newGrid = foldl(rows, function (newGrid, _row) {\n        return $_8e5qwrobjnlpb3e8.insertRowAt(newGrid, targetIndex, example, comparator, genWrappers.getOrInit);\n      }, grid);\n      return bundle(newGrid, targetIndex, details[0].column());\n    };\n\n    var insertRowAfter = function (grid, detail, comparator, genWrappers) {\n      var example = detail.row();\n      var targetIndex = detail.row() + detail.rowspan();\n      var newGrid = $_8e5qwrobjnlpb3e8.insertRowAt(grid, targetIndex, example, comparator, genWrappers.getOrInit);\n      return bundle(newGrid, targetIndex, detail.column());\n    };\n\n    var insertRowsAfter = function (grid, details, comparator, genWrappers) {\n      var rows = uniqueRows(details);\n      var example = rows[rows.length - 1].row();\n      var targetIndex = rows[rows.length - 1].row() + rows[rows.length - 1].rowspan();\n      var newGrid = foldl(rows, function (newGrid, _row) {\n        return $_8e5qwrobjnlpb3e8.insertRowAt(newGrid, targetIndex, example, comparator, genWrappers.getOrInit);\n      }, grid);\n      return bundle(newGrid, targetIndex, details[0].column());\n    };\n\n    var insertColumnBefore = function (grid, detail, comparator, genWrappers) {\n      var example = detail.column();\n      var targetIndex = detail.column();\n      var newGrid = $_8e5qwrobjnlpb3e8.insertColumnAt(grid, targetIndex, example, comparator, genWrappers.getOrInit);\n      return bundle(newGrid, detail.row(), targetIndex);\n    };\n\n    var insertColumnsBefore = function (grid, details, comparator, genWrappers) {\n      var columns = uniqueColumns(details);\n      var example = columns[0].column();\n      var targetIndex = columns[0].column();\n      var newGrid = foldl(columns, function (newGrid, _row) {\n        return $_8e5qwrobjnlpb3e8.insertColumnAt(newGrid, targetIndex, example, comparator, genWrappers.getOrInit);\n      }, grid);\n      return bundle(newGrid, details[0].row(), targetIndex);\n    };\n\n    var insertColumnAfter = function (grid, detail, comparator, genWrappers) {\n      var example = detail.column();\n      var targetIndex = detail.column() + detail.colspan();\n      var newGrid = $_8e5qwrobjnlpb3e8.insertColumnAt(grid, targetIndex, example, comparator, genWrappers.getOrInit);\n      return bundle(newGrid, detail.row(), targetIndex);\n    };\n\n    var insertColumnsAfter = function (grid, details, comparator, genWrappers) {\n      var example = details[details.length - 1].column();\n      var targetIndex = details[details.length - 1].column() + details[details.length - 1].colspan();\n      var columns = uniqueColumns(details);\n      var newGrid = foldl(columns, function (newGrid, _row) {\n        return $_8e5qwrobjnlpb3e8.insertColumnAt(newGrid, targetIndex, example, comparator, genWrappers.getOrInit);\n      }, grid);\n      return bundle(newGrid, details[0].row(), targetIndex);\n    };\n\n    var makeRowHeader = function (grid, detail, comparator, genWrappers) {\n      var newGrid = $_69d1pfocjnlpb3ei.replaceRow(grid, detail.row(), comparator, genWrappers.replaceOrInit);\n      return bundle(newGrid, detail.row(), detail.column());\n    };\n\n    var makeColumnHeader = function (grid, detail, comparator, genWrappers) {\n      var newGrid = $_69d1pfocjnlpb3ei.replaceColumn(grid, detail.column(), comparator, genWrappers.replaceOrInit);\n      return bundle(newGrid, detail.row(), detail.column());\n    };\n\n    var unmakeRowHeader = function (grid, detail, comparator, genWrappers) {\n      var newGrid = $_69d1pfocjnlpb3ei.replaceRow(grid, detail.row(), comparator, genWrappers.replaceOrInit);\n      return bundle(newGrid, detail.row(), detail.column());\n    };\n\n    var unmakeColumnHeader = function (grid, detail, comparator, genWrappers) {\n      var newGrid = $_69d1pfocjnlpb3ei.replaceColumn(grid, detail.column(), comparator, genWrappers.replaceOrInit);\n      return bundle(newGrid, detail.row(), detail.column());\n    };\n\n    var splitCellIntoColumns$1 = function (grid, detail, comparator, genWrappers) {\n      var newGrid = $_8e5qwrobjnlpb3e8.splitCellIntoColumns(grid, detail.row(), detail.column(), comparator, genWrappers.getOrInit);\n      return bundle(newGrid, detail.row(), detail.column());\n    };\n\n    var splitCellIntoRows$1 = function (grid, detail, comparator, genWrappers) {\n      var newGrid = $_8e5qwrobjnlpb3e8.splitCellIntoRows(grid, detail.row(), detail.column(), comparator, genWrappers.getOrInit);\n      return bundle(newGrid, detail.row(), detail.column());\n    };\n\n    var eraseColumns = function (grid, details, comparator, _genWrappers) {\n      var columns = uniqueColumns(details);\n      var newGrid = $_8e5qwrobjnlpb3e8.deleteColumnsAt(grid, columns[0].column(), columns[columns.length - 1].column());\n      var cursor = elementFromGrid(newGrid, details[0].row(), details[0].column());\n      return outcome(newGrid, cursor);\n    };\n\n    var eraseRows = function (grid, details, comparator, _genWrappers) {\n      var rows = uniqueRows(details);\n      var newGrid = $_8e5qwrobjnlpb3e8.deleteRowsAt(grid, rows[0].row(), rows[rows.length - 1].row());\n      var cursor = elementFromGrid(newGrid, details[0].row(), details[0].column());\n      return outcome(newGrid, cursor);\n    };\n\n    var mergeCells = function (grid, mergable, comparator, _genWrappers) {\n      var cells = mergable.cells();\n      $_18yv0ennjnlpb38t.merge(cells);\n      var newGrid = $_dod35voajnlpb3e0.merge(grid, mergable.bounds(), comparator, constant(cells[0]));\n      return outcome(newGrid, Option.from(cells[0]));\n    };\n\n    var unmergeCells = function (grid, unmergable, comparator, genWrappers) {\n      var newGrid = foldr(unmergable, function (b, cell) {\n        return $_dod35voajnlpb3e0.unmerge(b, cell, comparator, genWrappers.combine(cell));\n      }, grid);\n      return outcome(newGrid, Option.from(unmergable[0]));\n    };\n\n    var pasteCells = function (grid, pasteDetails, comparator, genWrappers) {\n      var gridify = function (table, generators) {\n        var list = $_g8jea2lbjnlpb2sm.fromTable(table);\n        var wh = $_ein1yumajnlpb2y1.generate(list);\n        return $_83n6k9ntjnlpb3ai.toGrid(wh, generators, true);\n      };\n\n      var gridB = gridify(pasteDetails.clipboard(), pasteDetails.generators());\n      var startAddress = $_csuubelcjnlpb2sv.address(pasteDetails.row(), pasteDetails.column());\n      var mergedGrid = $_iqv78o7jnlpb3dj.merge(startAddress, grid, gridB, pasteDetails.generators(), comparator);\n      return mergedGrid.fold(function () {\n        return outcome(grid, Option.some(pasteDetails.element()));\n      }, function (nuGrid) {\n        var cursor = elementFromGrid(nuGrid, pasteDetails.row(), pasteDetails.column());\n        return outcome(nuGrid, cursor);\n      });\n    };\n\n    var gridifyRows = function (rows, generators, example) {\n      var pasteDetails = $_g8jea2lbjnlpb2sm.fromPastedRows(rows, example);\n      var wh = $_ein1yumajnlpb2y1.generate(pasteDetails);\n      return $_83n6k9ntjnlpb3ai.toGrid(wh, generators, true);\n    };\n\n    var pasteRowsBefore = function (grid, pasteDetails, comparator, genWrappers) {\n      var example = grid[pasteDetails.cells[0].row()];\n      var index = pasteDetails.cells[0].row();\n      var gridB = gridifyRows(pasteDetails.clipboard(), pasteDetails.generators(), example);\n      var mergedGrid = $_iqv78o7jnlpb3dj.insert(index, grid, gridB, pasteDetails.generators(), comparator);\n      var cursor = elementFromGrid(mergedGrid, pasteDetails.cells[0].row(), pasteDetails.cells[0].column());\n      return outcome(mergedGrid, cursor);\n    };\n\n    var pasteRowsAfter = function (grid, pasteDetails, comparator, genWrappers) {\n      var example = grid[pasteDetails.cells[0].row()];\n      var index = pasteDetails.cells[pasteDetails.cells.length - 1].row() + pasteDetails.cells[pasteDetails.cells.length - 1].rowspan();\n      var gridB = gridifyRows(pasteDetails.clipboard(), pasteDetails.generators(), example);\n      var mergedGrid = $_iqv78o7jnlpb3dj.insert(index, grid, gridB, pasteDetails.generators(), comparator);\n      var cursor = elementFromGrid(mergedGrid, pasteDetails.cells[0].row(), pasteDetails.cells[0].column());\n      return outcome(mergedGrid, cursor);\n    };\n\n    var resize = $_ed8i3sodjnlpb3em.adjustWidthTo;\n    var $_r4w4xnjjnlpb37n = {\n      insertRowBefore: $_dkrxmunqjnlpb39s.run(insertRowBefore, $_dkrxmunqjnlpb39s.onCell, noop, noop, $_7dlzawnkjnlpb384.modification),\n      insertRowsBefore: $_dkrxmunqjnlpb39s.run(insertRowsBefore, $_dkrxmunqjnlpb39s.onCells, noop, noop, $_7dlzawnkjnlpb384.modification),\n      insertRowAfter: $_dkrxmunqjnlpb39s.run(insertRowAfter, $_dkrxmunqjnlpb39s.onCell, noop, noop, $_7dlzawnkjnlpb384.modification),\n      insertRowsAfter: $_dkrxmunqjnlpb39s.run(insertRowsAfter, $_dkrxmunqjnlpb39s.onCells, noop, noop, $_7dlzawnkjnlpb384.modification),\n      insertColumnBefore: $_dkrxmunqjnlpb39s.run(insertColumnBefore, $_dkrxmunqjnlpb39s.onCell, resize, noop, $_7dlzawnkjnlpb384.modification),\n      insertColumnsBefore: $_dkrxmunqjnlpb39s.run(insertColumnsBefore, $_dkrxmunqjnlpb39s.onCells, resize, noop, $_7dlzawnkjnlpb384.modification),\n      insertColumnAfter: $_dkrxmunqjnlpb39s.run(insertColumnAfter, $_dkrxmunqjnlpb39s.onCell, resize, noop, $_7dlzawnkjnlpb384.modification),\n      insertColumnsAfter: $_dkrxmunqjnlpb39s.run(insertColumnsAfter, $_dkrxmunqjnlpb39s.onCells, resize, noop, $_7dlzawnkjnlpb384.modification),\n      splitCellIntoColumns: $_dkrxmunqjnlpb39s.run(splitCellIntoColumns$1, $_dkrxmunqjnlpb39s.onCell, resize, noop, $_7dlzawnkjnlpb384.modification),\n      splitCellIntoRows: $_dkrxmunqjnlpb39s.run(splitCellIntoRows$1, $_dkrxmunqjnlpb39s.onCell, noop, noop, $_7dlzawnkjnlpb384.modification),\n      eraseColumns: $_dkrxmunqjnlpb39s.run(eraseColumns, $_dkrxmunqjnlpb39s.onCells, resize, prune, $_7dlzawnkjnlpb384.modification),\n      eraseRows: $_dkrxmunqjnlpb39s.run(eraseRows, $_dkrxmunqjnlpb39s.onCells, noop, prune, $_7dlzawnkjnlpb384.modification),\n      makeColumnHeader: $_dkrxmunqjnlpb39s.run(makeColumnHeader, $_dkrxmunqjnlpb39s.onCell, noop, noop, $_7dlzawnkjnlpb384.transform('row', 'th')),\n      unmakeColumnHeader: $_dkrxmunqjnlpb39s.run(unmakeColumnHeader, $_dkrxmunqjnlpb39s.onCell, noop, noop, $_7dlzawnkjnlpb384.transform(null, 'td')),\n      makeRowHeader: $_dkrxmunqjnlpb39s.run(makeRowHeader, $_dkrxmunqjnlpb39s.onCell, noop, noop, $_7dlzawnkjnlpb384.transform('col', 'th')),\n      unmakeRowHeader: $_dkrxmunqjnlpb39s.run(unmakeRowHeader, $_dkrxmunqjnlpb39s.onCell, noop, noop, $_7dlzawnkjnlpb384.transform(null, 'td')),\n      mergeCells: $_dkrxmunqjnlpb39s.run(mergeCells, $_dkrxmunqjnlpb39s.onMergable, noop, noop, $_7dlzawnkjnlpb384.merging),\n      unmergeCells: $_dkrxmunqjnlpb39s.run(unmergeCells, $_dkrxmunqjnlpb39s.onUnmergable, resize, noop, $_7dlzawnkjnlpb384.merging),\n      pasteCells: $_dkrxmunqjnlpb39s.run(pasteCells, $_dkrxmunqjnlpb39s.onPaste, resize, noop, $_7dlzawnkjnlpb384.modification),\n      pasteRowsBefore: $_dkrxmunqjnlpb39s.run(pasteRowsBefore, $_dkrxmunqjnlpb39s.onPasteRows, noop, noop, $_7dlzawnkjnlpb384.modification),\n      pasteRowsAfter: $_dkrxmunqjnlpb39s.run(pasteRowsAfter, $_dkrxmunqjnlpb39s.onPasteRows, noop, noop, $_7dlzawnkjnlpb384.modification)\n    };\n\n    var getBody$1 = function (editor) {\n      return Element$$1.fromDom(editor.getBody());\n    };\n\n    var getPixelWidth$1 = function (elm) {\n      return elm.getBoundingClientRect().width;\n    };\n\n    var getPixelHeight = function (elm) {\n      return elm.getBoundingClientRect().height;\n    };\n\n    var getIsRoot = function (editor) {\n      return function (element) {\n        return $_3k22killjnlpb2vb.eq(element, getBody$1(editor));\n      };\n    };\n\n    var removePxSuffix = function (size) {\n      return size ? size.replace(/px$/, '') : '';\n    };\n\n    var addSizeSuffix = function (size) {\n      if (/^[0-9]+$/.test(size)) {\n        size += 'px';\n      }\n\n      return size;\n    };\n\n    var removeDataStyle = function (table) {\n      var dataStyleCells = $_97aehqm4jnlpb2x5.descendants(table, 'td[data-mce-style],th[data-mce-style]');\n      $_9u6utvm2jnlpb2wv.remove(table, 'data-mce-style');\n      each(dataStyleCells, function (cell) {\n        $_9u6utvm2jnlpb2wv.remove(cell, 'data-mce-style');\n      });\n    };\n\n    var onDirection = function (isLtr, isRtl) {\n      return function (element) {\n        return getDirection(element) === 'rtl' ? isRtl : isLtr;\n      };\n    };\n\n    var getDirection = function (element) {\n      return $_g8mvdembjnlpb2ya.get(element, 'direction') === 'rtl' ? 'rtl' : 'ltr';\n    };\n\n    var $_a1umnbomjnlpb3gg = {\n      onDirection: onDirection,\n      getDirection: getDirection\n    };\n    var ltr$1 = {\n      isRtl: constant(false)\n    };\n    var rtl$1 = {\n      isRtl: constant(true)\n    };\n\n    var directionAt = function (element) {\n      var dir = $_a1umnbomjnlpb3gg.getDirection(element);\n      return dir === 'rtl' ? rtl$1 : ltr$1;\n    };\n\n    var $_1wn5holjnlpb3g6 = {\n      directionAt: directionAt\n    };\n    var defaultTableToolbar = ['tableprops', 'tabledelete', '|', 'tableinsertrowbefore', 'tableinsertrowafter', 'tabledeleterow', '|', 'tableinsertcolbefore', 'tableinsertcolafter', 'tabledeletecol'];\n    var defaultStyles = {\n      'border-collapse': 'collapse',\n      'width': '100%'\n    };\n    var defaultAttributes = {\n      border: '1'\n    };\n\n    var getDefaultAttributes = function (editor) {\n      return editor.getParam('table_default_attributes', defaultAttributes, 'object');\n    };\n\n    var getDefaultStyles = function (editor) {\n      return editor.getParam('table_default_styles', defaultStyles, 'object');\n    };\n\n    var hasTableResizeBars = function (editor) {\n      return editor.getParam('table_resize_bars', true, 'boolean');\n    };\n\n    var hasTabNavigation = function (editor) {\n      return editor.getParam('table_tab_navigation', true, 'boolean');\n    };\n\n    var hasAdvancedCellTab = function (editor) {\n      return editor.getParam('table_cell_advtab', true, 'boolean');\n    };\n\n    var hasAdvancedRowTab = function (editor) {\n      return editor.getParam('table_row_advtab', true, 'boolean');\n    };\n\n    var hasAdvancedTableTab = function (editor) {\n      return editor.getParam('table_advtab', true, 'boolean');\n    };\n\n    var hasAppearanceOptions = function (editor) {\n      return editor.getParam('table_appearance_options', true, 'boolean');\n    };\n\n    var hasTableGrid = function (editor) {\n      return editor.getParam('table_grid', true, 'boolean');\n    };\n\n    var shouldStyleWithCss = function (editor) {\n      return editor.getParam('table_style_by_css', false, 'boolean');\n    };\n\n    var getCellClassList = function (editor) {\n      return editor.getParam('table_cell_class_list', [], 'array');\n    };\n\n    var getRowClassList = function (editor) {\n      return editor.getParam('table_row_class_list', [], 'array');\n    };\n\n    var getTableClassList = function (editor) {\n      return editor.getParam('table_class_list', [], 'array');\n    };\n\n    var getColorPickerCallback = function (editor) {\n      return editor.getParam('color_picker_callback');\n    };\n\n    var isPixelsForced = function (editor) {\n      return editor.getParam('table_responsive_width') === false;\n    };\n\n    var getCloneElements = function (editor) {\n      var cloneElements = editor.getParam('table_clone_elements');\n\n      if (isString(cloneElements)) {\n        return Option.some(cloneElements.split(/[ ,]/));\n      } else if (Array.isArray(cloneElements)) {\n        return Option.some(cloneElements);\n      } else {\n        return Option.none();\n      }\n    };\n\n    var hasObjectResizing = function (editor) {\n      var objectResizing = editor.getParam('object_resizing', true);\n      return objectResizing === 'table' || objectResizing;\n    };\n\n    var getToolbar = function (editor) {\n      var toolbar = editor.getParam('table_toolbar', defaultTableToolbar);\n\n      if (toolbar === '' || toolbar === false) {\n        return [];\n      } else if (isString(toolbar)) {\n        return toolbar.split(/[ ,]/);\n      } else if (isArray(toolbar)) {\n        return toolbar;\n      } else {\n        return [];\n      }\n    };\n\n    var fireNewRow = function (editor, row) {\n      return editor.fire('newrow', {\n        node: row\n      });\n    };\n\n    var fireNewCell = function (editor, cell) {\n      return editor.fire('newcell', {\n        node: cell\n      });\n    };\n\n    var fireObjectResizeStart = function (editor, target, width, height) {\n      editor.fire('ObjectResizeStart', {\n        target: target,\n        width: width,\n        height: height\n      });\n    };\n\n    var fireObjectResized = function (editor, target, width, height) {\n      editor.fire('ObjectResized', {\n        target: target,\n        width: width,\n        height: height\n      });\n    };\n\n    var TableActions = function (editor, lazyWire) {\n      var isTableBody = function (editor) {\n        return $_erx5tem3jnlpb2x3.name(getBody$1(editor)) === 'table';\n      };\n\n      var lastRowGuard = function (table) {\n        var size = $_flksaxnijnlpb37k.getGridSize(table);\n        return isTableBody(editor) === false || size.rows() > 1;\n      };\n\n      var lastColumnGuard = function (table) {\n        var size = $_flksaxnijnlpb37k.getGridSize(table);\n        return isTableBody(editor) === false || size.columns() > 1;\n      };\n\n      var cloneFormats = getCloneElements(editor);\n\n      var execute = function (operation, guard, mutate, lazyWire) {\n        return function (table, target) {\n          removeDataStyle(table);\n          var wire = lazyWire();\n          var doc = Element$$1.fromDom(editor.getDoc());\n          var direction = TableDirection($_1wn5holjnlpb3g6.directionAt);\n          var generators = $_f80632mgjnlpb2z3.cellOperations(mutate, doc, cloneFormats);\n          return guard(table) ? operation(wire, table, target, generators, direction).bind(function (result) {\n            each(result.newRows(), function (row) {\n              fireNewRow(editor, row.dom());\n            });\n            each(result.newCells(), function (cell) {\n              fireNewCell(editor, cell.dom());\n            });\n            return result.cursor().map(function (cell) {\n              var rng = editor.dom.createRng();\n              rng.setStart(cell.dom(), 0);\n              rng.setEnd(cell.dom(), 0);\n              return rng;\n            });\n          }) : Option.none();\n        };\n      };\n\n      var deleteRow = execute($_r4w4xnjjnlpb37n.eraseRows, lastRowGuard, noop, lazyWire);\n      var deleteColumn = execute($_r4w4xnjjnlpb37n.eraseColumns, lastColumnGuard, noop, lazyWire);\n      var insertRowsBefore = execute($_r4w4xnjjnlpb37n.insertRowsBefore, always, noop, lazyWire);\n      var insertRowsAfter = execute($_r4w4xnjjnlpb37n.insertRowsAfter, always, noop, lazyWire);\n      var insertColumnsBefore = execute($_r4w4xnjjnlpb37n.insertColumnsBefore, always, $_8eufztn6jnlpb35m.halve, lazyWire);\n      var insertColumnsAfter = execute($_r4w4xnjjnlpb37n.insertColumnsAfter, always, $_8eufztn6jnlpb35m.halve, lazyWire);\n      var mergeCells = execute($_r4w4xnjjnlpb37n.mergeCells, always, noop, lazyWire);\n      var unmergeCells = execute($_r4w4xnjjnlpb37n.unmergeCells, always, noop, lazyWire);\n      var pasteRowsBefore = execute($_r4w4xnjjnlpb37n.pasteRowsBefore, always, noop, lazyWire);\n      var pasteRowsAfter = execute($_r4w4xnjjnlpb37n.pasteRowsAfter, always, noop, lazyWire);\n      var pasteCells = execute($_r4w4xnjjnlpb37n.pasteCells, always, noop, lazyWire);\n      return {\n        deleteRow: deleteRow,\n        deleteColumn: deleteColumn,\n        insertRowsBefore: insertRowsBefore,\n        insertRowsAfter: insertRowsAfter,\n        insertColumnsBefore: insertColumnsBefore,\n        insertColumnsAfter: insertColumnsAfter,\n        mergeCells: mergeCells,\n        unmergeCells: unmergeCells,\n        pasteRowsBefore: pasteRowsBefore,\n        pasteRowsAfter: pasteRowsAfter,\n        pasteCells: pasteCells\n      };\n    };\n\n    var copyRows = function (table, target, generators) {\n      var list = $_g8jea2lbjnlpb2sm.fromTable(table);\n      var house = $_ein1yumajnlpb2y1.generate(list);\n      var details = $_dkrxmunqjnlpb39s.onCells(house, target);\n      return details.map(function (selectedCells) {\n        var grid = $_83n6k9ntjnlpb3ai.toGrid(house, generators, false);\n        var slicedGrid = grid.slice(selectedCells[0].row(), selectedCells[selectedCells.length - 1].row() + selectedCells[selectedCells.length - 1].rowspan());\n        var slicedDetails = $_dkrxmunqjnlpb39s.toDetailList(slicedGrid, generators);\n        return $_ekkk7tnwjnlpb3ax.copy(slicedDetails);\n      });\n    };\n\n    var $_c8ht2doqjnlpb3h7 = {\n      copyRows: copyRows\n    };\n    var global$1 = tinymce.util.Tools.resolve('tinymce.util.Tools');\n\n    var getTDTHOverallStyle = function (dom, elm, name) {\n      var cells = dom.select('td,th', elm);\n      var firstChildStyle;\n\n      var checkChildren = function (firstChildStyle, elms) {\n        for (var i = 0; i < elms.length; i++) {\n          var currentStyle = dom.getStyle(elms[i], name);\n\n          if (typeof firstChildStyle === 'undefined') {\n            firstChildStyle = currentStyle;\n          }\n\n          if (firstChildStyle !== currentStyle) {\n            return '';\n          }\n        }\n\n        return firstChildStyle;\n      };\n\n      firstChildStyle = checkChildren(firstChildStyle, cells);\n      return firstChildStyle;\n    };\n\n    var applyAlign = function (editor, elm, name) {\n      if (name) {\n        editor.formatter.apply('align' + name, {}, elm);\n      }\n    };\n\n    var applyVAlign = function (editor, elm, name) {\n      if (name) {\n        editor.formatter.apply('valign' + name, {}, elm);\n      }\n    };\n\n    var unApplyAlign = function (editor, elm) {\n      global$1.each('left center right'.split(' '), function (name) {\n        editor.formatter.remove('align' + name, {}, elm);\n      });\n    };\n\n    var unApplyVAlign = function (editor, elm) {\n      global$1.each('top middle bottom'.split(' '), function (name) {\n        editor.formatter.remove('valign' + name, {}, elm);\n      });\n    };\n\n    var $_fl09twotjnlpb3hi = {\n      applyAlign: applyAlign,\n      applyVAlign: applyVAlign,\n      unApplyAlign: unApplyAlign,\n      unApplyVAlign: unApplyVAlign,\n      getTDTHOverallStyle: getTDTHOverallStyle\n    };\n\n    var buildListItems = function (inputList, itemCallback, startItems) {\n      var appendItems = function (values, output) {\n        output = output || [];\n        global$1.each(values, function (item) {\n          var menuItem = {\n            text: item.text || item.title\n          };\n\n          if (item.menu) {\n            menuItem.menu = appendItems(item.menu);\n          } else {\n            menuItem.value = item.value;\n\n            if (itemCallback) {\n              itemCallback(menuItem);\n            }\n          }\n\n          output.push(menuItem);\n        });\n        return output;\n      };\n\n      return appendItems(inputList, startItems || []);\n    };\n\n    function styleFieldHasFocus(e) {\n      return e.control.rootControl.find('#style')[0].getEl().isEqualNode(document.activeElement);\n    }\n\n    var syncAdvancedStyleFields = function (editor, evt) {\n      if (styleFieldHasFocus(evt)) {\n        updateAdvancedFields(editor, evt);\n      } else {\n        updateStyleField(editor, evt);\n      }\n    };\n\n    var updateStyleField = function (editor, evt) {\n      var dom = editor.dom;\n      var rootControl = evt.control.rootControl;\n      var data = rootControl.toJSON();\n      var css = dom.parseStyle(data.style);\n      css['border-style'] = data.borderStyle;\n      css['border-color'] = data.borderColor;\n      css['background-color'] = data.backgroundColor;\n      css.width = data.width ? addSizeSuffix(data.width) : '';\n      css.height = data.height ? addSizeSuffix(data.height) : '';\n      rootControl.find('#style').value(dom.serializeStyle(dom.parseStyle(dom.serializeStyle(css))));\n    };\n\n    var updateAdvancedFields = function (editor, evt) {\n      var dom = editor.dom;\n      var rootControl = evt.control.rootControl;\n      var data = rootControl.toJSON();\n      var css = dom.parseStyle(data.style);\n      rootControl.find('#borderStyle').value(css['border-style'] || '');\n      rootControl.find('#borderColor').value(css['border-color'] || '');\n      rootControl.find('#backgroundColor').value(css['background-color'] || '');\n      rootControl.find('#width').value(css.width || '');\n      rootControl.find('#height').value(css.height || '');\n    };\n\n    var extractAdvancedStyles = function (dom, elm) {\n      var css = dom.parseStyle(dom.getAttrib(elm, 'style'));\n      var data = {};\n\n      if (css['border-style']) {\n        data.borderStyle = css['border-style'];\n      }\n\n      if (css['border-color']) {\n        data.borderColor = css['border-color'];\n      }\n\n      if (css['background-color']) {\n        data.backgroundColor = css['background-color'];\n      }\n\n      data.style = dom.serializeStyle(css);\n      return data;\n    };\n\n    var createStyleForm = function (editor) {\n      var createColorPickAction = function () {\n        var colorPickerCallback = getColorPickerCallback(editor);\n\n        if (colorPickerCallback) {\n          return function (evt) {\n            return colorPickerCallback.call(editor, function (value) {\n              evt.control.value(value).fire('change');\n            }, evt.control.value());\n          };\n        }\n      };\n\n      return {\n        title: 'Advanced',\n        type: 'form',\n        defaults: {\n          onchange: curry(updateStyleField, editor)\n        },\n        items: [{\n          label: 'Style',\n          name: 'style',\n          type: 'textbox',\n          onchange: curry(updateAdvancedFields, editor)\n        }, {\n          type: 'form',\n          padding: 0,\n          formItemDefaults: {\n            layout: 'grid',\n            alignH: ['start', 'right']\n          },\n          defaults: {\n            size: 7\n          },\n          items: [{\n            label: 'Border style',\n            type: 'listbox',\n            name: 'borderStyle',\n            width: 90,\n            onselect: curry(updateStyleField, editor),\n            values: [{\n              text: 'Select...',\n              value: ''\n            }, {\n              text: 'Solid',\n              value: 'solid'\n            }, {\n              text: 'Dotted',\n              value: 'dotted'\n            }, {\n              text: 'Dashed',\n              value: 'dashed'\n            }, {\n              text: 'Double',\n              value: 'double'\n            }, {\n              text: 'Groove',\n              value: 'groove'\n            }, {\n              text: 'Ridge',\n              value: 'ridge'\n            }, {\n              text: 'Inset',\n              value: 'inset'\n            }, {\n              text: 'Outset',\n              value: 'outset'\n            }, {\n              text: 'None',\n              value: 'none'\n            }, {\n              text: 'Hidden',\n              value: 'hidden'\n            }]\n          }, {\n            label: 'Border color',\n            type: 'colorbox',\n            name: 'borderColor',\n            onaction: createColorPickAction()\n          }, {\n            label: 'Background color',\n            type: 'colorbox',\n            name: 'backgroundColor',\n            onaction: createColorPickAction()\n          }]\n        }]\n      };\n    };\n\n    var $_ce2naoujnlpb3hk = {\n      createStyleForm: createStyleForm,\n      buildListItems: buildListItems,\n      updateStyleField: updateStyleField,\n      extractAdvancedStyles: extractAdvancedStyles,\n      updateAdvancedFields: updateAdvancedFields,\n      syncAdvancedStyleFields: syncAdvancedStyleFields\n    };\n\n    var updateStyles = function (elm, cssText) {\n      delete elm.dataset.mceStyle;\n      elm.style.cssText += ';' + cssText;\n    };\n\n    var extractDataFromElement = function (editor, elm) {\n      var dom = editor.dom;\n      var data = {\n        width: dom.getStyle(elm, 'width') || dom.getAttrib(elm, 'width'),\n        height: dom.getStyle(elm, 'height') || dom.getAttrib(elm, 'height'),\n        scope: dom.getAttrib(elm, 'scope'),\n        class: dom.getAttrib(elm, 'class'),\n        type: elm.nodeName.toLowerCase(),\n        style: '',\n        align: '',\n        valign: ''\n      };\n      global$1.each('left center right'.split(' '), function (name) {\n        if (editor.formatter.matchNode(elm, 'align' + name)) {\n          data.align = name;\n        }\n      });\n      global$1.each('top middle bottom'.split(' '), function (name) {\n        if (editor.formatter.matchNode(elm, 'valign' + name)) {\n          data.valign = name;\n        }\n      });\n\n      if (hasAdvancedCellTab(editor)) {\n        global$1.extend(data, $_ce2naoujnlpb3hk.extractAdvancedStyles(dom, elm));\n      }\n\n      return data;\n    };\n\n    var onSubmitCellForm = function (editor, cells, evt) {\n      var dom = editor.dom;\n      var data;\n\n      function setAttrib(elm, name, value) {\n        if (cells.length === 1 || value) {\n          dom.setAttrib(elm, name, value);\n        }\n      }\n\n      function setStyle(elm, name, value) {\n        if (cells.length === 1 || value) {\n          dom.setStyle(elm, name, value);\n        }\n      }\n\n      if (hasAdvancedCellTab(editor)) {\n        $_ce2naoujnlpb3hk.syncAdvancedStyleFields(editor, evt);\n      }\n\n      data = evt.control.rootControl.toJSON();\n      editor.undoManager.transact(function () {\n        global$1.each(cells, function (cellElm) {\n          setAttrib(cellElm, 'scope', data.scope);\n\n          if (cells.length === 1) {\n            setAttrib(cellElm, 'style', data.style);\n          } else {\n            updateStyles(cellElm, data.style);\n          }\n\n          setAttrib(cellElm, 'class', data.class);\n          setStyle(cellElm, 'width', addSizeSuffix(data.width));\n          setStyle(cellElm, 'height', addSizeSuffix(data.height));\n\n          if (data.type && cellElm.nodeName.toLowerCase() !== data.type) {\n            cellElm = dom.rename(cellElm, data.type);\n          }\n\n          if (cells.length === 1) {\n            $_fl09twotjnlpb3hi.unApplyAlign(editor, cellElm);\n            $_fl09twotjnlpb3hi.unApplyVAlign(editor, cellElm);\n          }\n\n          if (data.align) {\n            $_fl09twotjnlpb3hi.applyAlign(editor, cellElm, data.align);\n          }\n\n          if (data.valign) {\n            $_fl09twotjnlpb3hi.applyVAlign(editor, cellElm, data.valign);\n          }\n        });\n        editor.focus();\n      });\n    };\n\n    var open = function (editor) {\n      var cellElm,\n          data,\n          classListCtrl,\n          cells = [];\n      cells = editor.dom.select('td[data-mce-selected],th[data-mce-selected]');\n      cellElm = editor.dom.getParent(editor.selection.getStart(), 'td,th');\n\n      if (!cells.length && cellElm) {\n        cells.push(cellElm);\n      }\n\n      cellElm = cellElm || cells[0];\n\n      if (!cellElm) {\n        return;\n      }\n\n      if (cells.length > 1) {\n        data = {\n          width: '',\n          height: '',\n          scope: '',\n          class: '',\n          align: '',\n          valign: '',\n          style: '',\n          type: cellElm.nodeName.toLowerCase()\n        };\n      } else {\n        data = extractDataFromElement(editor, cellElm);\n      }\n\n      if (getCellClassList(editor).length > 0) {\n        classListCtrl = {\n          name: 'class',\n          type: 'listbox',\n          label: 'Class',\n          values: $_ce2naoujnlpb3hk.buildListItems(getCellClassList(editor), function (item) {\n            if (item.value) {\n              item.textStyle = function () {\n                return editor.formatter.getCssText({\n                  block: 'td',\n                  classes: [item.value]\n                });\n              };\n            }\n          })\n        };\n      }\n\n      var generalCellForm = {\n        type: 'form',\n        layout: 'flex',\n        direction: 'column',\n        labelGapCalc: 'children',\n        padding: 0,\n        items: [{\n          type: 'form',\n          layout: 'grid',\n          columns: 2,\n          labelGapCalc: false,\n          padding: 0,\n          defaults: {\n            type: 'textbox',\n            maxWidth: 50\n          },\n          items: [{\n            label: 'Width',\n            name: 'width',\n            onchange: curry($_ce2naoujnlpb3hk.updateStyleField, editor)\n          }, {\n            label: 'Height',\n            name: 'height',\n            onchange: curry($_ce2naoujnlpb3hk.updateStyleField, editor)\n          }, {\n            label: 'Cell type',\n            name: 'type',\n            type: 'listbox',\n            text: 'None',\n            minWidth: 90,\n            maxWidth: null,\n            values: [{\n              text: 'Cell',\n              value: 'td'\n            }, {\n              text: 'Header cell',\n              value: 'th'\n            }]\n          }, {\n            label: 'Scope',\n            name: 'scope',\n            type: 'listbox',\n            text: 'None',\n            minWidth: 90,\n            maxWidth: null,\n            values: [{\n              text: 'None',\n              value: ''\n            }, {\n              text: 'Row',\n              value: 'row'\n            }, {\n              text: 'Column',\n              value: 'col'\n            }, {\n              text: 'Row group',\n              value: 'rowgroup'\n            }, {\n              text: 'Column group',\n              value: 'colgroup'\n            }]\n          }, {\n            label: 'H Align',\n            name: 'align',\n            type: 'listbox',\n            text: 'None',\n            minWidth: 90,\n            maxWidth: null,\n            values: [{\n              text: 'None',\n              value: ''\n            }, {\n              text: 'Left',\n              value: 'left'\n            }, {\n              text: 'Center',\n              value: 'center'\n            }, {\n              text: 'Right',\n              value: 'right'\n            }]\n          }, {\n            label: 'V Align',\n            name: 'valign',\n            type: 'listbox',\n            text: 'None',\n            minWidth: 90,\n            maxWidth: null,\n            values: [{\n              text: 'None',\n              value: ''\n            }, {\n              text: 'Top',\n              value: 'top'\n            }, {\n              text: 'Middle',\n              value: 'middle'\n            }, {\n              text: 'Bottom',\n              value: 'bottom'\n            }]\n          }]\n        }, classListCtrl]\n      };\n\n      if (hasAdvancedCellTab(editor)) {\n        editor.windowManager.open({\n          title: 'Cell properties',\n          bodyType: 'tabpanel',\n          data: data,\n          body: [{\n            title: 'General',\n            type: 'form',\n            items: generalCellForm\n          }, $_ce2naoujnlpb3hk.createStyleForm(editor)],\n          onsubmit: curry(onSubmitCellForm, editor, cells)\n        });\n      } else {\n        editor.windowManager.open({\n          title: 'Cell properties',\n          data: data,\n          body: generalCellForm,\n          onsubmit: curry(onSubmitCellForm, editor, cells)\n        });\n      }\n    };\n\n    var $_c9662posjnlpb3hc = {\n      open: open\n    };\n\n    var extractDataFromElement$1 = function (editor, elm) {\n      var dom = editor.dom;\n      var data = {\n        height: dom.getStyle(elm, 'height') || dom.getAttrib(elm, 'height'),\n        scope: dom.getAttrib(elm, 'scope'),\n        class: dom.getAttrib(elm, 'class'),\n        align: '',\n        style: '',\n        type: elm.parentNode.nodeName.toLowerCase()\n      };\n      global$1.each('left center right'.split(' '), function (name) {\n        if (editor.formatter.matchNode(elm, 'align' + name)) {\n          data.align = name;\n        }\n      });\n\n      if (hasAdvancedRowTab(editor)) {\n        global$1.extend(data, $_ce2naoujnlpb3hk.extractAdvancedStyles(dom, elm));\n      }\n\n      return data;\n    };\n\n    var switchRowType = function (dom, rowElm, toType) {\n      var tableElm = dom.getParent(rowElm, 'table');\n      var oldParentElm = rowElm.parentNode;\n      var parentElm = dom.select(toType, tableElm)[0];\n\n      if (!parentElm) {\n        parentElm = dom.create(toType);\n\n        if (tableElm.firstChild) {\n          if (tableElm.firstChild.nodeName === 'CAPTION') {\n            dom.insertAfter(parentElm, tableElm.firstChild);\n          } else {\n            tableElm.insertBefore(parentElm, tableElm.firstChild);\n          }\n        } else {\n          tableElm.appendChild(parentElm);\n        }\n      }\n\n      parentElm.appendChild(rowElm);\n\n      if (!oldParentElm.hasChildNodes()) {\n        dom.remove(oldParentElm);\n      }\n    };\n\n    function onSubmitRowForm(editor, rows, oldData, evt) {\n      var dom = editor.dom;\n\n      function setAttrib(elm, name, value) {\n        if (rows.length === 1 || value) {\n          dom.setAttrib(elm, name, value);\n        }\n      }\n\n      function setStyle(elm, name, value) {\n        if (rows.length === 1 || value) {\n          dom.setStyle(elm, name, value);\n        }\n      }\n\n      if (hasAdvancedRowTab(editor)) {\n        $_ce2naoujnlpb3hk.syncAdvancedStyleFields(editor, evt);\n      }\n\n      var data = evt.control.rootControl.toJSON();\n      editor.undoManager.transact(function () {\n        global$1.each(rows, function (rowElm) {\n          setAttrib(rowElm, 'scope', data.scope);\n          setAttrib(rowElm, 'style', data.style);\n          setAttrib(rowElm, 'class', data.class);\n          setStyle(rowElm, 'height', addSizeSuffix(data.height));\n\n          if (data.type !== rowElm.parentNode.nodeName.toLowerCase()) {\n            switchRowType(editor.dom, rowElm, data.type);\n          }\n\n          if (data.align !== oldData.align) {\n            $_fl09twotjnlpb3hi.unApplyAlign(editor, rowElm);\n            $_fl09twotjnlpb3hi.applyAlign(editor, rowElm, data.align);\n          }\n        });\n        editor.focus();\n      });\n    }\n\n    var open$1 = function (editor) {\n      var dom = editor.dom;\n      var tableElm, cellElm, rowElm, classListCtrl, data;\n      var rows = [];\n      var generalRowForm;\n      tableElm = dom.getParent(editor.selection.getStart(), 'table');\n      cellElm = dom.getParent(editor.selection.getStart(), 'td,th');\n      global$1.each(tableElm.rows, function (row) {\n        global$1.each(row.cells, function (cell) {\n          if (dom.getAttrib(cell, 'data-mce-selected') || cell === cellElm) {\n            rows.push(row);\n            return false;\n          }\n        });\n      });\n      rowElm = rows[0];\n\n      if (!rowElm) {\n        return;\n      }\n\n      if (rows.length > 1) {\n        data = {\n          height: '',\n          scope: '',\n          style: '',\n          class: '',\n          align: '',\n          type: rowElm.parentNode.nodeName.toLowerCase()\n        };\n      } else {\n        data = extractDataFromElement$1(editor, rowElm);\n      }\n\n      if (getRowClassList(editor).length > 0) {\n        classListCtrl = {\n          name: 'class',\n          type: 'listbox',\n          label: 'Class',\n          values: $_ce2naoujnlpb3hk.buildListItems(getRowClassList(editor), function (item) {\n            if (item.value) {\n              item.textStyle = function () {\n                return editor.formatter.getCssText({\n                  block: 'tr',\n                  classes: [item.value]\n                });\n              };\n            }\n          })\n        };\n      }\n\n      generalRowForm = {\n        type: 'form',\n        columns: 2,\n        padding: 0,\n        defaults: {\n          type: 'textbox'\n        },\n        items: [{\n          type: 'listbox',\n          name: 'type',\n          label: 'Row type',\n          text: 'Header',\n          maxWidth: null,\n          values: [{\n            text: 'Header',\n            value: 'thead'\n          }, {\n            text: 'Body',\n            value: 'tbody'\n          }, {\n            text: 'Footer',\n            value: 'tfoot'\n          }]\n        }, {\n          type: 'listbox',\n          name: 'align',\n          label: 'Alignment',\n          text: 'None',\n          maxWidth: null,\n          values: [{\n            text: 'None',\n            value: ''\n          }, {\n            text: 'Left',\n            value: 'left'\n          }, {\n            text: 'Center',\n            value: 'center'\n          }, {\n            text: 'Right',\n            value: 'right'\n          }]\n        }, {\n          label: 'Height',\n          name: 'height'\n        }, classListCtrl]\n      };\n\n      if (hasAdvancedRowTab(editor)) {\n        editor.windowManager.open({\n          title: 'Row properties',\n          data: data,\n          bodyType: 'tabpanel',\n          body: [{\n            title: 'General',\n            type: 'form',\n            items: generalRowForm\n          }, $_ce2naoujnlpb3hk.createStyleForm(editor)],\n          onsubmit: curry(onSubmitRowForm, editor, rows, data)\n        });\n      } else {\n        editor.windowManager.open({\n          title: 'Row properties',\n          data: data,\n          body: generalRowForm,\n          onsubmit: curry(onSubmitRowForm, editor, rows, data)\n        });\n      }\n    };\n\n    var $_bi4bv9ovjnlpb3hs = {\n      open: open$1\n    };\n    var global$2 = tinymce.util.Tools.resolve('tinymce.Env');\n    var DefaultRenderOptions = {\n      styles: {\n        'border-collapse': 'collapse',\n        width: '100%'\n      },\n      attributes: {\n        border: '1'\n      },\n      percentages: true\n    };\n\n    var makeTable = function () {\n      return Element$$1.fromTag('table');\n    };\n\n    var tableBody = function () {\n      return Element$$1.fromTag('tbody');\n    };\n\n    var tableRow = function () {\n      return Element$$1.fromTag('tr');\n    };\n\n    var tableHeaderCell = function () {\n      return Element$$1.fromTag('th');\n    };\n\n    var tableCell = function () {\n      return Element$$1.fromTag('td');\n    };\n\n    var render$1 = function (rows, columns, rowHeaders, columnHeaders, renderOpts) {\n      if (renderOpts === void 0) {\n        renderOpts = DefaultRenderOptions;\n      }\n\n      var table = makeTable();\n      $_g8mvdembjnlpb2ya.setAll(table, renderOpts.styles);\n      $_9u6utvm2jnlpb2wv.setAll(table, renderOpts.attributes);\n      var tbody = tableBody();\n      $_5hzj77mdjnlpb2yp.append(table, tbody);\n      var trs = [];\n\n      for (var i = 0; i < rows; i++) {\n        var tr = tableRow();\n\n        for (var j = 0; j < columns; j++) {\n          var td = i < rowHeaders || j < columnHeaders ? tableHeaderCell() : tableCell();\n\n          if (j < columnHeaders) {\n            $_9u6utvm2jnlpb2wv.set(td, 'scope', 'row');\n          }\n\n          if (i < rowHeaders) {\n            $_9u6utvm2jnlpb2wv.set(td, 'scope', 'col');\n          }\n\n          $_5hzj77mdjnlpb2yp.append(td, Element$$1.fromTag('br'));\n\n          if (renderOpts.percentages) {\n            $_g8mvdembjnlpb2ya.set(td, 'width', 100 / columns + '%');\n          }\n\n          $_5hzj77mdjnlpb2yp.append(tr, td);\n        }\n\n        trs.push(tr);\n      }\n\n      $_a9wtnkmfjnlpb2yu.append(tbody, trs);\n      return table;\n    };\n\n    var get$8 = function (element) {\n      return element.dom().innerHTML;\n    };\n\n    var set$5 = function (element, content) {\n      var owner = $_2pl1nljjnlpb2ur.owner(element);\n      var docDom = owner.dom();\n      var fragment = Element$$1.fromDom(docDom.createDocumentFragment());\n      var contentElements = $_1ebm76mmjnlpb30a.fromHtml(content, docDom);\n      $_a9wtnkmfjnlpb2yu.append(fragment, contentElements);\n      $_cybn8qmejnlpb2yr.empty(element);\n      $_5hzj77mdjnlpb2yp.append(element, fragment);\n    };\n\n    var getOuter$2 = function (element) {\n      var container = Element$$1.fromTag('div');\n      var clone = Element$$1.fromDom(element.dom().cloneNode(true));\n      $_5hzj77mdjnlpb2yp.append(container, clone);\n      return get$8(container);\n    };\n\n    var $_d2j8ikp1jnlpb3jb = {\n      get: get$8,\n      set: set$5,\n      getOuter: getOuter$2\n    };\n\n    var placeCaretInCell = function (editor, cell) {\n      editor.selection.select(cell.dom(), true);\n      editor.selection.collapse(true);\n    };\n\n    var selectFirstCellInTable = function (editor, tableElm) {\n      $_gdszrpm7jnlpb2xk.descendant(tableElm, 'td,th').each(curry(placeCaretInCell, editor));\n    };\n\n    var fireEvents = function (editor, table) {\n      each($_97aehqm4jnlpb2x5.descendants(table, 'tr'), function (row) {\n        fireNewRow(editor, row.dom());\n        each($_97aehqm4jnlpb2x5.descendants(row, 'th,td'), function (cell) {\n          fireNewCell(editor, cell.dom());\n        });\n      });\n    };\n\n    var isPercentage = function (width) {\n      return isString(width) && width.indexOf('%') !== -1;\n    };\n\n    var insert$1 = function (editor, columns, rows) {\n      var defaultStyles = getDefaultStyles(editor);\n      var options = {\n        styles: defaultStyles,\n        attributes: getDefaultAttributes(editor),\n        percentages: isPercentage(defaultStyles.width) && !isPixelsForced(editor)\n      };\n      var table = render$1(rows, columns, 0, 0, options);\n      $_9u6utvm2jnlpb2wv.set(table, 'data-mce-id', '__mce');\n      var html = $_d2j8ikp1jnlpb3jb.getOuter(table);\n      editor.insertContent(html);\n      return $_gdszrpm7jnlpb2xk.descendant(getBody$1(editor), 'table[data-mce-id=\"__mce\"]').map(function (table) {\n        if (isPixelsForced(editor)) {\n          $_g8mvdembjnlpb2ya.set(table, 'width', $_g8mvdembjnlpb2ya.get(table, 'width'));\n        }\n\n        $_9u6utvm2jnlpb2wv.remove(table, 'data-mce-id');\n        fireEvents(editor, table);\n        selectFirstCellInTable(editor, table);\n        return table.dom();\n      }).getOr(null);\n    };\n\n    var $_azkpjfoyjnlpb3ij = {\n      insert: insert$1\n    };\n\n    function styleTDTH(dom, elm, name, value) {\n      if (elm.tagName === 'TD' || elm.tagName === 'TH') {\n        dom.setStyle(elm, name, value);\n      } else {\n        if (elm.children) {\n          for (var i = 0; i < elm.children.length; i++) {\n            styleTDTH(dom, elm.children[i], name, value);\n          }\n        }\n      }\n    }\n\n    var extractDataFromElement$2 = function (editor, tableElm) {\n      var dom = editor.dom;\n      var data = {\n        width: dom.getStyle(tableElm, 'width') || dom.getAttrib(tableElm, 'width'),\n        height: dom.getStyle(tableElm, 'height') || dom.getAttrib(tableElm, 'height'),\n        cellspacing: dom.getStyle(tableElm, 'border-spacing') || dom.getAttrib(tableElm, 'cellspacing'),\n        cellpadding: dom.getAttrib(tableElm, 'data-mce-cell-padding') || dom.getAttrib(tableElm, 'cellpadding') || $_fl09twotjnlpb3hi.getTDTHOverallStyle(editor.dom, tableElm, 'padding'),\n        border: dom.getAttrib(tableElm, 'data-mce-border') || dom.getAttrib(tableElm, 'border') || $_fl09twotjnlpb3hi.getTDTHOverallStyle(editor.dom, tableElm, 'border'),\n        borderColor: dom.getAttrib(tableElm, 'data-mce-border-color'),\n        caption: !!dom.select('caption', tableElm)[0],\n        class: dom.getAttrib(tableElm, 'class')\n      };\n      global$1.each('left center right'.split(' '), function (name) {\n        if (editor.formatter.matchNode(tableElm, 'align' + name)) {\n          data.align = name;\n        }\n      });\n\n      if (hasAdvancedTableTab(editor)) {\n        global$1.extend(data, $_ce2naoujnlpb3hk.extractAdvancedStyles(dom, tableElm));\n      }\n\n      return data;\n    };\n\n    var applyDataToElement = function (editor, tableElm, data) {\n      var dom = editor.dom;\n      var attrs = {};\n      var styles = {};\n      attrs.class = data.class;\n      styles.height = addSizeSuffix(data.height);\n\n      if (dom.getAttrib(tableElm, 'width') && !shouldStyleWithCss(editor)) {\n        attrs.width = removePxSuffix(data.width);\n      } else {\n        styles.width = addSizeSuffix(data.width);\n      }\n\n      if (shouldStyleWithCss(editor)) {\n        styles['border-width'] = addSizeSuffix(data.border);\n        styles['border-spacing'] = addSizeSuffix(data.cellspacing);\n        global$1.extend(attrs, {\n          'data-mce-border-color': data.borderColor,\n          'data-mce-cell-padding': data.cellpadding,\n          'data-mce-border': data.border\n        });\n      } else {\n        global$1.extend(attrs, {\n          border: data.border,\n          cellpadding: data.cellpadding,\n          cellspacing: data.cellspacing\n        });\n      }\n\n      if (shouldStyleWithCss(editor)) {\n        if (tableElm.children) {\n          for (var i = 0; i < tableElm.children.length; i++) {\n            styleTDTH(dom, tableElm.children[i], {\n              'border-width': addSizeSuffix(data.border),\n              'border-color': data.borderColor,\n              'padding': addSizeSuffix(data.cellpadding)\n            });\n          }\n        }\n      }\n\n      if (data.style) {\n        global$1.extend(styles, dom.parseStyle(data.style));\n      } else {\n        styles = global$1.extend({}, dom.parseStyle(dom.getAttrib(tableElm, 'style')), styles);\n      }\n\n      attrs.style = dom.serializeStyle(styles);\n      dom.setAttribs(tableElm, attrs);\n    };\n\n    var onSubmitTableForm = function (editor, tableElm, evt) {\n      var dom = editor.dom;\n      var captionElm;\n      var data;\n\n      if (hasAdvancedTableTab(editor)) {\n        $_ce2naoujnlpb3hk.syncAdvancedStyleFields(editor, evt);\n      }\n\n      data = evt.control.rootControl.toJSON();\n\n      if (data.class === false) {\n        delete data.class;\n      }\n\n      editor.undoManager.transact(function () {\n        if (!tableElm) {\n          tableElm = $_azkpjfoyjnlpb3ij.insert(editor, data.cols || 1, data.rows || 1);\n        }\n\n        applyDataToElement(editor, tableElm, data);\n        captionElm = dom.select('caption', tableElm)[0];\n\n        if (captionElm && !data.caption) {\n          dom.remove(captionElm);\n        }\n\n        if (!captionElm && data.caption) {\n          captionElm = dom.create('caption');\n          captionElm.innerHTML = !global$2.ie ? '<br data-mce-bogus=\"1\"/>' : '\\xA0';\n          tableElm.insertBefore(captionElm, tableElm.firstChild);\n        }\n\n        $_fl09twotjnlpb3hi.unApplyAlign(editor, tableElm);\n\n        if (data.align) {\n          $_fl09twotjnlpb3hi.applyAlign(editor, tableElm, data.align);\n        }\n\n        editor.focus();\n        editor.addVisual();\n      });\n    };\n\n    var open$2 = function (editor, isProps) {\n      var dom = editor.dom;\n      var tableElm,\n          colsCtrl,\n          rowsCtrl,\n          classListCtrl,\n          data = {},\n          generalTableForm;\n\n      if (isProps === true) {\n        tableElm = dom.getParent(editor.selection.getStart(), 'table');\n\n        if (tableElm) {\n          data = extractDataFromElement$2(editor, tableElm);\n        }\n      } else {\n        colsCtrl = {\n          label: 'Cols',\n          name: 'cols'\n        };\n        rowsCtrl = {\n          label: 'Rows',\n          name: 'rows'\n        };\n      }\n\n      if (getTableClassList(editor).length > 0) {\n        if (data.class) {\n          data.class = data.class.replace(/\\s*mce\\-item\\-table\\s*/g, '');\n        }\n\n        classListCtrl = {\n          name: 'class',\n          type: 'listbox',\n          label: 'Class',\n          values: $_ce2naoujnlpb3hk.buildListItems(getTableClassList(editor), function (item) {\n            if (item.value) {\n              item.textStyle = function () {\n                return editor.formatter.getCssText({\n                  block: 'table',\n                  classes: [item.value]\n                });\n              };\n            }\n          })\n        };\n      }\n\n      generalTableForm = {\n        type: 'form',\n        layout: 'flex',\n        direction: 'column',\n        labelGapCalc: 'children',\n        padding: 0,\n        items: [{\n          type: 'form',\n          labelGapCalc: false,\n          padding: 0,\n          layout: 'grid',\n          columns: 2,\n          defaults: {\n            type: 'textbox',\n            maxWidth: 50\n          },\n          items: hasAppearanceOptions(editor) ? [colsCtrl, rowsCtrl, {\n            label: 'Width',\n            name: 'width',\n            onchange: curry($_ce2naoujnlpb3hk.updateStyleField, editor)\n          }, {\n            label: 'Height',\n            name: 'height',\n            onchange: curry($_ce2naoujnlpb3hk.updateStyleField, editor)\n          }, {\n            label: 'Cell spacing',\n            name: 'cellspacing'\n          }, {\n            label: 'Cell padding',\n            name: 'cellpadding'\n          }, {\n            label: 'Border',\n            name: 'border'\n          }, {\n            label: 'Caption',\n            name: 'caption',\n            type: 'checkbox'\n          }] : [colsCtrl, rowsCtrl, {\n            label: 'Width',\n            name: 'width',\n            onchange: curry($_ce2naoujnlpb3hk.updateStyleField, editor)\n          }, {\n            label: 'Height',\n            name: 'height',\n            onchange: curry($_ce2naoujnlpb3hk.updateStyleField, editor)\n          }]\n        }, {\n          label: 'Alignment',\n          name: 'align',\n          type: 'listbox',\n          text: 'None',\n          values: [{\n            text: 'None',\n            value: ''\n          }, {\n            text: 'Left',\n            value: 'left'\n          }, {\n            text: 'Center',\n            value: 'center'\n          }, {\n            text: 'Right',\n            value: 'right'\n          }]\n        }, classListCtrl]\n      };\n\n      if (hasAdvancedTableTab(editor)) {\n        editor.windowManager.open({\n          title: 'Table properties',\n          data: data,\n          bodyType: 'tabpanel',\n          body: [{\n            title: 'General',\n            type: 'form',\n            items: generalTableForm\n          }, $_ce2naoujnlpb3hk.createStyleForm(editor)],\n          onsubmit: curry(onSubmitTableForm, editor, tableElm)\n        });\n      } else {\n        editor.windowManager.open({\n          title: 'Table properties',\n          data: data,\n          body: generalTableForm,\n          onsubmit: curry(onSubmitTableForm, editor, tableElm)\n        });\n      }\n    };\n\n    var $_ackveiowjnlpb3i0 = {\n      open: open$2\n    };\n    var each$3 = global$1.each;\n\n    var registerCommands = function (editor, actions, cellSelection, selections, clipboardRows) {\n      var isRoot = getIsRoot(editor);\n\n      var eraseTable = function () {\n        var cell = Element$$1.fromDom(editor.dom.getParent(editor.selection.getStart(), 'th,td'));\n        var table = $_em4z2mldjnlpb2sz.table(cell, isRoot);\n        table.filter(not(isRoot)).each(function (table) {\n          var cursor = Element$$1.fromText('');\n          $_5hzj77mdjnlpb2yp.after(table, cursor);\n          $_cybn8qmejnlpb2yr.remove(table);\n          var rng = editor.dom.createRng();\n          rng.setStart(cursor.dom(), 0);\n          rng.setEnd(cursor.dom(), 0);\n          editor.selection.setRng(rng);\n        });\n      };\n\n      var getSelectionStartCell = function () {\n        return Element$$1.fromDom(editor.dom.getParent(editor.selection.getStart(), 'th,td'));\n      };\n\n      var getTableFromCell = function (cell) {\n        return $_em4z2mldjnlpb2sz.table(cell, isRoot);\n      };\n\n      var getSize = function (table) {\n        return {\n          width: getPixelWidth$1(table.dom()),\n          height: getPixelWidth$1(table.dom())\n        };\n      };\n\n      var resizeChange = function (editor, oldSize, table) {\n        var newSize = getSize(table);\n\n        if (oldSize.width !== newSize.width || oldSize.height !== newSize.height) {\n          fireObjectResizeStart(editor, table.dom(), oldSize.width, oldSize.height);\n          fireObjectResized(editor, table.dom(), newSize.width, newSize.height);\n        }\n      };\n\n      var actOnSelection = function (execute) {\n        var cell = getSelectionStartCell();\n        var table = getTableFromCell(cell);\n        table.each(function (table) {\n          var targets = $_39kmudmnjnlpb30f.forMenu(selections, table, cell);\n          var beforeSize = getSize(table);\n          execute(table, targets).each(function (rng) {\n            resizeChange(editor, beforeSize, table);\n            editor.selection.setRng(rng);\n            editor.focus();\n            cellSelection.clear(table);\n            removeDataStyle(table);\n          });\n        });\n      };\n\n      var copyRowSelection = function (execute) {\n        var cell = getSelectionStartCell();\n        var table = getTableFromCell(cell);\n        return table.bind(function (table) {\n          var doc = Element$$1.fromDom(editor.getDoc());\n          var targets = $_39kmudmnjnlpb30f.forMenu(selections, table, cell);\n          var generators = $_f80632mgjnlpb2z3.cellOperations(noop, doc, Option.none());\n          return $_c8ht2doqjnlpb3h7.copyRows(table, targets, generators);\n        });\n      };\n\n      var pasteOnSelection = function (execute) {\n        clipboardRows.get().each(function (rows) {\n          var clonedRows = map(rows, function (row) {\n            return $_7sdoc4mhjnlpb2zt.deep(row);\n          });\n          var cell = getSelectionStartCell();\n          var table = getTableFromCell(cell);\n          table.bind(function (table) {\n            var doc = Element$$1.fromDom(editor.getDoc());\n            var generators = $_f80632mgjnlpb2z3.paste(doc);\n            var targets = $_39kmudmnjnlpb30f.pasteRows(selections, table, cell, clonedRows, generators);\n            execute(table, targets).each(function (rng) {\n              editor.selection.setRng(rng);\n              editor.focus();\n              cellSelection.clear(table);\n            });\n          });\n        });\n      };\n\n      each$3({\n        mceTableSplitCells: function () {\n          actOnSelection(actions.unmergeCells);\n        },\n        mceTableMergeCells: function () {\n          actOnSelection(actions.mergeCells);\n        },\n        mceTableInsertRowBefore: function () {\n          actOnSelection(actions.insertRowsBefore);\n        },\n        mceTableInsertRowAfter: function () {\n          actOnSelection(actions.insertRowsAfter);\n        },\n        mceTableInsertColBefore: function () {\n          actOnSelection(actions.insertColumnsBefore);\n        },\n        mceTableInsertColAfter: function () {\n          actOnSelection(actions.insertColumnsAfter);\n        },\n        mceTableDeleteCol: function () {\n          actOnSelection(actions.deleteColumn);\n        },\n        mceTableDeleteRow: function () {\n          actOnSelection(actions.deleteRow);\n        },\n        mceTableCutRow: function (grid) {\n          clipboardRows.set(copyRowSelection());\n          actOnSelection(actions.deleteRow);\n        },\n        mceTableCopyRow: function (grid) {\n          clipboardRows.set(copyRowSelection());\n        },\n        mceTablePasteRowBefore: function (grid) {\n          pasteOnSelection(actions.pasteRowsBefore);\n        },\n        mceTablePasteRowAfter: function (grid) {\n          pasteOnSelection(actions.pasteRowsAfter);\n        },\n        mceTableDelete: eraseTable\n      }, function (func, name) {\n        editor.addCommand(name, func);\n      });\n      each$3({\n        mceInsertTable: curry($_ackveiowjnlpb3i0.open, editor),\n        mceTableProps: curry($_ackveiowjnlpb3i0.open, editor, true),\n        mceTableRowProps: curry($_bi4bv9ovjnlpb3hs.open, editor),\n        mceTableCellProps: curry($_c9662posjnlpb3hc.open, editor)\n      }, function (func, name) {\n        editor.addCommand(name, function (ui, val) {\n          func(val);\n        });\n      });\n    };\n\n    var $_cs1v9popjnlpb3gp = {\n      registerCommands: registerCommands\n    };\n\n    var only$1 = function (element) {\n      var parent = Option.from(element.dom().documentElement).map(Element$$1.fromDom).getOr(element);\n      return {\n        parent: constant(parent),\n        view: constant(element),\n        origin: constant(Position(0, 0))\n      };\n    };\n\n    var detached = function (editable, chrome) {\n      var origin = curry($_2ipv1snfjnlpb37b.absolute, chrome);\n      return {\n        parent: constant(chrome),\n        view: constant(editable),\n        origin: origin\n      };\n    };\n\n    var body$1 = function (editable, chrome) {\n      return {\n        parent: constant(chrome),\n        view: constant(editable),\n        origin: constant(Position(0, 0))\n      };\n    };\n\n    var $_3sofg5p3jnlpb3jp = {\n      only: only$1,\n      detached: detached,\n      body: body$1\n    };\n\n    function Event(fields) {\n      var struct = Immutable.apply(null, fields);\n      var handlers = [];\n\n      var bind$$1 = function (handler) {\n        if (handler === undefined) {\n          throw 'Event bind error: undefined handler';\n        }\n\n        handlers.push(handler);\n      };\n\n      var unbind = function (handler) {\n        handlers = filter(handlers, function (h) {\n          return h !== handler;\n        });\n      };\n\n      var trigger = function () {\n        var event = struct.apply(null, arguments);\n        each(handlers, function (handler) {\n          handler(event);\n        });\n      };\n\n      return {\n        bind: bind$$1,\n        unbind: unbind,\n        trigger: trigger\n      };\n    }\n\n    var create = function (typeDefs) {\n      var registry = map$1(typeDefs, function (event) {\n        return {\n          bind: event.bind,\n          unbind: event.unbind\n        };\n      });\n      var trigger = map$1(typeDefs, function (event) {\n        return event.trigger;\n      });\n      return {\n        registry: registry,\n        trigger: trigger\n      };\n    };\n\n    var $_1h053sp6jnlpb3kj = {\n      create: create\n    };\n    var mode = exactly(['compare', 'extract', 'mutate', 'sink']);\n    var sink = exactly(['element', 'start', 'stop', 'destroy']);\n    var api$3 = exactly(['forceDrop', 'drop', 'move', 'delayDrop']);\n    var $_giccoxpajnlpb3lt = {\n      mode: mode,\n      sink: sink,\n      api: api$3\n    };\n    var styles$1 = css('ephox-dragster');\n    var $_ey51h9pcjnlpb3md = {\n      resolve: styles$1.resolve\n    };\n\n    function Blocker(options) {\n      var settings = merge$1({\n        'layerClass': $_ey51h9pcjnlpb3md.resolve('blocker')\n      }, options);\n      var div = Element$$1.fromTag('div');\n      $_9u6utvm2jnlpb2wv.set(div, 'role', 'presentation');\n      $_g8mvdembjnlpb2ya.setAll(div, {\n        position: 'fixed',\n        left: '0px',\n        top: '0px',\n        width: '100%',\n        height: '100%'\n      });\n      $_fy8l6zo3jnlpb3d8.add(div, $_ey51h9pcjnlpb3md.resolve('blocker'));\n      $_fy8l6zo3jnlpb3d8.add(div, settings.layerClass);\n\n      var element = function () {\n        return div;\n      };\n\n      var destroy = function () {\n        $_cybn8qmejnlpb2yr.remove(div);\n      };\n\n      return {\n        element: element,\n        destroy: destroy\n      };\n    }\n\n    var mkEvent = function (target, x, y, stop, prevent, kill, raw) {\n      return {\n        'target': constant(target),\n        'x': constant(x),\n        'y': constant(y),\n        'stop': stop,\n        'prevent': prevent,\n        'kill': kill,\n        'raw': constant(raw)\n      };\n    };\n\n    var handle = function (filter, handler) {\n      return function (rawEvent) {\n        if (!filter(rawEvent)) return;\n        var target = Element$$1.fromDom(rawEvent.target);\n\n        var stop = function () {\n          rawEvent.stopPropagation();\n        };\n\n        var prevent = function () {\n          rawEvent.preventDefault();\n        };\n\n        var kill = compose(prevent, stop);\n        var evt = mkEvent(target, rawEvent.clientX, rawEvent.clientY, stop, prevent, kill, rawEvent);\n        handler(evt);\n      };\n    };\n\n    var binder = function (element, event, filter, handler, useCapture) {\n      var wrapped = handle(filter, handler);\n      element.dom().addEventListener(event, wrapped, useCapture);\n      return {\n        unbind: curry(unbind, element, event, wrapped, useCapture)\n      };\n    };\n\n    var bind$1 = function (element, event, filter, handler) {\n      return binder(element, event, filter, handler, false);\n    };\n\n    var capture = function (element, event, filter, handler) {\n      return binder(element, event, filter, handler, true);\n    };\n\n    var unbind = function (element, event, handler, useCapture) {\n      element.dom().removeEventListener(event, handler, useCapture);\n    };\n\n    var $_7kzx7cpejnlpb3mk = {\n      bind: bind$1,\n      capture: capture\n    };\n    var filter$1 = constant(true);\n\n    var bind$2 = function (element, event, handler) {\n      return $_7kzx7cpejnlpb3mk.bind(element, event, filter$1, handler);\n    };\n\n    var capture$1 = function (element, event, handler) {\n      return $_7kzx7cpejnlpb3mk.capture(element, event, filter$1, handler);\n    };\n\n    var $_4o4bswpdjnlpb3mh = {\n      bind: bind$2,\n      capture: capture$1\n    };\n\n    var compare = function (old, nu) {\n      return Position(nu.left() - old.left(), nu.top() - old.top());\n    };\n\n    var extract$1 = function (event) {\n      return Option.some(Position(event.x(), event.y()));\n    };\n\n    var mutate$1 = function (mutation, info) {\n      mutation.mutate(info.left(), info.top());\n    };\n\n    var sink$1 = function (dragApi, settings) {\n      var blocker = Blocker(settings);\n      var mdown = $_4o4bswpdjnlpb3mh.bind(blocker.element(), 'mousedown', dragApi.forceDrop);\n      var mup = $_4o4bswpdjnlpb3mh.bind(blocker.element(), 'mouseup', dragApi.drop);\n      var mmove = $_4o4bswpdjnlpb3mh.bind(blocker.element(), 'mousemove', dragApi.move);\n      var mout = $_4o4bswpdjnlpb3mh.bind(blocker.element(), 'mouseout', dragApi.delayDrop);\n\n      var destroy = function () {\n        blocker.destroy();\n        mup.unbind();\n        mmove.unbind();\n        mout.unbind();\n        mdown.unbind();\n      };\n\n      var start = function (parent) {\n        $_5hzj77mdjnlpb2yp.append(parent, blocker.element());\n      };\n\n      var stop = function () {\n        $_cybn8qmejnlpb2yr.remove(blocker.element());\n      };\n\n      return $_giccoxpajnlpb3lt.sink({\n        element: blocker.element,\n        start: start,\n        stop: stop,\n        destroy: destroy\n      });\n    };\n\n    var MouseDrag = $_giccoxpajnlpb3lt.mode({\n      compare: compare,\n      extract: extract$1,\n      sink: sink$1,\n      mutate: mutate$1\n    });\n\n    function InDrag() {\n      var previous = Option.none();\n\n      var reset = function () {\n        previous = Option.none();\n      };\n\n      var update = function (mode, nu) {\n        var result = previous.map(function (old) {\n          return mode.compare(old, nu);\n        });\n        previous = Option.some(nu);\n        return result;\n      };\n\n      var onEvent = function (event, mode) {\n        var dataOption = mode.extract(event);\n        dataOption.each(function (data) {\n          var offset = update(mode, data);\n          offset.each(function (d) {\n            events.trigger.move(d);\n          });\n        });\n      };\n\n      var events = $_1h053sp6jnlpb3kj.create({\n        move: Event(['info'])\n      });\n      return {\n        onEvent: onEvent,\n        reset: reset,\n        events: events.registry\n      };\n    }\n\n    function NoDrag(anchor) {\n      var onEvent = function (event, mode) {};\n\n      return {\n        onEvent: onEvent,\n        reset: noop\n      };\n    }\n\n    function Movement() {\n      var noDragState = NoDrag();\n      var inDragState = InDrag();\n      var dragState = noDragState;\n\n      var on = function () {\n        dragState.reset();\n        dragState = inDragState;\n      };\n\n      var off = function () {\n        dragState.reset();\n        dragState = noDragState;\n      };\n\n      var onEvent = function (event, mode) {\n        dragState.onEvent(event, mode);\n      };\n\n      var isOn = function () {\n        return dragState === inDragState;\n      };\n\n      return {\n        on: on,\n        off: off,\n        isOn: isOn,\n        onEvent: onEvent,\n        events: inDragState.events\n      };\n    }\n\n    var last$3 = function (fn, rate) {\n      var timer = null;\n\n      var cancel = function () {\n        if (timer !== null) {\n          clearTimeout(timer);\n          timer = null;\n        }\n      };\n\n      var throttle = function () {\n        var args = [];\n\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n\n        if (timer !== null) clearTimeout(timer);\n        timer = setTimeout(function () {\n          fn.apply(null, args);\n          timer = null;\n        }, rate);\n      };\n\n      return {\n        cancel: cancel,\n        throttle: throttle\n      };\n    };\n\n    var setup = function (mutation, mode, settings) {\n      var active = false;\n      var events = $_1h053sp6jnlpb3kj.create({\n        start: Event([]),\n        stop: Event([])\n      });\n      var movement = Movement();\n\n      var drop = function () {\n        sink.stop();\n\n        if (movement.isOn()) {\n          movement.off();\n          events.trigger.stop();\n        }\n      };\n\n      var throttledDrop = last$3(drop, 200);\n\n      var go = function (parent) {\n        sink.start(parent);\n        movement.on();\n        events.trigger.start();\n      };\n\n      var mousemove = function (event, ui) {\n        throttledDrop.cancel();\n        movement.onEvent(event, mode);\n      };\n\n      movement.events.move.bind(function (event) {\n        mode.mutate(mutation, event.info());\n      });\n\n      var on = function () {\n        active = true;\n      };\n\n      var off = function () {\n        active = false;\n      };\n\n      var runIfActive = function (f) {\n        return function () {\n          var args = Array.prototype.slice.call(arguments, 0);\n\n          if (active) {\n            return f.apply(null, args);\n          }\n        };\n      };\n\n      var sink = mode.sink($_giccoxpajnlpb3lt.api({\n        forceDrop: drop,\n        drop: runIfActive(drop),\n        move: runIfActive(mousemove),\n        delayDrop: runIfActive(throttledDrop.throttle)\n      }), settings);\n\n      var destroy = function () {\n        sink.destroy();\n      };\n\n      return {\n        element: sink.element,\n        go: go,\n        on: on,\n        off: off,\n        destroy: destroy,\n        events: events.registry\n      };\n    };\n\n    var $_b0ft8spfjnlpb3mo = {\n      setup: setup\n    };\n\n    var transform$1 = function (mutation, options) {\n      var settings = options !== undefined ? options : {};\n      var mode = settings.mode !== undefined ? settings.mode : MouseDrag;\n      return $_b0ft8spfjnlpb3mo.setup(mutation, mode, options);\n    };\n\n    var $_fs34odp8jnlpb3lh = {\n      transform: transform$1\n    };\n\n    function Mutation() {\n      var events = $_1h053sp6jnlpb3kj.create({\n        'drag': Event(['xDelta', 'yDelta'])\n      });\n\n      var mutate = function (x, y) {\n        events.trigger.drag(x, y);\n      };\n\n      return {\n        mutate: mutate,\n        events: events.registry\n      };\n    }\n\n    function BarMutation() {\n      var events = $_1h053sp6jnlpb3kj.create({\n        drag: Event(['xDelta', 'yDelta', 'target'])\n      });\n      var target = Option.none();\n      var delegate = Mutation();\n      delegate.events.drag.bind(function (event) {\n        target.each(function (t) {\n          events.trigger.drag(event.xDelta(), event.yDelta(), t);\n        });\n      });\n\n      var assign = function (t) {\n        target = Option.some(t);\n      };\n\n      var get = function () {\n        return target;\n      };\n\n      return {\n        assign: assign,\n        get: get,\n        mutate: delegate.mutate,\n        events: events.registry\n      };\n    }\n\n    var any = function (selector) {\n      return $_gdszrpm7jnlpb2xk.first(selector).isSome();\n    };\n\n    var ancestor$2 = function (scope, selector, isRoot) {\n      return $_gdszrpm7jnlpb2xk.ancestor(scope, selector, isRoot).isSome();\n    };\n\n    var sibling$2 = function (scope, selector) {\n      return $_gdszrpm7jnlpb2xk.sibling(scope, selector).isSome();\n    };\n\n    var child$3 = function (scope, selector) {\n      return $_gdszrpm7jnlpb2xk.child(scope, selector).isSome();\n    };\n\n    var descendant$2 = function (scope, selector) {\n      return $_gdszrpm7jnlpb2xk.descendant(scope, selector).isSome();\n    };\n\n    var closest$2 = function (scope, selector, isRoot) {\n      return $_gdszrpm7jnlpb2xk.closest(scope, selector, isRoot).isSome();\n    };\n\n    var $_5b9d06pmjnlpb3np = {\n      any: any,\n      ancestor: ancestor$2,\n      sibling: sibling$2,\n      child: child$3,\n      descendant: descendant$2,\n      closest: closest$2\n    };\n    var resizeBarDragging = $_68goq0o1jnlpb3cz.resolve('resizer-bar-dragging');\n\n    function BarManager(wire, direction, hdirection) {\n      var mutation = BarMutation();\n      var resizing = $_fs34odp8jnlpb3lh.transform(mutation, {});\n      var hoverTable = Option.none();\n\n      var getResizer = function (element, type) {\n        return Option.from($_9u6utvm2jnlpb2wv.get(element, type));\n      };\n\n      mutation.events.drag.bind(function (event) {\n        getResizer(event.target(), 'data-row').each(function (_dataRow) {\n          var currentRow = $_eoi5lkohjnlpb3f8.getInt(event.target(), 'top');\n          $_g8mvdembjnlpb2ya.set(event.target(), 'top', currentRow + event.yDelta() + 'px');\n        });\n        getResizer(event.target(), 'data-column').each(function (_dataCol) {\n          var currentCol = $_eoi5lkohjnlpb3f8.getInt(event.target(), 'left');\n          $_g8mvdembjnlpb2ya.set(event.target(), 'left', currentCol + event.xDelta() + 'px');\n        });\n      });\n\n      var getDelta = function (target, direction) {\n        var newX = $_eoi5lkohjnlpb3f8.getInt(target, direction);\n        var oldX = parseInt($_9u6utvm2jnlpb2wv.get(target, 'data-initial-' + direction), 10);\n        return newX - oldX;\n      };\n\n      resizing.events.stop.bind(function () {\n        mutation.get().each(function (target) {\n          hoverTable.each(function (table) {\n            getResizer(target, 'data-row').each(function (row) {\n              var delta = getDelta(target, 'top');\n              $_9u6utvm2jnlpb2wv.remove(target, 'data-initial-top');\n              events.trigger.adjustHeight(table, delta, parseInt(row, 10));\n            });\n            getResizer(target, 'data-column').each(function (column) {\n              var delta = getDelta(target, 'left');\n              $_9u6utvm2jnlpb2wv.remove(target, 'data-initial-left');\n              events.trigger.adjustWidth(table, delta, parseInt(column, 10));\n            });\n            $_cr2z98nxjnlpb3bk.refresh(wire, table, hdirection, direction);\n          });\n        });\n      });\n\n      var handler = function (target, direction) {\n        events.trigger.startAdjust();\n        mutation.assign(target);\n        $_9u6utvm2jnlpb2wv.set(target, 'data-initial-' + direction, parseInt($_g8mvdembjnlpb2ya.get(target, direction), 10));\n        $_fy8l6zo3jnlpb3d8.add(target, resizeBarDragging);\n        $_g8mvdembjnlpb2ya.set(target, 'opacity', '0.2');\n        resizing.go(wire.parent());\n      };\n\n      var mousedown = $_4o4bswpdjnlpb3mh.bind(wire.parent(), 'mousedown', function (event) {\n        if ($_cr2z98nxjnlpb3bk.isRowBar(event.target())) handler(event.target(), 'top');\n        if ($_cr2z98nxjnlpb3bk.isColBar(event.target())) handler(event.target(), 'left');\n      });\n\n      var isRoot = function (e) {\n        return $_3k22killjnlpb2vb.eq(e, wire.view());\n      };\n\n      var mouseover = $_4o4bswpdjnlpb3mh.bind(wire.view(), 'mouseover', function (event) {\n        if ($_erx5tem3jnlpb2x3.name(event.target()) === 'table' || $_5b9d06pmjnlpb3np.closest(event.target(), 'table', isRoot)) {\n          hoverTable = $_erx5tem3jnlpb2x3.name(event.target()) === 'table' ? Option.some(event.target()) : $_gdszrpm7jnlpb2xk.ancestor(event.target(), 'table', isRoot);\n          hoverTable.each(function (ht) {\n            $_cr2z98nxjnlpb3bk.refresh(wire, ht, hdirection, direction);\n          });\n        } else if ($_1ie4uvm6jnlpb2xf.inBody(event.target())) {\n          $_cr2z98nxjnlpb3bk.destroy(wire);\n        }\n      });\n\n      var destroy = function () {\n        mousedown.unbind();\n        mouseover.unbind();\n        resizing.destroy();\n        $_cr2z98nxjnlpb3bk.destroy(wire);\n      };\n\n      var refresh = function (tbl) {\n        $_cr2z98nxjnlpb3bk.refresh(wire, tbl, hdirection, direction);\n      };\n\n      var events = $_1h053sp6jnlpb3kj.create({\n        adjustHeight: Event(['table', 'delta', 'row']),\n        adjustWidth: Event(['table', 'delta', 'column']),\n        startAdjust: Event([])\n      });\n      return {\n        destroy: destroy,\n        refresh: refresh,\n        on: resizing.on,\n        off: resizing.off,\n        hideBars: curry($_cr2z98nxjnlpb3bk.hide, wire),\n        showBars: curry($_cr2z98nxjnlpb3bk.show, wire),\n        events: events.registry\n      };\n    }\n\n    function TableResize(wire, vdirection) {\n      var hdirection = $_6u52cqnejnlpb36x.height;\n      var manager = BarManager(wire, vdirection, hdirection);\n      var events = $_1h053sp6jnlpb3kj.create({\n        beforeResize: Event(['table']),\n        afterResize: Event(['table']),\n        startDrag: Event([])\n      });\n      manager.events.adjustHeight.bind(function (event) {\n        events.trigger.beforeResize(event.table());\n        var delta = hdirection.delta(event.delta(), event.table());\n        $_ed8i3sodjnlpb3em.adjustHeight(event.table(), delta, event.row(), hdirection);\n        events.trigger.afterResize(event.table());\n      });\n      manager.events.startAdjust.bind(function (event) {\n        events.trigger.startDrag();\n      });\n      manager.events.adjustWidth.bind(function (event) {\n        events.trigger.beforeResize(event.table());\n        var delta = vdirection.delta(event.delta(), event.table());\n        $_ed8i3sodjnlpb3em.adjustWidth(event.table(), delta, event.column(), vdirection);\n        events.trigger.afterResize(event.table());\n      });\n      return {\n        on: manager.on,\n        off: manager.off,\n        hideBars: manager.hideBars,\n        showBars: manager.showBars,\n        destroy: manager.destroy,\n        events: events.registry\n      };\n    }\n\n    var createContainer = function () {\n      var container = Element$$1.fromTag('div');\n      $_g8mvdembjnlpb2ya.setAll(container, {\n        position: 'static',\n        height: '0',\n        width: '0',\n        padding: '0',\n        margin: '0',\n        border: '0'\n      });\n      $_5hzj77mdjnlpb2yp.append($_1ie4uvm6jnlpb2xf.body(), container);\n      return container;\n    };\n\n    var get$9 = function (editor, container) {\n      return editor.inline ? $_3sofg5p3jnlpb3jp.body(getBody$1(editor), createContainer()) : $_3sofg5p3jnlpb3jp.only(Element$$1.fromDom(editor.getDoc()));\n    };\n\n    var remove$6 = function (editor, wire) {\n      if (editor.inline) {\n        $_cybn8qmejnlpb2yr.remove(wire.parent());\n      }\n    };\n\n    var $_f0se2dpnjnlpb3nr = {\n      get: get$9,\n      remove: remove$6\n    };\n\n    var ResizeHandler = function (editor) {\n      var selectionRng = Option.none();\n      var resize = Option.none();\n      var wire = Option.none();\n      var percentageBasedSizeRegex = /(\\d+(\\.\\d+)?)%/;\n      var startW, startRawW;\n\n      var isTable = function (elm) {\n        return elm.nodeName === 'TABLE';\n      };\n\n      var getRawWidth = function (elm) {\n        return editor.dom.getStyle(elm, 'width') || editor.dom.getAttrib(elm, 'width');\n      };\n\n      var lazyResize = function () {\n        return resize;\n      };\n\n      var lazyWire = function () {\n        return wire.getOr($_3sofg5p3jnlpb3jp.only(Element$$1.fromDom(editor.getBody())));\n      };\n\n      var destroy = function () {\n        resize.each(function (sz) {\n          sz.destroy();\n        });\n        wire.each(function (w) {\n          $_f0se2dpnjnlpb3nr.remove(editor, w);\n        });\n      };\n\n      editor.on('init', function () {\n        var direction = TableDirection($_1wn5holjnlpb3g6.directionAt);\n        var rawWire = $_f0se2dpnjnlpb3nr.get(editor);\n        wire = Option.some(rawWire);\n\n        if (hasObjectResizing(editor) && hasTableResizeBars(editor)) {\n          var sz = TableResize(rawWire, direction);\n          sz.on();\n          sz.events.startDrag.bind(function (event) {\n            selectionRng = Option.some(editor.selection.getRng());\n          });\n          sz.events.beforeResize.bind(function (event) {\n            var rawTable = event.table().dom();\n            fireObjectResizeStart(editor, rawTable, getPixelWidth$1(rawTable), getPixelHeight(rawTable));\n          });\n          sz.events.afterResize.bind(function (event) {\n            var table = event.table();\n            var rawTable = table.dom();\n            removeDataStyle(table);\n            selectionRng.each(function (rng) {\n              editor.selection.setRng(rng);\n              editor.focus();\n            });\n            fireObjectResized(editor, rawTable, getPixelWidth$1(rawTable), getPixelHeight(rawTable));\n            editor.undoManager.add();\n          });\n          resize = Option.some(sz);\n        }\n      });\n      editor.on('ObjectResizeStart', function (e) {\n        var targetElm = e.target;\n\n        if (isTable(targetElm)) {\n          startW = e.width;\n          startRawW = getRawWidth(targetElm);\n        }\n      });\n      editor.on('ObjectResized', function (e) {\n        var targetElm = e.target;\n\n        if (isTable(targetElm)) {\n          var table = targetElm;\n\n          if (percentageBasedSizeRegex.test(startRawW)) {\n            var percentW = parseFloat(percentageBasedSizeRegex.exec(startRawW)[1]);\n            var targetPercentW = e.width * percentW / startW;\n            editor.dom.setStyle(table, 'width', targetPercentW + '%');\n          } else {\n            var newCellSizes_1 = [];\n            global$1.each(table.rows, function (row) {\n              global$1.each(row.cells, function (cell) {\n                var width = editor.dom.getStyle(cell, 'width', true);\n                newCellSizes_1.push({\n                  cell: cell,\n                  width: width\n                });\n              });\n            });\n            global$1.each(newCellSizes_1, function (newCellSize) {\n              editor.dom.setStyle(newCellSize.cell, 'width', newCellSize.width);\n              editor.dom.setAttrib(newCellSize.cell, 'width', null);\n            });\n          }\n        }\n      });\n      return {\n        lazyResize: lazyResize,\n        lazyWire: lazyWire,\n        destroy: destroy\n      };\n    };\n\n    var none$2 = function (current) {\n      return folder$1(function (n, f, m, l) {\n        return n(current);\n      });\n    };\n\n    var first$5 = function (current) {\n      return folder$1(function (n, f, m, l) {\n        return f(current);\n      });\n    };\n\n    var middle$1 = function (current, target) {\n      return folder$1(function (n, f, m, l) {\n        return m(current, target);\n      });\n    };\n\n    var last$4 = function (current) {\n      return folder$1(function (n, f, m, l) {\n        return l(current);\n      });\n    };\n\n    var folder$1 = function (fold) {\n      return {\n        fold: fold\n      };\n    };\n\n    var $_eqlswpqjnlpb3oy = {\n      none: none$2,\n      first: first$5,\n      middle: middle$1,\n      last: last$4\n    };\n\n    var detect$4 = function (current, isRoot) {\n      return $_em4z2mldjnlpb2sz.table(current, isRoot).bind(function (table) {\n        var all = $_em4z2mldjnlpb2sz.cells(table);\n        var index = findIndex(all, function (x) {\n          return $_3k22killjnlpb2vb.eq(current, x);\n        });\n        return index.map(function (ind) {\n          return {\n            index: constant(ind),\n            all: constant(all)\n          };\n        });\n      });\n    };\n\n    var next = function (current, isRoot) {\n      var detection = detect$4(current, isRoot);\n      return detection.fold(function () {\n        return $_eqlswpqjnlpb3oy.none(current);\n      }, function (info) {\n        return info.index() + 1 < info.all().length ? $_eqlswpqjnlpb3oy.middle(current, info.all()[info.index() + 1]) : $_eqlswpqjnlpb3oy.last(current);\n      });\n    };\n\n    var prev = function (current, isRoot) {\n      var detection = detect$4(current, isRoot);\n      return detection.fold(function () {\n        return $_eqlswpqjnlpb3oy.none();\n      }, function (info) {\n        return info.index() - 1 >= 0 ? $_eqlswpqjnlpb3oy.middle(current, info.all()[info.index() - 1]) : $_eqlswpqjnlpb3oy.first(current);\n      });\n    };\n\n    var $_fg7b7hppjnlpb3oq = {\n      next: next,\n      prev: prev\n    };\n    var adt = Adt.generate([{\n      'before': ['element']\n    }, {\n      'on': ['element', 'offset']\n    }, {\n      after: ['element']\n    }]);\n\n    var cata$1 = function (subject, onBefore, onOn, onAfter) {\n      return subject.fold(onBefore, onOn, onAfter);\n    };\n\n    var getStart = function (situ) {\n      return situ.fold(identity, identity, identity);\n    };\n\n    var $_1jbfrupsjnlpb3p6 = {\n      before: adt.before,\n      on: adt.on,\n      after: adt.after,\n      cata: cata$1,\n      getStart: getStart\n    };\n    var type$2 = Adt.generate([{\n      domRange: ['rng']\n    }, {\n      relative: ['startSitu', 'finishSitu']\n    }, {\n      exact: ['start', 'soffset', 'finish', 'foffset']\n    }]);\n    var range$2 = Immutable('start', 'soffset', 'finish', 'foffset');\n\n    var exactFromRange = function (simRange) {\n      return type$2.exact(simRange.start(), simRange.soffset(), simRange.finish(), simRange.foffset());\n    };\n\n    var getStart$1 = function (selection) {\n      return selection.match({\n        domRange: function (rng) {\n          return Element$$1.fromDom(rng.startContainer);\n        },\n        relative: function (startSitu, finishSitu) {\n          return $_1jbfrupsjnlpb3p6.getStart(startSitu);\n        },\n        exact: function (start, soffset, finish, foffset) {\n          return start;\n        }\n      });\n    };\n\n    var getWin = function (selection) {\n      var start = getStart$1(selection);\n      return $_2pl1nljjnlpb2ur.defaultView(start);\n    };\n\n    var $_3nispmprjnlpb3p0 = {\n      domRange: type$2.domRange,\n      relative: type$2.relative,\n      exact: type$2.exact,\n      exactFromRange: exactFromRange,\n      range: range$2,\n      getWin: getWin\n    };\n\n    var makeRange = function (start, soffset, finish, foffset) {\n      var doc = $_2pl1nljjnlpb2ur.owner(start);\n      var rng = doc.dom().createRange();\n      rng.setStart(start.dom(), soffset);\n      rng.setEnd(finish.dom(), foffset);\n      return rng;\n    };\n\n    var commonAncestorContainer = function (start, soffset, finish, foffset) {\n      var r = makeRange(start, soffset, finish, foffset);\n      return Element$$1.fromDom(r.commonAncestorContainer);\n    };\n\n    var after$2 = function (start, soffset, finish, foffset) {\n      var r = makeRange(start, soffset, finish, foffset);\n      var same = $_3k22killjnlpb2vb.eq(start, finish) && soffset === foffset;\n      return r.collapsed && !same;\n    };\n\n    var $_3zlyaipujnlpb3pi = {\n      after: after$2,\n      commonAncestorContainer: commonAncestorContainer\n    };\n\n    var fromElements = function (elements, scope) {\n      var doc = scope || document;\n      var fragment = doc.createDocumentFragment();\n      each(elements, function (element) {\n        fragment.appendChild(element.dom());\n      });\n      return Element$$1.fromDom(fragment);\n    };\n\n    var $_4brybspvjnlpb3pk = {\n      fromElements: fromElements\n    };\n\n    var selectNodeContents = function (win, element) {\n      var rng = win.document.createRange();\n      selectNodeContentsUsing(rng, element);\n      return rng;\n    };\n\n    var selectNodeContentsUsing = function (rng, element) {\n      rng.selectNodeContents(element.dom());\n    };\n\n    var isWithin$1 = function (outerRange, innerRange) {\n      return innerRange.compareBoundaryPoints(outerRange.END_TO_START, outerRange) < 1 && innerRange.compareBoundaryPoints(outerRange.START_TO_END, outerRange) > -1;\n    };\n\n    var create$1 = function (win) {\n      return win.document.createRange();\n    };\n\n    var setStart = function (rng, situ) {\n      situ.fold(function (e) {\n        rng.setStartBefore(e.dom());\n      }, function (e, o) {\n        rng.setStart(e.dom(), o);\n      }, function (e) {\n        rng.setStartAfter(e.dom());\n      });\n    };\n\n    var setFinish = function (rng, situ) {\n      situ.fold(function (e) {\n        rng.setEndBefore(e.dom());\n      }, function (e, o) {\n        rng.setEnd(e.dom(), o);\n      }, function (e) {\n        rng.setEndAfter(e.dom());\n      });\n    };\n\n    var replaceWith = function (rng, fragment) {\n      deleteContents(rng);\n      rng.insertNode(fragment.dom());\n    };\n\n    var relativeToNative = function (win, startSitu, finishSitu) {\n      var range = win.document.createRange();\n      setStart(range, startSitu);\n      setFinish(range, finishSitu);\n      return range;\n    };\n\n    var exactToNative = function (win, start, soffset, finish, foffset) {\n      var rng = win.document.createRange();\n      rng.setStart(start.dom(), soffset);\n      rng.setEnd(finish.dom(), foffset);\n      return rng;\n    };\n\n    var deleteContents = function (rng) {\n      rng.deleteContents();\n    };\n\n    var cloneFragment = function (rng) {\n      var fragment = rng.cloneContents();\n      return Element$$1.fromDom(fragment);\n    };\n\n    var toRect = function (rect) {\n      return {\n        left: constant(rect.left),\n        top: constant(rect.top),\n        right: constant(rect.right),\n        bottom: constant(rect.bottom),\n        width: constant(rect.width),\n        height: constant(rect.height)\n      };\n    };\n\n    var getFirstRect = function (rng) {\n      var rects = rng.getClientRects();\n      var rect = rects.length > 0 ? rects[0] : rng.getBoundingClientRect();\n      return rect.width > 0 || rect.height > 0 ? Option.some(rect).map(toRect) : Option.none();\n    };\n\n    var getBounds$1 = function (rng) {\n      var rect = rng.getBoundingClientRect();\n      return rect.width > 0 || rect.height > 0 ? Option.some(rect).map(toRect) : Option.none();\n    };\n\n    var toString = function (rng) {\n      return rng.toString();\n    };\n\n    var $_3bxnj0pwjnlpb3po = {\n      create: create$1,\n      replaceWith: replaceWith,\n      selectNodeContents: selectNodeContents,\n      selectNodeContentsUsing: selectNodeContentsUsing,\n      relativeToNative: relativeToNative,\n      exactToNative: exactToNative,\n      deleteContents: deleteContents,\n      cloneFragment: cloneFragment,\n      getFirstRect: getFirstRect,\n      getBounds: getBounds$1,\n      isWithin: isWithin$1,\n      toString: toString\n    };\n    var adt$1 = Adt.generate([{\n      ltr: ['start', 'soffset', 'finish', 'foffset']\n    }, {\n      rtl: ['start', 'soffset', 'finish', 'foffset']\n    }]);\n\n    var fromRange = function (win, type, range) {\n      return type(Element$$1.fromDom(range.startContainer), range.startOffset, Element$$1.fromDom(range.endContainer), range.endOffset);\n    };\n\n    var getRanges = function (win, selection) {\n      return selection.match({\n        domRange: function (rng) {\n          return {\n            ltr: constant(rng),\n            rtl: Option.none\n          };\n        },\n        relative: function (startSitu, finishSitu) {\n          return {\n            ltr: cached(function () {\n              return $_3bxnj0pwjnlpb3po.relativeToNative(win, startSitu, finishSitu);\n            }),\n            rtl: cached(function () {\n              return Option.some($_3bxnj0pwjnlpb3po.relativeToNative(win, finishSitu, startSitu));\n            })\n          };\n        },\n        exact: function (start, soffset, finish, foffset) {\n          return {\n            ltr: cached(function () {\n              return $_3bxnj0pwjnlpb3po.exactToNative(win, start, soffset, finish, foffset);\n            }),\n            rtl: cached(function () {\n              return Option.some($_3bxnj0pwjnlpb3po.exactToNative(win, finish, foffset, start, soffset));\n            })\n          };\n        }\n      });\n    };\n\n    var doDiagnose = function (win, ranges) {\n      var rng = ranges.ltr();\n\n      if (rng.collapsed) {\n        var reversed = ranges.rtl().filter(function (rev) {\n          return rev.collapsed === false;\n        });\n        return reversed.map(function (rev) {\n          return adt$1.rtl(Element$$1.fromDom(rev.endContainer), rev.endOffset, Element$$1.fromDom(rev.startContainer), rev.startOffset);\n        }).getOrThunk(function () {\n          return fromRange(win, adt$1.ltr, rng);\n        });\n      } else {\n        return fromRange(win, adt$1.ltr, rng);\n      }\n    };\n\n    var diagnose = function (win, selection) {\n      var ranges = getRanges(win, selection);\n      return doDiagnose(win, ranges);\n    };\n\n    var asLtrRange = function (win, selection) {\n      var diagnosis = diagnose(win, selection);\n      return diagnosis.match({\n        ltr: function (start, soffset, finish, foffset) {\n          var rng = win.document.createRange();\n          rng.setStart(start.dom(), soffset);\n          rng.setEnd(finish.dom(), foffset);\n          return rng;\n        },\n        rtl: function (start, soffset, finish, foffset) {\n          var rng = win.document.createRange();\n          rng.setStart(finish.dom(), foffset);\n          rng.setEnd(start.dom(), soffset);\n          return rng;\n        }\n      });\n    };\n\n    var $_960to1pxjnlpb3pz = {\n      ltr: adt$1.ltr,\n      rtl: adt$1.rtl,\n      diagnose: diagnose,\n      asLtrRange: asLtrRange\n    };\n\n    var searchForPoint = function (rectForOffset, x, y, maxX, length) {\n      if (length === 0) return 0;else if (x === maxX) return length - 1;\n      var xDelta = maxX;\n\n      for (var i = 1; i < length; i++) {\n        var rect = rectForOffset(i);\n        var curDeltaX = Math.abs(x - rect.left);\n\n        if (y <= rect.bottom) {\n          if (y < rect.top || curDeltaX > xDelta) {\n            return i - 1;\n          } else {\n            xDelta = curDeltaX;\n          }\n        }\n      }\n\n      return 0;\n    };\n\n    var inRect = function (rect, x, y) {\n      return x >= rect.left && x <= rect.right && y >= rect.top && y <= rect.bottom;\n    };\n\n    var $_j9perq0jnlpb3qr = {\n      inRect: inRect,\n      searchForPoint: searchForPoint\n    };\n\n    var locateOffset = function (doc, textnode, x, y, rect) {\n      var rangeForOffset = function (offset) {\n        var r = doc.dom().createRange();\n        r.setStart(textnode.dom(), offset);\n        r.collapse(true);\n        return r;\n      };\n\n      var rectForOffset = function (offset) {\n        var r = rangeForOffset(offset);\n        return r.getBoundingClientRect();\n      };\n\n      var length = $_3lolvomkjnlpb304.get(textnode).length;\n      var offset = $_j9perq0jnlpb3qr.searchForPoint(rectForOffset, x, y, rect.right, length);\n      return rangeForOffset(offset);\n    };\n\n    var locate = function (doc, node, x, y) {\n      var r = doc.dom().createRange();\n      r.selectNode(node.dom());\n      var rects = r.getClientRects();\n      var foundRect = findMap(rects, function (rect) {\n        return $_j9perq0jnlpb3qr.inRect(rect, x, y) ? Option.some(rect) : Option.none();\n      });\n      return foundRect.map(function (rect) {\n        return locateOffset(doc, node, x, y, rect);\n      });\n    };\n\n    var $_3rp2ysq1jnlpb3qs = {\n      locate: locate\n    };\n\n    var searchInChildren = function (doc, node, x, y) {\n      var r = doc.dom().createRange();\n      var nodes = $_2pl1nljjnlpb2ur.children(node);\n      return findMap(nodes, function (n) {\n        r.selectNode(n.dom());\n        return $_j9perq0jnlpb3qr.inRect(r.getBoundingClientRect(), x, y) ? locateNode(doc, n, x, y) : Option.none();\n      });\n    };\n\n    var locateNode = function (doc, node, x, y) {\n      var locator = $_erx5tem3jnlpb2x3.isText(node) ? $_3rp2ysq1jnlpb3qs.locate : searchInChildren;\n      return locator(doc, node, x, y);\n    };\n\n    var locate$1 = function (doc, node, x, y) {\n      var r = doc.dom().createRange();\n      r.selectNode(node.dom());\n      var rect = r.getBoundingClientRect();\n      var boundedX = Math.max(rect.left, Math.min(rect.right, x));\n      var boundedY = Math.max(rect.top, Math.min(rect.bottom, y));\n      return locateNode(doc, node, boundedX, boundedY);\n    };\n\n    var $_dhcohjpzjnlpb3ql = {\n      locate: locate$1\n    };\n    var COLLAPSE_TO_LEFT = true;\n    var COLLAPSE_TO_RIGHT = false;\n\n    var getCollapseDirection = function (rect, x) {\n      return x - rect.left < rect.right - x ? COLLAPSE_TO_LEFT : COLLAPSE_TO_RIGHT;\n    };\n\n    var createCollapsedNode = function (doc, target, collapseDirection) {\n      var r = doc.dom().createRange();\n      r.selectNode(target.dom());\n      r.collapse(collapseDirection);\n      return r;\n    };\n\n    var locateInElement = function (doc, node, x) {\n      var cursorRange = doc.dom().createRange();\n      cursorRange.selectNode(node.dom());\n      var rect = cursorRange.getBoundingClientRect();\n      var collapseDirection = getCollapseDirection(rect, x);\n      var f = collapseDirection === COLLAPSE_TO_LEFT ? $_7srx6vmijnlpb2zw.first : $_7srx6vmijnlpb2zw.last;\n      return f(node).map(function (target) {\n        return createCollapsedNode(doc, target, collapseDirection);\n      });\n    };\n\n    var locateInEmpty = function (doc, node, x) {\n      var rect = node.dom().getBoundingClientRect();\n      var collapseDirection = getCollapseDirection(rect, x);\n      return Option.some(createCollapsedNode(doc, node, collapseDirection));\n    };\n\n    var search = function (doc, node, x) {\n      var f = $_2pl1nljjnlpb2ur.children(node).length === 0 ? locateInEmpty : locateInElement;\n      return f(doc, node, x);\n    };\n\n    var $_ex3n38q2jnlpb3qy = {\n      search: search\n    };\n\n    var caretPositionFromPoint = function (doc, x, y) {\n      return Option.from(doc.dom().caretPositionFromPoint(x, y)).bind(function (pos) {\n        if (pos.offsetNode === null) return Option.none();\n        var r = doc.dom().createRange();\n        r.setStart(pos.offsetNode, pos.offset);\n        r.collapse();\n        return Option.some(r);\n      });\n    };\n\n    var caretRangeFromPoint = function (doc, x, y) {\n      return Option.from(doc.dom().caretRangeFromPoint(x, y));\n    };\n\n    var searchTextNodes = function (doc, node, x, y) {\n      var r = doc.dom().createRange();\n      r.selectNode(node.dom());\n      var rect = r.getBoundingClientRect();\n      var boundedX = Math.max(rect.left, Math.min(rect.right, x));\n      var boundedY = Math.max(rect.top, Math.min(rect.bottom, y));\n      return $_dhcohjpzjnlpb3ql.locate(doc, node, boundedX, boundedY);\n    };\n\n    var searchFromPoint = function (doc, x, y) {\n      return Element$$1.fromPoint(doc, x, y).bind(function (elem) {\n        var fallback = function () {\n          return $_ex3n38q2jnlpb3qy.search(doc, elem, x);\n        };\n\n        return $_2pl1nljjnlpb2ur.children(elem).length === 0 ? fallback() : searchTextNodes(doc, elem, x, y).orThunk(fallback);\n      });\n    };\n\n    var availableSearch = document.caretPositionFromPoint ? caretPositionFromPoint : document.caretRangeFromPoint ? caretRangeFromPoint : searchFromPoint;\n\n    var fromPoint$1 = function (win, x, y) {\n      var doc = Element$$1.fromDom(win.document);\n      return availableSearch(doc, x, y).map(function (rng) {\n        return $_3nispmprjnlpb3p0.range(Element$$1.fromDom(rng.startContainer), rng.startOffset, Element$$1.fromDom(rng.endContainer), rng.endOffset);\n      });\n    };\n\n    var $_ctcznhpyjnlpb3qg = {\n      fromPoint: fromPoint$1\n    };\n\n    var withinContainer = function (win, ancestor, outerRange, selector) {\n      var innerRange = $_3bxnj0pwjnlpb3po.create(win);\n      var self = $_1mxomdlfjnlpb2tz.is(ancestor, selector) ? [ancestor] : [];\n      var elements = self.concat($_97aehqm4jnlpb2x5.descendants(ancestor, selector));\n      return filter(elements, function (elem) {\n        $_3bxnj0pwjnlpb3po.selectNodeContentsUsing(innerRange, elem);\n        return $_3bxnj0pwjnlpb3po.isWithin(outerRange, innerRange);\n      });\n    };\n\n    var find$3 = function (win, selection, selector) {\n      var outerRange = $_960to1pxjnlpb3pz.asLtrRange(win, selection);\n      var ancestor = Element$$1.fromDom(outerRange.commonAncestorContainer);\n      return $_erx5tem3jnlpb2x3.isElement(ancestor) ? withinContainer(win, ancestor, outerRange, selector) : [];\n    };\n\n    var $_a1llruq3jnlpb3r1 = {\n      find: find$3\n    };\n\n    var beforeSpecial = function (element, offset) {\n      var name = $_erx5tem3jnlpb2x3.name(element);\n      if ('input' === name) return $_1jbfrupsjnlpb3p6.after(element);else if (!contains(['br', 'img'], name)) return $_1jbfrupsjnlpb3p6.on(element, offset);else return offset === 0 ? $_1jbfrupsjnlpb3p6.before(element) : $_1jbfrupsjnlpb3p6.after(element);\n    };\n\n    var preprocessRelative = function (startSitu, finishSitu) {\n      var start = startSitu.fold($_1jbfrupsjnlpb3p6.before, beforeSpecial, $_1jbfrupsjnlpb3p6.after);\n      var finish = finishSitu.fold($_1jbfrupsjnlpb3p6.before, beforeSpecial, $_1jbfrupsjnlpb3p6.after);\n      return $_3nispmprjnlpb3p0.relative(start, finish);\n    };\n\n    var preprocessExact = function (start, soffset, finish, foffset) {\n      var startSitu = beforeSpecial(start, soffset);\n      var finishSitu = beforeSpecial(finish, foffset);\n      return $_3nispmprjnlpb3p0.relative(startSitu, finishSitu);\n    };\n\n    var preprocess = function (selection) {\n      return selection.match({\n        domRange: function (rng) {\n          var start = Element$$1.fromDom(rng.startContainer);\n          var finish = Element$$1.fromDom(rng.endContainer);\n          return preprocessExact(start, rng.startOffset, finish, rng.endOffset);\n        },\n        relative: preprocessRelative,\n        exact: preprocessExact\n      });\n    };\n\n    var $_73jk3jq4jnlpb3r6 = {\n      beforeSpecial: beforeSpecial,\n      preprocess: preprocess,\n      preprocessRelative: preprocessRelative,\n      preprocessExact: preprocessExact\n    };\n\n    var doSetNativeRange = function (win, rng) {\n      Option.from(win.getSelection()).each(function (selection) {\n        selection.removeAllRanges();\n        selection.addRange(rng);\n      });\n    };\n\n    var doSetRange = function (win, start, soffset, finish, foffset) {\n      var rng = $_3bxnj0pwjnlpb3po.exactToNative(win, start, soffset, finish, foffset);\n      doSetNativeRange(win, rng);\n    };\n\n    var findWithin = function (win, selection, selector) {\n      return $_a1llruq3jnlpb3r1.find(win, selection, selector);\n    };\n\n    var setLegacyRtlRange = function (win, selection, start, soffset, finish, foffset) {\n      selection.collapse(start.dom(), soffset);\n      selection.extend(finish.dom(), foffset);\n    };\n\n    var setRangeFromRelative = function (win, relative) {\n      return $_960to1pxjnlpb3pz.diagnose(win, relative).match({\n        ltr: function (start, soffset, finish, foffset) {\n          doSetRange(win, start, soffset, finish, foffset);\n        },\n        rtl: function (start, soffset, finish, foffset) {\n          var selection = win.getSelection();\n\n          if (selection.setBaseAndExtent) {\n            selection.setBaseAndExtent(start.dom(), soffset, finish.dom(), foffset);\n          } else if (selection.extend) {\n            try {\n              setLegacyRtlRange(win, selection, start, soffset, finish, foffset);\n            } catch (e) {\n              doSetRange(win, finish, foffset, start, soffset);\n            }\n          } else {\n            doSetRange(win, finish, foffset, start, soffset);\n          }\n        }\n      });\n    };\n\n    var setExact = function (win, start, soffset, finish, foffset) {\n      var relative = $_73jk3jq4jnlpb3r6.preprocessExact(start, soffset, finish, foffset);\n      setRangeFromRelative(win, relative);\n    };\n\n    var setRelative = function (win, startSitu, finishSitu) {\n      var relative = $_73jk3jq4jnlpb3r6.preprocessRelative(startSitu, finishSitu);\n      setRangeFromRelative(win, relative);\n    };\n\n    var toNative = function (selection) {\n      var win = $_3nispmprjnlpb3p0.getWin(selection).dom();\n\n      var getDomRange = function (start, soffset, finish, foffset) {\n        return $_3bxnj0pwjnlpb3po.exactToNative(win, start, soffset, finish, foffset);\n      };\n\n      var filtered = $_73jk3jq4jnlpb3r6.preprocess(selection);\n      return $_960to1pxjnlpb3pz.diagnose(win, filtered).match({\n        ltr: getDomRange,\n        rtl: getDomRange\n      });\n    };\n\n    var readRange = function (selection) {\n      if (selection.rangeCount > 0) {\n        var firstRng = selection.getRangeAt(0);\n        var lastRng = selection.getRangeAt(selection.rangeCount - 1);\n        return Option.some($_3nispmprjnlpb3p0.range(Element$$1.fromDom(firstRng.startContainer), firstRng.startOffset, Element$$1.fromDom(lastRng.endContainer), lastRng.endOffset));\n      } else {\n        return Option.none();\n      }\n    };\n\n    var doGetExact = function (selection) {\n      var anchorNode = Element$$1.fromDom(selection.anchorNode);\n      var focusNode = Element$$1.fromDom(selection.focusNode);\n      return $_3zlyaipujnlpb3pi.after(anchorNode, selection.anchorOffset, focusNode, selection.focusOffset) ? Option.some($_3nispmprjnlpb3p0.range(Element$$1.fromDom(selection.anchorNode), selection.anchorOffset, Element$$1.fromDom(selection.focusNode), selection.focusOffset)) : readRange(selection);\n    };\n\n    var setToElement = function (win, element) {\n      var rng = $_3bxnj0pwjnlpb3po.selectNodeContents(win, element);\n      doSetNativeRange(win, rng);\n    };\n\n    var forElement = function (win, element) {\n      var rng = $_3bxnj0pwjnlpb3po.selectNodeContents(win, element);\n      return $_3nispmprjnlpb3p0.range(Element$$1.fromDom(rng.startContainer), rng.startOffset, Element$$1.fromDom(rng.endContainer), rng.endOffset);\n    };\n\n    var getExact = function (win) {\n      return Option.from(win.getSelection()).filter(function (sel) {\n        return sel.rangeCount > 0;\n      }).bind(doGetExact);\n    };\n\n    var get$10 = function (win) {\n      return getExact(win).map(function (range) {\n        return $_3nispmprjnlpb3p0.exact(range.start(), range.soffset(), range.finish(), range.foffset());\n      });\n    };\n\n    var getFirstRect$1 = function (win, selection) {\n      var rng = $_960to1pxjnlpb3pz.asLtrRange(win, selection);\n      return $_3bxnj0pwjnlpb3po.getFirstRect(rng);\n    };\n\n    var getBounds$2 = function (win, selection) {\n      var rng = $_960to1pxjnlpb3pz.asLtrRange(win, selection);\n      return $_3bxnj0pwjnlpb3po.getBounds(rng);\n    };\n\n    var getAtPoint = function (win, x, y) {\n      return $_ctcznhpyjnlpb3qg.fromPoint(win, x, y);\n    };\n\n    var getAsString = function (win, selection) {\n      var rng = $_960to1pxjnlpb3pz.asLtrRange(win, selection);\n      return $_3bxnj0pwjnlpb3po.toString(rng);\n    };\n\n    var clear$1 = function (win) {\n      var selection = win.getSelection();\n      selection.removeAllRanges();\n    };\n\n    var clone$2 = function (win, selection) {\n      var rng = $_960to1pxjnlpb3pz.asLtrRange(win, selection);\n      return $_3bxnj0pwjnlpb3po.cloneFragment(rng);\n    };\n\n    var replace$1 = function (win, selection, elements) {\n      var rng = $_960to1pxjnlpb3pz.asLtrRange(win, selection);\n      var fragment = $_4brybspvjnlpb3pk.fromElements(elements, win.document);\n      $_3bxnj0pwjnlpb3po.replaceWith(rng, fragment);\n    };\n\n    var deleteAt = function (win, selection) {\n      var rng = $_960to1pxjnlpb3pz.asLtrRange(win, selection);\n      $_3bxnj0pwjnlpb3po.deleteContents(rng);\n    };\n\n    var isCollapsed = function (start, soffset, finish, foffset) {\n      return $_3k22killjnlpb2vb.eq(start, finish) && soffset === foffset;\n    };\n\n    var $_brx5r2ptjnlpb3pc = {\n      setExact: setExact,\n      getExact: getExact,\n      get: get$10,\n      setRelative: setRelative,\n      toNative: toNative,\n      setToElement: setToElement,\n      clear: clear$1,\n      clone: clone$2,\n      replace: replace$1,\n      deleteAt: deleteAt,\n      forElement: forElement,\n      getFirstRect: getFirstRect$1,\n      getBounds: getBounds$2,\n      getAtPoint: getAtPoint,\n      findWithin: findWithin,\n      getAsString: getAsString,\n      isCollapsed: isCollapsed\n    };\n    var global$3 = tinymce.util.Tools.resolve('tinymce.util.VK');\n\n    var forward = function (editor, isRoot, cell, lazyWire) {\n      return go(editor, isRoot, $_fg7b7hppjnlpb3oq.next(cell), lazyWire);\n    };\n\n    var backward = function (editor, isRoot, cell, lazyWire) {\n      return go(editor, isRoot, $_fg7b7hppjnlpb3oq.prev(cell), lazyWire);\n    };\n\n    var getCellFirstCursorPosition = function (editor, cell) {\n      var selection = $_3nispmprjnlpb3p0.exact(cell, 0, cell, 0);\n      return $_brx5r2ptjnlpb3pc.toNative(selection);\n    };\n\n    var getNewRowCursorPosition = function (editor, table) {\n      var rows = $_97aehqm4jnlpb2x5.descendants(table, 'tr');\n      return last(rows).bind(function (last$$1) {\n        return $_gdszrpm7jnlpb2xk.descendant(last$$1, 'td,th').map(function (first) {\n          return getCellFirstCursorPosition(editor, first);\n        });\n      });\n    };\n\n    var go = function (editor, isRoot, cell, actions, lazyWire) {\n      return cell.fold(Option.none, Option.none, function (current, next) {\n        return $_7srx6vmijnlpb2zw.first(next).map(function (cell) {\n          return getCellFirstCursorPosition(editor, cell);\n        });\n      }, function (current) {\n        return $_em4z2mldjnlpb2sz.table(current, isRoot).bind(function (table) {\n          var targets = $_39kmudmnjnlpb30f.noMenu(current);\n          editor.undoManager.transact(function () {\n            actions.insertRowsAfter(table, targets);\n          });\n          return getNewRowCursorPosition(editor, table);\n        });\n      });\n    };\n\n    var rootElements = ['table', 'li', 'dl'];\n\n    var handle$1 = function (event, editor, actions, lazyWire) {\n      if (event.keyCode === global$3.TAB) {\n        var body_1 = getBody$1(editor);\n\n        var isRoot_1 = function (element) {\n          var name = $_erx5tem3jnlpb2x3.name(element);\n          return $_3k22killjnlpb2vb.eq(element, body_1) || contains(rootElements, name);\n        };\n\n        var rng = editor.selection.getRng();\n\n        if (rng.collapsed) {\n          var start = Element$$1.fromDom(rng.startContainer);\n          $_em4z2mldjnlpb2sz.cell(start, isRoot_1).each(function (cell) {\n            event.preventDefault();\n            var navigation = event.shiftKey ? backward : forward;\n            var rng = navigation(editor, isRoot_1, cell, actions, lazyWire);\n            rng.each(function (range$$1) {\n              editor.selection.setRng(range$$1);\n            });\n          });\n        }\n      }\n    };\n\n    var $_yn0xrpojnlpb3o5 = {\n      handle: handle$1\n    };\n    var response = Immutable('selection', 'kill');\n    var $_bfyx6nq8jnlpb3sm = {\n      response: response\n    };\n\n    var isKey = function (key) {\n      return function (keycode) {\n        return keycode === key;\n      };\n    };\n\n    var isUp = isKey(38);\n    var isDown = isKey(40);\n\n    var isNavigation = function (keycode) {\n      return keycode >= 37 && keycode <= 40;\n    };\n\n    var $_97y5leq9jnlpb3so = {\n      ltr: {\n        isBackward: isKey(37),\n        isForward: isKey(39)\n      },\n      rtl: {\n        isBackward: isKey(39),\n        isForward: isKey(37)\n      },\n      isUp: isUp,\n      isDown: isDown,\n      isNavigation: isNavigation\n    };\n\n    var convertToRange = function (win, selection) {\n      var rng = $_960to1pxjnlpb3pz.asLtrRange(win, selection);\n      return {\n        start: constant(Element$$1.fromDom(rng.startContainer)),\n        soffset: constant(rng.startOffset),\n        finish: constant(Element$$1.fromDom(rng.endContainer)),\n        foffset: constant(rng.endOffset)\n      };\n    };\n\n    var makeSitus = function (start, soffset, finish, foffset) {\n      return {\n        start: constant($_1jbfrupsjnlpb3p6.on(start, soffset)),\n        finish: constant($_1jbfrupsjnlpb3p6.on(finish, foffset))\n      };\n    };\n\n    var $_cq8cz4qbjnlpb3t5 = {\n      convertToRange: convertToRange,\n      makeSitus: makeSitus\n    };\n    var isSafari = $_4aebialqjnlpb2vq.detect().browser.isSafari();\n\n    var get$11 = function (_doc) {\n      var doc = _doc !== undefined ? _doc.dom() : document;\n      var x = doc.body.scrollLeft || doc.documentElement.scrollLeft;\n      var y = doc.body.scrollTop || doc.documentElement.scrollTop;\n      return Position(x, y);\n    };\n\n    var to = function (x, y, _doc) {\n      var doc = _doc !== undefined ? _doc.dom() : document;\n      var win = doc.defaultView;\n      win.scrollTo(x, y);\n    };\n\n    var by = function (x, y, _doc) {\n      var doc = _doc !== undefined ? _doc.dom() : document;\n      var win = doc.defaultView;\n      win.scrollBy(x, y);\n    };\n\n    var setToElement$1 = function (win, element) {\n      var pos = $_2ipv1snfjnlpb37b.absolute(element);\n      var doc = Element$$1.fromDom(win.document);\n      to(pos.left(), pos.top(), doc);\n    };\n\n    var preserve$1 = function (doc, f) {\n      var before = get$11(doc);\n      f();\n      var after = get$11(doc);\n\n      if (before.top() !== after.top() || before.left() !== after.left()) {\n        to(before.left(), before.top(), doc);\n      }\n    };\n\n    var capture$2 = function (doc) {\n      var previous = Option.none();\n\n      var save = function () {\n        previous = Option.some(get$11(doc));\n      };\n\n      var restore = function () {\n        previous.each(function (p) {\n          to(p.left(), p.top(), doc);\n        });\n      };\n\n      save();\n      return {\n        save: save,\n        restore: restore\n      };\n    };\n\n    var intoView = function (element, alignToTop) {\n      if (isSafari && isFunction(element.dom().scrollIntoViewIfNeeded)) {\n        element.dom().scrollIntoViewIfNeeded(false);\n      } else {\n        element.dom().scrollIntoView(alignToTop);\n      }\n    };\n\n    var intoViewIfNeeded = function (element, container) {\n      var containerBox = container.dom().getBoundingClientRect();\n      var elementBox = element.dom().getBoundingClientRect();\n\n      if (elementBox.top < containerBox.top) {\n        intoView(element, true);\n      } else if (elementBox.bottom > containerBox.bottom) {\n        intoView(element, false);\n      }\n    };\n\n    var scrollBarWidth = function () {\n      var scrollDiv = Element$$1.fromHtml('<div style=\"width: 100px; height: 100px; overflow: scroll; position: absolute; top: -9999px;\"></div>');\n      $_5hzj77mdjnlpb2yp.after($_1ie4uvm6jnlpb2xf.body(), scrollDiv);\n      var w = scrollDiv.dom().offsetWidth - scrollDiv.dom().clientWidth;\n      $_cybn8qmejnlpb2yr.remove(scrollDiv);\n      return w;\n    };\n\n    var $_t8063qcjnlpb3tf = {\n      get: get$11,\n      to: to,\n      by: by,\n      preserve: preserve$1,\n      capture: capture$2,\n      intoView: intoView,\n      intoViewIfNeeded: intoViewIfNeeded,\n      setToElement: setToElement$1,\n      scrollBarWidth: scrollBarWidth\n    };\n\n    function WindowBridge(win) {\n      var elementFromPoint = function (x, y) {\n        return Element$$1.fromPoint(Element$$1.fromDom(win.document), x, y);\n      };\n\n      var getRect = function (element) {\n        return element.dom().getBoundingClientRect();\n      };\n\n      var getRangedRect = function (start, soffset, finish, foffset) {\n        var sel = $_3nispmprjnlpb3p0.exact(start, soffset, finish, foffset);\n        return $_brx5r2ptjnlpb3pc.getFirstRect(win, sel).map(function (structRect) {\n          return map$1(structRect, apply);\n        });\n      };\n\n      var getSelection = function () {\n        return $_brx5r2ptjnlpb3pc.get(win).map(function (exactAdt) {\n          return $_cq8cz4qbjnlpb3t5.convertToRange(win, exactAdt);\n        });\n      };\n\n      var fromSitus = function (situs) {\n        var relative = $_3nispmprjnlpb3p0.relative(situs.start(), situs.finish());\n        return $_cq8cz4qbjnlpb3t5.convertToRange(win, relative);\n      };\n\n      var situsFromPoint = function (x, y) {\n        return $_brx5r2ptjnlpb3pc.getAtPoint(win, x, y).map(function (exact) {\n          return {\n            start: constant($_1jbfrupsjnlpb3p6.on(exact.start(), exact.soffset())),\n            finish: constant($_1jbfrupsjnlpb3p6.on(exact.finish(), exact.foffset()))\n          };\n        });\n      };\n\n      var clearSelection = function () {\n        $_brx5r2ptjnlpb3pc.clear(win);\n      };\n\n      var selectContents = function (element) {\n        $_brx5r2ptjnlpb3pc.setToElement(win, element);\n      };\n\n      var setSelection = function (sel) {\n        $_brx5r2ptjnlpb3pc.setExact(win, sel.start(), sel.soffset(), sel.finish(), sel.foffset());\n      };\n\n      var setRelativeSelection = function (start, finish) {\n        $_brx5r2ptjnlpb3pc.setRelative(win, start, finish);\n      };\n\n      var getInnerHeight = function () {\n        return win.innerHeight;\n      };\n\n      var getScrollY = function () {\n        var pos = $_t8063qcjnlpb3tf.get(Element$$1.fromDom(win.document));\n        return pos.top();\n      };\n\n      var scrollBy = function (x, y) {\n        $_t8063qcjnlpb3tf.by(x, y, Element$$1.fromDom(win.document));\n      };\n\n      return {\n        elementFromPoint: elementFromPoint,\n        getRect: getRect,\n        getRangedRect: getRangedRect,\n        getSelection: getSelection,\n        fromSitus: fromSitus,\n        situsFromPoint: situsFromPoint,\n        clearSelection: clearSelection,\n        setSelection: setSelection,\n        setRelativeSelection: setRelativeSelection,\n        selectContents: selectContents,\n        getInnerHeight: getInnerHeight,\n        getScrollY: getScrollY,\n        scrollBy: scrollBy\n      };\n    }\n\n    var sync = function (container, isRoot, start, soffset, finish, foffset, selectRange) {\n      if (!($_3k22killjnlpb2vb.eq(start, finish) && soffset === foffset)) {\n        return $_gdszrpm7jnlpb2xk.closest(start, 'td,th', isRoot).bind(function (s) {\n          return $_gdszrpm7jnlpb2xk.closest(finish, 'td,th', isRoot).bind(function (f) {\n            return detect$5(container, isRoot, s, f, selectRange);\n          });\n        });\n      } else {\n        return Option.none();\n      }\n    };\n\n    var detect$5 = function (container, isRoot, start, finish, selectRange) {\n      if (!$_3k22killjnlpb2vb.eq(start, finish)) {\n        return $_3c1t0amqjnlpb319.identify(start, finish, isRoot).bind(function (cellSel) {\n          var boxes = cellSel.boxes().getOr([]);\n\n          if (boxes.length > 0) {\n            selectRange(container, boxes, cellSel.start(), cellSel.finish());\n            return Option.some($_bfyx6nq8jnlpb3sm.response(Option.some($_cq8cz4qbjnlpb3t5.makeSitus(start, 0, start, $_bqkyudmjjnlpb300.getEnd(start))), true));\n          } else {\n            return Option.none();\n          }\n        });\n      } else {\n        return Option.none();\n      }\n    };\n\n    var update = function (rows, columns, container, selected, annotations) {\n      var updateSelection = function (newSels) {\n        annotations.clear(container);\n        annotations.selectRange(container, newSels.boxes(), newSels.start(), newSels.finish());\n        return newSels.boxes();\n      };\n\n      return $_3c1t0amqjnlpb319.shiftSelection(selected, rows, columns, annotations.firstSelectedSelector(), annotations.lastSelectedSelector()).map(updateSelection);\n    };\n\n    var $_58lt4vqdjnlpb3tq = {\n      sync: sync,\n      detect: detect$5,\n      update: update\n    };\n    var nu$3 = MixedBag(['left', 'top', 'right', 'bottom'], []);\n\n    var moveDown = function (caret, amount) {\n      return nu$3({\n        left: caret.left(),\n        top: caret.top() + amount,\n        right: caret.right(),\n        bottom: caret.bottom() + amount\n      });\n    };\n\n    var moveUp = function (caret, amount) {\n      return nu$3({\n        left: caret.left(),\n        top: caret.top() - amount,\n        right: caret.right(),\n        bottom: caret.bottom() - amount\n      });\n    };\n\n    var moveBottomTo = function (caret, bottom) {\n      var height = caret.bottom() - caret.top();\n      return nu$3({\n        left: caret.left(),\n        top: bottom - height,\n        right: caret.right(),\n        bottom: bottom\n      });\n    };\n\n    var moveTopTo = function (caret, top) {\n      var height = caret.bottom() - caret.top();\n      return nu$3({\n        left: caret.left(),\n        top: top,\n        right: caret.right(),\n        bottom: top + height\n      });\n    };\n\n    var translate = function (caret, xDelta, yDelta) {\n      return nu$3({\n        left: caret.left() + xDelta,\n        top: caret.top() + yDelta,\n        right: caret.right() + xDelta,\n        bottom: caret.bottom() + yDelta\n      });\n    };\n\n    var getTop$1 = function (caret) {\n      return caret.top();\n    };\n\n    var getBottom = function (caret) {\n      return caret.bottom();\n    };\n\n    var toString$1 = function (caret) {\n      return '(' + caret.left() + ', ' + caret.top() + ') -> (' + caret.right() + ', ' + caret.bottom() + ')';\n    };\n\n    var $_2vydjpqgjnlpb3v6 = {\n      nu: nu$3,\n      moveUp: moveUp,\n      moveDown: moveDown,\n      moveBottomTo: moveBottomTo,\n      moveTopTo: moveTopTo,\n      getTop: getTop$1,\n      getBottom: getBottom,\n      translate: translate,\n      toString: toString$1\n    };\n\n    var getPartialBox = function (bridge, element, offset) {\n      if (offset >= 0 && offset < $_bqkyudmjjnlpb300.getEnd(element)) return bridge.getRangedRect(element, offset, element, offset + 1);else if (offset > 0) return bridge.getRangedRect(element, offset - 1, element, offset);\n      return Option.none();\n    };\n\n    var toCaret = function (rect) {\n      return $_2vydjpqgjnlpb3v6.nu({\n        left: rect.left,\n        top: rect.top,\n        right: rect.right,\n        bottom: rect.bottom\n      });\n    };\n\n    var getElemBox = function (bridge, element) {\n      return Option.some(bridge.getRect(element));\n    };\n\n    var getBoxAt = function (bridge, element, offset) {\n      if ($_erx5tem3jnlpb2x3.isElement(element)) return getElemBox(bridge, element).map(toCaret);else if ($_erx5tem3jnlpb2x3.isText(element)) return getPartialBox(bridge, element, offset).map(toCaret);else return Option.none();\n    };\n\n    var getEntireBox = function (bridge, element) {\n      if ($_erx5tem3jnlpb2x3.isElement(element)) return getElemBox(bridge, element).map(toCaret);else if ($_erx5tem3jnlpb2x3.isText(element)) return bridge.getRangedRect(element, 0, element, $_bqkyudmjjnlpb300.getEnd(element)).map(toCaret);else return Option.none();\n    };\n\n    var $_5ajb76qhjnlpb3va = {\n      getBoxAt: getBoxAt,\n      getEntireBox: getEntireBox\n    };\n    var traverse = Immutable('item', 'mode');\n\n    var backtrack = function (universe, item, direction, _transition) {\n      var transition = _transition !== undefined ? _transition : sidestep;\n      return universe.property().parent(item).map(function (p) {\n        return traverse(p, transition);\n      });\n    };\n\n    var sidestep = function (universe, item, direction, _transition) {\n      var transition = _transition !== undefined ? _transition : advance;\n      return direction.sibling(universe, item).map(function (p) {\n        return traverse(p, transition);\n      });\n    };\n\n    var advance = function (universe, item, direction, _transition) {\n      var transition = _transition !== undefined ? _transition : advance;\n      var children = universe.property().children(item);\n      var result = direction.first(children);\n      return result.map(function (r) {\n        return traverse(r, transition);\n      });\n    };\n\n    var successors = [{\n      current: backtrack,\n      next: sidestep,\n      fallback: Option.none()\n    }, {\n      current: sidestep,\n      next: advance,\n      fallback: Option.some(backtrack)\n    }, {\n      current: advance,\n      next: advance,\n      fallback: Option.some(sidestep)\n    }];\n\n    var go$1 = function (universe, item, mode, direction, rules) {\n      var rules = rules !== undefined ? rules : successors;\n      var ruleOpt = find(rules, function (succ) {\n        return succ.current === mode;\n      });\n      return ruleOpt.bind(function (rule) {\n        return rule.current(universe, item, direction, rule.next).orThunk(function () {\n          return rule.fallback.bind(function (fb) {\n            return go$1(universe, item, fb, direction);\n          });\n        });\n      });\n    };\n\n    var $_3d298hqmjnlpb3wp = {\n      backtrack: backtrack,\n      sidestep: sidestep,\n      advance: advance,\n      go: go$1\n    };\n\n    var left$1 = function () {\n      var sibling = function (universe, item) {\n        return universe.query().prevSibling(item);\n      };\n\n      var first = function (children) {\n        return children.length > 0 ? Option.some(children[children.length - 1]) : Option.none();\n      };\n\n      return {\n        sibling: sibling,\n        first: first\n      };\n    };\n\n    var right$1 = function () {\n      var sibling = function (universe, item) {\n        return universe.query().nextSibling(item);\n      };\n\n      var first = function (children) {\n        return children.length > 0 ? Option.some(children[0]) : Option.none();\n      };\n\n      return {\n        sibling: sibling,\n        first: first\n      };\n    };\n\n    var $_6dc67rqnjnlpb3wy = {\n      left: left$1,\n      right: right$1\n    };\n\n    var hone = function (universe, item, predicate, mode, direction, isRoot) {\n      var next = $_3d298hqmjnlpb3wp.go(universe, item, mode, direction);\n      return next.bind(function (n) {\n        if (isRoot(n.item())) return Option.none();else return predicate(n.item()) ? Option.some(n.item()) : hone(universe, n.item(), predicate, n.mode(), direction, isRoot);\n      });\n    };\n\n    var left$2 = function (universe, item, predicate, isRoot) {\n      return hone(universe, item, predicate, $_3d298hqmjnlpb3wp.sidestep, $_6dc67rqnjnlpb3wy.left(), isRoot);\n    };\n\n    var right$2 = function (universe, item, predicate, isRoot) {\n      return hone(universe, item, predicate, $_3d298hqmjnlpb3wp.sidestep, $_6dc67rqnjnlpb3wy.right(), isRoot);\n    };\n\n    var $_fogvzzqljnlpb3wl = {\n      left: left$2,\n      right: right$2\n    };\n\n    var isLeaf = function (universe, element) {\n      return universe.property().children(element).length === 0;\n    };\n\n    var before$2 = function (universe, item, isRoot) {\n      return seekLeft(universe, item, curry(isLeaf, universe), isRoot);\n    };\n\n    var after$3 = function (universe, item, isRoot) {\n      return seekRight(universe, item, curry(isLeaf, universe), isRoot);\n    };\n\n    var seekLeft = function (universe, item, predicate, isRoot) {\n      return $_fogvzzqljnlpb3wl.left(universe, item, predicate, isRoot);\n    };\n\n    var seekRight = function (universe, item, predicate, isRoot) {\n      return $_fogvzzqljnlpb3wl.right(universe, item, predicate, isRoot);\n    };\n\n    var walkers = function () {\n      return {\n        left: $_6dc67rqnjnlpb3wy.left,\n        right: $_6dc67rqnjnlpb3wy.right\n      };\n    };\n\n    var walk = function (universe, item, mode, direction, _rules) {\n      return $_3d298hqmjnlpb3wp.go(universe, item, mode, direction, _rules);\n    };\n\n    var $_77hw2eqkjnlpb3wh = {\n      before: before$2,\n      after: after$3,\n      seekLeft: seekLeft,\n      seekRight: seekRight,\n      walkers: walkers,\n      walk: walk,\n      backtrack: $_3d298hqmjnlpb3wp.backtrack,\n      sidestep: $_3d298hqmjnlpb3wp.sidestep,\n      advance: $_3d298hqmjnlpb3wp.advance\n    };\n    var universe$2 = DomUniverse();\n\n    var gather = function (element, prune, transform) {\n      return $_77hw2eqkjnlpb3wh.gather(universe$2, element, prune, transform);\n    };\n\n    var before$3 = function (element, isRoot) {\n      return $_77hw2eqkjnlpb3wh.before(universe$2, element, isRoot);\n    };\n\n    var after$4 = function (element, isRoot) {\n      return $_77hw2eqkjnlpb3wh.after(universe$2, element, isRoot);\n    };\n\n    var seekLeft$1 = function (element, predicate, isRoot) {\n      return $_77hw2eqkjnlpb3wh.seekLeft(universe$2, element, predicate, isRoot);\n    };\n\n    var seekRight$1 = function (element, predicate, isRoot) {\n      return $_77hw2eqkjnlpb3wh.seekRight(universe$2, element, predicate, isRoot);\n    };\n\n    var walkers$1 = function () {\n      return $_77hw2eqkjnlpb3wh.walkers();\n    };\n\n    var walk$1 = function (item, mode, direction, _rules) {\n      return $_77hw2eqkjnlpb3wh.walk(universe$2, item, mode, direction, _rules);\n    };\n\n    var $_3mk9c4qjjnlpb3wc = {\n      gather: gather,\n      before: before$3,\n      after: after$4,\n      seekLeft: seekLeft$1,\n      seekRight: seekRight$1,\n      walkers: walkers$1,\n      walk: walk$1\n    };\n    var JUMP_SIZE = 5;\n    var NUM_RETRIES = 100;\n    var adt$2 = Adt.generate([{\n      'none': []\n    }, {\n      'retry': ['caret']\n    }]);\n\n    var isOutside = function (caret, box) {\n      return caret.left() < box.left() || Math.abs(box.right() - caret.left()) < 1 || caret.left() > box.right();\n    };\n\n    var inOutsideBlock = function (bridge, element, caret) {\n      return $_1nfdlmm8jnlpb2xl.closest(element, $_7dfae7nojnlpb39j.isBlock).fold(constant(false), function (cell) {\n        return $_5ajb76qhjnlpb3va.getEntireBox(bridge, cell).exists(function (box) {\n          return isOutside(caret, box);\n        });\n      });\n    };\n\n    var adjustDown = function (bridge, element, guessBox, original, caret) {\n      var lowerCaret = $_2vydjpqgjnlpb3v6.moveDown(caret, JUMP_SIZE);\n      if (Math.abs(guessBox.bottom() - original.bottom()) < 1) return adt$2.retry(lowerCaret);else if (guessBox.top() > caret.bottom()) return adt$2.retry(lowerCaret);else if (guessBox.top() === caret.bottom()) return adt$2.retry($_2vydjpqgjnlpb3v6.moveDown(caret, 1));else return inOutsideBlock(bridge, element, caret) ? adt$2.retry($_2vydjpqgjnlpb3v6.translate(lowerCaret, JUMP_SIZE, 0)) : adt$2.none();\n    };\n\n    var adjustUp = function (bridge, element, guessBox, original, caret) {\n      var higherCaret = $_2vydjpqgjnlpb3v6.moveUp(caret, JUMP_SIZE);\n      if (Math.abs(guessBox.top() - original.top()) < 1) return adt$2.retry(higherCaret);else if (guessBox.bottom() < caret.top()) return adt$2.retry(higherCaret);else if (guessBox.bottom() === caret.top()) return adt$2.retry($_2vydjpqgjnlpb3v6.moveUp(caret, 1));else return inOutsideBlock(bridge, element, caret) ? adt$2.retry($_2vydjpqgjnlpb3v6.translate(higherCaret, JUMP_SIZE, 0)) : adt$2.none();\n    };\n\n    var upMovement = {\n      point: $_2vydjpqgjnlpb3v6.getTop,\n      adjuster: adjustUp,\n      move: $_2vydjpqgjnlpb3v6.moveUp,\n      gather: $_3mk9c4qjjnlpb3wc.before\n    };\n    var downMovement = {\n      point: $_2vydjpqgjnlpb3v6.getBottom,\n      adjuster: adjustDown,\n      move: $_2vydjpqgjnlpb3v6.moveDown,\n      gather: $_3mk9c4qjjnlpb3wc.after\n    };\n\n    var isAtTable = function (bridge, x, y) {\n      return bridge.elementFromPoint(x, y).filter(function (elm) {\n        return $_erx5tem3jnlpb2x3.name(elm) === 'table';\n      }).isSome();\n    };\n\n    var adjustForTable = function (bridge, movement, original, caret, numRetries) {\n      return adjustTil(bridge, movement, original, movement.move(caret, JUMP_SIZE), numRetries);\n    };\n\n    var adjustTil = function (bridge, movement, original, caret, numRetries) {\n      if (numRetries === 0) return Option.some(caret);\n      if (isAtTable(bridge, caret.left(), movement.point(caret))) return adjustForTable(bridge, movement, original, caret, numRetries - 1);\n      return bridge.situsFromPoint(caret.left(), movement.point(caret)).bind(function (guess) {\n        return guess.start().fold(Option.none, function (element, offset) {\n          return $_5ajb76qhjnlpb3va.getEntireBox(bridge, element, offset).bind(function (guessBox) {\n            return movement.adjuster(bridge, element, guessBox, original, caret).fold(Option.none, function (newCaret) {\n              return adjustTil(bridge, movement, original, newCaret, numRetries - 1);\n            });\n          }).orThunk(function () {\n            return Option.some(caret);\n          });\n        }, Option.none);\n      });\n    };\n\n    var ieTryDown = function (bridge, caret) {\n      return bridge.situsFromPoint(caret.left(), caret.bottom() + JUMP_SIZE);\n    };\n\n    var ieTryUp = function (bridge, caret) {\n      return bridge.situsFromPoint(caret.left(), caret.top() - JUMP_SIZE);\n    };\n\n    var checkScroll = function (movement, adjusted, bridge) {\n      if (movement.point(adjusted) > bridge.getInnerHeight()) return Option.some(movement.point(adjusted) - bridge.getInnerHeight());else if (movement.point(adjusted) < 0) return Option.some(-movement.point(adjusted));else return Option.none();\n    };\n\n    var retry = function (movement, bridge, caret) {\n      var moved = movement.move(caret, JUMP_SIZE);\n      var adjusted = adjustTil(bridge, movement, caret, moved, NUM_RETRIES).getOr(moved);\n      return checkScroll(movement, adjusted, bridge).fold(function () {\n        return bridge.situsFromPoint(adjusted.left(), movement.point(adjusted));\n      }, function (delta) {\n        bridge.scrollBy(0, delta);\n        return bridge.situsFromPoint(adjusted.left(), movement.point(adjusted) - delta);\n      });\n    };\n\n    var $_4fb5qlqijnlpb3vj = {\n      tryUp: curry(retry, upMovement),\n      tryDown: curry(retry, downMovement),\n      ieTryUp: ieTryUp,\n      ieTryDown: ieTryDown,\n      getJumpSize: constant(JUMP_SIZE)\n    };\n    var adt$3 = Adt.generate([{\n      'none': ['message']\n    }, {\n      'success': []\n    }, {\n      'failedUp': ['cell']\n    }, {\n      'failedDown': ['cell']\n    }]);\n\n    var isOverlapping = function (bridge, before, after) {\n      var beforeBounds = bridge.getRect(before);\n      var afterBounds = bridge.getRect(after);\n      return afterBounds.right > beforeBounds.left && afterBounds.left < beforeBounds.right;\n    };\n\n    var verify = function (bridge, before, beforeOffset, after, afterOffset, failure, isRoot) {\n      return $_gdszrpm7jnlpb2xk.closest(after, 'td,th', isRoot).bind(function (afterCell) {\n        return $_gdszrpm7jnlpb2xk.closest(before, 'td,th', isRoot).map(function (beforeCell) {\n          if (!$_3k22killjnlpb2vb.eq(afterCell, beforeCell)) {\n            return $_5iw3l3mrjnlpb31x.sharedOne(isRow, [afterCell, beforeCell]).fold(function () {\n              return isOverlapping(bridge, beforeCell, afterCell) ? adt$3.success() : failure(beforeCell);\n            }, function (sharedRow) {\n              return failure(beforeCell);\n            });\n          } else {\n            return $_3k22killjnlpb2vb.eq(after, afterCell) && $_bqkyudmjjnlpb300.getEnd(afterCell) === afterOffset ? failure(beforeCell) : adt$3.none('in same cell');\n          }\n        });\n      }).getOr(adt$3.none('default'));\n    };\n\n    var isRow = function (elem) {\n      return $_gdszrpm7jnlpb2xk.closest(elem, 'tr');\n    };\n\n    var cata$2 = function (subject, onNone, onSuccess, onFailedUp, onFailedDown) {\n      return subject.fold(onNone, onSuccess, onFailedUp, onFailedDown);\n    };\n\n    var $_57y4nlqojnlpb3x2 = {\n      verify: verify,\n      cata: cata$2,\n      adt: adt$3\n    };\n    var point = Immutable('element', 'offset');\n    var delta = Immutable('element', 'deltaOffset');\n    var range$3 = Immutable('element', 'start', 'finish');\n    var points = Immutable('begin', 'end');\n    var text = Immutable('element', 'text');\n    var $_8t1dqfqqjnlpb3y6 = {\n      point: point,\n      delta: delta,\n      range: range$3,\n      points: points,\n      text: text\n    };\n    var inAncestor = Immutable('ancestor', 'descendants', 'element', 'index');\n    var inParent = Immutable('parent', 'children', 'element', 'index');\n\n    var childOf = function (element, ancestor) {\n      return $_1nfdlmm8jnlpb2xl.closest(element, function (elem) {\n        return $_2pl1nljjnlpb2ur.parent(elem).exists(function (parent) {\n          return $_3k22killjnlpb2vb.eq(parent, ancestor);\n        });\n      });\n    };\n\n    var indexInParent = function (element) {\n      return $_2pl1nljjnlpb2ur.parent(element).bind(function (parent) {\n        var children = $_2pl1nljjnlpb2ur.children(parent);\n        return indexOf$1(children, element).map(function (index) {\n          return inParent(parent, children, element, index);\n        });\n      });\n    };\n\n    var indexOf$1 = function (elements, element) {\n      return findIndex(elements, curry($_3k22killjnlpb2vb.eq, element));\n    };\n\n    var selectorsInParent = function (element, selector) {\n      return $_2pl1nljjnlpb2ur.parent(element).bind(function (parent) {\n        var children = $_97aehqm4jnlpb2x5.children(parent, selector);\n        return indexOf$1(children, element).map(function (index) {\n          return inParent(parent, children, element, index);\n        });\n      });\n    };\n\n    var descendantsInAncestor = function (element, ancestorSelector, descendantSelector) {\n      return $_gdszrpm7jnlpb2xk.closest(element, ancestorSelector).bind(function (ancestor) {\n        var descendants = $_97aehqm4jnlpb2x5.descendants(ancestor, descendantSelector);\n        return indexOf$1(descendants, element).map(function (index) {\n          return inAncestor(ancestor, descendants, element, index);\n        });\n      });\n    };\n\n    var $_1r36udqrjnlpb3ya = {\n      childOf: childOf,\n      indexOf: indexOf$1,\n      indexInParent: indexInParent,\n      selectorsInParent: selectorsInParent,\n      descendantsInAncestor: descendantsInAncestor\n    };\n\n    var isBr = function (elem) {\n      return $_erx5tem3jnlpb2x3.name(elem) === 'br';\n    };\n\n    var gatherer = function (cand, gather, isRoot) {\n      return gather(cand, isRoot).bind(function (target) {\n        return $_erx5tem3jnlpb2x3.isText(target) && $_3lolvomkjnlpb304.get(target).trim().length === 0 ? gatherer(target, gather, isRoot) : Option.some(target);\n      });\n    };\n\n    var handleBr = function (isRoot, element, direction) {\n      return direction.traverse(element).orThunk(function () {\n        return gatherer(element, direction.gather, isRoot);\n      }).map(direction.relative);\n    };\n\n    var findBr = function (element, offset) {\n      return $_2pl1nljjnlpb2ur.child(element, offset).filter(isBr).orThunk(function () {\n        return $_2pl1nljjnlpb2ur.child(element, offset - 1).filter(isBr);\n      });\n    };\n\n    var handleParent = function (isRoot, element, offset, direction) {\n      return findBr(element, offset).bind(function (br) {\n        return direction.traverse(br).fold(function () {\n          return gatherer(br, direction.gather, isRoot).map(direction.relative);\n        }, function (adjacent) {\n          return $_1r36udqrjnlpb3ya.indexInParent(adjacent).map(function (info) {\n            return $_1jbfrupsjnlpb3p6.on(info.parent(), info.index());\n          });\n        });\n      });\n    };\n\n    var tryBr = function (isRoot, element, offset, direction) {\n      var target = isBr(element) ? handleBr(isRoot, element, direction) : handleParent(isRoot, element, offset, direction);\n      return target.map(function (tgt) {\n        return {\n          start: constant(tgt),\n          finish: constant(tgt)\n        };\n      });\n    };\n\n    var process = function (analysis) {\n      return $_57y4nlqojnlpb3x2.cata(analysis, function (message) {\n        return Option.none();\n      }, function () {\n        return Option.none();\n      }, function (cell) {\n        return Option.some($_8t1dqfqqjnlpb3y6.point(cell, 0));\n      }, function (cell) {\n        return Option.some($_8t1dqfqqjnlpb3y6.point(cell, $_bqkyudmjjnlpb300.getEnd(cell)));\n      });\n    };\n\n    var $_ez71ihqpjnlpb3xg = {\n      tryBr: tryBr,\n      process: process\n    };\n    var MAX_RETRIES = 20;\n    var platform$1 = $_4aebialqjnlpb2vq.detect();\n\n    var findSpot = function (bridge, isRoot, direction) {\n      return bridge.getSelection().bind(function (sel) {\n        return $_ez71ihqpjnlpb3xg.tryBr(isRoot, sel.finish(), sel.foffset(), direction).fold(function () {\n          return Option.some($_8t1dqfqqjnlpb3y6.point(sel.finish(), sel.foffset()));\n        }, function (brNeighbour) {\n          var range = bridge.fromSitus(brNeighbour);\n          var analysis = $_57y4nlqojnlpb3x2.verify(bridge, sel.finish(), sel.foffset(), range.finish(), range.foffset(), direction.failure, isRoot);\n          return $_ez71ihqpjnlpb3xg.process(analysis);\n        });\n      });\n    };\n\n    var scan = function (bridge, isRoot, element, offset, direction, numRetries) {\n      if (numRetries === 0) return Option.none();\n      return tryCursor(bridge, isRoot, element, offset, direction).bind(function (situs) {\n        var range = bridge.fromSitus(situs);\n        var analysis = $_57y4nlqojnlpb3x2.verify(bridge, element, offset, range.finish(), range.foffset(), direction.failure, isRoot);\n        return $_57y4nlqojnlpb3x2.cata(analysis, function () {\n          return Option.none();\n        }, function () {\n          return Option.some(situs);\n        }, function (cell) {\n          if ($_3k22killjnlpb2vb.eq(element, cell) && offset === 0) return tryAgain(bridge, element, offset, $_2vydjpqgjnlpb3v6.moveUp, direction);else return scan(bridge, isRoot, cell, 0, direction, numRetries - 1);\n        }, function (cell) {\n          if ($_3k22killjnlpb2vb.eq(element, cell) && offset === $_bqkyudmjjnlpb300.getEnd(cell)) return tryAgain(bridge, element, offset, $_2vydjpqgjnlpb3v6.moveDown, direction);else return scan(bridge, isRoot, cell, $_bqkyudmjjnlpb300.getEnd(cell), direction, numRetries - 1);\n        });\n      });\n    };\n\n    var tryAgain = function (bridge, element, offset, move, direction) {\n      return $_5ajb76qhjnlpb3va.getBoxAt(bridge, element, offset).bind(function (box) {\n        return tryAt(bridge, direction, move(box, $_4fb5qlqijnlpb3vj.getJumpSize()));\n      });\n    };\n\n    var tryAt = function (bridge, direction, box) {\n      if (platform$1.browser.isChrome() || platform$1.browser.isSafari() || platform$1.browser.isFirefox() || platform$1.browser.isEdge()) return direction.otherRetry(bridge, box);else if (platform$1.browser.isIE()) return direction.ieRetry(bridge, box);else return Option.none();\n    };\n\n    var tryCursor = function (bridge, isRoot, element, offset, direction) {\n      return $_5ajb76qhjnlpb3va.getBoxAt(bridge, element, offset).bind(function (box) {\n        return tryAt(bridge, direction, box);\n      });\n    };\n\n    var handle$2 = function (bridge, isRoot, direction) {\n      return findSpot(bridge, isRoot, direction).bind(function (spot) {\n        return scan(bridge, isRoot, spot.element(), spot.offset(), direction, MAX_RETRIES).map(bridge.fromSitus);\n      });\n    };\n\n    var $_gi8dt7qfjnlpb3uu = {\n      handle: handle$2\n    };\n\n    var any$1 = function (predicate) {\n      return $_1nfdlmm8jnlpb2xl.first(predicate).isSome();\n    };\n\n    var ancestor$3 = function (scope, predicate, isRoot) {\n      return $_1nfdlmm8jnlpb2xl.ancestor(scope, predicate, isRoot).isSome();\n    };\n\n    var closest$3 = function (scope, predicate, isRoot) {\n      return $_1nfdlmm8jnlpb2xl.closest(scope, predicate, isRoot).isSome();\n    };\n\n    var sibling$3 = function (scope, predicate) {\n      return $_1nfdlmm8jnlpb2xl.sibling(scope, predicate).isSome();\n    };\n\n    var child$4 = function (scope, predicate) {\n      return $_1nfdlmm8jnlpb2xl.child(scope, predicate).isSome();\n    };\n\n    var descendant$3 = function (scope, predicate) {\n      return $_1nfdlmm8jnlpb2xl.descendant(scope, predicate).isSome();\n    };\n\n    var $_4l0x9cqsjnlpb3yj = {\n      any: any$1,\n      ancestor: ancestor$3,\n      closest: closest$3,\n      sibling: sibling$3,\n      child: child$4,\n      descendant: descendant$3\n    };\n    var detection = $_4aebialqjnlpb2vq.detect();\n\n    var inSameTable = function (elem, table) {\n      return $_4l0x9cqsjnlpb3yj.ancestor(elem, function (e) {\n        return $_2pl1nljjnlpb2ur.parent(e).exists(function (p) {\n          return $_3k22killjnlpb2vb.eq(p, table);\n        });\n      });\n    };\n\n    var simulate = function (bridge, isRoot, direction, initial, anchor) {\n      return $_gdszrpm7jnlpb2xk.closest(initial, 'td,th', isRoot).bind(function (start) {\n        return $_gdszrpm7jnlpb2xk.closest(start, 'table', isRoot).bind(function (table) {\n          if (!inSameTable(anchor, table)) return Option.none();\n          return $_gi8dt7qfjnlpb3uu.handle(bridge, isRoot, direction).bind(function (range) {\n            return $_gdszrpm7jnlpb2xk.closest(range.finish(), 'td,th', isRoot).map(function (finish) {\n              return {\n                start: constant(start),\n                finish: constant(finish),\n                range: constant(range)\n              };\n            });\n          });\n        });\n      });\n    };\n\n    var navigate = function (bridge, isRoot, direction, initial, anchor, precheck) {\n      if (detection.browser.isIE()) {\n        return Option.none();\n      } else {\n        return precheck(initial, isRoot).orThunk(function () {\n          return simulate(bridge, isRoot, direction, initial, anchor).map(function (info) {\n            var range = info.range();\n            return $_bfyx6nq8jnlpb3sm.response(Option.some($_cq8cz4qbjnlpb3t5.makeSitus(range.start(), range.soffset(), range.finish(), range.foffset())), true);\n          });\n        });\n      }\n    };\n\n    var firstUpCheck = function (initial, isRoot) {\n      return $_gdszrpm7jnlpb2xk.closest(initial, 'tr', isRoot).bind(function (startRow) {\n        return $_gdszrpm7jnlpb2xk.closest(startRow, 'table', isRoot).bind(function (table) {\n          var rows = $_97aehqm4jnlpb2x5.descendants(table, 'tr');\n\n          if ($_3k22killjnlpb2vb.eq(startRow, rows[0])) {\n            return $_3mk9c4qjjnlpb3wc.seekLeft(table, function (element) {\n              return $_7srx6vmijnlpb2zw.last(element).isSome();\n            }, isRoot).map(function (last) {\n              var lastOffset = $_bqkyudmjjnlpb300.getEnd(last);\n              return $_bfyx6nq8jnlpb3sm.response(Option.some($_cq8cz4qbjnlpb3t5.makeSitus(last, lastOffset, last, lastOffset)), true);\n            });\n          } else {\n            return Option.none();\n          }\n        });\n      });\n    };\n\n    var lastDownCheck = function (initial, isRoot) {\n      return $_gdszrpm7jnlpb2xk.closest(initial, 'tr', isRoot).bind(function (startRow) {\n        return $_gdszrpm7jnlpb2xk.closest(startRow, 'table', isRoot).bind(function (table) {\n          var rows = $_97aehqm4jnlpb2x5.descendants(table, 'tr');\n\n          if ($_3k22killjnlpb2vb.eq(startRow, rows[rows.length - 1])) {\n            return $_3mk9c4qjjnlpb3wc.seekRight(table, function (element) {\n              return $_7srx6vmijnlpb2zw.first(element).isSome();\n            }, isRoot).map(function (first) {\n              return $_bfyx6nq8jnlpb3sm.response(Option.some($_cq8cz4qbjnlpb3t5.makeSitus(first, 0, first, 0)), true);\n            });\n          } else {\n            return Option.none();\n          }\n        });\n      });\n    };\n\n    var select = function (bridge, container, isRoot, direction, initial, anchor, selectRange) {\n      return simulate(bridge, isRoot, direction, initial, anchor).bind(function (info) {\n        return $_58lt4vqdjnlpb3tq.detect(container, isRoot, info.start(), info.finish(), selectRange);\n      });\n    };\n\n    var $_dxvqovqejnlpb3u5 = {\n      navigate: navigate,\n      select: select,\n      firstUpCheck: firstUpCheck,\n      lastDownCheck: lastDownCheck\n    };\n\n    var findCell = function (target, isRoot) {\n      return $_gdszrpm7jnlpb2xk.closest(target, 'td,th', isRoot);\n    };\n\n    function MouseSelection(bridge, container, isRoot, annotations) {\n      var cursor = Option.none();\n\n      var clearState = function () {\n        cursor = Option.none();\n      };\n\n      var mousedown = function (event) {\n        annotations.clear(container);\n        cursor = findCell(event.target(), isRoot);\n      };\n\n      var mouseover = function (event) {\n        cursor.each(function (start) {\n          annotations.clear(container);\n          findCell(event.target(), isRoot).each(function (finish) {\n            $_3c1t0amqjnlpb319.identify(start, finish, isRoot).each(function (cellSel) {\n              var boxes = cellSel.boxes().getOr([]);\n\n              if (boxes.length > 1 || boxes.length === 1 && !$_3k22killjnlpb2vb.eq(start, finish)) {\n                annotations.selectRange(container, boxes, cellSel.start(), cellSel.finish());\n                bridge.selectContents(finish);\n              }\n            });\n          });\n        });\n      };\n\n      var mouseup = function () {\n        cursor.each(clearState);\n      };\n\n      return {\n        mousedown: mousedown,\n        mouseover: mouseover,\n        mouseup: mouseup\n      };\n    }\n\n    var $_eg9t6dqujnlpb3yt = {\n      down: {\n        traverse: $_2pl1nljjnlpb2ur.nextSibling,\n        gather: $_3mk9c4qjjnlpb3wc.after,\n        relative: $_1jbfrupsjnlpb3p6.before,\n        otherRetry: $_4fb5qlqijnlpb3vj.tryDown,\n        ieRetry: $_4fb5qlqijnlpb3vj.ieTryDown,\n        failure: $_57y4nlqojnlpb3x2.adt.failedDown\n      },\n      up: {\n        traverse: $_2pl1nljjnlpb2ur.prevSibling,\n        gather: $_3mk9c4qjjnlpb3wc.before,\n        relative: $_1jbfrupsjnlpb3p6.before,\n        otherRetry: $_4fb5qlqijnlpb3vj.tryUp,\n        ieRetry: $_4fb5qlqijnlpb3vj.ieTryUp,\n        failure: $_57y4nlqojnlpb3x2.adt.failedUp\n      }\n    };\n    var rc = Immutable('rows', 'cols');\n\n    var mouse = function (win, container, isRoot, annotations) {\n      var bridge = WindowBridge(win);\n      var handlers = MouseSelection(bridge, container, isRoot, annotations);\n      return {\n        mousedown: handlers.mousedown,\n        mouseover: handlers.mouseover,\n        mouseup: handlers.mouseup\n      };\n    };\n\n    var keyboard = function (win, container, isRoot, annotations) {\n      var bridge = WindowBridge(win);\n\n      var clearToNavigate = function () {\n        annotations.clear(container);\n        return Option.none();\n      };\n\n      var keydown = function (event, start, soffset, finish, foffset, direction) {\n        var keycode = event.raw().which;\n        var shiftKey = event.raw().shiftKey === true;\n        var handler = $_3c1t0amqjnlpb319.retrieve(container, annotations.selectedSelector()).fold(function () {\n          if ($_97y5leq9jnlpb3so.isDown(keycode) && shiftKey) {\n            return curry($_dxvqovqejnlpb3u5.select, bridge, container, isRoot, $_eg9t6dqujnlpb3yt.down, finish, start, annotations.selectRange);\n          } else if ($_97y5leq9jnlpb3so.isUp(keycode) && shiftKey) {\n            return curry($_dxvqovqejnlpb3u5.select, bridge, container, isRoot, $_eg9t6dqujnlpb3yt.up, finish, start, annotations.selectRange);\n          } else if ($_97y5leq9jnlpb3so.isDown(keycode)) {\n            return curry($_dxvqovqejnlpb3u5.navigate, bridge, isRoot, $_eg9t6dqujnlpb3yt.down, finish, start, $_dxvqovqejnlpb3u5.lastDownCheck);\n          } else if ($_97y5leq9jnlpb3so.isUp(keycode)) {\n            return curry($_dxvqovqejnlpb3u5.navigate, bridge, isRoot, $_eg9t6dqujnlpb3yt.up, finish, start, $_dxvqovqejnlpb3u5.firstUpCheck);\n          } else {\n            return Option.none;\n          }\n        }, function (selected) {\n          var update = function (attempts) {\n            return function () {\n              var navigation = findMap(attempts, function (delta) {\n                return $_58lt4vqdjnlpb3tq.update(delta.rows(), delta.cols(), container, selected, annotations);\n              });\n              return navigation.fold(function () {\n                return $_3c1t0amqjnlpb319.getEdges(container, annotations.firstSelectedSelector(), annotations.lastSelectedSelector()).map(function (edges) {\n                  var relative = $_97y5leq9jnlpb3so.isDown(keycode) || direction.isForward(keycode) ? $_1jbfrupsjnlpb3p6.after : $_1jbfrupsjnlpb3p6.before;\n                  bridge.setRelativeSelection($_1jbfrupsjnlpb3p6.on(edges.first(), 0), relative(edges.table()));\n                  annotations.clear(container);\n                  return $_bfyx6nq8jnlpb3sm.response(Option.none(), true);\n                });\n              }, function (_) {\n                return Option.some($_bfyx6nq8jnlpb3sm.response(Option.none(), true));\n              });\n            };\n          };\n\n          if ($_97y5leq9jnlpb3so.isDown(keycode) && shiftKey) return update([rc(+1, 0)]);else if ($_97y5leq9jnlpb3so.isUp(keycode) && shiftKey) return update([rc(-1, 0)]);else if (direction.isBackward(keycode) && shiftKey) return update([rc(0, -1), rc(-1, 0)]);else if (direction.isForward(keycode) && shiftKey) return update([rc(0, +1), rc(+1, 0)]);else if ($_97y5leq9jnlpb3so.isNavigation(keycode) && shiftKey === false) return clearToNavigate;else return Option.none;\n        });\n        return handler();\n      };\n\n      var keyup = function (event, start, soffset, finish, foffset) {\n        return $_3c1t0amqjnlpb319.retrieve(container, annotations.selectedSelector()).fold(function () {\n          var keycode = event.raw().which;\n          var shiftKey = event.raw().shiftKey === true;\n          if (shiftKey === false) return Option.none();\n          if ($_97y5leq9jnlpb3so.isNavigation(keycode)) return $_58lt4vqdjnlpb3tq.sync(container, isRoot, start, soffset, finish, foffset, annotations.selectRange);else return Option.none();\n        }, Option.none);\n      };\n\n      return {\n        keydown: keydown,\n        keyup: keyup\n      };\n    };\n\n    var $_19y0u4q7jnlpb3s9 = {\n      mouse: mouse,\n      keyboard: keyboard\n    };\n\n    var add$3 = function (element, classes) {\n      each(classes, function (x) {\n        $_fy8l6zo3jnlpb3d8.add(element, x);\n      });\n    };\n\n    var remove$7 = function (element, classes) {\n      each(classes, function (x) {\n        $_fy8l6zo3jnlpb3d8.remove(element, x);\n      });\n    };\n\n    var toggle$2 = function (element, classes) {\n      each(classes, function (x) {\n        $_fy8l6zo3jnlpb3d8.toggle(element, x);\n      });\n    };\n\n    var hasAll = function (element, classes) {\n      return forall(classes, function (clazz) {\n        return $_fy8l6zo3jnlpb3d8.has(element, clazz);\n      });\n    };\n\n    var hasAny = function (element, classes) {\n      return exists(classes, function (clazz) {\n        return $_fy8l6zo3jnlpb3d8.has(element, clazz);\n      });\n    };\n\n    var getNative = function (element) {\n      var classList = element.dom().classList;\n      var r = new Array(classList.length);\n\n      for (var i = 0; i < classList.length; i++) {\n        r[i] = classList.item(i);\n      }\n\n      return r;\n    };\n\n    var get$12 = function (element) {\n      return $_apsphgo5jnlpb3dc.supports(element) ? getNative(element) : $_apsphgo5jnlpb3dc.get(element);\n    };\n\n    var $_78lgmeqxjnlpb3zf = {\n      add: add$3,\n      remove: remove$7,\n      toggle: toggle$2,\n      hasAll: hasAll,\n      hasAny: hasAny,\n      get: get$12\n    };\n\n    var addClass = function (clazz) {\n      return function (element) {\n        $_fy8l6zo3jnlpb3d8.add(element, clazz);\n      };\n    };\n\n    var removeClass = function (clazz) {\n      return function (element) {\n        $_fy8l6zo3jnlpb3d8.remove(element, clazz);\n      };\n    };\n\n    var removeClasses = function (classes) {\n      return function (element) {\n        $_78lgmeqxjnlpb3zf.remove(element, classes);\n      };\n    };\n\n    var hasClass = function (clazz) {\n      return function (element) {\n        return $_fy8l6zo3jnlpb3d8.has(element, clazz);\n      };\n    };\n\n    var $_au0x5fqwjnlpb3ze = {\n      addClass: addClass,\n      removeClass: removeClass,\n      removeClasses: removeClasses,\n      hasClass: hasClass\n    };\n\n    var byClass = function (ephemera) {\n      var addSelectionClass = $_au0x5fqwjnlpb3ze.addClass(ephemera.selected());\n      var removeSelectionClasses = $_au0x5fqwjnlpb3ze.removeClasses([ephemera.selected(), ephemera.lastSelected(), ephemera.firstSelected()]);\n\n      var clear = function (container) {\n        var sels = $_97aehqm4jnlpb2x5.descendants(container, ephemera.selectedSelector());\n        each(sels, removeSelectionClasses);\n      };\n\n      var selectRange = function (container, cells, start, finish) {\n        clear(container);\n        each(cells, addSelectionClass);\n        $_fy8l6zo3jnlpb3d8.add(start, ephemera.firstSelected());\n        $_fy8l6zo3jnlpb3d8.add(finish, ephemera.lastSelected());\n      };\n\n      return {\n        clear: clear,\n        selectRange: selectRange,\n        selectedSelector: ephemera.selectedSelector,\n        firstSelectedSelector: ephemera.firstSelectedSelector,\n        lastSelectedSelector: ephemera.lastSelectedSelector\n      };\n    };\n\n    var byAttr = function (ephemera) {\n      var removeSelectionAttributes = function (element) {\n        $_9u6utvm2jnlpb2wv.remove(element, ephemera.selected());\n        $_9u6utvm2jnlpb2wv.remove(element, ephemera.firstSelected());\n        $_9u6utvm2jnlpb2wv.remove(element, ephemera.lastSelected());\n      };\n\n      var addSelectionAttribute = function (element) {\n        $_9u6utvm2jnlpb2wv.set(element, ephemera.selected(), '1');\n      };\n\n      var clear = function (container) {\n        var sels = $_97aehqm4jnlpb2x5.descendants(container, ephemera.selectedSelector());\n        each(sels, removeSelectionAttributes);\n      };\n\n      var selectRange = function (container, cells, start, finish) {\n        clear(container);\n        each(cells, addSelectionAttribute);\n        $_9u6utvm2jnlpb2wv.set(start, ephemera.firstSelected(), '1');\n        $_9u6utvm2jnlpb2wv.set(finish, ephemera.lastSelected(), '1');\n      };\n\n      return {\n        clear: clear,\n        selectRange: selectRange,\n        selectedSelector: ephemera.selectedSelector,\n        firstSelectedSelector: ephemera.firstSelectedSelector,\n        lastSelectedSelector: ephemera.lastSelectedSelector\n      };\n    };\n\n    var $_b4r73tqvjnlpb3z1 = {\n      byClass: byClass,\n      byAttr: byAttr\n    };\n\n    var hasInternalTarget = function (e) {\n      return $_fy8l6zo3jnlpb3d8.has(Element$$1.fromDom(e.target), 'ephox-snooker-resizer-bar') === false;\n    };\n\n    function CellSelection$1(editor, lazyResize) {\n      var handlerStruct = MixedBag(['mousedown', 'mouseover', 'mouseup', 'keyup', 'keydown'], []);\n      var handlers = Option.none();\n      var annotations = $_b4r73tqvjnlpb3z1.byAttr($_5gt7rrn2jnlpb34p);\n      editor.on('init', function (e) {\n        var win = editor.getWin();\n        var body = getBody$1(editor);\n        var isRoot = getIsRoot(editor);\n\n        var syncSelection = function () {\n          var sel = editor.selection;\n          var start = Element$$1.fromDom(sel.getStart());\n          var end = Element$$1.fromDom(sel.getEnd());\n          var shared = $_5iw3l3mrjnlpb31x.sharedOne($_em4z2mldjnlpb2sz.table, [start, end]);\n          shared.fold(function () {\n            annotations.clear(body);\n          }, noop);\n        };\n\n        var mouseHandlers = $_19y0u4q7jnlpb3s9.mouse(win, body, isRoot, annotations);\n        var keyHandlers = $_19y0u4q7jnlpb3s9.keyboard(win, body, isRoot, annotations);\n\n        var hasShiftKey = function (event) {\n          return event.raw().shiftKey === true;\n        };\n\n        var handleResponse = function (event, response) {\n          if (!hasShiftKey(event)) {\n            return;\n          }\n\n          if (response.kill()) {\n            event.kill();\n          }\n\n          response.selection().each(function (ns) {\n            var relative = $_3nispmprjnlpb3p0.relative(ns.start(), ns.finish());\n            var rng = $_960to1pxjnlpb3pz.asLtrRange(win, relative);\n            editor.selection.setRng(rng);\n          });\n        };\n\n        var keyup = function (event) {\n          var wrappedEvent = wrapEvent(event);\n\n          if (wrappedEvent.raw().shiftKey && $_97y5leq9jnlpb3so.isNavigation(wrappedEvent.raw().which)) {\n            var rng = editor.selection.getRng();\n            var start = Element$$1.fromDom(rng.startContainer);\n            var end = Element$$1.fromDom(rng.endContainer);\n            keyHandlers.keyup(wrappedEvent, start, rng.startOffset, end, rng.endOffset).each(function (response) {\n              handleResponse(wrappedEvent, response);\n            });\n          }\n        };\n\n        var keydown = function (event) {\n          var wrappedEvent = wrapEvent(event);\n          lazyResize().each(function (resize) {\n            resize.hideBars();\n          });\n          var rng = editor.selection.getRng();\n          var startContainer = Element$$1.fromDom(editor.selection.getStart());\n          var start = Element$$1.fromDom(rng.startContainer);\n          var end = Element$$1.fromDom(rng.endContainer);\n          var direction = $_1wn5holjnlpb3g6.directionAt(startContainer).isRtl() ? $_97y5leq9jnlpb3so.rtl : $_97y5leq9jnlpb3so.ltr;\n          keyHandlers.keydown(wrappedEvent, start, rng.startOffset, end, rng.endOffset, direction).each(function (response) {\n            handleResponse(wrappedEvent, response);\n          });\n          lazyResize().each(function (resize) {\n            resize.showBars();\n          });\n        };\n\n        var isMouseEvent = function (event) {\n          return event.hasOwnProperty('x') && event.hasOwnProperty('y');\n        };\n\n        var wrapEvent = function (event) {\n          var target = Element$$1.fromDom(event.target);\n\n          var stop = function () {\n            event.stopPropagation();\n          };\n\n          var prevent = function () {\n            event.preventDefault();\n          };\n\n          var kill = compose(prevent, stop);\n          return {\n            target: constant(target),\n            x: constant(isMouseEvent(event) ? event.x : null),\n            y: constant(isMouseEvent(event) ? event.y : null),\n            stop: stop,\n            prevent: prevent,\n            kill: kill,\n            raw: constant(event)\n          };\n        };\n\n        var isLeftMouse = function (raw) {\n          return raw.button === 0;\n        };\n\n        var isLeftButtonPressed = function (raw) {\n          if (raw.buttons === undefined) {\n            return true;\n          }\n\n          return (raw.buttons & 1) !== 0;\n        };\n\n        var mouseDown = function (e) {\n          if (isLeftMouse(e) && hasInternalTarget(e)) {\n            mouseHandlers.mousedown(wrapEvent(e));\n          }\n        };\n\n        var mouseOver = function (e) {\n          if (isLeftButtonPressed(e) && hasInternalTarget(e)) {\n            mouseHandlers.mouseover(wrapEvent(e));\n          }\n        };\n\n        var mouseUp = function (e) {\n          if (isLeftMouse(e) && hasInternalTarget(e)) {\n            mouseHandlers.mouseup(wrapEvent(e));\n          }\n        };\n\n        editor.on('mousedown', mouseDown);\n        editor.on('mouseover', mouseOver);\n        editor.on('mouseup', mouseUp);\n        editor.on('keyup', keyup);\n        editor.on('keydown', keydown);\n        editor.on('nodechange', syncSelection);\n        handlers = Option.some(handlerStruct({\n          mousedown: mouseDown,\n          mouseover: mouseOver,\n          mouseup: mouseUp,\n          keyup: keyup,\n          keydown: keydown\n        }));\n      });\n\n      var destroy = function () {\n        handlers.each(function (handlers) {});\n      };\n\n      return {\n        clear: annotations.clear,\n        destroy: destroy\n      };\n    }\n\n    var Selections = function (editor) {\n      var get = function () {\n        var body = getBody$1(editor);\n        return $_8c8t99mpjnlpb310.retrieve(body, $_5gt7rrn2jnlpb34p.selectedSelector()).fold(function () {\n          if (editor.selection.getStart() === undefined) {\n            return $_35kl4cn3jnlpb34v.none();\n          } else {\n            return $_35kl4cn3jnlpb34v.single(editor.selection);\n          }\n        }, function (cells) {\n          return $_35kl4cn3jnlpb34v.multiple(cells);\n        });\n      };\n\n      return {\n        get: get\n      };\n    };\n\n    var each$4 = global$1.each;\n\n    var addButtons = function (editor) {\n      var menuItems = [];\n      each$4('inserttable tableprops deletetable | cell row column'.split(' '), function (name) {\n        if (name === '|') {\n          menuItems.push({\n            text: '-'\n          });\n        } else {\n          menuItems.push(editor.menuItems[name]);\n        }\n      });\n      editor.addButton('table', {\n        type: 'menubutton',\n        title: 'Table',\n        menu: menuItems\n      });\n\n      function cmd(command) {\n        return function () {\n          editor.execCommand(command);\n        };\n      }\n\n      editor.addButton('tableprops', {\n        title: 'Table properties',\n        onclick: cmd('mceTableProps'),\n        icon: 'table'\n      });\n      editor.addButton('tabledelete', {\n        title: 'Delete table',\n        onclick: cmd('mceTableDelete')\n      });\n      editor.addButton('tablecellprops', {\n        title: 'Cell properties',\n        onclick: cmd('mceTableCellProps')\n      });\n      editor.addButton('tablemergecells', {\n        title: 'Merge cells',\n        onclick: cmd('mceTableMergeCells')\n      });\n      editor.addButton('tablesplitcells', {\n        title: 'Split cell',\n        onclick: cmd('mceTableSplitCells')\n      });\n      editor.addButton('tableinsertrowbefore', {\n        title: 'Insert row before',\n        onclick: cmd('mceTableInsertRowBefore')\n      });\n      editor.addButton('tableinsertrowafter', {\n        title: 'Insert row after',\n        onclick: cmd('mceTableInsertRowAfter')\n      });\n      editor.addButton('tabledeleterow', {\n        title: 'Delete row',\n        onclick: cmd('mceTableDeleteRow')\n      });\n      editor.addButton('tablerowprops', {\n        title: 'Row properties',\n        onclick: cmd('mceTableRowProps')\n      });\n      editor.addButton('tablecutrow', {\n        title: 'Cut row',\n        onclick: cmd('mceTableCutRow')\n      });\n      editor.addButton('tablecopyrow', {\n        title: 'Copy row',\n        onclick: cmd('mceTableCopyRow')\n      });\n      editor.addButton('tablepasterowbefore', {\n        title: 'Paste row before',\n        onclick: cmd('mceTablePasteRowBefore')\n      });\n      editor.addButton('tablepasterowafter', {\n        title: 'Paste row after',\n        onclick: cmd('mceTablePasteRowAfter')\n      });\n      editor.addButton('tableinsertcolbefore', {\n        title: 'Insert column before',\n        onclick: cmd('mceTableInsertColBefore')\n      });\n      editor.addButton('tableinsertcolafter', {\n        title: 'Insert column after',\n        onclick: cmd('mceTableInsertColAfter')\n      });\n      editor.addButton('tabledeletecol', {\n        title: 'Delete column',\n        onclick: cmd('mceTableDeleteCol')\n      });\n    };\n\n    var addToolbars = function (editor) {\n      var isTable = function (table) {\n        var selectorMatched = editor.dom.is(table, 'table') && editor.getBody().contains(table);\n        return selectorMatched;\n      };\n\n      var toolbar = getToolbar(editor);\n\n      if (toolbar.length > 0) {\n        editor.addContextToolbar(isTable, toolbar.join(' '));\n      }\n    };\n\n    var $_fgs8hlqzjnlpb3zp = {\n      addButtons: addButtons,\n      addToolbars: addToolbars\n    };\n\n    var addMenuItems = function (editor, selections) {\n      var targets = Option.none();\n      var tableCtrls = [];\n      var cellCtrls = [];\n      var mergeCtrls = [];\n      var unmergeCtrls = [];\n\n      var noTargetDisable = function (ctrl) {\n        ctrl.disabled(true);\n      };\n\n      var ctrlEnable = function (ctrl) {\n        ctrl.disabled(false);\n      };\n\n      var pushTable = function () {\n        var self = this;\n        tableCtrls.push(self);\n        targets.fold(function () {\n          noTargetDisable(self);\n        }, function (targets) {\n          ctrlEnable(self);\n        });\n      };\n\n      var pushCell = function () {\n        var self = this;\n        cellCtrls.push(self);\n        targets.fold(function () {\n          noTargetDisable(self);\n        }, function (targets) {\n          ctrlEnable(self);\n        });\n      };\n\n      var pushMerge = function () {\n        var self = this;\n        mergeCtrls.push(self);\n        targets.fold(function () {\n          noTargetDisable(self);\n        }, function (targets) {\n          self.disabled(targets.mergable().isNone());\n        });\n      };\n\n      var pushUnmerge = function () {\n        var self = this;\n        unmergeCtrls.push(self);\n        targets.fold(function () {\n          noTargetDisable(self);\n        }, function (targets) {\n          self.disabled(targets.unmergable().isNone());\n        });\n      };\n\n      var setDisabledCtrls = function () {\n        targets.fold(function () {\n          each(tableCtrls, noTargetDisable);\n          each(cellCtrls, noTargetDisable);\n          each(mergeCtrls, noTargetDisable);\n          each(unmergeCtrls, noTargetDisable);\n        }, function (targets) {\n          each(tableCtrls, ctrlEnable);\n          each(cellCtrls, ctrlEnable);\n          each(mergeCtrls, function (mergeCtrl) {\n            mergeCtrl.disabled(targets.mergable().isNone());\n          });\n          each(unmergeCtrls, function (unmergeCtrl) {\n            unmergeCtrl.disabled(targets.unmergable().isNone());\n          });\n        });\n      };\n\n      editor.on('init', function () {\n        editor.on('nodechange', function (e) {\n          var cellOpt = Option.from(editor.dom.getParent(editor.selection.getStart(), 'th,td'));\n          targets = cellOpt.bind(function (cellDom) {\n            var cell = Element$$1.fromDom(cellDom);\n            var table = $_em4z2mldjnlpb2sz.table(cell);\n            return table.map(function (table) {\n              return $_39kmudmnjnlpb30f.forMenu(selections, table, cell);\n            });\n          });\n          setDisabledCtrls();\n        });\n      });\n\n      var generateTableGrid = function () {\n        var html = '';\n        html = '<table role=\"grid\" class=\"mce-grid mce-grid-border\" aria-readonly=\"true\">';\n\n        for (var y = 0; y < 10; y++) {\n          html += '<tr>';\n\n          for (var x = 0; x < 10; x++) {\n            html += '<td role=\"gridcell\" tabindex=\"-1\"><a id=\"mcegrid' + (y * 10 + x) + '\" href=\"#\" ' + 'data-mce-x=\"' + x + '\" data-mce-y=\"' + y + '\"></a></td>';\n          }\n\n          html += '</tr>';\n        }\n\n        html += '</table>';\n        html += '<div class=\"mce-text-center\" role=\"presentation\">1 x 1</div>';\n        return html;\n      };\n\n      var selectGrid = function (editor, tx, ty, control) {\n        var table = control.getEl().getElementsByTagName('table')[0];\n        var x, y, focusCell, cell, active;\n        var rtl = control.isRtl() || control.parent().rel === 'tl-tr';\n        table.nextSibling.innerHTML = tx + 1 + ' x ' + (ty + 1);\n\n        if (rtl) {\n          tx = 9 - tx;\n        }\n\n        for (y = 0; y < 10; y++) {\n          for (x = 0; x < 10; x++) {\n            cell = table.rows[y].childNodes[x].firstChild;\n            active = (rtl ? x >= tx : x <= tx) && y <= ty;\n            editor.dom.toggleClass(cell, 'mce-active', active);\n\n            if (active) {\n              focusCell = cell;\n            }\n          }\n        }\n\n        return focusCell.parentNode;\n      };\n\n      var insertTable = hasTableGrid(editor) === false ? {\n        text: 'Table',\n        icon: 'table',\n        context: 'table',\n        onclick: cmd('mceInsertTable')\n      } : {\n        text: 'Table',\n        icon: 'table',\n        context: 'table',\n        ariaHideMenu: true,\n        onclick: function (e) {\n          if (e.aria) {\n            this.parent().hideAll();\n            e.stopImmediatePropagation();\n            editor.execCommand('mceInsertTable');\n          }\n        },\n        onshow: function () {\n          selectGrid(editor, 0, 0, this.menu.items()[0]);\n        },\n        onhide: function () {\n          var elements = this.menu.items()[0].getEl().getElementsByTagName('a');\n          editor.dom.removeClass(elements, 'mce-active');\n          editor.dom.addClass(elements[0], 'mce-active');\n        },\n        menu: [{\n          type: 'container',\n          html: generateTableGrid(),\n          onPostRender: function () {\n            this.lastX = this.lastY = 0;\n          },\n          onmousemove: function (e) {\n            var target = e.target;\n            var x, y;\n\n            if (target.tagName.toUpperCase() === 'A') {\n              x = parseInt(target.getAttribute('data-mce-x'), 10);\n              y = parseInt(target.getAttribute('data-mce-y'), 10);\n\n              if (this.isRtl() || this.parent().rel === 'tl-tr') {\n                x = 9 - x;\n              }\n\n              if (x !== this.lastX || y !== this.lastY) {\n                selectGrid(editor, x, y, e.control);\n                this.lastX = x;\n                this.lastY = y;\n              }\n            }\n          },\n          onclick: function (e) {\n            var self = this;\n\n            if (e.target.tagName.toUpperCase() === 'A') {\n              e.preventDefault();\n              e.stopPropagation();\n              self.parent().cancel();\n              editor.undoManager.transact(function () {\n                $_azkpjfoyjnlpb3ij.insert(editor, self.lastX + 1, self.lastY + 1);\n              });\n              editor.addVisual();\n            }\n          }\n        }]\n      };\n\n      function cmd(command) {\n        return function () {\n          editor.execCommand(command);\n        };\n      }\n\n      var tableProperties = {\n        text: 'Table properties',\n        context: 'table',\n        onPostRender: pushTable,\n        onclick: cmd('mceTableProps')\n      };\n      var deleteTable = {\n        text: 'Delete table',\n        context: 'table',\n        onPostRender: pushTable,\n        cmd: 'mceTableDelete'\n      };\n      var row = {\n        text: 'Row',\n        context: 'table',\n        menu: [{\n          text: 'Insert row before',\n          onclick: cmd('mceTableInsertRowBefore'),\n          onPostRender: pushCell\n        }, {\n          text: 'Insert row after',\n          onclick: cmd('mceTableInsertRowAfter'),\n          onPostRender: pushCell\n        }, {\n          text: 'Delete row',\n          onclick: cmd('mceTableDeleteRow'),\n          onPostRender: pushCell\n        }, {\n          text: 'Row properties',\n          onclick: cmd('mceTableRowProps'),\n          onPostRender: pushCell\n        }, {\n          text: '-'\n        }, {\n          text: 'Cut row',\n          onclick: cmd('mceTableCutRow'),\n          onPostRender: pushCell\n        }, {\n          text: 'Copy row',\n          onclick: cmd('mceTableCopyRow'),\n          onPostRender: pushCell\n        }, {\n          text: 'Paste row before',\n          onclick: cmd('mceTablePasteRowBefore'),\n          onPostRender: pushCell\n        }, {\n          text: 'Paste row after',\n          onclick: cmd('mceTablePasteRowAfter'),\n          onPostRender: pushCell\n        }]\n      };\n      var column = {\n        text: 'Column',\n        context: 'table',\n        menu: [{\n          text: 'Insert column before',\n          onclick: cmd('mceTableInsertColBefore'),\n          onPostRender: pushCell\n        }, {\n          text: 'Insert column after',\n          onclick: cmd('mceTableInsertColAfter'),\n          onPostRender: pushCell\n        }, {\n          text: 'Delete column',\n          onclick: cmd('mceTableDeleteCol'),\n          onPostRender: pushCell\n        }]\n      };\n      var cell = {\n        separator: 'before',\n        text: 'Cell',\n        context: 'table',\n        menu: [{\n          text: 'Cell properties',\n          onclick: cmd('mceTableCellProps'),\n          onPostRender: pushCell\n        }, {\n          text: 'Merge cells',\n          onclick: cmd('mceTableMergeCells'),\n          onPostRender: pushMerge\n        }, {\n          text: 'Split cell',\n          onclick: cmd('mceTableSplitCells'),\n          onPostRender: pushUnmerge\n        }]\n      };\n      editor.addMenuItem('inserttable', insertTable);\n      editor.addMenuItem('tableprops', tableProperties);\n      editor.addMenuItem('deletetable', deleteTable);\n      editor.addMenuItem('row', row);\n      editor.addMenuItem('column', column);\n      editor.addMenuItem('cell', cell);\n    };\n\n    var $_3b6cvbr0jnlpb3zw = {\n      addMenuItems: addMenuItems\n    };\n\n    var getClipboardRows = function (clipboardRows) {\n      return clipboardRows.get().fold(function () {\n        return;\n      }, function (rows) {\n        return map(rows, function (row) {\n          return row.dom();\n        });\n      });\n    };\n\n    var setClipboardRows = function (rows, clipboardRows) {\n      var sugarRows = map(rows, Element$$1.fromDom);\n      clipboardRows.set(Option.from(sugarRows));\n    };\n\n    var getApi = function (editor, clipboardRows) {\n      return {\n        insertTable: function (columns, rows) {\n          return $_azkpjfoyjnlpb3ij.insert(editor, columns, rows);\n        },\n        setClipboardRows: function (rows) {\n          return setClipboardRows(rows, clipboardRows);\n        },\n        getClipboardRows: function () {\n          return getClipboardRows(clipboardRows);\n        }\n      };\n    };\n\n    function Plugin(editor) {\n      var resizeHandler = ResizeHandler(editor);\n      var cellSelection = CellSelection$1(editor, resizeHandler.lazyResize);\n      var actions = TableActions(editor, resizeHandler.lazyWire);\n      var selections = Selections(editor);\n      var clipboardRows = Cell(Option.none());\n      $_cs1v9popjnlpb3gp.registerCommands(editor, actions, cellSelection, selections, clipboardRows);\n      $_aaekm8l0jnlpb2qo.registerEvents(editor, selections, actions, cellSelection);\n      $_3b6cvbr0jnlpb3zw.addMenuItems(editor, selections);\n      $_fgs8hlqzjnlpb3zp.addButtons(editor);\n      $_fgs8hlqzjnlpb3zp.addToolbars(editor);\n      editor.on('PreInit', function () {\n        editor.serializer.addTempAttr($_5gt7rrn2jnlpb34p.firstSelected());\n        editor.serializer.addTempAttr($_5gt7rrn2jnlpb34p.lastSelected());\n      });\n\n      if (hasTabNavigation(editor)) {\n        editor.on('keydown', function (e) {\n          $_yn0xrpojnlpb3o5.handle(e, editor, actions, resizeHandler.lazyWire);\n        });\n      }\n\n      editor.on('remove', function () {\n        resizeHandler.destroy();\n        cellSelection.destroy();\n      });\n      return getApi(editor, clipboardRows);\n    }\n\n    global.add('table', Plugin);\n\n    function Plugin$1() {}\n\n    return Plugin$1;\n  }();\n})();",{"version":3,"sources":["/Users/shanliguo/Documents/workstudy/vue-form-making/src/lib/tinymce/plugins/table/plugin.js"],"names":["table","global","tinymce","util","Tools","resolve","noop","x","_i","arguments","length","compose","fa","fb","apply","constant","value","identity","curry","f","args","Array","i","newArgs","j","all","concat","not","die","msg","Error","never","always","never$1","always$1","none","NONE","eq","o","isNone","call$$1","thunk","id","n","noop$$1","nul","undef","undefined","me","fold","s","is","isSome","getOr","getOrThunk","getOrDie","getOrNull","getOrUndefined","or","orThunk","map","ap","each","bind","flatten","exists","forall","filter","equals","equals_","toArray","toString","Object","freeze","some","a","constant_a","self","v","optfab","fab","elementEq","b","from","Option","typeOf","t","prototype","isPrototypeOf","String","isType","type","isString","isArray","isBoolean","isFunction","isNumber","rawIndexOf","pIndexOf","indexOf","fastIndex","xs","call","slowIndex","slowIndexOf","contains","pred","findIndex","len","r","eachr","push","foldr","acc","foldl","find","output","slice","reverse","last","from$1","keys","each$1","obj","props","k","map$1","tupleMap","tuple","Immutable","fields","values","struct","name","sort$1","arr","sort","reqMessage","required","join","unsuppMessage","unsupported","validateStrArr","label","array","invalidTypeMessage","incorrect","checkDupes","everything","sorted","dupe","d","MixedBag","optional","keys$$1","allReqd","req","key","opt","hasOwnProperty","dimensions","grid","address","coords","detail","detailnew","extended","rowdata","elementnew","rowdatanew","rowcells","rowdetails","bounds","$_csuubelcjnlpb2sv","fromHtml","html","scope","doc","document","div","createElement","innerHTML","hasChildNodes","childNodes","console","error","fromDom","fromTag","tag","node","fromText","text","createTextNode","dom","fromPoint","docElm","y","elementFromPoint","Element$$1","$_1skeq9lijnlpb2un","ATTRIBUTE","Node","ATTRIBUTE_NODE","CDATA_SECTION","CDATA_SECTION_NODE","COMMENT","COMMENT_NODE","DOCUMENT","DOCUMENT_NODE","DOCUMENT_TYPE","DOCUMENT_TYPE_NODE","DOCUMENT_FRAGMENT","DOCUMENT_FRAGMENT_NODE","ELEMENT","ELEMENT_NODE","TEXT","TEXT_NODE","PROCESSING_INSTRUCTION","PROCESSING_INSTRUCTION_NODE","ENTITY_REFERENCE","ENTITY_REFERENCE_NODE","ENTITY","ENTITY_NODE","NOTATION","NOTATION_NODE","element","selector","elem","nodeType","matches","msMatchesSelector","webkitMatchesSelector","mozMatchesSelector","bypassSelector","childElementCount","base","querySelectorAll","one","querySelector","$_1mxomdlfjnlpb2tz","target","recurse","e","cur","$_84ox1wlkjnlpb2v9","Global","window","Function","path","parts","p","split","unsafe","actual","$_7rb9h8lnjnlpb2vl","compareDocumentPosition","match","documentPositionPreceding","DOCUMENT_POSITION_PRECEDING","documentPositionContainedBy","DOCUMENT_POSITION_CONTAINED_BY","$_5xoldwlmjnlpb2vk","cached","called","firstMatch","regexes","test","find$2","agent","major","minor","group","Number","replace","nu","detect","versionRegexes","cleanedAgent","toLowerCase","unknown","Version","edge","chrome","ie","opera","firefox","safari","isBrowser","current","unknown$1","nu$1","version","info","isEdge","isChrome","isIE","isOpera","isFirefox","isSafari","Browser","windows","ios","android","linux","osx","solaris","freebsd","isOS","unknown$2","nu$2","isWindows","isiOS","isAndroid","isOSX","isLinux","isSolaris","isFreeBSD","OperatingSystem","DeviceType","os","browser","userAgent","isiPad","isiPhone","isAndroid3","isAndroid4","isTablet","isTouch","isPhone","iOSwebview","isWebView","detect$1","candidates","candidate","search","detectBrowser","browsers","detectOs","oses","UaString","checkRange","str","substr","start","contains$1","endsWith","suffix","trim","normalVersionRegex","checkContains","uastring","monstrosity","PlatformInfo","detect$2","deviceType","PlatformDetection","detect$3","navigator","$_4aebialqjnlpb2vq","e1","e2","isEqualNode","member","elements","regularContains","d1","d2","ieContains","contains$2","$_3k22killjnlpb2vb","owner","ownerDocument","documentElement","defaultView","el","parent","parentNode","findIndex$1","kin","children","parents","isRoot","stop","ret","rawParent","siblings","filterSelf","offsetParent","prevSibling","previousSibling","nextSibling","prevSiblings","nextSiblings","child","index","firstChild","lastChild","childNodesCount","spot","leaf","offset","cs","$_2pl1nljjnlpb2ur","firstLayer","filterFirstLayer","predicate","$_1s67solejnlpb2tp","nodeName","nodeValue","isType$1","isComment","isElement","isText","isDocument","$_erx5tem3jnlpb2x3","rawSet","setAttribute","set","setAll","attrs","get$1","getAttribute","has$1","hasAttribute","remove","removeAttribute","hasNone","attributes","clone","attr","transferOne","source","destination","transfer","$_9u6utvm2jnlpb2wv","get","has","inBody","body","getBody","$_1ie4uvm6jnlpb2xf","all$1","descendants","ancestors","siblings$1","children$1","result","$_cyfw12m5jnlpb2x7","all$2","ancestors$1","siblings$2","children$2","descendants$1","$_97aehqm4jnlpb2x5","ClosestOrAncestor","ancestor","first$1","descendant","closest","sibling","child$1","descend","res","$_1nfdlmm8jnlpb2xl","first","first$2","ancestor$1","sibling$1","child$2","descendant$1","closest$1","$_gdszrpm7jnlpb2xk","lookup","tags","_isRoot","isRootOrUpperTable","cell","cells","notCell","neighbours","neighbourCells","neighbourRows","firstCell","row","rows","property","parseInt","grid$1","rowProp","colProp","cols","$_em4z2mldjnlpb2sz","fromTable","parentSection","parentName","rowspan","colspan","fromPastedRows","example","section","$_g8jea2lbjnlpb2sm","column","getAt","warehouse","raw","access","findItem","item","comparator","filtered","filterItems","generate","list","maxRows","maxColumns","details","currentRow","c","cr","cc","newpos","Math","max","justCells","w","$_ein1yumajnlpb2y1","isSupported","style","$_4sfuxamcjnlpb2yn","internalSet","setProperty","internalRemove","removeProperty","set$1","setAll$1","css","setOptions","get$2","styles","getComputedStyle","getPropertyValue","getUnsafeProperty","getRaw","getAllRaw","ruleName","isValidValue","remove$1","preserve","oldStyles","restore","copy","sourceDom","targetDom","cssText","reflow","offsetWidth","transferOne$1","transfer$1","$_g8mvdembjnlpb2ya","before","marker","insertBefore","after","append","prepend","appendChild","appendAt","wrap","wrapper","$_5hzj77mdjnlpb2yp","before$1","after$1","prepend$1","append$1","$_a9wtnkmfjnlpb2yu","empty","textContent","rogue","remove$2","removeChild","unwrap","$_cybn8qmejnlpb2yr","stats","findSelectedStats","house","isSelected","totalColumns","columns","totalRows","minRow","minCol","maxRow","maxCol","startRow","endRow","startCol","endCol","makeCell","seenSelected","rowIndex","td","fillInGaps","needCell","clean","emptyRows","extract","selectedSelector","unselectedCells","$_df0ycyl5jnlpb2rr","clone$1","original","deep","cloneNode","shallow","shallowAs","copy$1","cloneChildren","mutate","$_7sdoc4mhjnlpb2zt","NodeValue","getOption","getOptionIE10","getOptionSafe","api","get$3","set$2","$_3lolvomkjnlpb304","getEnd","isEnd","isStart","NBSP","isTextNodeWithCursorPosition","elementsWithCursorPosition","isCursorPosition","hasCursorPosition","$_bqkyudmjjnlpb300","first$3","last$2","descendantRtl","$_7srx6vmijnlpb2zw","cell$1","replica","pasteReplace","cellContent","newRow","cloneFormats","oldCell","newCell","formats","firstText","formatSelector","last$$1","clonedFormat","cellOperations","formatsToClone","prev","lastNode","gap","paste","$_f80632mgjnlpb2z3","fromHtml$1","fromTags","fromText$1","texts","fromDom$1","nodes","$_1ebm76mmjnlpb30a","TagBoundaries","DomUniverse","isBoundary","isEmptyTag","comparePosition","other","copyAttributesTo","as","up","down","copyTo","insert","afterAll","appendAll","create","query","getText","setText","leftRight","bisect","universe","ind","breakToRight","second","breakToLeft","prior","breakPath","isTop","breaker","next","splits","fallback","breakage","extra","left","right","nextChild","$_3oyp2cmvjnlpb336","all$3","look","head$$1","tail","oneAll","unsafeOne","commonElement","end","$_bt5ke0mwjnlpb33g","eq$1","unsafeSubset","common","ps1","ps2","finder","ps","topDown","startIndex","endIndex","sIndex","eIndex","min","ancestors$2","prune","pruned1","pruned2","shared","firstpath","secondpath","subset","ancs","$_4j9fa0mxjnlpb33t","sharedOne","subset$1","finish","ancestors$3","breakToLeft$1","breakToRight$1","breakPath$1","$_2t6rjjmujnlpb335","sharedOne$1","subset$2","ancestors$4","breakToLeft$2","breakToRight$2","breakPath$2","u","$_5iw3l3mrjnlpb31x","inSelection","leftEdge","rightEdge","topEdge","bottomEdge","finishCol","finishRow","isWithin","isRectangular","isRect","detailIsWithin","$_6v1gttn0jnlpb34e","getBounds","detailA","detailB","getAnyBox","startCell","finishCell","startCoords","finishCoords","sc","fc","getBox","$_8cl7xfn1jnlpb34j","moveBy","dest","intercepts","inside","parentCell","innerCell","isContainedBy","c1","c2","$_7fg8egmzjnlpb346","moveBy$1","deltaRow","deltaColumn","getWarehouse","intercepts$1","nestedIntercepts","firstTable","lastTable","lastCell","getBox$1","$_3cf29myjnlpb342","lookupTable","container","identified","identify","getIsRoot","rootTable","boxes","startTable","finishTable","ancestorCells","lca","lcaTable","finishAncestorCells","startAncestorCells","retrieve","sels","getLast","lastSelectedSelector","box","getEdges","firstSelectedSelector","tbl","expandTo","shiftSelection","$_3c1t0amqjnlpb319","retrieve$1","retrieveBox","edges","firstAncestor","lastAncestor","fA","lA","$_8c8t99mpjnlpb310","selected","attributeSelector","firstSelected","lastSelected","$_5gt7rrn2jnlpb34p","generate$1","cases","constructors","adt","acase","count","argLength","branches","branchKeys","reqKey","log","constructor","params","Adt","type$1","multiple","single","cata","subject","onNone","onMultiple","onSingle","$_35kl4cn3jnlpb34v","selection","selections","unmergable","hasSpan","mergable","_env","$_g6cqikmojnlpb30m","noMenu","forMenu","notCell$1","paste$1","pasteRows","clipboard","generators","$_39kmudmnjnlpb30f","extractSelected","serializeElement","editor","elm","serializer","serialize","registerEvents","actions","cellSelection","on","multiCellContext","preventDefault","content","cellOpt","getParent","getStart","domCell","getDoc","targets","pasteCells","rng","setRng","focus","clear","$_aaekm8l0jnlpb2qo","Dimension","getOffset","h","parseFloat","getOuter","aggregate","properties","val","isNaN","cumulativeInclusions","absoluteMax","api$1","getBoundingClientRect","height","offsetHeight","set$3","get$4","setMax","inclusions","absMax","$_6kvman9jnlpb36h","api$2","set$4","get$5","getOuter$1","setMax$1","$_2s7b62nbjnlpb36o","platform","needManualCalc","toNumber","px","num","getProp","getCalculatedHeight","paddingTop","paddingBottom","borderTop","borderBottom","boxSizing","borders","getWidth","getHeight","$_1pmnnnn8jnlpb367","genericSizeRegex","percentageBasedSizeRegex","pixelBasedSizeRegex","setPixelWidth","amount","setPercentageWidth","setHeight","getHeightValue","convert","number","getter","setter","newSize","total","floor","normalizePixelSize","getTotalHeight","get$6","span","getSpan","getRawWidth","cssWidth","width","normalizePercentageWidth","cellWidth","tableSize","pixelWidth","choosePercentageSize","percentMatch","exec","intWidth","getPercentageWidth","normalizePixelWidth","choosePixelSize","pixelMatch","floatWidth","getPixelWidth","getHeight$1","getGenericWidth","unit","setGenericWidth","$_8c9k1dn7jnlpb35o","halve","main","newWidth","$_8eufztn6jnlpb35m","attached","windowOf","Window","parentWindow","$_7rx1opngjnlpb37d","top","translate","Position","boxPosition","firstDefinedOrZero","absolute","win","scrollTop","pageYOffset","scrollLeft","pageXOffset","clientTop","clientLeft","viewport","relative","offsetLeft","offsetTop","$_2ipv1snfjnlpb37b","rowInfo","colInfo","rtlEdge","pos","ltrEdge","getLeftEdge","getRightEdge","getTop","getTopEdge","getBottomEdge","findPositions","getInnerEdge","getOuterEdge","lines","cellOption","lastLine","negate","step","_table","delta","positions","ltr","rtl","$_6u52cqnejnlpb36x","$_1j2xkqndjnlpb36v","TableDirection","directionAt","auto","isRtl","getGridSize","input","$_flksaxnijnlpb37k","Cell","initial","handleUnsupported","baseWith","validate","invalidKeys","handleExact","exactly","elementToData","modification","_toData","contract","position","toData","data","nuFrom","add","replacement","recent","getOrInit","cursor","transform","find$$1","makeNew","sub","replaceOrInit","merging","combine","$_7dlzawnkjnlpb384","blockList","isList","tagName","isBlock","isFormatting","isHeading","isContainer","isFrame","isInline","$_193xmgnpjnlpb39m","universe$1","isBlock$1","isList$1","isFormatting$1","isHeading$1","isContainer$1","isEmptyTag$1","isFrame$1","isInline$1","$_7dfae7nojnlpb39j","merge","isBr","advancedBr","isListItem","siblingIsBlock","rightSibling","markCell","rightSiblingIsBlock","markContent","contents","$_18yv0ennjnlpb38t","hasOwnProperty$1","shallow$1","old","baseMerge","merger","objects","curObject","merge$1","cat","findMap","addCell","gridRow","newCells","setCells","mutateCell","mapCells","getCell","getCellElement","cellLength","$_avmeb4nvjnlpb3at","getColumn","getRow","findDiff","comp","subgrid","restOfRow","endColIndex","restOfColumn","endRowIndex","$_fvjljunujnlpb3an","toDetails","seen","ri","col","ci","updateSeen","isNew","toGrid","rowCells","$_83n6k9ntjnlpb3ai","setIfNot","ignore","render","newRows","renderSection","gridSection","sectionName","tb","tr","removeSection","renderOrRemoveSection","headSection","bodySection","footSection","copy$2","clonedCell","$_ekkk7tnwjnlpb3ax","repeat","repititions","range$1","unique","deduce","rest","aa","extras","abs","$_95ie8gnzjnlpb3ci","range","getBlock","isSingle","getFallback","decide","inBlock","singleInBlock","detailOption","rows$1","$_7erelxnyjnlpb3c4","blocker","row$1","$_4g9efto0jnlpb3cs","namespace","dashNamespace","$_68goq0o1jnlpb3cz","Toggler","turnOff","turnOn","active","off","toggle","isOn","read","remove$3","$_e2xnpfo6jnlpb3df","supports","classList","get$7","add$1","clazz","remove$4","$_apsphgo5jnlpb3dc","add$2","cleanClass","remove$5","toggle$1","toggler","hasClasslist","has$2","$_fy8l6zo3jnlpb3d8","resizeBar","resizeRowBar","resizeColBar","BAR_THICKNESS","wire","previous","drawBar","origin","cpOption","cp","bar","refreshCol","colPositions","tableHeight","colBar","refreshRow","rowPositions","tableWidth","rowBar","refreshGrid","hdirection","vdirection","refresh","each$2","bars","hide","show","isRowBar","isColBar","$_cr2z98nxjnlpb3bk","destroy","fromWarehouse","deriveRows","rendered","findRow","rowOfCells","toDetailList","findInWarehouse","run","operation","adjustment","postAction","genWrappers","direction","model","out","newElements","onCell","onPaste","onPasteRows","lc","onMergable","onUnmergable","onCells","$_dkrxmunqjnlpb39s","value$1","_","onValue","toOption","isValue","isError","message","onError","Result","measure","startAddress","gridA","gridB","rowRemainder","colRemainder","colRequired","rowRequired","rowDelta","colDelta","measureWidth","colLengthA","colLengthB","fill","generator","rowFill","_row","colFill","tailor","fillCols","fillRows","modifiedCols","tailoredGrid","$_1s1cajo8jnlpb3do","merge$2","substitution","unmerge","isToReplace","uniqueCells","currentCell","splitRows","rowPrevCells","$_dod35voajnlpb3e0","isSpanning","matching","mergeTables","mergeHeight","mergeWidth","merge$3","fittedGrid","fittedNewGrid","secondDelta","fittedOldGrid","$_iqv78o7jnlpb3dj","insertRowAt","between","ex","withinSpan","insertColumnAt","splitCellIntoColumns","exampleRow","exampleCol","isTargetCell","splitCellIntoRows","deleteColumnsAt","deleteRowsAt","$_8e5qwrobjnlpb3e8","replaceIn","isTarget","notStartRow","colIndex","notStartColumn","replaceColumn","alreadyAdded","replaceRow","targetRow","$_69d1pfocjnlpb3ei","none$1","folder","l","m","only","middle","$_4ks4roofjnlpb3ex","neighbours$1","determine","context","zero","onOnly","singleColumnWidth","onChange","newNext","minCellWidth","newThis","diffx","onLeft","onMiddle","onRight","size","$_dns8meoejnlpb3er","getSpan$1","hasColspan","hasRowspan","getInt","$_eoi5lkohjnlpb3f8","minWidth","minHeight","getRaw$1","getRawW","getRawH","getWidthFrom","backups","columnCell","deduced","getDeduced","getRawWidths","getPercentageWidths","getPixelWidths","getHeightFrom","rowCell","getPixelHeights","getRawHeights","$_g1addgogjnlpb3ez","measures","recalculateWidth","widths","recalculateHeight","heights","matchRowHeight","$_ew57pqoijnlpb3fg","percentageSize","getCellDelta","_delta","setTableWidth","_newWidths","getWidths","setElementWidth","pixelSize","newWidths","chooseSize","fallbackWidth","getTableSize","$_3yegniojjnlpb3fo","getWarehouse$1","sumUp","getTableWarehouse","adjustWidth","deltas","dx","newSizes","adjustHeight","newHeights","dy","newCellSizes","newRowSizes","adjustWidthTo","$_ed8i3sodjnlpb3em","outcome","elementFromGrid","findIn","bundle","uniqueRows","currentDetail","uniqueColumns","insertRowBefore","targetIndex","newGrid","insertRowsBefore","insertRowAfter","insertRowsAfter","insertColumnBefore","insertColumnsBefore","insertColumnAfter","insertColumnsAfter","makeRowHeader","makeColumnHeader","unmakeRowHeader","unmakeColumnHeader","splitCellIntoColumns$1","splitCellIntoRows$1","eraseColumns","_genWrappers","eraseRows","mergeCells","unmergeCells","pasteDetails","gridify","wh","mergedGrid","nuGrid","gridifyRows","pasteRowsBefore","pasteRowsAfter","resize","$_r4w4xnjjnlpb37n","getBody$1","getPixelWidth$1","getPixelHeight","removePxSuffix","addSizeSuffix","removeDataStyle","dataStyleCells","onDirection","isLtr","getDirection","$_a1umnbomjnlpb3gg","ltr$1","rtl$1","dir","$_1wn5holjnlpb3g6","defaultTableToolbar","defaultStyles","defaultAttributes","border","getDefaultAttributes","getParam","getDefaultStyles","hasTableResizeBars","hasTabNavigation","hasAdvancedCellTab","hasAdvancedRowTab","hasAdvancedTableTab","hasAppearanceOptions","hasTableGrid","shouldStyleWithCss","getCellClassList","getRowClassList","getTableClassList","getColorPickerCallback","isPixelsForced","getCloneElements","cloneElements","hasObjectResizing","objectResizing","getToolbar","toolbar","fireNewRow","fire","fireNewCell","fireObjectResizeStart","fireObjectResized","TableActions","lazyWire","isTableBody","lastRowGuard","lastColumnGuard","execute","guard","createRng","setStart","setEnd","deleteRow","deleteColumn","copyRows","selectedCells","slicedGrid","slicedDetails","$_c8ht2doqjnlpb3h7","global$1","getTDTHOverallStyle","select","firstChildStyle","checkChildren","elms","currentStyle","getStyle","applyAlign","formatter","applyVAlign","unApplyAlign","unApplyVAlign","$_fl09twotjnlpb3hi","buildListItems","inputList","itemCallback","startItems","appendItems","menuItem","title","menu","styleFieldHasFocus","control","rootControl","getEl","activeElement","syncAdvancedStyleFields","evt","updateAdvancedFields","updateStyleField","toJSON","parseStyle","borderStyle","borderColor","backgroundColor","serializeStyle","extractAdvancedStyles","getAttrib","createStyleForm","createColorPickAction","colorPickerCallback","defaults","onchange","items","padding","formItemDefaults","layout","alignH","onselect","onaction","$_ce2naoujnlpb3hk","updateStyles","dataset","mceStyle","extractDataFromElement","class","align","valign","matchNode","extend","onSubmitCellForm","setAttrib","setStyle","undoManager","transact","cellElm","rename","open","classListCtrl","textStyle","getCssText","block","classes","generalCellForm","labelGapCalc","maxWidth","windowManager","bodyType","onsubmit","$_c9662posjnlpb3hc","extractDataFromElement$1","switchRowType","rowElm","toType","tableElm","oldParentElm","parentElm","insertAfter","onSubmitRowForm","oldData","open$1","generalRowForm","$_bi4bv9ovjnlpb3hs","global$2","DefaultRenderOptions","percentages","makeTable","tableBody","tableRow","tableHeaderCell","tableCell","render$1","rowHeaders","columnHeaders","renderOpts","tbody","trs","get$8","set$5","docDom","fragment","createDocumentFragment","contentElements","getOuter$2","$_d2j8ikp1jnlpb3jb","placeCaretInCell","collapse","selectFirstCellInTable","fireEvents","isPercentage","insert$1","options","insertContent","$_azkpjfoyjnlpb3ij","styleTDTH","extractDataFromElement$2","cellspacing","cellpadding","caption","applyDataToElement","setAttribs","onSubmitTableForm","captionElm","addVisual","open$2","isProps","colsCtrl","rowsCtrl","generalTableForm","$_ackveiowjnlpb3i0","each$3","registerCommands","clipboardRows","eraseTable","getSelectionStartCell","getTableFromCell","getSize","resizeChange","oldSize","actOnSelection","beforeSize","copyRowSelection","pasteOnSelection","clonedRows","mceTableSplitCells","mceTableMergeCells","mceTableInsertRowBefore","mceTableInsertRowAfter","mceTableInsertColBefore","mceTableInsertColAfter","mceTableDeleteCol","mceTableDeleteRow","mceTableCutRow","mceTableCopyRow","mceTablePasteRowBefore","mceTablePasteRowAfter","mceTableDelete","func","addCommand","mceInsertTable","mceTableProps","mceTableRowProps","mceTableCellProps","ui","$_cs1v9popjnlpb3gp","only$1","view","detached","editable","body$1","$_3sofg5p3jnlpb3jp","Event","handlers","bind$$1","handler","unbind","trigger","event","typeDefs","registry","$_1h053sp6jnlpb3kj","mode","sink","api$3","$_giccoxpajnlpb3lt","styles$1","$_ey51h9pcjnlpb3md","Blocker","settings","layerClass","mkEvent","prevent","kill","handle","rawEvent","stopPropagation","clientX","clientY","binder","useCapture","wrapped","addEventListener","bind$1","capture","removeEventListener","$_7kzx7cpejnlpb3mk","filter$1","bind$2","capture$1","$_4o4bswpdjnlpb3mh","compare","extract$1","mutate$1","mutation","sink$1","dragApi","mdown","forceDrop","mup","drop","mmove","move","mout","delayDrop","MouseDrag","InDrag","reset","update","onEvent","dataOption","events","NoDrag","anchor","Movement","noDragState","inDragState","dragState","last$3","fn","rate","timer","cancel","clearTimeout","throttle","setTimeout","setup","movement","throttledDrop","go","mousemove","runIfActive","$_b0ft8spfjnlpb3mo","transform$1","$_fs34odp8jnlpb3lh","Mutation","drag","BarMutation","delegate","xDelta","yDelta","assign","any","ancestor$2","sibling$2","child$3","descendant$2","closest$2","$_5b9d06pmjnlpb3np","resizeBarDragging","BarManager","resizing","hoverTable","getResizer","_dataRow","_dataCol","currentCol","getDelta","newX","oldX","startAdjust","mousedown","mouseover","ht","hideBars","showBars","TableResize","manager","beforeResize","afterResize","startDrag","createContainer","margin","get$9","inline","remove$6","$_f0se2dpnjnlpb3nr","ResizeHandler","selectionRng","startW","startRawW","isTable","lazyResize","sz","rawWire","getRng","rawTable","targetElm","percentW","targetPercentW","newCellSizes_1","newCellSize","none$2","folder$1","first$5","middle$1","last$4","$_eqlswpqjnlpb3oy","detect$4","detection","$_fg7b7hppjnlpb3oq","cata$1","onBefore","onOn","onAfter","situ","$_1jbfrupsjnlpb3p6","type$2","domRange","exact","range$2","exactFromRange","simRange","soffset","foffset","getStart$1","startContainer","startSitu","finishSitu","getWin","$_3nispmprjnlpb3p0","makeRange","createRange","commonAncestorContainer","after$2","same","collapsed","$_3zlyaipujnlpb3pi","fromElements","$_4brybspvjnlpb3pk","selectNodeContents","selectNodeContentsUsing","isWithin$1","outerRange","innerRange","compareBoundaryPoints","END_TO_START","START_TO_END","create$1","setStartBefore","setStartAfter","setFinish","setEndBefore","setEndAfter","replaceWith","deleteContents","insertNode","relativeToNative","exactToNative","cloneFragment","cloneContents","toRect","rect","bottom","getFirstRect","rects","getClientRects","getBounds$1","$_3bxnj0pwjnlpb3po","adt$1","fromRange","startOffset","endContainer","endOffset","getRanges","doDiagnose","ranges","reversed","rev","diagnose","asLtrRange","diagnosis","$_960to1pxjnlpb3pz","searchForPoint","rectForOffset","maxX","curDeltaX","inRect","$_j9perq0jnlpb3qr","locateOffset","textnode","rangeForOffset","locate","selectNode","foundRect","$_3rp2ysq1jnlpb3qs","searchInChildren","locateNode","locator","locate$1","boundedX","boundedY","$_dhcohjpzjnlpb3ql","COLLAPSE_TO_LEFT","COLLAPSE_TO_RIGHT","getCollapseDirection","createCollapsedNode","collapseDirection","locateInElement","cursorRange","locateInEmpty","$_ex3n38q2jnlpb3qy","caretPositionFromPoint","offsetNode","caretRangeFromPoint","searchTextNodes","searchFromPoint","availableSearch","fromPoint$1","$_ctcznhpyjnlpb3qg","withinContainer","find$3","$_a1llruq3jnlpb3r1","beforeSpecial","preprocessRelative","preprocessExact","preprocess","$_73jk3jq4jnlpb3r6","doSetNativeRange","getSelection","removeAllRanges","addRange","doSetRange","findWithin","setLegacyRtlRange","setRangeFromRelative","setBaseAndExtent","setExact","setRelative","toNative","getDomRange","readRange","rangeCount","firstRng","getRangeAt","lastRng","doGetExact","anchorNode","focusNode","anchorOffset","focusOffset","setToElement","forElement","getExact","sel","get$10","getFirstRect$1","getBounds$2","getAtPoint","getAsString","clear$1","clone$2","replace$1","deleteAt","isCollapsed","$_brx5r2ptjnlpb3pc","global$3","forward","backward","getCellFirstCursorPosition","getNewRowCursorPosition","rootElements","handle$1","keyCode","TAB","body_1","isRoot_1","navigation","shiftKey","range$$1","$_yn0xrpojnlpb3o5","response","$_bfyx6nq8jnlpb3sm","isKey","keycode","isUp","isDown","isNavigation","$_97y5leq9jnlpb3so","isBackward","isForward","convertToRange","makeSitus","$_cq8cz4qbjnlpb3t5","get$11","_doc","to","scrollTo","by","scrollBy","setToElement$1","preserve$1","capture$2","save","intoView","alignToTop","scrollIntoViewIfNeeded","scrollIntoView","intoViewIfNeeded","containerBox","elementBox","scrollBarWidth","scrollDiv","clientWidth","$_t8063qcjnlpb3tf","WindowBridge","getRect","getRangedRect","structRect","exactAdt","fromSitus","situs","situsFromPoint","clearSelection","selectContents","setSelection","setRelativeSelection","getInnerHeight","innerHeight","getScrollY","sync","selectRange","detect$5","cellSel","annotations","updateSelection","newSels","$_58lt4vqdjnlpb3tq","nu$3","moveDown","caret","moveUp","moveBottomTo","moveTopTo","getTop$1","getBottom","toString$1","$_2vydjpqgjnlpb3v6","getPartialBox","bridge","toCaret","getElemBox","getBoxAt","getEntireBox","$_5ajb76qhjnlpb3va","traverse","backtrack","_transition","transition","sidestep","advance","successors","go$1","rules","ruleOpt","succ","rule","$_3d298hqmjnlpb3wp","left$1","right$1","$_6dc67rqnjnlpb3wy","hone","left$2","right$2","$_fogvzzqljnlpb3wl","isLeaf","before$2","seekLeft","after$3","seekRight","walkers","walk","_rules","$_77hw2eqkjnlpb3wh","universe$2","gather","before$3","after$4","seekLeft$1","seekRight$1","walkers$1","walk$1","$_3mk9c4qjjnlpb3wc","JUMP_SIZE","NUM_RETRIES","adt$2","isOutside","inOutsideBlock","adjustDown","guessBox","lowerCaret","retry","adjustUp","higherCaret","upMovement","point","adjuster","downMovement","isAtTable","adjustForTable","numRetries","adjustTil","guess","newCaret","ieTryDown","ieTryUp","checkScroll","adjusted","moved","$_4fb5qlqijnlpb3vj","tryUp","tryDown","getJumpSize","adt$3","isOverlapping","beforeBounds","afterBounds","verify","beforeOffset","afterOffset","failure","afterCell","beforeCell","isRow","success","sharedRow","cata$2","onSuccess","onFailedUp","onFailedDown","$_57y4nlqojnlpb3x2","range$3","points","$_8t1dqfqqjnlpb3y6","inAncestor","inParent","childOf","indexInParent","indexOf$1","selectorsInParent","descendantsInAncestor","ancestorSelector","descendantSelector","$_1r36udqrjnlpb3ya","gatherer","cand","handleBr","findBr","handleParent","br","adjacent","tryBr","tgt","process","analysis","$_ez71ihqpjnlpb3xg","MAX_RETRIES","platform$1","findSpot","brNeighbour","scan","tryCursor","tryAgain","tryAt","otherRetry","ieRetry","handle$2","$_gi8dt7qfjnlpb3uu","any$1","ancestor$3","closest$3","sibling$3","child$4","descendant$3","$_4l0x9cqsjnlpb3yj","inSameTable","simulate","navigate","precheck","firstUpCheck","lastOffset","lastDownCheck","$_dxvqovqejnlpb3u5","findCell","MouseSelection","clearState","mouseup","$_eg9t6dqujnlpb3yt","failedDown","failedUp","rc","mouse","keyboard","clearToNavigate","keydown","which","attempts","keyup","$_19y0u4q7jnlpb3s9","add$3","remove$7","toggle$2","hasAll","hasAny","getNative","get$12","$_78lgmeqxjnlpb3zf","addClass","removeClass","removeClasses","hasClass","$_au0x5fqwjnlpb3ze","byClass","ephemera","addSelectionClass","removeSelectionClasses","byAttr","removeSelectionAttributes","addSelectionAttribute","$_b4r73tqvjnlpb3z1","hasInternalTarget","CellSelection$1","handlerStruct","syncSelection","mouseHandlers","keyHandlers","hasShiftKey","handleResponse","ns","wrappedEvent","wrapEvent","isMouseEvent","isLeftMouse","button","isLeftButtonPressed","buttons","mouseDown","mouseOver","mouseUp","Selections","each$4","addButtons","menuItems","addButton","cmd","command","execCommand","onclick","icon","addToolbars","selectorMatched","addContextToolbar","$_fgs8hlqzjnlpb3zp","addMenuItems","tableCtrls","cellCtrls","mergeCtrls","unmergeCtrls","noTargetDisable","ctrl","disabled","ctrlEnable","pushTable","pushCell","pushMerge","pushUnmerge","setDisabledCtrls","mergeCtrl","unmergeCtrl","cellDom","generateTableGrid","selectGrid","tx","ty","getElementsByTagName","focusCell","rel","toggleClass","insertTable","ariaHideMenu","aria","hideAll","stopImmediatePropagation","onshow","onhide","onPostRender","lastX","lastY","onmousemove","toUpperCase","tableProperties","deleteTable","separator","addMenuItem","$_3b6cvbr0jnlpb3zw","getClipboardRows","setClipboardRows","sugarRows","getApi","Plugin","resizeHandler","addTempAttr","Plugin$1"],"mappings":"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","sourcesContent":["(function () {\nvar table = (function () {\n  'use strict';\n\n  var global = tinymce.util.Tools.resolve('tinymce.PluginManager');\n\n  var noop = function () {\n    var x = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n      x[_i] = arguments[_i];\n    }\n  };\n\n  var compose = function (fa, fb) {\n    return function () {\n      var x = [];\n      for (var _i = 0; _i < arguments.length; _i++) {\n        x[_i] = arguments[_i];\n      }\n      return fa(fb.apply(null, arguments));\n    };\n  };\n  var constant = function (value) {\n    return function () {\n      return value;\n    };\n  };\n  var identity = function (x) {\n    return x;\n  };\n\n  var curry = function (f) {\n    var x = [];\n    for (var _i = 1; _i < arguments.length; _i++) {\n      x[_i - 1] = arguments[_i];\n    }\n    var args = new Array(arguments.length - 1);\n    for (var i = 1; i < arguments.length; i++)\n      args[i - 1] = arguments[i];\n    return function () {\n      var x = [];\n      for (var _i = 0; _i < arguments.length; _i++) {\n        x[_i] = arguments[_i];\n      }\n      var newArgs = new Array(arguments.length);\n      for (var j = 0; j < newArgs.length; j++)\n        newArgs[j] = arguments[j];\n      var all = args.concat(newArgs);\n      return f.apply(null, all);\n    };\n  };\n  var not = function (f) {\n    return function () {\n      var x = [];\n      for (var _i = 0; _i < arguments.length; _i++) {\n        x[_i] = arguments[_i];\n      }\n      return !f.apply(null, arguments);\n    };\n  };\n  var die = function (msg) {\n    return function () {\n      throw new Error(msg);\n    };\n  };\n  var apply = function (f) {\n    return f();\n  };\n\n  var never = constant(false);\n  var always = constant(true);\n\n  var never$1 = never;\n  var always$1 = always;\n  var none = function () {\n    return NONE;\n  };\n  var NONE = function () {\n    var eq = function (o) {\n      return o.isNone();\n    };\n    var call$$1 = function (thunk) {\n      return thunk();\n    };\n    var id = function (n) {\n      return n;\n    };\n    var noop$$1 = function () {\n    };\n    var nul = function () {\n      return null;\n    };\n    var undef = function () {\n      return undefined;\n    };\n    var me = {\n      fold: function (n, s) {\n        return n();\n      },\n      is: never$1,\n      isSome: never$1,\n      isNone: always$1,\n      getOr: id,\n      getOrThunk: call$$1,\n      getOrDie: function (msg) {\n        throw new Error(msg || 'error: getOrDie called on none.');\n      },\n      getOrNull: nul,\n      getOrUndefined: undef,\n      or: id,\n      orThunk: call$$1,\n      map: none,\n      ap: none,\n      each: noop$$1,\n      bind: none,\n      flatten: none,\n      exists: never$1,\n      forall: always$1,\n      filter: none,\n      equals: eq,\n      equals_: eq,\n      toArray: function () {\n        return [];\n      },\n      toString: constant('none()')\n    };\n    if (Object.freeze)\n      Object.freeze(me);\n    return me;\n  }();\n  var some = function (a) {\n    var constant_a = function () {\n      return a;\n    };\n    var self = function () {\n      return me;\n    };\n    var map = function (f) {\n      return some(f(a));\n    };\n    var bind = function (f) {\n      return f(a);\n    };\n    var me = {\n      fold: function (n, s) {\n        return s(a);\n      },\n      is: function (v) {\n        return a === v;\n      },\n      isSome: always$1,\n      isNone: never$1,\n      getOr: constant_a,\n      getOrThunk: constant_a,\n      getOrDie: constant_a,\n      getOrNull: constant_a,\n      getOrUndefined: constant_a,\n      or: self,\n      orThunk: self,\n      map: map,\n      ap: function (optfab) {\n        return optfab.fold(none, function (fab) {\n          return some(fab(a));\n        });\n      },\n      each: function (f) {\n        f(a);\n      },\n      bind: bind,\n      flatten: constant_a,\n      exists: bind,\n      forall: bind,\n      filter: function (f) {\n        return f(a) ? me : NONE;\n      },\n      equals: function (o) {\n        return o.is(a);\n      },\n      equals_: function (o, elementEq) {\n        return o.fold(never$1, function (b) {\n          return elementEq(a, b);\n        });\n      },\n      toArray: function () {\n        return [a];\n      },\n      toString: function () {\n        return 'some(' + a + ')';\n      }\n    };\n    return me;\n  };\n  var from = function (value) {\n    return value === null || value === undefined ? NONE : some(value);\n  };\n  var Option = {\n    some: some,\n    none: none,\n    from: from\n  };\n\n  var typeOf = function (x) {\n    if (x === null)\n      return 'null';\n    var t = typeof x;\n    if (t === 'object' && Array.prototype.isPrototypeOf(x))\n      return 'array';\n    if (t === 'object' && String.prototype.isPrototypeOf(x))\n      return 'string';\n    return t;\n  };\n  var isType = function (type) {\n    return function (value) {\n      return typeOf(value) === type;\n    };\n  };\n  var isString = isType('string');\n\n  var isArray = isType('array');\n\n  var isBoolean = isType('boolean');\n\n  var isFunction = isType('function');\n  var isNumber = isType('number');\n\n  var rawIndexOf = function () {\n    var pIndexOf = Array.prototype.indexOf;\n    var fastIndex = function (xs, x) {\n      return pIndexOf.call(xs, x);\n    };\n    var slowIndex = function (xs, x) {\n      return slowIndexOf(xs, x);\n    };\n    return pIndexOf === undefined ? slowIndex : fastIndex;\n  }();\n\n  var contains = function (xs, x) {\n    return rawIndexOf(xs, x) > -1;\n  };\n  var exists = function (xs, pred) {\n    return findIndex(xs, pred).isSome();\n  };\n\n\n  var map = function (xs, f) {\n    var len = xs.length;\n    var r = new Array(len);\n    for (var i = 0; i < len; i++) {\n      var x = xs[i];\n      r[i] = f(x, i, xs);\n    }\n    return r;\n  };\n  var each = function (xs, f) {\n    for (var i = 0, len = xs.length; i < len; i++) {\n      var x = xs[i];\n      f(x, i, xs);\n    }\n  };\n  var eachr = function (xs, f) {\n    for (var i = xs.length - 1; i >= 0; i--) {\n      var x = xs[i];\n      f(x, i, xs);\n    }\n  };\n\n  var filter = function (xs, pred) {\n    var r = [];\n    for (var i = 0, len = xs.length; i < len; i++) {\n      var x = xs[i];\n      if (pred(x, i, xs)) {\n        r.push(x);\n      }\n    }\n    return r;\n  };\n\n  var foldr = function (xs, f, acc) {\n    eachr(xs, function (x) {\n      acc = f(acc, x);\n    });\n    return acc;\n  };\n  var foldl = function (xs, f, acc) {\n    each(xs, function (x) {\n      acc = f(acc, x);\n    });\n    return acc;\n  };\n  var find = function (xs, pred) {\n    for (var i = 0, len = xs.length; i < len; i++) {\n      var x = xs[i];\n      if (pred(x, i, xs)) {\n        return Option.some(x);\n      }\n    }\n    return Option.none();\n  };\n  var findIndex = function (xs, pred) {\n    for (var i = 0, len = xs.length; i < len; i++) {\n      var x = xs[i];\n      if (pred(x, i, xs)) {\n        return Option.some(i);\n      }\n    }\n    return Option.none();\n  };\n  var slowIndexOf = function (xs, x) {\n    for (var i = 0, len = xs.length; i < len; ++i) {\n      if (xs[i] === x) {\n        return i;\n      }\n    }\n    return -1;\n  };\n  var push = Array.prototype.push;\n  var flatten = function (xs) {\n    var r = [];\n    for (var i = 0, len = xs.length; i < len; ++i) {\n      if (!Array.prototype.isPrototypeOf(xs[i]))\n        throw new Error('Arr.flatten item ' + i + ' was not an array, input: ' + xs);\n      push.apply(r, xs[i]);\n    }\n    return r;\n  };\n  var bind = function (xs, f) {\n    var output = map(xs, f);\n    return flatten(output);\n  };\n  var forall = function (xs, pred) {\n    for (var i = 0, len = xs.length; i < len; ++i) {\n      var x = xs[i];\n      if (pred(x, i, xs) !== true) {\n        return false;\n      }\n    }\n    return true;\n  };\n\n  var slice = Array.prototype.slice;\n  var reverse = function (xs) {\n    var r = slice.call(xs, 0);\n    r.reverse();\n    return r;\n  };\n\n\n\n\n\n  var last = function (xs) {\n    return xs.length === 0 ? Option.none() : Option.some(xs[xs.length - 1]);\n  };\n  var from$1 = isFunction(Array.from) ? Array.from : function (x) {\n    return slice.call(x);\n  };\n\n  var keys = Object.keys;\n\n  var each$1 = function (obj, f) {\n    var props = keys(obj);\n    for (var k = 0, len = props.length; k < len; k++) {\n      var i = props[k];\n      var x = obj[i];\n      f(x, i, obj);\n    }\n  };\n  var map$1 = function (obj, f) {\n    return tupleMap(obj, function (x, i, obj) {\n      return {\n        k: i,\n        v: f(x, i, obj)\n      };\n    });\n  };\n  var tupleMap = function (obj, f) {\n    var r = {};\n    each$1(obj, function (x, i) {\n      var tuple = f(x, i, obj);\n      r[tuple.k] = tuple.v;\n    });\n    return r;\n  };\n\n  var Immutable = function () {\n    var fields = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n      fields[_i] = arguments[_i];\n    }\n    return function () {\n      var values = [];\n      for (var _i = 0; _i < arguments.length; _i++) {\n        values[_i] = arguments[_i];\n      }\n      if (fields.length !== values.length) {\n        throw new Error('Wrong number of arguments to struct. Expected \"[' + fields.length + ']\", got ' + values.length + ' arguments');\n      }\n      var struct = {};\n      each(fields, function (name, i) {\n        struct[name] = constant(values[i]);\n      });\n      return struct;\n    };\n  };\n\n  var sort$1 = function (arr) {\n    return arr.slice(0).sort();\n  };\n  var reqMessage = function (required, keys) {\n    throw new Error('All required keys (' + sort$1(required).join(', ') + ') were not specified. Specified keys were: ' + sort$1(keys).join(', ') + '.');\n  };\n  var unsuppMessage = function (unsupported) {\n    throw new Error('Unsupported keys for object: ' + sort$1(unsupported).join(', '));\n  };\n  var validateStrArr = function (label, array) {\n    if (!isArray(array))\n      throw new Error('The ' + label + ' fields must be an array. Was: ' + array + '.');\n    each(array, function (a) {\n      if (!isString(a))\n        throw new Error('The value ' + a + ' in the ' + label + ' fields was not a string.');\n    });\n  };\n  var invalidTypeMessage = function (incorrect, type) {\n    throw new Error('All values need to be of type: ' + type + '. Keys (' + sort$1(incorrect).join(', ') + ') were not.');\n  };\n  var checkDupes = function (everything) {\n    var sorted = sort$1(everything);\n    var dupe = find(sorted, function (s, i) {\n      return i < sorted.length - 1 && s === sorted[i + 1];\n    });\n    dupe.each(function (d) {\n      throw new Error('The field: ' + d + ' occurs more than once in the combined fields: [' + sorted.join(', ') + '].');\n    });\n  };\n\n  var MixedBag = function (required, optional) {\n    var everything = required.concat(optional);\n    if (everything.length === 0)\n      throw new Error('You must specify at least one required or optional field.');\n    validateStrArr('required', required);\n    validateStrArr('optional', optional);\n    checkDupes(everything);\n    return function (obj) {\n      var keys$$1 = keys(obj);\n      var allReqd = forall(required, function (req) {\n        return contains(keys$$1, req);\n      });\n      if (!allReqd)\n        reqMessage(required, keys$$1);\n      var unsupported = filter(keys$$1, function (key) {\n        return !contains(everything, key);\n      });\n      if (unsupported.length > 0)\n        unsuppMessage(unsupported);\n      var r = {};\n      each(required, function (req) {\n        r[req] = constant(obj[req]);\n      });\n      each(optional, function (opt) {\n        r[opt] = constant(Object.prototype.hasOwnProperty.call(obj, opt) ? Option.some(obj[opt]) : Option.none());\n      });\n      return r;\n    };\n  };\n\n  var dimensions = Immutable('width', 'height');\n  var grid = Immutable('rows', 'columns');\n  var address = Immutable('row', 'column');\n  var coords = Immutable('x', 'y');\n  var detail = Immutable('element', 'rowspan', 'colspan');\n  var detailnew = Immutable('element', 'rowspan', 'colspan', 'isNew');\n  var extended = Immutable('element', 'rowspan', 'colspan', 'row', 'column');\n  var rowdata = Immutable('element', 'cells', 'section');\n  var elementnew = Immutable('element', 'isNew');\n  var rowdatanew = Immutable('element', 'cells', 'section', 'isNew');\n  var rowcells = Immutable('cells', 'section');\n  var rowdetails = Immutable('details', 'section');\n  var bounds = Immutable('startRow', 'startCol', 'finishRow', 'finishCol');\n  var $_csuubelcjnlpb2sv = {\n    dimensions: dimensions,\n    grid: grid,\n    address: address,\n    coords: coords,\n    extended: extended,\n    detail: detail,\n    detailnew: detailnew,\n    rowdata: rowdata,\n    elementnew: elementnew,\n    rowdatanew: rowdatanew,\n    rowcells: rowcells,\n    rowdetails: rowdetails,\n    bounds: bounds\n  };\n\n  var fromHtml = function (html, scope) {\n    var doc = scope || document;\n    var div = doc.createElement('div');\n    div.innerHTML = html;\n    if (!div.hasChildNodes() || div.childNodes.length > 1) {\n      console.error('HTML does not have a single root node', html);\n      throw 'HTML must have a single root node';\n    }\n    return fromDom(div.childNodes[0]);\n  };\n  var fromTag = function (tag, scope) {\n    var doc = scope || document;\n    var node = doc.createElement(tag);\n    return fromDom(node);\n  };\n  var fromText = function (text, scope) {\n    var doc = scope || document;\n    var node = doc.createTextNode(text);\n    return fromDom(node);\n  };\n  var fromDom = function (node) {\n    if (node === null || node === undefined)\n      throw new Error('Node cannot be null or undefined');\n    return { dom: constant(node) };\n  };\n  var fromPoint = function (docElm, x, y) {\n    var doc = docElm.dom();\n    return Option.from(doc.elementFromPoint(x, y)).map(fromDom);\n  };\n  var Element$$1 = {\n    fromHtml: fromHtml,\n    fromTag: fromTag,\n    fromText: fromText,\n    fromDom: fromDom,\n    fromPoint: fromPoint\n  };\n\n  var $_1skeq9lijnlpb2un = {\n    ATTRIBUTE: Node.ATTRIBUTE_NODE,\n    CDATA_SECTION: Node.CDATA_SECTION_NODE,\n    COMMENT: Node.COMMENT_NODE,\n    DOCUMENT: Node.DOCUMENT_NODE,\n    DOCUMENT_TYPE: Node.DOCUMENT_TYPE_NODE,\n    DOCUMENT_FRAGMENT: Node.DOCUMENT_FRAGMENT_NODE,\n    ELEMENT: Node.ELEMENT_NODE,\n    TEXT: Node.TEXT_NODE,\n    PROCESSING_INSTRUCTION: Node.PROCESSING_INSTRUCTION_NODE,\n    ENTITY_REFERENCE: Node.ENTITY_REFERENCE_NODE,\n    ENTITY: Node.ENTITY_NODE,\n    NOTATION: Node.NOTATION_NODE\n  };\n\n  var ELEMENT = $_1skeq9lijnlpb2un.ELEMENT;\n  var DOCUMENT = $_1skeq9lijnlpb2un.DOCUMENT;\n  var is = function (element, selector) {\n    var elem = element.dom();\n    if (elem.nodeType !== ELEMENT)\n      return false;\n    else if (elem.matches !== undefined)\n      return elem.matches(selector);\n    else if (elem.msMatchesSelector !== undefined)\n      return elem.msMatchesSelector(selector);\n    else if (elem.webkitMatchesSelector !== undefined)\n      return elem.webkitMatchesSelector(selector);\n    else if (elem.mozMatchesSelector !== undefined)\n      return elem.mozMatchesSelector(selector);\n    else\n      throw new Error('Browser lacks native selectors');\n  };\n  var bypassSelector = function (dom) {\n    return dom.nodeType !== ELEMENT && dom.nodeType !== DOCUMENT || dom.childElementCount === 0;\n  };\n  var all = function (selector, scope) {\n    var base = scope === undefined ? document : scope.dom();\n    return bypassSelector(base) ? [] : map(base.querySelectorAll(selector), Element$$1.fromDom);\n  };\n  var one = function (selector, scope) {\n    var base = scope === undefined ? document : scope.dom();\n    return bypassSelector(base) ? Option.none() : Option.from(base.querySelector(selector)).map(Element$$1.fromDom);\n  };\n  var $_1mxomdlfjnlpb2tz = {\n    all: all,\n    is: is,\n    one: one\n  };\n\n  var toArray = function (target, f) {\n    var r = [];\n    var recurse = function (e) {\n      r.push(e);\n      return f(e);\n    };\n    var cur = f(target);\n    do {\n      cur = cur.bind(recurse);\n    } while (cur.isSome());\n    return r;\n  };\n  var $_84ox1wlkjnlpb2v9 = { toArray: toArray };\n\n  var Global = typeof window !== 'undefined' ? window : Function('return this;')();\n\n  var path = function (parts, scope) {\n    var o = scope !== undefined && scope !== null ? scope : Global;\n    for (var i = 0; i < parts.length && o !== undefined && o !== null; ++i)\n      o = o[parts[i]];\n    return o;\n  };\n  var resolve = function (p, scope) {\n    var parts = p.split('.');\n    return path(parts, scope);\n  };\n\n  var unsafe = function (name, scope) {\n    return resolve(name, scope);\n  };\n  var getOrDie = function (name, scope) {\n    var actual = unsafe(name, scope);\n    if (actual === undefined || actual === null)\n      throw name + ' not available on this browser';\n    return actual;\n  };\n  var $_7rb9h8lnjnlpb2vl = { getOrDie: getOrDie };\n\n  var node = function () {\n    var f = $_7rb9h8lnjnlpb2vl.getOrDie('Node');\n    return f;\n  };\n  var compareDocumentPosition = function (a, b, match) {\n    return (a.compareDocumentPosition(b) & match) !== 0;\n  };\n  var documentPositionPreceding = function (a, b) {\n    return compareDocumentPosition(a, b, node().DOCUMENT_POSITION_PRECEDING);\n  };\n  var documentPositionContainedBy = function (a, b) {\n    return compareDocumentPosition(a, b, node().DOCUMENT_POSITION_CONTAINED_BY);\n  };\n  var $_5xoldwlmjnlpb2vk = {\n    documentPositionPreceding: documentPositionPreceding,\n    documentPositionContainedBy: documentPositionContainedBy\n  };\n\n  var cached = function (f) {\n    var called = false;\n    var r;\n    return function () {\n      var args = [];\n      for (var _i = 0; _i < arguments.length; _i++) {\n        args[_i] = arguments[_i];\n      }\n      if (!called) {\n        called = true;\n        r = f.apply(null, args);\n      }\n      return r;\n    };\n  };\n\n  var firstMatch = function (regexes, s) {\n    for (var i = 0; i < regexes.length; i++) {\n      var x = regexes[i];\n      if (x.test(s))\n        return x;\n    }\n    return undefined;\n  };\n  var find$2 = function (regexes, agent) {\n    var r = firstMatch(regexes, agent);\n    if (!r)\n      return {\n        major: 0,\n        minor: 0\n      };\n    var group = function (i) {\n      return Number(agent.replace(r, '$' + i));\n    };\n    return nu(group(1), group(2));\n  };\n  var detect = function (versionRegexes, agent) {\n    var cleanedAgent = String(agent).toLowerCase();\n    if (versionRegexes.length === 0)\n      return unknown();\n    return find$2(versionRegexes, cleanedAgent);\n  };\n  var unknown = function () {\n    return nu(0, 0);\n  };\n  var nu = function (major, minor) {\n    return {\n      major: major,\n      minor: minor\n    };\n  };\n  var Version = {\n    nu: nu,\n    detect: detect,\n    unknown: unknown\n  };\n\n  var edge = 'Edge';\n  var chrome = 'Chrome';\n  var ie = 'IE';\n  var opera = 'Opera';\n  var firefox = 'Firefox';\n  var safari = 'Safari';\n  var isBrowser = function (name, current) {\n    return function () {\n      return current === name;\n    };\n  };\n  var unknown$1 = function () {\n    return nu$1({\n      current: undefined,\n      version: Version.unknown()\n    });\n  };\n  var nu$1 = function (info) {\n    var current = info.current;\n    var version = info.version;\n    return {\n      current: current,\n      version: version,\n      isEdge: isBrowser(edge, current),\n      isChrome: isBrowser(chrome, current),\n      isIE: isBrowser(ie, current),\n      isOpera: isBrowser(opera, current),\n      isFirefox: isBrowser(firefox, current),\n      isSafari: isBrowser(safari, current)\n    };\n  };\n  var Browser = {\n    unknown: unknown$1,\n    nu: nu$1,\n    edge: constant(edge),\n    chrome: constant(chrome),\n    ie: constant(ie),\n    opera: constant(opera),\n    firefox: constant(firefox),\n    safari: constant(safari)\n  };\n\n  var windows = 'Windows';\n  var ios = 'iOS';\n  var android = 'Android';\n  var linux = 'Linux';\n  var osx = 'OSX';\n  var solaris = 'Solaris';\n  var freebsd = 'FreeBSD';\n  var isOS = function (name, current) {\n    return function () {\n      return current === name;\n    };\n  };\n  var unknown$2 = function () {\n    return nu$2({\n      current: undefined,\n      version: Version.unknown()\n    });\n  };\n  var nu$2 = function (info) {\n    var current = info.current;\n    var version = info.version;\n    return {\n      current: current,\n      version: version,\n      isWindows: isOS(windows, current),\n      isiOS: isOS(ios, current),\n      isAndroid: isOS(android, current),\n      isOSX: isOS(osx, current),\n      isLinux: isOS(linux, current),\n      isSolaris: isOS(solaris, current),\n      isFreeBSD: isOS(freebsd, current)\n    };\n  };\n  var OperatingSystem = {\n    unknown: unknown$2,\n    nu: nu$2,\n    windows: constant(windows),\n    ios: constant(ios),\n    android: constant(android),\n    linux: constant(linux),\n    osx: constant(osx),\n    solaris: constant(solaris),\n    freebsd: constant(freebsd)\n  };\n\n  var DeviceType = function (os, browser, userAgent) {\n    var isiPad = os.isiOS() && /ipad/i.test(userAgent) === true;\n    var isiPhone = os.isiOS() && !isiPad;\n    var isAndroid3 = os.isAndroid() && os.version.major === 3;\n    var isAndroid4 = os.isAndroid() && os.version.major === 4;\n    var isTablet = isiPad || isAndroid3 || isAndroid4 && /mobile/i.test(userAgent) === true;\n    var isTouch = os.isiOS() || os.isAndroid();\n    var isPhone = isTouch && !isTablet;\n    var iOSwebview = browser.isSafari() && os.isiOS() && /safari/i.test(userAgent) === false;\n    return {\n      isiPad: constant(isiPad),\n      isiPhone: constant(isiPhone),\n      isTablet: constant(isTablet),\n      isPhone: constant(isPhone),\n      isTouch: constant(isTouch),\n      isAndroid: os.isAndroid,\n      isiOS: os.isiOS,\n      isWebView: constant(iOSwebview)\n    };\n  };\n\n  var detect$1 = function (candidates, userAgent) {\n    var agent = String(userAgent).toLowerCase();\n    return find(candidates, function (candidate) {\n      return candidate.search(agent);\n    });\n  };\n  var detectBrowser = function (browsers, userAgent) {\n    return detect$1(browsers, userAgent).map(function (browser) {\n      var version = Version.detect(browser.versionRegexes, userAgent);\n      return {\n        current: browser.name,\n        version: version\n      };\n    });\n  };\n  var detectOs = function (oses, userAgent) {\n    return detect$1(oses, userAgent).map(function (os) {\n      var version = Version.detect(os.versionRegexes, userAgent);\n      return {\n        current: os.name,\n        version: version\n      };\n    });\n  };\n  var UaString = {\n    detectBrowser: detectBrowser,\n    detectOs: detectOs\n  };\n\n  var checkRange = function (str, substr, start) {\n    if (substr === '')\n      return true;\n    if (str.length < substr.length)\n      return false;\n    var x = str.substr(start, start + substr.length);\n    return x === substr;\n  };\n\n\n\n\n\n  var contains$1 = function (str, substr) {\n    return str.indexOf(substr) !== -1;\n  };\n\n\n  var endsWith = function (str, suffix) {\n    return checkRange(str, suffix, str.length - suffix.length);\n  };\n  var trim = function (str) {\n    return str.replace(/^\\s+|\\s+$/g, '');\n  };\n\n  var normalVersionRegex = /.*?version\\/\\ ?([0-9]+)\\.([0-9]+).*/;\n  var checkContains = function (target) {\n    return function (uastring) {\n      return contains$1(uastring, target);\n    };\n  };\n  var browsers = [\n    {\n      name: 'Edge',\n      versionRegexes: [/.*?edge\\/ ?([0-9]+)\\.([0-9]+)$/],\n      search: function (uastring) {\n        var monstrosity = contains$1(uastring, 'edge/') && contains$1(uastring, 'chrome') && contains$1(uastring, 'safari') && contains$1(uastring, 'applewebkit');\n        return monstrosity;\n      }\n    },\n    {\n      name: 'Chrome',\n      versionRegexes: [\n        /.*?chrome\\/([0-9]+)\\.([0-9]+).*/,\n        normalVersionRegex\n      ],\n      search: function (uastring) {\n        return contains$1(uastring, 'chrome') && !contains$1(uastring, 'chromeframe');\n      }\n    },\n    {\n      name: 'IE',\n      versionRegexes: [\n        /.*?msie\\ ?([0-9]+)\\.([0-9]+).*/,\n        /.*?rv:([0-9]+)\\.([0-9]+).*/\n      ],\n      search: function (uastring) {\n        return contains$1(uastring, 'msie') || contains$1(uastring, 'trident');\n      }\n    },\n    {\n      name: 'Opera',\n      versionRegexes: [\n        normalVersionRegex,\n        /.*?opera\\/([0-9]+)\\.([0-9]+).*/\n      ],\n      search: checkContains('opera')\n    },\n    {\n      name: 'Firefox',\n      versionRegexes: [/.*?firefox\\/\\ ?([0-9]+)\\.([0-9]+).*/],\n      search: checkContains('firefox')\n    },\n    {\n      name: 'Safari',\n      versionRegexes: [\n        normalVersionRegex,\n        /.*?cpu os ([0-9]+)_([0-9]+).*/\n      ],\n      search: function (uastring) {\n        return (contains$1(uastring, 'safari') || contains$1(uastring, 'mobile/')) && contains$1(uastring, 'applewebkit');\n      }\n    }\n  ];\n  var oses = [\n    {\n      name: 'Windows',\n      search: checkContains('win'),\n      versionRegexes: [/.*?windows\\ nt\\ ?([0-9]+)\\.([0-9]+).*/]\n    },\n    {\n      name: 'iOS',\n      search: function (uastring) {\n        return contains$1(uastring, 'iphone') || contains$1(uastring, 'ipad');\n      },\n      versionRegexes: [\n        /.*?version\\/\\ ?([0-9]+)\\.([0-9]+).*/,\n        /.*cpu os ([0-9]+)_([0-9]+).*/,\n        /.*cpu iphone os ([0-9]+)_([0-9]+).*/\n      ]\n    },\n    {\n      name: 'Android',\n      search: checkContains('android'),\n      versionRegexes: [/.*?android\\ ?([0-9]+)\\.([0-9]+).*/]\n    },\n    {\n      name: 'OSX',\n      search: checkContains('os x'),\n      versionRegexes: [/.*?os\\ x\\ ?([0-9]+)_([0-9]+).*/]\n    },\n    {\n      name: 'Linux',\n      search: checkContains('linux'),\n      versionRegexes: []\n    },\n    {\n      name: 'Solaris',\n      search: checkContains('sunos'),\n      versionRegexes: []\n    },\n    {\n      name: 'FreeBSD',\n      search: checkContains('freebsd'),\n      versionRegexes: []\n    }\n  ];\n  var PlatformInfo = {\n    browsers: constant(browsers),\n    oses: constant(oses)\n  };\n\n  var detect$2 = function (userAgent) {\n    var browsers = PlatformInfo.browsers();\n    var oses = PlatformInfo.oses();\n    var browser = UaString.detectBrowser(browsers, userAgent).fold(Browser.unknown, Browser.nu);\n    var os = UaString.detectOs(oses, userAgent).fold(OperatingSystem.unknown, OperatingSystem.nu);\n    var deviceType = DeviceType(os, browser, userAgent);\n    return {\n      browser: browser,\n      os: os,\n      deviceType: deviceType\n    };\n  };\n  var PlatformDetection = { detect: detect$2 };\n\n  var detect$3 = cached(function () {\n    var userAgent = navigator.userAgent;\n    return PlatformDetection.detect(userAgent);\n  });\n  var $_4aebialqjnlpb2vq = { detect: detect$3 };\n\n  var eq = function (e1, e2) {\n    return e1.dom() === e2.dom();\n  };\n  var isEqualNode = function (e1, e2) {\n    return e1.dom().isEqualNode(e2.dom());\n  };\n  var member = function (element, elements) {\n    return exists(elements, curry(eq, element));\n  };\n  var regularContains = function (e1, e2) {\n    var d1 = e1.dom(), d2 = e2.dom();\n    return d1 === d2 ? false : d1.contains(d2);\n  };\n  var ieContains = function (e1, e2) {\n    return $_5xoldwlmjnlpb2vk.documentPositionContainedBy(e1.dom(), e2.dom());\n  };\n  var browser = $_4aebialqjnlpb2vq.detect().browser;\n  var contains$2 = browser.isIE() ? ieContains : regularContains;\n  var $_3k22killjnlpb2vb = {\n    eq: eq,\n    isEqualNode: isEqualNode,\n    member: member,\n    contains: contains$2,\n    is: $_1mxomdlfjnlpb2tz.is\n  };\n\n  var owner = function (element) {\n    return Element$$1.fromDom(element.dom().ownerDocument);\n  };\n  var documentElement = function (element) {\n    return Element$$1.fromDom(element.dom().ownerDocument.documentElement);\n  };\n  var defaultView = function (element) {\n    var el = element.dom();\n    var defaultView = el.ownerDocument.defaultView;\n    return Element$$1.fromDom(defaultView);\n  };\n  var parent = function (element) {\n    var dom = element.dom();\n    return Option.from(dom.parentNode).map(Element$$1.fromDom);\n  };\n  var findIndex$1 = function (element) {\n    return parent(element).bind(function (p) {\n      var kin = children(p);\n      return findIndex(kin, function (elem) {\n        return $_3k22killjnlpb2vb.eq(element, elem);\n      });\n    });\n  };\n  var parents = function (element, isRoot) {\n    var stop = isFunction(isRoot) ? isRoot : constant(false);\n    var dom = element.dom();\n    var ret = [];\n    while (dom.parentNode !== null && dom.parentNode !== undefined) {\n      var rawParent = dom.parentNode;\n      var parent = Element$$1.fromDom(rawParent);\n      ret.push(parent);\n      if (stop(parent) === true)\n        break;\n      else\n        dom = rawParent;\n    }\n    return ret;\n  };\n  var siblings = function (element) {\n    var filterSelf = function (elements) {\n      return filter(elements, function (x) {\n        return !$_3k22killjnlpb2vb.eq(element, x);\n      });\n    };\n    return parent(element).map(children).map(filterSelf).getOr([]);\n  };\n  var offsetParent = function (element) {\n    var dom = element.dom();\n    return Option.from(dom.offsetParent).map(Element$$1.fromDom);\n  };\n  var prevSibling = function (element) {\n    var dom = element.dom();\n    return Option.from(dom.previousSibling).map(Element$$1.fromDom);\n  };\n  var nextSibling = function (element) {\n    var dom = element.dom();\n    return Option.from(dom.nextSibling).map(Element$$1.fromDom);\n  };\n  var prevSiblings = function (element) {\n    return reverse($_84ox1wlkjnlpb2v9.toArray(element, prevSibling));\n  };\n  var nextSiblings = function (element) {\n    return $_84ox1wlkjnlpb2v9.toArray(element, nextSibling);\n  };\n  var children = function (element) {\n    var dom = element.dom();\n    return map(dom.childNodes, Element$$1.fromDom);\n  };\n  var child = function (element, index) {\n    var children = element.dom().childNodes;\n    return Option.from(children[index]).map(Element$$1.fromDom);\n  };\n  var firstChild = function (element) {\n    return child(element, 0);\n  };\n  var lastChild = function (element) {\n    return child(element, element.dom().childNodes.length - 1);\n  };\n  var childNodesCount = function (element) {\n    return element.dom().childNodes.length;\n  };\n  var hasChildNodes = function (element) {\n    return element.dom().hasChildNodes();\n  };\n  var spot = Immutable('element', 'offset');\n  var leaf = function (element, offset) {\n    var cs = children(element);\n    return cs.length > 0 && offset < cs.length ? spot(cs[offset], 0) : spot(element, offset);\n  };\n  var $_2pl1nljjnlpb2ur = {\n    owner: owner,\n    defaultView: defaultView,\n    documentElement: documentElement,\n    parent: parent,\n    findIndex: findIndex$1,\n    parents: parents,\n    siblings: siblings,\n    prevSibling: prevSibling,\n    offsetParent: offsetParent,\n    prevSiblings: prevSiblings,\n    nextSibling: nextSibling,\n    nextSiblings: nextSiblings,\n    children: children,\n    child: child,\n    firstChild: firstChild,\n    lastChild: lastChild,\n    childNodesCount: childNodesCount,\n    hasChildNodes: hasChildNodes,\n    leaf: leaf\n  };\n\n  var firstLayer = function (scope, selector) {\n    return filterFirstLayer(scope, selector, constant(true));\n  };\n  var filterFirstLayer = function (scope, selector, predicate) {\n    return bind($_2pl1nljjnlpb2ur.children(scope), function (x) {\n      return $_1mxomdlfjnlpb2tz.is(x, selector) ? predicate(x) ? [x] : [] : filterFirstLayer(x, selector, predicate);\n    });\n  };\n  var $_1s67solejnlpb2tp = {\n    firstLayer: firstLayer,\n    filterFirstLayer: filterFirstLayer\n  };\n\n  var name = function (element) {\n    var r = element.dom().nodeName;\n    return r.toLowerCase();\n  };\n  var type = function (element) {\n    return element.dom().nodeType;\n  };\n  var value = function (element) {\n    return element.dom().nodeValue;\n  };\n  var isType$1 = function (t) {\n    return function (element) {\n      return type(element) === t;\n    };\n  };\n  var isComment = function (element) {\n    return type(element) === $_1skeq9lijnlpb2un.COMMENT || name(element) === '#comment';\n  };\n  var isElement = isType$1($_1skeq9lijnlpb2un.ELEMENT);\n  var isText = isType$1($_1skeq9lijnlpb2un.TEXT);\n  var isDocument = isType$1($_1skeq9lijnlpb2un.DOCUMENT);\n  var $_erx5tem3jnlpb2x3 = {\n    name: name,\n    type: type,\n    value: value,\n    isElement: isElement,\n    isText: isText,\n    isDocument: isDocument,\n    isComment: isComment\n  };\n\n  var rawSet = function (dom, key, value) {\n    if (isString(value) || isBoolean(value) || isNumber(value)) {\n      dom.setAttribute(key, value + '');\n    } else {\n      console.error('Invalid call to Attr.set. Key ', key, ':: Value ', value, ':: Element ', dom);\n      throw new Error('Attribute value was not simple');\n    }\n  };\n  var set = function (element, key, value) {\n    rawSet(element.dom(), key, value);\n  };\n  var setAll = function (element, attrs) {\n    var dom = element.dom();\n    each$1(attrs, function (v, k) {\n      rawSet(dom, k, v);\n    });\n  };\n  var get$1 = function (element, key) {\n    var v = element.dom().getAttribute(key);\n    return v === null ? undefined : v;\n  };\n  var has$1 = function (element, key) {\n    var dom = element.dom();\n    return dom && dom.hasAttribute ? dom.hasAttribute(key) : false;\n  };\n  var remove = function (element, key) {\n    element.dom().removeAttribute(key);\n  };\n  var hasNone = function (element) {\n    var attrs = element.dom().attributes;\n    return attrs === undefined || attrs === null || attrs.length === 0;\n  };\n  var clone = function (element) {\n    return foldl(element.dom().attributes, function (acc, attr) {\n      acc[attr.name] = attr.value;\n      return acc;\n    }, {});\n  };\n  var transferOne = function (source, destination, attr) {\n    if (has$1(source, attr) && !has$1(destination, attr))\n      set(destination, attr, get$1(source, attr));\n  };\n  var transfer = function (source, destination, attrs) {\n    if (!$_erx5tem3jnlpb2x3.isElement(source) || !$_erx5tem3jnlpb2x3.isElement(destination))\n      return;\n    each(attrs, function (attr) {\n      transferOne(source, destination, attr);\n    });\n  };\n  var $_9u6utvm2jnlpb2wv = {\n    clone: clone,\n    set: set,\n    setAll: setAll,\n    get: get$1,\n    has: has$1,\n    remove: remove,\n    hasNone: hasNone,\n    transfer: transfer\n  };\n\n  var inBody = function (element) {\n    var dom = $_erx5tem3jnlpb2x3.isText(element) ? element.dom().parentNode : element.dom();\n    return dom !== undefined && dom !== null && dom.ownerDocument.body.contains(dom);\n  };\n  var body = cached(function () {\n    return getBody(Element$$1.fromDom(document));\n  });\n  var getBody = function (doc) {\n    var body = doc.dom().body;\n    if (body === null || body === undefined)\n      throw 'Body is not available yet';\n    return Element$$1.fromDom(body);\n  };\n  var $_1ie4uvm6jnlpb2xf = {\n    body: body,\n    getBody: getBody,\n    inBody: inBody\n  };\n\n  var all$1 = function (predicate) {\n    return descendants($_1ie4uvm6jnlpb2xf.body(), predicate);\n  };\n  var ancestors = function (scope, predicate, isRoot) {\n    return filter($_2pl1nljjnlpb2ur.parents(scope, isRoot), predicate);\n  };\n  var siblings$1 = function (scope, predicate) {\n    return filter($_2pl1nljjnlpb2ur.siblings(scope), predicate);\n  };\n  var children$1 = function (scope, predicate) {\n    return filter($_2pl1nljjnlpb2ur.children(scope), predicate);\n  };\n  var descendants = function (scope, predicate) {\n    var result = [];\n    each($_2pl1nljjnlpb2ur.children(scope), function (x) {\n      if (predicate(x)) {\n        result = result.concat([x]);\n      }\n      result = result.concat(descendants(x, predicate));\n    });\n    return result;\n  };\n  var $_cyfw12m5jnlpb2x7 = {\n    all: all$1,\n    ancestors: ancestors,\n    siblings: siblings$1,\n    children: children$1,\n    descendants: descendants\n  };\n\n  var all$2 = function (selector) {\n    return $_1mxomdlfjnlpb2tz.all(selector);\n  };\n  var ancestors$1 = function (scope, selector, isRoot) {\n    return $_cyfw12m5jnlpb2x7.ancestors(scope, function (e) {\n      return $_1mxomdlfjnlpb2tz.is(e, selector);\n    }, isRoot);\n  };\n  var siblings$2 = function (scope, selector) {\n    return $_cyfw12m5jnlpb2x7.siblings(scope, function (e) {\n      return $_1mxomdlfjnlpb2tz.is(e, selector);\n    });\n  };\n  var children$2 = function (scope, selector) {\n    return $_cyfw12m5jnlpb2x7.children(scope, function (e) {\n      return $_1mxomdlfjnlpb2tz.is(e, selector);\n    });\n  };\n  var descendants$1 = function (scope, selector) {\n    return $_1mxomdlfjnlpb2tz.all(selector, scope);\n  };\n  var $_97aehqm4jnlpb2x5 = {\n    all: all$2,\n    ancestors: ancestors$1,\n    siblings: siblings$2,\n    children: children$2,\n    descendants: descendants$1\n  };\n\n  function ClosestOrAncestor (is, ancestor, scope, a, isRoot) {\n    return is(scope, a) ? Option.some(scope) : isFunction(isRoot) && isRoot(scope) ? Option.none() : ancestor(scope, a, isRoot);\n  }\n\n  var first$1 = function (predicate) {\n    return descendant($_1ie4uvm6jnlpb2xf.body(), predicate);\n  };\n  var ancestor = function (scope, predicate, isRoot) {\n    var element = scope.dom();\n    var stop = isFunction(isRoot) ? isRoot : constant(false);\n    while (element.parentNode) {\n      element = element.parentNode;\n      var el = Element$$1.fromDom(element);\n      if (predicate(el))\n        return Option.some(el);\n      else if (stop(el))\n        break;\n    }\n    return Option.none();\n  };\n  var closest = function (scope, predicate, isRoot) {\n    var is = function (scope) {\n      return predicate(scope);\n    };\n    return ClosestOrAncestor(is, ancestor, scope, predicate, isRoot);\n  };\n  var sibling = function (scope, predicate) {\n    var element = scope.dom();\n    if (!element.parentNode)\n      return Option.none();\n    return child$1(Element$$1.fromDom(element.parentNode), function (x) {\n      return !$_3k22killjnlpb2vb.eq(scope, x) && predicate(x);\n    });\n  };\n  var child$1 = function (scope, predicate) {\n    var result = find(scope.dom().childNodes, compose(predicate, Element$$1.fromDom));\n    return result.map(Element$$1.fromDom);\n  };\n  var descendant = function (scope, predicate) {\n    var descend = function (node) {\n      for (var i = 0; i < node.childNodes.length; i++) {\n        if (predicate(Element$$1.fromDom(node.childNodes[i])))\n          return Option.some(Element$$1.fromDom(node.childNodes[i]));\n        var res = descend(node.childNodes[i]);\n        if (res.isSome())\n          return res;\n      }\n      return Option.none();\n    };\n    return descend(scope.dom());\n  };\n  var $_1nfdlmm8jnlpb2xl = {\n    first: first$1,\n    ancestor: ancestor,\n    closest: closest,\n    sibling: sibling,\n    child: child$1,\n    descendant: descendant\n  };\n\n  var first$2 = function (selector) {\n    return $_1mxomdlfjnlpb2tz.one(selector);\n  };\n  var ancestor$1 = function (scope, selector, isRoot) {\n    return $_1nfdlmm8jnlpb2xl.ancestor(scope, function (e) {\n      return $_1mxomdlfjnlpb2tz.is(e, selector);\n    }, isRoot);\n  };\n  var sibling$1 = function (scope, selector) {\n    return $_1nfdlmm8jnlpb2xl.sibling(scope, function (e) {\n      return $_1mxomdlfjnlpb2tz.is(e, selector);\n    });\n  };\n  var child$2 = function (scope, selector) {\n    return $_1nfdlmm8jnlpb2xl.child(scope, function (e) {\n      return $_1mxomdlfjnlpb2tz.is(e, selector);\n    });\n  };\n  var descendant$1 = function (scope, selector) {\n    return $_1mxomdlfjnlpb2tz.one(selector, scope);\n  };\n  var closest$1 = function (scope, selector, isRoot) {\n    return ClosestOrAncestor($_1mxomdlfjnlpb2tz.is, ancestor$1, scope, selector, isRoot);\n  };\n  var $_gdszrpm7jnlpb2xk = {\n    first: first$2,\n    ancestor: ancestor$1,\n    sibling: sibling$1,\n    child: child$2,\n    descendant: descendant$1,\n    closest: closest$1\n  };\n\n  var lookup = function (tags, element, _isRoot) {\n    var isRoot = _isRoot !== undefined ? _isRoot : constant(false);\n    if (isRoot(element))\n      return Option.none();\n    if (contains(tags, $_erx5tem3jnlpb2x3.name(element)))\n      return Option.some(element);\n    var isRootOrUpperTable = function (element) {\n      return $_1mxomdlfjnlpb2tz.is(element, 'table') || isRoot(element);\n    };\n    return $_gdszrpm7jnlpb2xk.ancestor(element, tags.join(','), isRootOrUpperTable);\n  };\n  var cell = function (element, isRoot) {\n    return lookup([\n      'td',\n      'th'\n    ], element, isRoot);\n  };\n  var cells = function (ancestor) {\n    return $_1s67solejnlpb2tp.firstLayer(ancestor, 'th,td');\n  };\n  var notCell = function (element, isRoot) {\n    return lookup([\n      'caption',\n      'tr',\n      'tbody',\n      'tfoot',\n      'thead'\n    ], element, isRoot);\n  };\n  var neighbours = function (selector, element) {\n    return $_2pl1nljjnlpb2ur.parent(element).map(function (parent) {\n      return $_97aehqm4jnlpb2x5.children(parent, selector);\n    });\n  };\n  var neighbourCells = curry(neighbours, 'th,td');\n  var neighbourRows = curry(neighbours, 'tr');\n  var firstCell = function (ancestor) {\n    return $_gdszrpm7jnlpb2xk.descendant(ancestor, 'th,td');\n  };\n  var table = function (element, isRoot) {\n    return $_gdszrpm7jnlpb2xk.closest(element, 'table', isRoot);\n  };\n  var row = function (element, isRoot) {\n    return lookup(['tr'], element, isRoot);\n  };\n  var rows = function (ancestor) {\n    return $_1s67solejnlpb2tp.firstLayer(ancestor, 'tr');\n  };\n  var attr = function (element, property) {\n    return parseInt($_9u6utvm2jnlpb2wv.get(element, property), 10);\n  };\n  var grid$1 = function (element, rowProp, colProp) {\n    var rows = attr(element, rowProp);\n    var cols = attr(element, colProp);\n    return $_csuubelcjnlpb2sv.grid(rows, cols);\n  };\n  var $_em4z2mldjnlpb2sz = {\n    cell: cell,\n    firstCell: firstCell,\n    cells: cells,\n    neighbourCells: neighbourCells,\n    table: table,\n    row: row,\n    rows: rows,\n    notCell: notCell,\n    neighbourRows: neighbourRows,\n    attr: attr,\n    grid: grid$1\n  };\n\n  var fromTable = function (table) {\n    var rows = $_em4z2mldjnlpb2sz.rows(table);\n    return map(rows, function (row) {\n      var element = row;\n      var parent = $_2pl1nljjnlpb2ur.parent(element);\n      var parentSection = parent.map(function (parent) {\n        var parentName = $_erx5tem3jnlpb2x3.name(parent);\n        return parentName === 'tfoot' || parentName === 'thead' || parentName === 'tbody' ? parentName : 'tbody';\n      }).getOr('tbody');\n      var cells = map($_em4z2mldjnlpb2sz.cells(row), function (cell) {\n        var rowspan = $_9u6utvm2jnlpb2wv.has(cell, 'rowspan') ? parseInt($_9u6utvm2jnlpb2wv.get(cell, 'rowspan'), 10) : 1;\n        var colspan = $_9u6utvm2jnlpb2wv.has(cell, 'colspan') ? parseInt($_9u6utvm2jnlpb2wv.get(cell, 'colspan'), 10) : 1;\n        return $_csuubelcjnlpb2sv.detail(cell, rowspan, colspan);\n      });\n      return $_csuubelcjnlpb2sv.rowdata(element, cells, parentSection);\n    });\n  };\n  var fromPastedRows = function (rows, example) {\n    return map(rows, function (row) {\n      var cells = map($_em4z2mldjnlpb2sz.cells(row), function (cell) {\n        var rowspan = $_9u6utvm2jnlpb2wv.has(cell, 'rowspan') ? parseInt($_9u6utvm2jnlpb2wv.get(cell, 'rowspan'), 10) : 1;\n        var colspan = $_9u6utvm2jnlpb2wv.has(cell, 'colspan') ? parseInt($_9u6utvm2jnlpb2wv.get(cell, 'colspan'), 10) : 1;\n        return $_csuubelcjnlpb2sv.detail(cell, rowspan, colspan);\n      });\n      return $_csuubelcjnlpb2sv.rowdata(row, cells, example.section());\n    });\n  };\n  var $_g8jea2lbjnlpb2sm = {\n    fromTable: fromTable,\n    fromPastedRows: fromPastedRows\n  };\n\n  var key = function (row, column) {\n    return row + ',' + column;\n  };\n  var getAt = function (warehouse, row, column) {\n    var raw = warehouse.access()[key(row, column)];\n    return raw !== undefined ? Option.some(raw) : Option.none();\n  };\n  var findItem = function (warehouse, item, comparator) {\n    var filtered = filterItems(warehouse, function (detail) {\n      return comparator(item, detail.element());\n    });\n    return filtered.length > 0 ? Option.some(filtered[0]) : Option.none();\n  };\n  var filterItems = function (warehouse, predicate) {\n    var all = bind(warehouse.all(), function (r) {\n      return r.cells();\n    });\n    return filter(all, predicate);\n  };\n  var generate = function (list) {\n    var access = {};\n    var cells = [];\n    var maxRows = list.length;\n    var maxColumns = 0;\n    each(list, function (details, r) {\n      var currentRow = [];\n      each(details.cells(), function (detail, c) {\n        var start = 0;\n        while (access[key(r, start)] !== undefined) {\n          start++;\n        }\n        var current = $_csuubelcjnlpb2sv.extended(detail.element(), detail.rowspan(), detail.colspan(), r, start);\n        for (var i = 0; i < detail.colspan(); i++) {\n          for (var j = 0; j < detail.rowspan(); j++) {\n            var cr = r + j;\n            var cc = start + i;\n            var newpos = key(cr, cc);\n            access[newpos] = current;\n            maxColumns = Math.max(maxColumns, cc + 1);\n          }\n        }\n        currentRow.push(current);\n      });\n      cells.push($_csuubelcjnlpb2sv.rowdata(details.element(), currentRow, details.section()));\n    });\n    var grid = $_csuubelcjnlpb2sv.grid(maxRows, maxColumns);\n    return {\n      grid: constant(grid),\n      access: constant(access),\n      all: constant(cells)\n    };\n  };\n  var justCells = function (warehouse) {\n    var rows = map(warehouse.all(), function (w) {\n      return w.cells();\n    });\n    return flatten(rows);\n  };\n  var $_ein1yumajnlpb2y1 = {\n    generate: generate,\n    getAt: getAt,\n    findItem: findItem,\n    filterItems: filterItems,\n    justCells: justCells\n  };\n\n  var isSupported = function (dom) {\n    return dom.style !== undefined;\n  };\n  var $_4sfuxamcjnlpb2yn = { isSupported: isSupported };\n\n  var internalSet = function (dom, property, value) {\n    if (!isString(value)) {\n      console.error('Invalid call to CSS.set. Property ', property, ':: Value ', value, ':: Element ', dom);\n      throw new Error('CSS value must be a string: ' + value);\n    }\n    if ($_4sfuxamcjnlpb2yn.isSupported(dom))\n      dom.style.setProperty(property, value);\n  };\n  var internalRemove = function (dom, property) {\n    if ($_4sfuxamcjnlpb2yn.isSupported(dom))\n      dom.style.removeProperty(property);\n  };\n  var set$1 = function (element, property, value) {\n    var dom = element.dom();\n    internalSet(dom, property, value);\n  };\n  var setAll$1 = function (element, css) {\n    var dom = element.dom();\n    each$1(css, function (v, k) {\n      internalSet(dom, k, v);\n    });\n  };\n  var setOptions = function (element, css) {\n    var dom = element.dom();\n    each$1(css, function (v, k) {\n      v.fold(function () {\n        internalRemove(dom, k);\n      }, function (value) {\n        internalSet(dom, k, value);\n      });\n    });\n  };\n  var get$2 = function (element, property) {\n    var dom = element.dom();\n    var styles = window.getComputedStyle(dom);\n    var r = styles.getPropertyValue(property);\n    var v = r === '' && !$_1ie4uvm6jnlpb2xf.inBody(element) ? getUnsafeProperty(dom, property) : r;\n    return v === null ? undefined : v;\n  };\n  var getUnsafeProperty = function (dom, property) {\n    return $_4sfuxamcjnlpb2yn.isSupported(dom) ? dom.style.getPropertyValue(property) : '';\n  };\n  var getRaw = function (element, property) {\n    var dom = element.dom();\n    var raw = getUnsafeProperty(dom, property);\n    return Option.from(raw).filter(function (r) {\n      return r.length > 0;\n    });\n  };\n  var getAllRaw = function (element) {\n    var css = {};\n    var dom = element.dom();\n    if ($_4sfuxamcjnlpb2yn.isSupported(dom)) {\n      for (var i = 0; i < dom.style.length; i++) {\n        var ruleName = dom.style.item(i);\n        css[ruleName] = dom.style[ruleName];\n      }\n    }\n    return css;\n  };\n  var isValidValue = function (tag, property, value) {\n    var element = Element$$1.fromTag(tag);\n    set$1(element, property, value);\n    var style = getRaw(element, property);\n    return style.isSome();\n  };\n  var remove$1 = function (element, property) {\n    var dom = element.dom();\n    internalRemove(dom, property);\n    if ($_9u6utvm2jnlpb2wv.has(element, 'style') && trim($_9u6utvm2jnlpb2wv.get(element, 'style')) === '') {\n      $_9u6utvm2jnlpb2wv.remove(element, 'style');\n    }\n  };\n  var preserve = function (element, f) {\n    var oldStyles = $_9u6utvm2jnlpb2wv.get(element, 'style');\n    var result = f(element);\n    var restore = oldStyles === undefined ? $_9u6utvm2jnlpb2wv.remove : $_9u6utvm2jnlpb2wv.set;\n    restore(element, 'style', oldStyles);\n    return result;\n  };\n  var copy = function (source, target) {\n    var sourceDom = source.dom();\n    var targetDom = target.dom();\n    if ($_4sfuxamcjnlpb2yn.isSupported(sourceDom) && $_4sfuxamcjnlpb2yn.isSupported(targetDom)) {\n      targetDom.style.cssText = sourceDom.style.cssText;\n    }\n  };\n  var reflow = function (e) {\n    return e.dom().offsetWidth;\n  };\n  var transferOne$1 = function (source, destination, style) {\n    getRaw(source, style).each(function (value) {\n      if (getRaw(destination, style).isNone())\n        set$1(destination, style, value);\n    });\n  };\n  var transfer$1 = function (source, destination, styles) {\n    if (!$_erx5tem3jnlpb2x3.isElement(source) || !$_erx5tem3jnlpb2x3.isElement(destination))\n      return;\n    each(styles, function (style) {\n      transferOne$1(source, destination, style);\n    });\n  };\n  var $_g8mvdembjnlpb2ya = {\n    copy: copy,\n    set: set$1,\n    preserve: preserve,\n    setAll: setAll$1,\n    setOptions: setOptions,\n    remove: remove$1,\n    get: get$2,\n    getRaw: getRaw,\n    getAllRaw: getAllRaw,\n    isValidValue: isValidValue,\n    reflow: reflow,\n    transfer: transfer$1\n  };\n\n  var before = function (marker, element) {\n    var parent = $_2pl1nljjnlpb2ur.parent(marker);\n    parent.each(function (v) {\n      v.dom().insertBefore(element.dom(), marker.dom());\n    });\n  };\n  var after = function (marker, element) {\n    var sibling = $_2pl1nljjnlpb2ur.nextSibling(marker);\n    sibling.fold(function () {\n      var parent = $_2pl1nljjnlpb2ur.parent(marker);\n      parent.each(function (v) {\n        append(v, element);\n      });\n    }, function (v) {\n      before(v, element);\n    });\n  };\n  var prepend = function (parent, element) {\n    var firstChild = $_2pl1nljjnlpb2ur.firstChild(parent);\n    firstChild.fold(function () {\n      append(parent, element);\n    }, function (v) {\n      parent.dom().insertBefore(element.dom(), v.dom());\n    });\n  };\n  var append = function (parent, element) {\n    parent.dom().appendChild(element.dom());\n  };\n  var appendAt = function (parent, element, index) {\n    $_2pl1nljjnlpb2ur.child(parent, index).fold(function () {\n      append(parent, element);\n    }, function (v) {\n      before(v, element);\n    });\n  };\n  var wrap = function (element, wrapper) {\n    before(element, wrapper);\n    append(wrapper, element);\n  };\n  var $_5hzj77mdjnlpb2yp = {\n    before: before,\n    after: after,\n    prepend: prepend,\n    append: append,\n    appendAt: appendAt,\n    wrap: wrap\n  };\n\n  var before$1 = function (marker, elements) {\n    each(elements, function (x) {\n      $_5hzj77mdjnlpb2yp.before(marker, x);\n    });\n  };\n  var after$1 = function (marker, elements) {\n    each(elements, function (x, i) {\n      var e = i === 0 ? marker : elements[i - 1];\n      $_5hzj77mdjnlpb2yp.after(e, x);\n    });\n  };\n  var prepend$1 = function (parent, elements) {\n    each(elements.slice().reverse(), function (x) {\n      $_5hzj77mdjnlpb2yp.prepend(parent, x);\n    });\n  };\n  var append$1 = function (parent, elements) {\n    each(elements, function (x) {\n      $_5hzj77mdjnlpb2yp.append(parent, x);\n    });\n  };\n  var $_a9wtnkmfjnlpb2yu = {\n    before: before$1,\n    after: after$1,\n    prepend: prepend$1,\n    append: append$1\n  };\n\n  var empty = function (element) {\n    element.dom().textContent = '';\n    each($_2pl1nljjnlpb2ur.children(element), function (rogue) {\n      remove$2(rogue);\n    });\n  };\n  var remove$2 = function (element) {\n    var dom = element.dom();\n    if (dom.parentNode !== null)\n      dom.parentNode.removeChild(dom);\n  };\n  var unwrap = function (wrapper) {\n    var children = $_2pl1nljjnlpb2ur.children(wrapper);\n    if (children.length > 0)\n      $_a9wtnkmfjnlpb2yu.before(wrapper, children);\n    remove$2(wrapper);\n  };\n  var $_cybn8qmejnlpb2yr = {\n    empty: empty,\n    remove: remove$2,\n    unwrap: unwrap\n  };\n\n  var stats = Immutable('minRow', 'minCol', 'maxRow', 'maxCol');\n  var findSelectedStats = function (house, isSelected) {\n    var totalColumns = house.grid().columns();\n    var totalRows = house.grid().rows();\n    var minRow = totalRows;\n    var minCol = totalColumns;\n    var maxRow = 0;\n    var maxCol = 0;\n    each$1(house.access(), function (detail) {\n      if (isSelected(detail)) {\n        var startRow = detail.row();\n        var endRow = startRow + detail.rowspan() - 1;\n        var startCol = detail.column();\n        var endCol = startCol + detail.colspan() - 1;\n        if (startRow < minRow)\n          minRow = startRow;\n        else if (endRow > maxRow)\n          maxRow = endRow;\n        if (startCol < minCol)\n          minCol = startCol;\n        else if (endCol > maxCol)\n          maxCol = endCol;\n      }\n    });\n    return stats(minRow, minCol, maxRow, maxCol);\n  };\n  var makeCell = function (list, seenSelected, rowIndex) {\n    var row = list[rowIndex].element();\n    var td = Element$$1.fromTag('td');\n    $_5hzj77mdjnlpb2yp.append(td, Element$$1.fromTag('br'));\n    var f = seenSelected ? $_5hzj77mdjnlpb2yp.append : $_5hzj77mdjnlpb2yp.prepend;\n    f(row, td);\n  };\n  var fillInGaps = function (list, house, stats, isSelected) {\n    var totalColumns = house.grid().columns();\n    var totalRows = house.grid().rows();\n    for (var i = 0; i < totalRows; i++) {\n      var seenSelected = false;\n      for (var j = 0; j < totalColumns; j++) {\n        if (!(i < stats.minRow() || i > stats.maxRow() || j < stats.minCol() || j > stats.maxCol())) {\n          var needCell = $_ein1yumajnlpb2y1.getAt(house, i, j).filter(isSelected).isNone();\n          if (needCell)\n            makeCell(list, seenSelected, i);\n          else\n            seenSelected = true;\n        }\n      }\n    }\n  };\n  var clean = function (table, stats) {\n    var emptyRows = filter($_1s67solejnlpb2tp.firstLayer(table, 'tr'), function (row) {\n      return row.dom().childElementCount === 0;\n    });\n    each(emptyRows, $_cybn8qmejnlpb2yr.remove);\n    if (stats.minCol() === stats.maxCol() || stats.minRow() === stats.maxRow()) {\n      each($_1s67solejnlpb2tp.firstLayer(table, 'th,td'), function (cell) {\n        $_9u6utvm2jnlpb2wv.remove(cell, 'rowspan');\n        $_9u6utvm2jnlpb2wv.remove(cell, 'colspan');\n      });\n    }\n    $_9u6utvm2jnlpb2wv.remove(table, 'width');\n    $_9u6utvm2jnlpb2wv.remove(table, 'height');\n    $_g8mvdembjnlpb2ya.remove(table, 'width');\n    $_g8mvdembjnlpb2ya.remove(table, 'height');\n  };\n  var extract = function (table, selectedSelector) {\n    var isSelected = function (detail) {\n      return $_1mxomdlfjnlpb2tz.is(detail.element(), selectedSelector);\n    };\n    var list = $_g8jea2lbjnlpb2sm.fromTable(table);\n    var house = $_ein1yumajnlpb2y1.generate(list);\n    var stats = findSelectedStats(house, isSelected);\n    var selector = 'th:not(' + selectedSelector + ')' + ',td:not(' + selectedSelector + ')';\n    var unselectedCells = $_1s67solejnlpb2tp.filterFirstLayer(table, 'th,td', function (cell) {\n      return $_1mxomdlfjnlpb2tz.is(cell, selector);\n    });\n    each(unselectedCells, $_cybn8qmejnlpb2yr.remove);\n    fillInGaps(list, house, stats, isSelected);\n    clean(table, stats);\n    return table;\n  };\n  var $_df0ycyl5jnlpb2rr = { extract: extract };\n\n  var clone$1 = function (original, deep) {\n    return Element$$1.fromDom(original.dom().cloneNode(deep));\n  };\n  var shallow = function (original) {\n    return clone$1(original, false);\n  };\n  var deep = function (original) {\n    return clone$1(original, true);\n  };\n  var shallowAs = function (original, tag) {\n    var nu = Element$$1.fromTag(tag);\n    var attributes = $_9u6utvm2jnlpb2wv.clone(original);\n    $_9u6utvm2jnlpb2wv.setAll(nu, attributes);\n    return nu;\n  };\n  var copy$1 = function (original, tag) {\n    var nu = shallowAs(original, tag);\n    var cloneChildren = $_2pl1nljjnlpb2ur.children(deep(original));\n    $_a9wtnkmfjnlpb2yu.append(nu, cloneChildren);\n    return nu;\n  };\n  var mutate = function (original, tag) {\n    var nu = shallowAs(original, tag);\n    $_5hzj77mdjnlpb2yp.before(original, nu);\n    var children = $_2pl1nljjnlpb2ur.children(original);\n    $_a9wtnkmfjnlpb2yu.append(nu, children);\n    $_cybn8qmejnlpb2yr.remove(original);\n    return nu;\n  };\n  var $_7sdoc4mhjnlpb2zt = {\n    shallow: shallow,\n    shallowAs: shallowAs,\n    deep: deep,\n    copy: copy$1,\n    mutate: mutate\n  };\n\n  function NodeValue (is, name) {\n    var get = function (element) {\n      if (!is(element))\n        throw new Error('Can only get ' + name + ' value of a ' + name + ' node');\n      return getOption(element).getOr('');\n    };\n    var getOptionIE10 = function (element) {\n      try {\n        return getOptionSafe(element);\n      } catch (e) {\n        return Option.none();\n      }\n    };\n    var getOptionSafe = function (element) {\n      return is(element) ? Option.from(element.dom().nodeValue) : Option.none();\n    };\n    var browser = $_4aebialqjnlpb2vq.detect().browser;\n    var getOption = browser.isIE() && browser.version.major === 10 ? getOptionIE10 : getOptionSafe;\n    var set = function (element, value) {\n      if (!is(element))\n        throw new Error('Can only set raw ' + name + ' value of a ' + name + ' node');\n      element.dom().nodeValue = value;\n    };\n    return {\n      get: get,\n      getOption: getOption,\n      set: set\n    };\n  }\n\n  var api = NodeValue($_erx5tem3jnlpb2x3.isText, 'text');\n  var get$3 = function (element) {\n    return api.get(element);\n  };\n  var getOption = function (element) {\n    return api.getOption(element);\n  };\n  var set$2 = function (element, value) {\n    api.set(element, value);\n  };\n  var $_3lolvomkjnlpb304 = {\n    get: get$3,\n    getOption: getOption,\n    set: set$2\n  };\n\n  var getEnd = function (element) {\n    return $_erx5tem3jnlpb2x3.name(element) === 'img' ? 1 : $_3lolvomkjnlpb304.getOption(element).fold(function () {\n      return $_2pl1nljjnlpb2ur.children(element).length;\n    }, function (v) {\n      return v.length;\n    });\n  };\n  var isEnd = function (element, offset) {\n    return getEnd(element) === offset;\n  };\n  var isStart = function (element, offset) {\n    return offset === 0;\n  };\n  var NBSP = '\\xA0';\n  var isTextNodeWithCursorPosition = function (el) {\n    return $_3lolvomkjnlpb304.getOption(el).filter(function (text) {\n      return text.trim().length !== 0 || text.indexOf(NBSP) > -1;\n    }).isSome();\n  };\n  var elementsWithCursorPosition = [\n    'img',\n    'br'\n  ];\n  var isCursorPosition = function (elem) {\n    var hasCursorPosition = isTextNodeWithCursorPosition(elem);\n    return hasCursorPosition || contains(elementsWithCursorPosition, $_erx5tem3jnlpb2x3.name(elem));\n  };\n  var $_bqkyudmjjnlpb300 = {\n    getEnd: getEnd,\n    isEnd: isEnd,\n    isStart: isStart,\n    isCursorPosition: isCursorPosition\n  };\n\n  var first$3 = function (element) {\n    return $_1nfdlmm8jnlpb2xl.descendant(element, $_bqkyudmjjnlpb300.isCursorPosition);\n  };\n  var last$2 = function (element) {\n    return descendantRtl(element, $_bqkyudmjjnlpb300.isCursorPosition);\n  };\n  var descendantRtl = function (scope, predicate) {\n    var descend = function (element) {\n      var children = $_2pl1nljjnlpb2ur.children(element);\n      for (var i = children.length - 1; i >= 0; i--) {\n        var child = children[i];\n        if (predicate(child))\n          return Option.some(child);\n        var res = descend(child);\n        if (res.isSome())\n          return res;\n      }\n      return Option.none();\n    };\n    return descend(scope);\n  };\n  var $_7srx6vmijnlpb2zw = {\n    first: first$3,\n    last: last$2\n  };\n\n  var cell$1 = function () {\n    var td = Element$$1.fromTag('td');\n    $_5hzj77mdjnlpb2yp.append(td, Element$$1.fromTag('br'));\n    return td;\n  };\n  var replace = function (cell, tag, attrs) {\n    var replica = $_7sdoc4mhjnlpb2zt.copy(cell, tag);\n    each$1(attrs, function (v, k) {\n      if (v === null)\n        $_9u6utvm2jnlpb2wv.remove(replica, k);\n      else\n        $_9u6utvm2jnlpb2wv.set(replica, k, v);\n    });\n    return replica;\n  };\n  var pasteReplace = function (cellContent) {\n    return cellContent;\n  };\n  var newRow = function (doc) {\n    return function () {\n      return Element$$1.fromTag('tr', doc.dom());\n    };\n  };\n  var cloneFormats = function (oldCell, newCell, formats) {\n    var first = $_7srx6vmijnlpb2zw.first(oldCell);\n    return first.map(function (firstText) {\n      var formatSelector = formats.join(',');\n      var parents = $_97aehqm4jnlpb2x5.ancestors(firstText, formatSelector, function (element) {\n        return $_3k22killjnlpb2vb.eq(element, oldCell);\n      });\n      return foldr(parents, function (last$$1, parent) {\n        var clonedFormat = $_7sdoc4mhjnlpb2zt.shallow(parent);\n        $_9u6utvm2jnlpb2wv.remove(clonedFormat, 'contenteditable');\n        $_5hzj77mdjnlpb2yp.append(last$$1, clonedFormat);\n        return clonedFormat;\n      }, newCell);\n    }).getOr(newCell);\n  };\n  var cellOperations = function (mutate, doc, formatsToClone) {\n    var newCell = function (prev) {\n      var doc = $_2pl1nljjnlpb2ur.owner(prev.element());\n      var td = Element$$1.fromTag($_erx5tem3jnlpb2x3.name(prev.element()), doc.dom());\n      var formats = formatsToClone.getOr([\n        'strong',\n        'em',\n        'b',\n        'i',\n        'span',\n        'font',\n        'h1',\n        'h2',\n        'h3',\n        'h4',\n        'h5',\n        'h6',\n        'p',\n        'div'\n      ]);\n      var lastNode = formats.length > 0 ? cloneFormats(prev.element(), td, formats) : td;\n      $_5hzj77mdjnlpb2yp.append(lastNode, Element$$1.fromTag('br'));\n      $_g8mvdembjnlpb2ya.copy(prev.element(), td);\n      $_g8mvdembjnlpb2ya.remove(td, 'height');\n      if (prev.colspan() !== 1)\n        $_g8mvdembjnlpb2ya.remove(prev.element(), 'width');\n      mutate(prev.element(), td);\n      return td;\n    };\n    return {\n      row: newRow(doc),\n      cell: newCell,\n      replace: replace,\n      gap: cell$1\n    };\n  };\n  var paste = function (doc) {\n    return {\n      row: newRow(doc),\n      cell: cell$1,\n      replace: pasteReplace,\n      gap: cell$1\n    };\n  };\n  var $_f80632mgjnlpb2z3 = {\n    cellOperations: cellOperations,\n    paste: paste\n  };\n\n  var fromHtml$1 = function (html, scope) {\n    var doc = scope || document;\n    var div = doc.createElement('div');\n    div.innerHTML = html;\n    return $_2pl1nljjnlpb2ur.children(Element$$1.fromDom(div));\n  };\n  var fromTags = function (tags, scope) {\n    return map(tags, function (x) {\n      return Element$$1.fromTag(x, scope);\n    });\n  };\n  var fromText$1 = function (texts, scope) {\n    return map(texts, function (x) {\n      return Element$$1.fromText(x, scope);\n    });\n  };\n  var fromDom$1 = function (nodes) {\n    return map(nodes, Element$$1.fromDom);\n  };\n  var $_1ebm76mmjnlpb30a = {\n    fromHtml: fromHtml$1,\n    fromTags: fromTags,\n    fromText: fromText$1,\n    fromDom: fromDom$1\n  };\n\n  var TagBoundaries = [\n    'body',\n    'p',\n    'div',\n    'article',\n    'aside',\n    'figcaption',\n    'figure',\n    'footer',\n    'header',\n    'nav',\n    'section',\n    'ol',\n    'ul',\n    'li',\n    'table',\n    'thead',\n    'tbody',\n    'tfoot',\n    'caption',\n    'tr',\n    'td',\n    'th',\n    'h1',\n    'h2',\n    'h3',\n    'h4',\n    'h5',\n    'h6',\n    'blockquote',\n    'pre',\n    'address'\n  ];\n\n  function DomUniverse () {\n    var clone = function (element) {\n      return Element$$1.fromDom(element.dom().cloneNode(false));\n    };\n    var isBoundary = function (element) {\n      if (!$_erx5tem3jnlpb2x3.isElement(element))\n        return false;\n      if ($_erx5tem3jnlpb2x3.name(element) === 'body')\n        return true;\n      return contains(TagBoundaries, $_erx5tem3jnlpb2x3.name(element));\n    };\n    var isEmptyTag = function (element) {\n      if (!$_erx5tem3jnlpb2x3.isElement(element))\n        return false;\n      return contains([\n        'br',\n        'img',\n        'hr',\n        'input'\n      ], $_erx5tem3jnlpb2x3.name(element));\n    };\n    var comparePosition = function (element, other) {\n      return element.dom().compareDocumentPosition(other.dom());\n    };\n    var copyAttributesTo = function (source, destination) {\n      var as = $_9u6utvm2jnlpb2wv.clone(source);\n      $_9u6utvm2jnlpb2wv.setAll(destination, as);\n    };\n    return {\n      up: constant({\n        selector: $_gdszrpm7jnlpb2xk.ancestor,\n        closest: $_gdszrpm7jnlpb2xk.closest,\n        predicate: $_1nfdlmm8jnlpb2xl.ancestor,\n        all: $_2pl1nljjnlpb2ur.parents\n      }),\n      down: constant({\n        selector: $_97aehqm4jnlpb2x5.descendants,\n        predicate: $_cyfw12m5jnlpb2x7.descendants\n      }),\n      styles: constant({\n        get: $_g8mvdembjnlpb2ya.get,\n        getRaw: $_g8mvdembjnlpb2ya.getRaw,\n        set: $_g8mvdembjnlpb2ya.set,\n        remove: $_g8mvdembjnlpb2ya.remove\n      }),\n      attrs: constant({\n        get: $_9u6utvm2jnlpb2wv.get,\n        set: $_9u6utvm2jnlpb2wv.set,\n        remove: $_9u6utvm2jnlpb2wv.remove,\n        copyTo: copyAttributesTo\n      }),\n      insert: constant({\n        before: $_5hzj77mdjnlpb2yp.before,\n        after: $_5hzj77mdjnlpb2yp.after,\n        afterAll: $_a9wtnkmfjnlpb2yu.after,\n        append: $_5hzj77mdjnlpb2yp.append,\n        appendAll: $_a9wtnkmfjnlpb2yu.append,\n        prepend: $_5hzj77mdjnlpb2yp.prepend,\n        wrap: $_5hzj77mdjnlpb2yp.wrap\n      }),\n      remove: constant({\n        unwrap: $_cybn8qmejnlpb2yr.unwrap,\n        remove: $_cybn8qmejnlpb2yr.remove\n      }),\n      create: constant({\n        nu: Element$$1.fromTag,\n        clone: clone,\n        text: Element$$1.fromText\n      }),\n      query: constant({\n        comparePosition: comparePosition,\n        prevSibling: $_2pl1nljjnlpb2ur.prevSibling,\n        nextSibling: $_2pl1nljjnlpb2ur.nextSibling\n      }),\n      property: constant({\n        children: $_2pl1nljjnlpb2ur.children,\n        name: $_erx5tem3jnlpb2x3.name,\n        parent: $_2pl1nljjnlpb2ur.parent,\n        isText: $_erx5tem3jnlpb2x3.isText,\n        isComment: $_erx5tem3jnlpb2x3.isComment,\n        isElement: $_erx5tem3jnlpb2x3.isElement,\n        getText: $_3lolvomkjnlpb304.get,\n        setText: $_3lolvomkjnlpb304.set,\n        isBoundary: isBoundary,\n        isEmptyTag: isEmptyTag\n      }),\n      eq: $_3k22killjnlpb2vb.eq,\n      is: $_3k22killjnlpb2vb.is\n    };\n  }\n\n  var leftRight = Immutable('left', 'right');\n  var bisect = function (universe, parent, child) {\n    var children = universe.property().children(parent);\n    var index = findIndex(children, curry(universe.eq, child));\n    return index.map(function (ind) {\n      return {\n        before: constant(children.slice(0, ind)),\n        after: constant(children.slice(ind + 1))\n      };\n    });\n  };\n  var breakToRight = function (universe, parent, child) {\n    return bisect(universe, parent, child).map(function (parts) {\n      var second = universe.create().clone(parent);\n      universe.insert().appendAll(second, parts.after());\n      universe.insert().after(parent, second);\n      return leftRight(parent, second);\n    });\n  };\n  var breakToLeft = function (universe, parent, child) {\n    return bisect(universe, parent, child).map(function (parts) {\n      var prior = universe.create().clone(parent);\n      universe.insert().appendAll(prior, parts.before().concat([child]));\n      universe.insert().appendAll(parent, parts.after());\n      universe.insert().before(parent, prior);\n      return leftRight(prior, parent);\n    });\n  };\n  var breakPath = function (universe, item, isTop, breaker) {\n    var result = Immutable('first', 'second', 'splits');\n    var next = function (child, group, splits) {\n      var fallback = result(child, Option.none(), splits);\n      if (isTop(child))\n        return result(child, group, splits);\n      else {\n        return universe.property().parent(child).bind(function (parent) {\n          return breaker(universe, parent, child).map(function (breakage) {\n            var extra = [{\n                first: breakage.left,\n                second: breakage.right\n              }];\n            var nextChild = isTop(parent) ? parent : breakage.left();\n            return next(nextChild, Option.some(breakage.right()), splits.concat(extra));\n          }).getOr(fallback);\n        });\n      }\n    };\n    return next(item, Option.none(), []);\n  };\n  var $_3oyp2cmvjnlpb336 = {\n    breakToLeft: breakToLeft,\n    breakToRight: breakToRight,\n    breakPath: breakPath\n  };\n\n  var all$3 = function (universe, look, elements, f) {\n    var head$$1 = elements[0];\n    var tail = elements.slice(1);\n    return f(universe, look, head$$1, tail);\n  };\n  var oneAll = function (universe, look, elements) {\n    return elements.length > 0 ? all$3(universe, look, elements, unsafeOne) : Option.none();\n  };\n  var unsafeOne = function (universe, look, head$$1, tail) {\n    var start = look(universe, head$$1);\n    return foldr(tail, function (b, a) {\n      var current = look(universe, a);\n      return commonElement(universe, b, current);\n    }, start);\n  };\n  var commonElement = function (universe, start, end) {\n    return start.bind(function (s) {\n      return end.filter(curry(universe.eq, s));\n    });\n  };\n  var $_bt5ke0mwjnlpb33g = { oneAll: oneAll };\n\n  var eq$1 = function (universe, item) {\n    return curry(universe.eq, item);\n  };\n  var unsafeSubset = function (universe, common, ps1, ps2) {\n    var children = universe.property().children(common);\n    if (universe.eq(common, ps1[0]))\n      return Option.some([ps1[0]]);\n    if (universe.eq(common, ps2[0]))\n      return Option.some([ps2[0]]);\n    var finder = function (ps) {\n      var topDown = reverse(ps);\n      var index = findIndex(topDown, eq$1(universe, common)).getOr(-1);\n      var item = index < topDown.length - 1 ? topDown[index + 1] : topDown[index];\n      return findIndex(children, eq$1(universe, item));\n    };\n    var startIndex = finder(ps1);\n    var endIndex = finder(ps2);\n    return startIndex.bind(function (sIndex) {\n      return endIndex.map(function (eIndex) {\n        var first = Math.min(sIndex, eIndex);\n        var last$$1 = Math.max(sIndex, eIndex);\n        return children.slice(first, last$$1 + 1);\n      });\n    });\n  };\n  var ancestors$2 = function (universe, start, end, _isRoot) {\n    var isRoot = _isRoot !== undefined ? _isRoot : constant(false);\n    var ps1 = [start].concat(universe.up().all(start));\n    var ps2 = [end].concat(universe.up().all(end));\n    var prune = function (path) {\n      var index = findIndex(path, isRoot);\n      return index.fold(function () {\n        return path;\n      }, function (ind) {\n        return path.slice(0, ind + 1);\n      });\n    };\n    var pruned1 = prune(ps1);\n    var pruned2 = prune(ps2);\n    var shared = find(pruned1, function (x) {\n      return exists(pruned2, eq$1(universe, x));\n    });\n    return {\n      firstpath: constant(pruned1),\n      secondpath: constant(pruned2),\n      shared: constant(shared)\n    };\n  };\n  var subset = function (universe, start, end) {\n    var ancs = ancestors$2(universe, start, end);\n    return ancs.shared().bind(function (shared) {\n      return unsafeSubset(universe, shared, ancs.firstpath(), ancs.secondpath());\n    });\n  };\n  var $_4j9fa0mxjnlpb33t = {\n    subset: subset,\n    ancestors: ancestors$2\n  };\n\n  var sharedOne = function (universe, look, elements) {\n    return $_bt5ke0mwjnlpb33g.oneAll(universe, look, elements);\n  };\n  var subset$1 = function (universe, start, finish) {\n    return $_4j9fa0mxjnlpb33t.subset(universe, start, finish);\n  };\n  var ancestors$3 = function (universe, start, finish, _isRoot) {\n    return $_4j9fa0mxjnlpb33t.ancestors(universe, start, finish, _isRoot);\n  };\n  var breakToLeft$1 = function (universe, parent, child) {\n    return $_3oyp2cmvjnlpb336.breakToLeft(universe, parent, child);\n  };\n  var breakToRight$1 = function (universe, parent, child) {\n    return $_3oyp2cmvjnlpb336.breakToRight(universe, parent, child);\n  };\n  var breakPath$1 = function (universe, child, isTop, breaker) {\n    return $_3oyp2cmvjnlpb336.breakPath(universe, child, isTop, breaker);\n  };\n  var $_2t6rjjmujnlpb335 = {\n    sharedOne: sharedOne,\n    subset: subset$1,\n    ancestors: ancestors$3,\n    breakToLeft: breakToLeft$1,\n    breakToRight: breakToRight$1,\n    breakPath: breakPath$1\n  };\n\n  var universe = DomUniverse();\n  var sharedOne$1 = function (look, elements) {\n    return $_2t6rjjmujnlpb335.sharedOne(universe, function (universe, element) {\n      return look(element);\n    }, elements);\n  };\n  var subset$2 = function (start, finish) {\n    return $_2t6rjjmujnlpb335.subset(universe, start, finish);\n  };\n  var ancestors$4 = function (start, finish, _isRoot) {\n    return $_2t6rjjmujnlpb335.ancestors(universe, start, finish, _isRoot);\n  };\n  var breakToLeft$2 = function (parent, child) {\n    return $_2t6rjjmujnlpb335.breakToLeft(universe, parent, child);\n  };\n  var breakToRight$2 = function (parent, child) {\n    return $_2t6rjjmujnlpb335.breakToRight(universe, parent, child);\n  };\n  var breakPath$2 = function (child, isTop, breaker) {\n    return $_2t6rjjmujnlpb335.breakPath(universe, child, isTop, function (u, p, c) {\n      return breaker(p, c);\n    });\n  };\n  var $_5iw3l3mrjnlpb31x = {\n    sharedOne: sharedOne$1,\n    subset: subset$2,\n    ancestors: ancestors$4,\n    breakToLeft: breakToLeft$2,\n    breakToRight: breakToRight$2,\n    breakPath: breakPath$2\n  };\n\n  var inSelection = function (bounds, detail) {\n    var leftEdge = detail.column();\n    var rightEdge = detail.column() + detail.colspan() - 1;\n    var topEdge = detail.row();\n    var bottomEdge = detail.row() + detail.rowspan() - 1;\n    return leftEdge <= bounds.finishCol() && rightEdge >= bounds.startCol() && (topEdge <= bounds.finishRow() && bottomEdge >= bounds.startRow());\n  };\n  var isWithin = function (bounds, detail) {\n    return detail.column() >= bounds.startCol() && detail.column() + detail.colspan() - 1 <= bounds.finishCol() && detail.row() >= bounds.startRow() && detail.row() + detail.rowspan() - 1 <= bounds.finishRow();\n  };\n  var isRectangular = function (warehouse, bounds) {\n    var isRect = true;\n    var detailIsWithin = curry(isWithin, bounds);\n    for (var i = bounds.startRow(); i <= bounds.finishRow(); i++) {\n      for (var j = bounds.startCol(); j <= bounds.finishCol(); j++) {\n        isRect = isRect && $_ein1yumajnlpb2y1.getAt(warehouse, i, j).exists(detailIsWithin);\n      }\n    }\n    return isRect ? Option.some(bounds) : Option.none();\n  };\n  var $_6v1gttn0jnlpb34e = {\n    inSelection: inSelection,\n    isWithin: isWithin,\n    isRectangular: isRectangular\n  };\n\n  var getBounds = function (detailA, detailB) {\n    return $_csuubelcjnlpb2sv.bounds(Math.min(detailA.row(), detailB.row()), Math.min(detailA.column(), detailB.column()), Math.max(detailA.row() + detailA.rowspan() - 1, detailB.row() + detailB.rowspan() - 1), Math.max(detailA.column() + detailA.colspan() - 1, detailB.column() + detailB.colspan() - 1));\n  };\n  var getAnyBox = function (warehouse, startCell, finishCell) {\n    var startCoords = $_ein1yumajnlpb2y1.findItem(warehouse, startCell, $_3k22killjnlpb2vb.eq);\n    var finishCoords = $_ein1yumajnlpb2y1.findItem(warehouse, finishCell, $_3k22killjnlpb2vb.eq);\n    return startCoords.bind(function (sc) {\n      return finishCoords.map(function (fc) {\n        return getBounds(sc, fc);\n      });\n    });\n  };\n  var getBox = function (warehouse, startCell, finishCell) {\n    return getAnyBox(warehouse, startCell, finishCell).bind(function (bounds) {\n      return $_6v1gttn0jnlpb34e.isRectangular(warehouse, bounds);\n    });\n  };\n  var $_8cl7xfn1jnlpb34j = {\n    getAnyBox: getAnyBox,\n    getBox: getBox\n  };\n\n  var moveBy = function (warehouse, cell, row, column) {\n    return $_ein1yumajnlpb2y1.findItem(warehouse, cell, $_3k22killjnlpb2vb.eq).bind(function (detail) {\n      var startRow = row > 0 ? detail.row() + detail.rowspan() - 1 : detail.row();\n      var startCol = column > 0 ? detail.column() + detail.colspan() - 1 : detail.column();\n      var dest = $_ein1yumajnlpb2y1.getAt(warehouse, startRow + row, startCol + column);\n      return dest.map(function (d) {\n        return d.element();\n      });\n    });\n  };\n  var intercepts = function (warehouse, start, finish) {\n    return $_8cl7xfn1jnlpb34j.getAnyBox(warehouse, start, finish).map(function (bounds) {\n      var inside = $_ein1yumajnlpb2y1.filterItems(warehouse, curry($_6v1gttn0jnlpb34e.inSelection, bounds));\n      return map(inside, function (detail) {\n        return detail.element();\n      });\n    });\n  };\n  var parentCell = function (warehouse, innerCell) {\n    var isContainedBy = function (c1, c2) {\n      return $_3k22killjnlpb2vb.contains(c2, c1);\n    };\n    return $_ein1yumajnlpb2y1.findItem(warehouse, innerCell, isContainedBy).bind(function (detail) {\n      return detail.element();\n    });\n  };\n  var $_7fg8egmzjnlpb346 = {\n    moveBy: moveBy,\n    intercepts: intercepts,\n    parentCell: parentCell\n  };\n\n  var moveBy$1 = function (cell, deltaRow, deltaColumn) {\n    return $_em4z2mldjnlpb2sz.table(cell).bind(function (table) {\n      var warehouse = getWarehouse(table);\n      return $_7fg8egmzjnlpb346.moveBy(warehouse, cell, deltaRow, deltaColumn);\n    });\n  };\n  var intercepts$1 = function (table, first, last) {\n    var warehouse = getWarehouse(table);\n    return $_7fg8egmzjnlpb346.intercepts(warehouse, first, last);\n  };\n  var nestedIntercepts = function (table, first, firstTable, last, lastTable) {\n    var warehouse = getWarehouse(table);\n    var startCell = $_3k22killjnlpb2vb.eq(table, firstTable) ? first : $_7fg8egmzjnlpb346.parentCell(warehouse, first);\n    var lastCell = $_3k22killjnlpb2vb.eq(table, lastTable) ? last : $_7fg8egmzjnlpb346.parentCell(warehouse, last);\n    return $_7fg8egmzjnlpb346.intercepts(warehouse, startCell, lastCell);\n  };\n  var getBox$1 = function (table, first, last) {\n    var warehouse = getWarehouse(table);\n    return $_8cl7xfn1jnlpb34j.getBox(warehouse, first, last);\n  };\n  var getWarehouse = function (table) {\n    var list = $_g8jea2lbjnlpb2sm.fromTable(table);\n    return $_ein1yumajnlpb2y1.generate(list);\n  };\n  var $_3cf29myjnlpb342 = {\n    moveBy: moveBy$1,\n    intercepts: intercepts$1,\n    nestedIntercepts: nestedIntercepts,\n    getBox: getBox$1\n  };\n\n  var lookupTable = function (container, isRoot) {\n    return $_gdszrpm7jnlpb2xk.ancestor(container, 'table');\n  };\n  var identified = MixedBag([\n    'boxes',\n    'start',\n    'finish'\n  ], []);\n  var identify = function (start, finish, isRoot) {\n    var getIsRoot = function (rootTable) {\n      return function (element) {\n        return isRoot(element) || $_3k22killjnlpb2vb.eq(element, rootTable);\n      };\n    };\n    if ($_3k22killjnlpb2vb.eq(start, finish)) {\n      return Option.some(identified({\n        boxes: Option.some([start]),\n        start: start,\n        finish: finish\n      }));\n    } else {\n      return lookupTable(start, isRoot).bind(function (startTable) {\n        return lookupTable(finish, isRoot).bind(function (finishTable) {\n          if ($_3k22killjnlpb2vb.eq(startTable, finishTable)) {\n            return Option.some(identified({\n              boxes: $_3cf29myjnlpb342.intercepts(startTable, start, finish),\n              start: start,\n              finish: finish\n            }));\n          } else if ($_3k22killjnlpb2vb.contains(startTable, finishTable)) {\n            var ancestorCells = $_97aehqm4jnlpb2x5.ancestors(finish, 'td,th', getIsRoot(startTable));\n            var finishCell = ancestorCells.length > 0 ? ancestorCells[ancestorCells.length - 1] : finish;\n            return Option.some(identified({\n              boxes: $_3cf29myjnlpb342.nestedIntercepts(startTable, start, startTable, finish, finishTable),\n              start: start,\n              finish: finishCell\n            }));\n          } else if ($_3k22killjnlpb2vb.contains(finishTable, startTable)) {\n            var ancestorCells = $_97aehqm4jnlpb2x5.ancestors(start, 'td,th', getIsRoot(finishTable));\n            var startCell = ancestorCells.length > 0 ? ancestorCells[ancestorCells.length - 1] : start;\n            return Option.some(identified({\n              boxes: $_3cf29myjnlpb342.nestedIntercepts(finishTable, start, startTable, finish, finishTable),\n              start: start,\n              finish: startCell\n            }));\n          } else {\n            return $_5iw3l3mrjnlpb31x.ancestors(start, finish).shared().bind(function (lca) {\n              return $_gdszrpm7jnlpb2xk.closest(lca, 'table', isRoot).bind(function (lcaTable) {\n                var finishAncestorCells = $_97aehqm4jnlpb2x5.ancestors(finish, 'td,th', getIsRoot(lcaTable));\n                var finishCell = finishAncestorCells.length > 0 ? finishAncestorCells[finishAncestorCells.length - 1] : finish;\n                var startAncestorCells = $_97aehqm4jnlpb2x5.ancestors(start, 'td,th', getIsRoot(lcaTable));\n                var startCell = startAncestorCells.length > 0 ? startAncestorCells[startAncestorCells.length - 1] : start;\n                return Option.some(identified({\n                  boxes: $_3cf29myjnlpb342.nestedIntercepts(lcaTable, start, startTable, finish, finishTable),\n                  start: startCell,\n                  finish: finishCell\n                }));\n              });\n            });\n          }\n        });\n      });\n    }\n  };\n  var retrieve = function (container, selector) {\n    var sels = $_97aehqm4jnlpb2x5.descendants(container, selector);\n    return sels.length > 0 ? Option.some(sels) : Option.none();\n  };\n  var getLast = function (boxes, lastSelectedSelector) {\n    return find(boxes, function (box) {\n      return $_1mxomdlfjnlpb2tz.is(box, lastSelectedSelector);\n    });\n  };\n  var getEdges = function (container, firstSelectedSelector, lastSelectedSelector) {\n    return $_gdszrpm7jnlpb2xk.descendant(container, firstSelectedSelector).bind(function (first) {\n      return $_gdszrpm7jnlpb2xk.descendant(container, lastSelectedSelector).bind(function (last$$1) {\n        return $_5iw3l3mrjnlpb31x.sharedOne(lookupTable, [\n          first,\n          last$$1\n        ]).map(function (tbl) {\n          return {\n            first: constant(first),\n            last: constant(last$$1),\n            table: constant(tbl)\n          };\n        });\n      });\n    });\n  };\n  var expandTo = function (finish, firstSelectedSelector) {\n    return $_gdszrpm7jnlpb2xk.ancestor(finish, 'table').bind(function (table) {\n      return $_gdszrpm7jnlpb2xk.descendant(table, firstSelectedSelector).bind(function (start) {\n        return identify(start, finish).bind(function (identified) {\n          return identified.boxes().map(function (boxes) {\n            return {\n              boxes: constant(boxes),\n              start: constant(identified.start()),\n              finish: constant(identified.finish())\n            };\n          });\n        });\n      });\n    });\n  };\n  var shiftSelection = function (boxes, deltaRow, deltaColumn, firstSelectedSelector, lastSelectedSelector) {\n    return getLast(boxes, lastSelectedSelector).bind(function (last$$1) {\n      return $_3cf29myjnlpb342.moveBy(last$$1, deltaRow, deltaColumn).bind(function (finish) {\n        return expandTo(finish, firstSelectedSelector);\n      });\n    });\n  };\n  var $_3c1t0amqjnlpb319 = {\n    identify: identify,\n    retrieve: retrieve,\n    shiftSelection: shiftSelection,\n    getEdges: getEdges\n  };\n\n  var retrieve$1 = function (container, selector) {\n    return $_3c1t0amqjnlpb319.retrieve(container, selector);\n  };\n  var retrieveBox = function (container, firstSelectedSelector, lastSelectedSelector) {\n    return $_3c1t0amqjnlpb319.getEdges(container, firstSelectedSelector, lastSelectedSelector).bind(function (edges) {\n      var isRoot = function (ancestor) {\n        return $_3k22killjnlpb2vb.eq(container, ancestor);\n      };\n      var firstAncestor = $_gdszrpm7jnlpb2xk.ancestor(edges.first(), 'thead,tfoot,tbody,table', isRoot);\n      var lastAncestor = $_gdszrpm7jnlpb2xk.ancestor(edges.last(), 'thead,tfoot,tbody,table', isRoot);\n      return firstAncestor.bind(function (fA) {\n        return lastAncestor.bind(function (lA) {\n          return $_3k22killjnlpb2vb.eq(fA, lA) ? $_3cf29myjnlpb342.getBox(edges.table(), edges.first(), edges.last()) : Option.none();\n        });\n      });\n    });\n  };\n  var $_8c8t99mpjnlpb310 = {\n    retrieve: retrieve$1,\n    retrieveBox: retrieveBox\n  };\n\n  var selected = 'data-mce-selected';\n  var selectedSelector = 'td[' + selected + '],th[' + selected + ']';\n  var attributeSelector = '[' + selected + ']';\n  var firstSelected = 'data-mce-first-selected';\n  var firstSelectedSelector = 'td[' + firstSelected + '],th[' + firstSelected + ']';\n  var lastSelected = 'data-mce-last-selected';\n  var lastSelectedSelector = 'td[' + lastSelected + '],th[' + lastSelected + ']';\n  var $_5gt7rrn2jnlpb34p = {\n    selected: constant(selected),\n    selectedSelector: constant(selectedSelector),\n    attributeSelector: constant(attributeSelector),\n    firstSelected: constant(firstSelected),\n    firstSelectedSelector: constant(firstSelectedSelector),\n    lastSelected: constant(lastSelected),\n    lastSelectedSelector: constant(lastSelectedSelector)\n  };\n\n  var generate$1 = function (cases) {\n    if (!isArray(cases)) {\n      throw new Error('cases must be an array');\n    }\n    if (cases.length === 0) {\n      throw new Error('there must be at least one case');\n    }\n    var constructors = [];\n    var adt = {};\n    each(cases, function (acase, count) {\n      var keys$$1 = keys(acase);\n      if (keys$$1.length !== 1) {\n        throw new Error('one and only one name per case');\n      }\n      var key = keys$$1[0];\n      var value = acase[key];\n      if (adt[key] !== undefined) {\n        throw new Error('duplicate key detected:' + key);\n      } else if (key === 'cata') {\n        throw new Error('cannot have a case named cata (sorry)');\n      } else if (!isArray(value)) {\n        throw new Error('case arguments must be an array');\n      }\n      constructors.push(key);\n      adt[key] = function () {\n        var argLength = arguments.length;\n        if (argLength !== value.length) {\n          throw new Error('Wrong number of arguments to case ' + key + '. Expected ' + value.length + ' (' + value + '), got ' + argLength);\n        }\n        var args = new Array(argLength);\n        for (var i = 0; i < args.length; i++)\n          args[i] = arguments[i];\n        var match = function (branches) {\n          var branchKeys = keys(branches);\n          if (constructors.length !== branchKeys.length) {\n            throw new Error('Wrong number of arguments to match. Expected: ' + constructors.join(',') + '\\nActual: ' + branchKeys.join(','));\n          }\n          var allReqd = forall(constructors, function (reqKey) {\n            return contains(branchKeys, reqKey);\n          });\n          if (!allReqd)\n            throw new Error('Not all branches were specified when using match. Specified: ' + branchKeys.join(', ') + '\\nRequired: ' + constructors.join(', '));\n          return branches[key].apply(null, args);\n        };\n        return {\n          fold: function () {\n            if (arguments.length !== cases.length) {\n              throw new Error('Wrong number of arguments to fold. Expected ' + cases.length + ', got ' + arguments.length);\n            }\n            var target = arguments[count];\n            return target.apply(null, args);\n          },\n          match: match,\n          log: function (label) {\n            console.log(label, {\n              constructors: constructors,\n              constructor: key,\n              params: args\n            });\n          }\n        };\n      };\n    });\n    return adt;\n  };\n  var Adt = { generate: generate$1 };\n\n  var type$1 = Adt.generate([\n    { none: [] },\n    { multiple: ['elements'] },\n    { single: ['selection'] }\n  ]);\n  var cata = function (subject, onNone, onMultiple, onSingle) {\n    return subject.fold(onNone, onMultiple, onSingle);\n  };\n  var $_35kl4cn3jnlpb34v = {\n    cata: cata,\n    none: type$1.none,\n    multiple: type$1.multiple,\n    single: type$1.single\n  };\n\n  var selection = function (cell, selections) {\n    return $_35kl4cn3jnlpb34v.cata(selections.get(), constant([]), identity, constant([cell]));\n  };\n  var unmergable = function (cell, selections) {\n    var hasSpan = function (elem) {\n      return $_9u6utvm2jnlpb2wv.has(elem, 'rowspan') && parseInt($_9u6utvm2jnlpb2wv.get(elem, 'rowspan'), 10) > 1 || $_9u6utvm2jnlpb2wv.has(elem, 'colspan') && parseInt($_9u6utvm2jnlpb2wv.get(elem, 'colspan'), 10) > 1;\n    };\n    var candidates = selection(cell, selections);\n    return candidates.length > 0 && forall(candidates, hasSpan) ? Option.some(candidates) : Option.none();\n  };\n  var mergable = function (table, selections) {\n    return $_35kl4cn3jnlpb34v.cata(selections.get(), Option.none, function (cells, _env) {\n      if (cells.length === 0) {\n        return Option.none();\n      }\n      return $_8c8t99mpjnlpb310.retrieveBox(table, $_5gt7rrn2jnlpb34p.firstSelectedSelector(), $_5gt7rrn2jnlpb34p.lastSelectedSelector()).bind(function (bounds) {\n        return cells.length > 1 ? Option.some({\n          bounds: constant(bounds),\n          cells: constant(cells)\n        }) : Option.none();\n      });\n    }, Option.none);\n  };\n  var $_g6cqikmojnlpb30m = {\n    mergable: mergable,\n    unmergable: unmergable,\n    selection: selection\n  };\n\n  var noMenu = function (cell) {\n    return {\n      element: constant(cell),\n      mergable: Option.none,\n      unmergable: Option.none,\n      selection: constant([cell])\n    };\n  };\n  var forMenu = function (selections, table, cell) {\n    return {\n      element: constant(cell),\n      mergable: constant($_g6cqikmojnlpb30m.mergable(table, selections)),\n      unmergable: constant($_g6cqikmojnlpb30m.unmergable(cell, selections)),\n      selection: constant($_g6cqikmojnlpb30m.selection(cell, selections))\n    };\n  };\n  var notCell$1 = function (element) {\n    return noMenu(element);\n  };\n  var paste$1 = Immutable('element', 'clipboard', 'generators');\n  var pasteRows = function (selections, table, cell, clipboard, generators) {\n    return {\n      element: constant(cell),\n      mergable: Option.none,\n      unmergable: Option.none,\n      selection: constant($_g6cqikmojnlpb30m.selection(cell, selections)),\n      clipboard: constant(clipboard),\n      generators: constant(generators)\n    };\n  };\n  var $_39kmudmnjnlpb30f = {\n    noMenu: noMenu,\n    forMenu: forMenu,\n    notCell: notCell$1,\n    paste: paste$1,\n    pasteRows: pasteRows\n  };\n\n  var extractSelected = function (cells) {\n    return $_em4z2mldjnlpb2sz.table(cells[0]).map($_7sdoc4mhjnlpb2zt.deep).map(function (replica) {\n      return [$_df0ycyl5jnlpb2rr.extract(replica, $_5gt7rrn2jnlpb34p.attributeSelector())];\n    });\n  };\n  var serializeElement = function (editor, elm) {\n    return editor.selection.serializer.serialize(elm.dom(), {});\n  };\n  var registerEvents = function (editor, selections, actions, cellSelection) {\n    editor.on('BeforeGetContent', function (e) {\n      var multiCellContext = function (cells) {\n        e.preventDefault();\n        extractSelected(cells).each(function (elements) {\n          e.content = map(elements, function (elm) {\n            return serializeElement(editor, elm);\n          }).join('');\n        });\n      };\n      if (e.selection === true) {\n        $_35kl4cn3jnlpb34v.cata(selections.get(), noop, multiCellContext, noop);\n      }\n    });\n    editor.on('BeforeSetContent', function (e) {\n      if (e.selection === true && e.paste === true) {\n        var cellOpt = Option.from(editor.dom.getParent(editor.selection.getStart(), 'th,td'));\n        cellOpt.each(function (domCell) {\n          var cell = Element$$1.fromDom(domCell);\n          var table = $_em4z2mldjnlpb2sz.table(cell);\n          table.bind(function (table) {\n            var elements = filter($_1ebm76mmjnlpb30a.fromHtml(e.content), function (content) {\n              return $_erx5tem3jnlpb2x3.name(content) !== 'meta';\n            });\n            if (elements.length === 1 && $_erx5tem3jnlpb2x3.name(elements[0]) === 'table') {\n              e.preventDefault();\n              var doc = Element$$1.fromDom(editor.getDoc());\n              var generators = $_f80632mgjnlpb2z3.paste(doc);\n              var targets = $_39kmudmnjnlpb30f.paste(cell, elements[0], generators);\n              actions.pasteCells(table, targets).each(function (rng) {\n                editor.selection.setRng(rng);\n                editor.focus();\n                cellSelection.clear(table);\n              });\n            }\n          });\n        });\n      }\n    });\n  };\n  var $_aaekm8l0jnlpb2qo = { registerEvents: registerEvents };\n\n  function Dimension (name, getOffset) {\n    var set = function (element, h) {\n      if (!isNumber(h) && !h.match(/^[0-9]+$/))\n        throw name + '.set accepts only positive integer values. Value was ' + h;\n      var dom = element.dom();\n      if ($_4sfuxamcjnlpb2yn.isSupported(dom))\n        dom.style[name] = h + 'px';\n    };\n    var get = function (element) {\n      var r = getOffset(element);\n      if (r <= 0 || r === null) {\n        var css = $_g8mvdembjnlpb2ya.get(element, name);\n        return parseFloat(css) || 0;\n      }\n      return r;\n    };\n    var getOuter = get;\n    var aggregate = function (element, properties) {\n      return foldl(properties, function (acc, property) {\n        var val = $_g8mvdembjnlpb2ya.get(element, property);\n        var value = val === undefined ? 0 : parseInt(val, 10);\n        return isNaN(value) ? acc : acc + value;\n      }, 0);\n    };\n    var max = function (element, value, properties) {\n      var cumulativeInclusions = aggregate(element, properties);\n      var absoluteMax = value > cumulativeInclusions ? value - cumulativeInclusions : 0;\n      return absoluteMax;\n    };\n    return {\n      set: set,\n      get: get,\n      getOuter: getOuter,\n      aggregate: aggregate,\n      max: max\n    };\n  }\n\n  var api$1 = Dimension('height', function (element) {\n    var dom = element.dom();\n    return $_1ie4uvm6jnlpb2xf.inBody(element) ? dom.getBoundingClientRect().height : dom.offsetHeight;\n  });\n  var set$3 = function (element, h) {\n    api$1.set(element, h);\n  };\n  var get$4 = function (element) {\n    return api$1.get(element);\n  };\n  var getOuter = function (element) {\n    return api$1.getOuter(element);\n  };\n  var setMax = function (element, value) {\n    var inclusions = [\n      'margin-top',\n      'border-top-width',\n      'padding-top',\n      'padding-bottom',\n      'border-bottom-width',\n      'margin-bottom'\n    ];\n    var absMax = api$1.max(element, value, inclusions);\n    $_g8mvdembjnlpb2ya.set(element, 'max-height', absMax + 'px');\n  };\n  var $_6kvman9jnlpb36h = {\n    set: set$3,\n    get: get$4,\n    getOuter: getOuter,\n    setMax: setMax\n  };\n\n  var api$2 = Dimension('width', function (element) {\n    return element.dom().offsetWidth;\n  });\n  var set$4 = function (element, h) {\n    api$2.set(element, h);\n  };\n  var get$5 = function (element) {\n    return api$2.get(element);\n  };\n  var getOuter$1 = function (element) {\n    return api$2.getOuter(element);\n  };\n  var setMax$1 = function (element, value) {\n    var inclusions = [\n      'margin-left',\n      'border-left-width',\n      'padding-left',\n      'padding-right',\n      'border-right-width',\n      'margin-right'\n    ];\n    var absMax = api$2.max(element, value, inclusions);\n    $_g8mvdembjnlpb2ya.set(element, 'max-width', absMax + 'px');\n  };\n  var $_2s7b62nbjnlpb36o = {\n    set: set$4,\n    get: get$5,\n    getOuter: getOuter$1,\n    setMax: setMax$1\n  };\n\n  var platform = $_4aebialqjnlpb2vq.detect();\n  var needManualCalc = function () {\n    return platform.browser.isIE() || platform.browser.isEdge();\n  };\n  var toNumber = function (px, fallback) {\n    var num = parseFloat(px);\n    return isNaN(num) ? fallback : num;\n  };\n  var getProp = function (elm, name, fallback) {\n    return toNumber($_g8mvdembjnlpb2ya.get(elm, name), fallback);\n  };\n  var getCalculatedHeight = function (cell) {\n    var paddingTop = getProp(cell, 'padding-top', 0);\n    var paddingBottom = getProp(cell, 'padding-bottom', 0);\n    var borderTop = getProp(cell, 'border-top-width', 0);\n    var borderBottom = getProp(cell, 'border-bottom-width', 0);\n    var height = cell.dom().getBoundingClientRect().height;\n    var boxSizing = $_g8mvdembjnlpb2ya.get(cell, 'box-sizing');\n    var borders = borderTop + borderBottom;\n    return boxSizing === 'border-box' ? height : height - paddingTop - paddingBottom - borders;\n  };\n  var getWidth = function (cell) {\n    return getProp(cell, 'width', $_2s7b62nbjnlpb36o.get(cell));\n  };\n  var getHeight = function (cell) {\n    return needManualCalc() ? getCalculatedHeight(cell) : getProp(cell, 'height', $_6kvman9jnlpb36h.get(cell));\n  };\n  var $_1pmnnnn8jnlpb367 = {\n    getWidth: getWidth,\n    getHeight: getHeight\n  };\n\n  var genericSizeRegex = /(\\d+(\\.\\d+)?)(\\w|%)*/;\n  var percentageBasedSizeRegex = /(\\d+(\\.\\d+)?)%/;\n  var pixelBasedSizeRegex = /(\\d+(\\.\\d+)?)px|em/;\n  var setPixelWidth = function (cell, amount) {\n    $_g8mvdembjnlpb2ya.set(cell, 'width', amount + 'px');\n  };\n  var setPercentageWidth = function (cell, amount) {\n    $_g8mvdembjnlpb2ya.set(cell, 'width', amount + '%');\n  };\n  var setHeight = function (cell, amount) {\n    $_g8mvdembjnlpb2ya.set(cell, 'height', amount + 'px');\n  };\n  var getHeightValue = function (cell) {\n    return $_g8mvdembjnlpb2ya.getRaw(cell, 'height').getOrThunk(function () {\n      return $_1pmnnnn8jnlpb367.getHeight(cell) + 'px';\n    });\n  };\n  var convert = function (cell, number, getter, setter) {\n    var newSize = $_em4z2mldjnlpb2sz.table(cell).map(function (table) {\n      var total = getter(table);\n      return Math.floor(number / 100 * total);\n    }).getOr(number);\n    setter(cell, newSize);\n    return newSize;\n  };\n  var normalizePixelSize = function (value, cell, getter, setter) {\n    var number = parseInt(value, 10);\n    return endsWith(value, '%') && $_erx5tem3jnlpb2x3.name(cell) !== 'table' ? convert(cell, number, getter, setter) : number;\n  };\n  var getTotalHeight = function (cell) {\n    var value = getHeightValue(cell);\n    if (!value)\n      return $_6kvman9jnlpb36h.get(cell);\n    return normalizePixelSize(value, cell, $_6kvman9jnlpb36h.get, setHeight);\n  };\n  var get$6 = function (cell, type, f) {\n    var v = f(cell);\n    var span = getSpan(cell, type);\n    return v / span;\n  };\n  var getSpan = function (cell, type) {\n    return $_9u6utvm2jnlpb2wv.has(cell, type) ? parseInt($_9u6utvm2jnlpb2wv.get(cell, type), 10) : 1;\n  };\n  var getRawWidth = function (element) {\n    var cssWidth = $_g8mvdembjnlpb2ya.getRaw(element, 'width');\n    return cssWidth.fold(function () {\n      return Option.from($_9u6utvm2jnlpb2wv.get(element, 'width'));\n    }, function (width) {\n      return Option.some(width);\n    });\n  };\n  var normalizePercentageWidth = function (cellWidth, tableSize) {\n    return cellWidth / tableSize.pixelWidth() * 100;\n  };\n  var choosePercentageSize = function (element, width, tableSize) {\n    if (percentageBasedSizeRegex.test(width)) {\n      var percentMatch = percentageBasedSizeRegex.exec(width);\n      return parseFloat(percentMatch[1]);\n    } else {\n      var intWidth = $_2s7b62nbjnlpb36o.get(element);\n      return normalizePercentageWidth(intWidth, tableSize);\n    }\n  };\n  var getPercentageWidth = function (cell, tableSize) {\n    var width = getRawWidth(cell);\n    return width.fold(function () {\n      var intWidth = $_2s7b62nbjnlpb36o.get(cell);\n      return normalizePercentageWidth(intWidth, tableSize);\n    }, function (width) {\n      return choosePercentageSize(cell, width, tableSize);\n    });\n  };\n  var normalizePixelWidth = function (cellWidth, tableSize) {\n    return cellWidth / 100 * tableSize.pixelWidth();\n  };\n  var choosePixelSize = function (element, width, tableSize) {\n    if (pixelBasedSizeRegex.test(width)) {\n      var pixelMatch = pixelBasedSizeRegex.exec(width);\n      return parseInt(pixelMatch[1], 10);\n    } else if (percentageBasedSizeRegex.test(width)) {\n      var percentMatch = percentageBasedSizeRegex.exec(width);\n      var floatWidth = parseFloat(percentMatch[1]);\n      return normalizePixelWidth(floatWidth, tableSize);\n    } else {\n      return $_2s7b62nbjnlpb36o.get(element);\n    }\n  };\n  var getPixelWidth = function (cell, tableSize) {\n    var width = getRawWidth(cell);\n    return width.fold(function () {\n      return $_2s7b62nbjnlpb36o.get(cell);\n    }, function (width) {\n      return choosePixelSize(cell, width, tableSize);\n    });\n  };\n  var getHeight$1 = function (cell) {\n    return get$6(cell, 'rowspan', getTotalHeight);\n  };\n  var getGenericWidth = function (cell) {\n    var width = getRawWidth(cell);\n    return width.bind(function (width) {\n      if (genericSizeRegex.test(width)) {\n        var match = genericSizeRegex.exec(width);\n        return Option.some({\n          width: constant(match[1]),\n          unit: constant(match[3])\n        });\n      } else {\n        return Option.none();\n      }\n    });\n  };\n  var setGenericWidth = function (cell, amount, unit) {\n    $_g8mvdembjnlpb2ya.set(cell, 'width', amount + unit);\n  };\n  var $_8c9k1dn7jnlpb35o = {\n    percentageBasedSizeRegex: constant(percentageBasedSizeRegex),\n    pixelBasedSizeRegex: constant(pixelBasedSizeRegex),\n    setPixelWidth: setPixelWidth,\n    setPercentageWidth: setPercentageWidth,\n    setHeight: setHeight,\n    getPixelWidth: getPixelWidth,\n    getPercentageWidth: getPercentageWidth,\n    getGenericWidth: getGenericWidth,\n    setGenericWidth: setGenericWidth,\n    getHeight: getHeight$1,\n    getRawWidth: getRawWidth\n  };\n\n  var halve = function (main, other) {\n    var width = $_8c9k1dn7jnlpb35o.getGenericWidth(main);\n    width.each(function (width) {\n      var newWidth = width.width() / 2;\n      $_8c9k1dn7jnlpb35o.setGenericWidth(main, newWidth, width.unit());\n      $_8c9k1dn7jnlpb35o.setGenericWidth(other, newWidth, width.unit());\n    });\n  };\n  var $_8eufztn6jnlpb35m = { halve: halve };\n\n  var attached = function (element, scope) {\n    var doc = scope || Element$$1.fromDom(document.documentElement);\n    return $_1nfdlmm8jnlpb2xl.ancestor(element, curry($_3k22killjnlpb2vb.eq, doc)).isSome();\n  };\n  var windowOf = function (element) {\n    var dom = element.dom();\n    if (dom === dom.window && element instanceof Window)\n      return element;\n    return $_erx5tem3jnlpb2x3.isDocument(element) ? dom.defaultView || dom.parentWindow : null;\n  };\n  var $_7rx1opngjnlpb37d = {\n    attached: attached,\n    windowOf: windowOf\n  };\n\n  var r = function (left, top) {\n    var translate = function (x, y) {\n      return r(left + x, top + y);\n    };\n    return {\n      left: constant(left),\n      top: constant(top),\n      translate: translate\n    };\n  };\n  var Position = r;\n\n  var boxPosition = function (dom) {\n    var box = dom.getBoundingClientRect();\n    return Position(box.left, box.top);\n  };\n  var firstDefinedOrZero = function (a, b) {\n    return a !== undefined ? a : b !== undefined ? b : 0;\n  };\n  var absolute = function (element) {\n    var doc = element.dom().ownerDocument;\n    var body = doc.body;\n    var win = $_7rx1opngjnlpb37d.windowOf(Element$$1.fromDom(doc));\n    var html = doc.documentElement;\n    var scrollTop = firstDefinedOrZero(win.pageYOffset, html.scrollTop);\n    var scrollLeft = firstDefinedOrZero(win.pageXOffset, html.scrollLeft);\n    var clientTop = firstDefinedOrZero(html.clientTop, body.clientTop);\n    var clientLeft = firstDefinedOrZero(html.clientLeft, body.clientLeft);\n    return viewport(element).translate(scrollLeft - clientLeft, scrollTop - clientTop);\n  };\n  var relative = function (element) {\n    var dom = element.dom();\n    return Position(dom.offsetLeft, dom.offsetTop);\n  };\n  var viewport = function (element) {\n    var dom = element.dom();\n    var doc = dom.ownerDocument;\n    var body = doc.body;\n    var html = Element$$1.fromDom(doc.documentElement);\n    if (body === dom)\n      return Position(body.offsetLeft, body.offsetTop);\n    if (!$_7rx1opngjnlpb37d.attached(element, html))\n      return Position(0, 0);\n    return boxPosition(dom);\n  };\n  var $_2ipv1snfjnlpb37b = {\n    absolute: absolute,\n    relative: relative,\n    viewport: viewport\n  };\n\n  var rowInfo = Immutable('row', 'y');\n  var colInfo = Immutable('col', 'x');\n  var rtlEdge = function (cell) {\n    var pos = $_2ipv1snfjnlpb37b.absolute(cell);\n    return pos.left() + $_2s7b62nbjnlpb36o.getOuter(cell);\n  };\n  var ltrEdge = function (cell) {\n    return $_2ipv1snfjnlpb37b.absolute(cell).left();\n  };\n  var getLeftEdge = function (index, cell) {\n    return colInfo(index, ltrEdge(cell));\n  };\n  var getRightEdge = function (index, cell) {\n    return colInfo(index, rtlEdge(cell));\n  };\n  var getTop = function (cell) {\n    return $_2ipv1snfjnlpb37b.absolute(cell).top();\n  };\n  var getTopEdge = function (index, cell) {\n    return rowInfo(index, getTop(cell));\n  };\n  var getBottomEdge = function (index, cell) {\n    return rowInfo(index, getTop(cell) + $_6kvman9jnlpb36h.getOuter(cell));\n  };\n  var findPositions = function (getInnerEdge, getOuterEdge, array) {\n    if (array.length === 0)\n      return [];\n    var lines = map(array.slice(1), function (cellOption, index) {\n      return cellOption.map(function (cell) {\n        return getInnerEdge(index, cell);\n      });\n    });\n    var lastLine = array[array.length - 1].map(function (cell) {\n      return getOuterEdge(array.length - 1, cell);\n    });\n    return lines.concat([lastLine]);\n  };\n  var negate = function (step, _table) {\n    return -step;\n  };\n  var height = {\n    delta: identity,\n    positions: curry(findPositions, getTopEdge, getBottomEdge),\n    edge: getTop\n  };\n  var ltr = {\n    delta: identity,\n    edge: ltrEdge,\n    positions: curry(findPositions, getLeftEdge, getRightEdge)\n  };\n  var rtl = {\n    delta: negate,\n    edge: rtlEdge,\n    positions: curry(findPositions, getRightEdge, getLeftEdge)\n  };\n  var $_6u52cqnejnlpb36x = {\n    height: height,\n    rtl: rtl,\n    ltr: ltr\n  };\n\n  var $_1j2xkqndjnlpb36v = {\n    ltr: $_6u52cqnejnlpb36x.ltr,\n    rtl: $_6u52cqnejnlpb36x.rtl\n  };\n\n  function TableDirection (directionAt) {\n    var auto = function (table) {\n      return directionAt(table).isRtl() ? $_1j2xkqndjnlpb36v.rtl : $_1j2xkqndjnlpb36v.ltr;\n    };\n    var delta = function (amount, table) {\n      return auto(table).delta(amount, table);\n    };\n    var positions = function (cols, table) {\n      return auto(table).positions(cols, table);\n    };\n    var edge = function (cell) {\n      return auto(cell).edge(cell);\n    };\n    return {\n      delta: delta,\n      edge: edge,\n      positions: positions\n    };\n  }\n\n  var getGridSize = function (table) {\n    var input = $_g8jea2lbjnlpb2sm.fromTable(table);\n    var warehouse = $_ein1yumajnlpb2y1.generate(input);\n    return warehouse.grid();\n  };\n  var $_flksaxnijnlpb37k = { getGridSize: getGridSize };\n\n  var Cell = function (initial) {\n    var value = initial;\n    var get = function () {\n      return value;\n    };\n    var set = function (v) {\n      value = v;\n    };\n    var clone = function () {\n      return Cell(get());\n    };\n    return {\n      get: get,\n      set: set,\n      clone: clone\n    };\n  };\n\n  var base = function (handleUnsupported, required) {\n    return baseWith(handleUnsupported, required, {\n      validate: isFunction,\n      label: 'function'\n    });\n  };\n  var baseWith = function (handleUnsupported, required, pred) {\n    if (required.length === 0)\n      throw new Error('You must specify at least one required field.');\n    validateStrArr('required', required);\n    checkDupes(required);\n    return function (obj) {\n      var keys$$1 = keys(obj);\n      var allReqd = forall(required, function (req) {\n        return contains(keys$$1, req);\n      });\n      if (!allReqd)\n        reqMessage(required, keys$$1);\n      handleUnsupported(required, keys$$1);\n      var invalidKeys = filter(required, function (key) {\n        return !pred.validate(obj[key], key);\n      });\n      if (invalidKeys.length > 0)\n        invalidTypeMessage(invalidKeys, pred.label);\n      return obj;\n    };\n  };\n  var handleExact = function (required, keys$$1) {\n    var unsupported = filter(keys$$1, function (key) {\n      return !contains(required, key);\n    });\n    if (unsupported.length > 0)\n      unsuppMessage(unsupported);\n  };\n  var exactly = function (required) {\n    return base(handleExact, required);\n  };\n\n  var elementToData = function (element) {\n    var colspan = $_9u6utvm2jnlpb2wv.has(element, 'colspan') ? parseInt($_9u6utvm2jnlpb2wv.get(element, 'colspan'), 10) : 1;\n    var rowspan = $_9u6utvm2jnlpb2wv.has(element, 'rowspan') ? parseInt($_9u6utvm2jnlpb2wv.get(element, 'rowspan'), 10) : 1;\n    return {\n      element: constant(element),\n      colspan: constant(colspan),\n      rowspan: constant(rowspan)\n    };\n  };\n  var modification = function (generators, _toData) {\n    contract(generators);\n    var position = Cell(Option.none());\n    var toData = _toData !== undefined ? _toData : elementToData;\n    var nu = function (data) {\n      return generators.cell(data);\n    };\n    var nuFrom = function (element) {\n      var data = toData(element);\n      return nu(data);\n    };\n    var add = function (element) {\n      var replacement = nuFrom(element);\n      if (position.get().isNone())\n        position.set(Option.some(replacement));\n      recent = Option.some({\n        item: element,\n        replacement: replacement\n      });\n      return replacement;\n    };\n    var recent = Option.none();\n    var getOrInit = function (element, comparator) {\n      return recent.fold(function () {\n        return add(element);\n      }, function (p) {\n        return comparator(element, p.item) ? p.replacement : add(element);\n      });\n    };\n    return {\n      getOrInit: getOrInit,\n      cursor: position.get\n    };\n  };\n  var transform = function (scope, tag) {\n    return function (generators) {\n      var position = Cell(Option.none());\n      contract(generators);\n      var list = [];\n      var find$$1 = function (element, comparator) {\n        return find(list, function (x) {\n          return comparator(x.item, element);\n        });\n      };\n      var makeNew = function (element) {\n        var cell = generators.replace(element, tag, { scope: scope });\n        list.push({\n          item: element,\n          sub: cell\n        });\n        if (position.get().isNone())\n          position.set(Option.some(cell));\n        return cell;\n      };\n      var replaceOrInit = function (element, comparator) {\n        return find$$1(element, comparator).fold(function () {\n          return makeNew(element);\n        }, function (p) {\n          return comparator(element, p.item) ? p.sub : makeNew(element);\n        });\n      };\n      return {\n        replaceOrInit: replaceOrInit,\n        cursor: position.get\n      };\n    };\n  };\n  var merging = function (generators) {\n    contract(generators);\n    var position = Cell(Option.none());\n    var combine = function (cell) {\n      if (position.get().isNone())\n        position.set(Option.some(cell));\n      return function () {\n        var raw = generators.cell({\n          element: constant(cell),\n          colspan: constant(1),\n          rowspan: constant(1)\n        });\n        $_g8mvdembjnlpb2ya.remove(raw, 'width');\n        $_g8mvdembjnlpb2ya.remove(cell, 'width');\n        return raw;\n      };\n    };\n    return {\n      combine: combine,\n      cursor: position.get\n    };\n  };\n  var contract = exactly([\n    'cell',\n    'row',\n    'replace',\n    'gap'\n  ]);\n  var $_7dlzawnkjnlpb384 = {\n    modification: modification,\n    transform: transform,\n    merging: merging\n  };\n\n  var blockList = [\n    'body',\n    'p',\n    'div',\n    'article',\n    'aside',\n    'figcaption',\n    'figure',\n    'footer',\n    'header',\n    'nav',\n    'section',\n    'ol',\n    'ul',\n    'table',\n    'thead',\n    'tfoot',\n    'tbody',\n    'caption',\n    'tr',\n    'td',\n    'th',\n    'h1',\n    'h2',\n    'h3',\n    'h4',\n    'h5',\n    'h6',\n    'blockquote',\n    'pre',\n    'address'\n  ];\n  var isList = function (universe, item) {\n    var tagName = universe.property().name(item);\n    return contains([\n      'ol',\n      'ul'\n    ], tagName);\n  };\n  var isBlock = function (universe, item) {\n    var tagName = universe.property().name(item);\n    return contains(blockList, tagName);\n  };\n  var isFormatting = function (universe, item) {\n    var tagName = universe.property().name(item);\n    return contains([\n      'address',\n      'pre',\n      'p',\n      'h1',\n      'h2',\n      'h3',\n      'h4',\n      'h5',\n      'h6'\n    ], tagName);\n  };\n  var isHeading = function (universe, item) {\n    var tagName = universe.property().name(item);\n    return contains([\n      'h1',\n      'h2',\n      'h3',\n      'h4',\n      'h5',\n      'h6'\n    ], tagName);\n  };\n  var isContainer = function (universe, item) {\n    return contains([\n      'div',\n      'li',\n      'td',\n      'th',\n      'blockquote',\n      'body',\n      'caption'\n    ], universe.property().name(item));\n  };\n  var isEmptyTag = function (universe, item) {\n    return contains([\n      'br',\n      'img',\n      'hr',\n      'input'\n    ], universe.property().name(item));\n  };\n  var isFrame = function (universe, item) {\n    return universe.property().name(item) === 'iframe';\n  };\n  var isInline = function (universe, item) {\n    return !(isBlock(universe, item) || isEmptyTag(universe, item)) && universe.property().name(item) !== 'li';\n  };\n  var $_193xmgnpjnlpb39m = {\n    isBlock: isBlock,\n    isList: isList,\n    isFormatting: isFormatting,\n    isHeading: isHeading,\n    isContainer: isContainer,\n    isEmptyTag: isEmptyTag,\n    isFrame: isFrame,\n    isInline: isInline\n  };\n\n  var universe$1 = DomUniverse();\n  var isBlock$1 = function (element) {\n    return $_193xmgnpjnlpb39m.isBlock(universe$1, element);\n  };\n  var isList$1 = function (element) {\n    return $_193xmgnpjnlpb39m.isList(universe$1, element);\n  };\n  var isFormatting$1 = function (element) {\n    return $_193xmgnpjnlpb39m.isFormatting(universe$1, element);\n  };\n  var isHeading$1 = function (element) {\n    return $_193xmgnpjnlpb39m.isHeading(universe$1, element);\n  };\n  var isContainer$1 = function (element) {\n    return $_193xmgnpjnlpb39m.isContainer(universe$1, element);\n  };\n  var isEmptyTag$1 = function (element) {\n    return $_193xmgnpjnlpb39m.isEmptyTag(universe$1, element);\n  };\n  var isFrame$1 = function (element) {\n    return $_193xmgnpjnlpb39m.isFrame(universe$1, element);\n  };\n  var isInline$1 = function (element) {\n    return $_193xmgnpjnlpb39m.isInline(universe$1, element);\n  };\n  var $_7dfae7nojnlpb39j = {\n    isBlock: isBlock$1,\n    isList: isList$1,\n    isFormatting: isFormatting$1,\n    isHeading: isHeading$1,\n    isContainer: isContainer$1,\n    isEmptyTag: isEmptyTag$1,\n    isFrame: isFrame$1,\n    isInline: isInline$1\n  };\n\n  var merge = function (cells) {\n    var isBr = function (el) {\n      return $_erx5tem3jnlpb2x3.name(el) === 'br';\n    };\n    var advancedBr = function (children) {\n      return forall(children, function (c) {\n        return isBr(c) || $_erx5tem3jnlpb2x3.isText(c) && $_3lolvomkjnlpb304.get(c).trim().length === 0;\n      });\n    };\n    var isListItem = function (el) {\n      return $_erx5tem3jnlpb2x3.name(el) === 'li' || $_1nfdlmm8jnlpb2xl.ancestor(el, $_7dfae7nojnlpb39j.isList).isSome();\n    };\n    var siblingIsBlock = function (el) {\n      return $_2pl1nljjnlpb2ur.nextSibling(el).map(function (rightSibling) {\n        if ($_7dfae7nojnlpb39j.isBlock(rightSibling))\n          return true;\n        if ($_7dfae7nojnlpb39j.isEmptyTag(rightSibling)) {\n          return $_erx5tem3jnlpb2x3.name(rightSibling) === 'img' ? false : true;\n        }\n      }).getOr(false);\n    };\n    var markCell = function (cell) {\n      return $_7srx6vmijnlpb2zw.last(cell).bind(function (rightEdge) {\n        var rightSiblingIsBlock = siblingIsBlock(rightEdge);\n        return $_2pl1nljjnlpb2ur.parent(rightEdge).map(function (parent) {\n          return rightSiblingIsBlock === true || isListItem(parent) || isBr(rightEdge) || $_7dfae7nojnlpb39j.isBlock(parent) && !$_3k22killjnlpb2vb.eq(cell, parent) ? [] : [Element$$1.fromTag('br')];\n        });\n      }).getOr([]);\n    };\n    var markContent = function () {\n      var content = bind(cells, function (cell) {\n        var children = $_2pl1nljjnlpb2ur.children(cell);\n        return advancedBr(children) ? [] : children.concat(markCell(cell));\n      });\n      return content.length === 0 ? [Element$$1.fromTag('br')] : content;\n    };\n    var contents = markContent();\n    $_cybn8qmejnlpb2yr.empty(cells[0]);\n    $_a9wtnkmfjnlpb2yu.append(cells[0], contents);\n  };\n  var $_18yv0ennjnlpb38t = { merge: merge };\n\n  var hasOwnProperty$1 = Object.prototype.hasOwnProperty;\n  var shallow$1 = function (old, nu) {\n    return nu;\n  };\n  var baseMerge = function (merger) {\n    return function () {\n      var objects = new Array(arguments.length);\n      for (var i = 0; i < objects.length; i++)\n        objects[i] = arguments[i];\n      if (objects.length === 0)\n        throw new Error('Can\\'t merge zero objects');\n      var ret = {};\n      for (var j = 0; j < objects.length; j++) {\n        var curObject = objects[j];\n        for (var key in curObject)\n          if (hasOwnProperty$1.call(curObject, key)) {\n            ret[key] = merger(ret[key], curObject[key]);\n          }\n      }\n      return ret;\n    };\n  };\n\n  var merge$1 = baseMerge(shallow$1);\n\n  var cat = function (arr) {\n    var r = [];\n    var push = function (x) {\n      r.push(x);\n    };\n    for (var i = 0; i < arr.length; i++) {\n      arr[i].each(push);\n    }\n    return r;\n  };\n  var findMap = function (arr, f) {\n    for (var i = 0; i < arr.length; i++) {\n      var r = f(arr[i], i);\n      if (r.isSome()) {\n        return r;\n      }\n    }\n    return Option.none();\n  };\n\n  var addCell = function (gridRow, index, cell) {\n    var cells = gridRow.cells();\n    var before = cells.slice(0, index);\n    var after = cells.slice(index);\n    var newCells = before.concat([cell]).concat(after);\n    return setCells(gridRow, newCells);\n  };\n  var mutateCell = function (gridRow, index, cell) {\n    var cells = gridRow.cells();\n    cells[index] = cell;\n  };\n  var setCells = function (gridRow, cells) {\n    return $_csuubelcjnlpb2sv.rowcells(cells, gridRow.section());\n  };\n  var mapCells = function (gridRow, f) {\n    var cells = gridRow.cells();\n    var r = map(cells, f);\n    return $_csuubelcjnlpb2sv.rowcells(r, gridRow.section());\n  };\n  var getCell = function (gridRow, index) {\n    return gridRow.cells()[index];\n  };\n  var getCellElement = function (gridRow, index) {\n    return getCell(gridRow, index).element();\n  };\n  var cellLength = function (gridRow) {\n    return gridRow.cells().length;\n  };\n  var $_avmeb4nvjnlpb3at = {\n    addCell: addCell,\n    setCells: setCells,\n    mutateCell: mutateCell,\n    getCell: getCell,\n    getCellElement: getCellElement,\n    mapCells: mapCells,\n    cellLength: cellLength\n  };\n\n  var getColumn = function (grid, index) {\n    return map(grid, function (row) {\n      return $_avmeb4nvjnlpb3at.getCell(row, index);\n    });\n  };\n  var getRow = function (grid, index) {\n    return grid[index];\n  };\n  var findDiff = function (xs, comp) {\n    if (xs.length === 0)\n      return 0;\n    var first = xs[0];\n    var index = findIndex(xs, function (x) {\n      return !comp(first.element(), x.element());\n    });\n    return index.fold(function () {\n      return xs.length;\n    }, function (ind) {\n      return ind;\n    });\n  };\n  var subgrid = function (grid, row, column, comparator) {\n    var restOfRow = getRow(grid, row).cells().slice(column);\n    var endColIndex = findDiff(restOfRow, comparator);\n    var restOfColumn = getColumn(grid, column).slice(row);\n    var endRowIndex = findDiff(restOfColumn, comparator);\n    return {\n      colspan: constant(endColIndex),\n      rowspan: constant(endRowIndex)\n    };\n  };\n  var $_fvjljunujnlpb3an = { subgrid: subgrid };\n\n  var toDetails = function (grid, comparator) {\n    var seen = map(grid, function (row, ri) {\n      return map(row.cells(), function (col, ci) {\n        return false;\n      });\n    });\n    var updateSeen = function (ri, ci, rowspan, colspan) {\n      for (var r = ri; r < ri + rowspan; r++) {\n        for (var c = ci; c < ci + colspan; c++) {\n          seen[r][c] = true;\n        }\n      }\n    };\n    return map(grid, function (row, ri) {\n      var details = bind(row.cells(), function (cell, ci) {\n        if (seen[ri][ci] === false) {\n          var result = $_fvjljunujnlpb3an.subgrid(grid, ri, ci, comparator);\n          updateSeen(ri, ci, result.rowspan(), result.colspan());\n          return [$_csuubelcjnlpb2sv.detailnew(cell.element(), result.rowspan(), result.colspan(), cell.isNew())];\n        } else {\n          return [];\n        }\n      });\n      return $_csuubelcjnlpb2sv.rowdetails(details, row.section());\n    });\n  };\n  var toGrid = function (warehouse, generators, isNew) {\n    var grid = [];\n    for (var i = 0; i < warehouse.grid().rows(); i++) {\n      var rowCells = [];\n      for (var j = 0; j < warehouse.grid().columns(); j++) {\n        var element = $_ein1yumajnlpb2y1.getAt(warehouse, i, j).map(function (item) {\n          return $_csuubelcjnlpb2sv.elementnew(item.element(), isNew);\n        }).getOrThunk(function () {\n          return $_csuubelcjnlpb2sv.elementnew(generators.gap(), true);\n        });\n        rowCells.push(element);\n      }\n      var row = $_csuubelcjnlpb2sv.rowcells(rowCells, warehouse.all()[i].section());\n      grid.push(row);\n    }\n    return grid;\n  };\n  var $_83n6k9ntjnlpb3ai = {\n    toDetails: toDetails,\n    toGrid: toGrid\n  };\n\n  var setIfNot = function (element, property, value, ignore) {\n    if (value === ignore)\n      $_9u6utvm2jnlpb2wv.remove(element, property);\n    else\n      $_9u6utvm2jnlpb2wv.set(element, property, value);\n  };\n  var render = function (table, grid) {\n    var newRows = [];\n    var newCells = [];\n    var renderSection = function (gridSection, sectionName) {\n      var section = $_gdszrpm7jnlpb2xk.child(table, sectionName).getOrThunk(function () {\n        var tb = Element$$1.fromTag(sectionName, $_2pl1nljjnlpb2ur.owner(table).dom());\n        $_5hzj77mdjnlpb2yp.append(table, tb);\n        return tb;\n      });\n      $_cybn8qmejnlpb2yr.empty(section);\n      var rows = map(gridSection, function (row) {\n        if (row.isNew()) {\n          newRows.push(row.element());\n        }\n        var tr = row.element();\n        $_cybn8qmejnlpb2yr.empty(tr);\n        each(row.cells(), function (cell) {\n          if (cell.isNew()) {\n            newCells.push(cell.element());\n          }\n          setIfNot(cell.element(), 'colspan', cell.colspan(), 1);\n          setIfNot(cell.element(), 'rowspan', cell.rowspan(), 1);\n          $_5hzj77mdjnlpb2yp.append(tr, cell.element());\n        });\n        return tr;\n      });\n      $_a9wtnkmfjnlpb2yu.append(section, rows);\n    };\n    var removeSection = function (sectionName) {\n      $_gdszrpm7jnlpb2xk.child(table, sectionName).each($_cybn8qmejnlpb2yr.remove);\n    };\n    var renderOrRemoveSection = function (gridSection, sectionName) {\n      if (gridSection.length > 0) {\n        renderSection(gridSection, sectionName);\n      } else {\n        removeSection(sectionName);\n      }\n    };\n    var headSection = [];\n    var bodySection = [];\n    var footSection = [];\n    each(grid, function (row) {\n      switch (row.section()) {\n      case 'thead':\n        headSection.push(row);\n        break;\n      case 'tbody':\n        bodySection.push(row);\n        break;\n      case 'tfoot':\n        footSection.push(row);\n        break;\n      }\n    });\n    renderOrRemoveSection(headSection, 'thead');\n    renderOrRemoveSection(bodySection, 'tbody');\n    renderOrRemoveSection(footSection, 'tfoot');\n    return {\n      newRows: constant(newRows),\n      newCells: constant(newCells)\n    };\n  };\n  var copy$2 = function (grid) {\n    var rows = map(grid, function (row) {\n      var tr = $_7sdoc4mhjnlpb2zt.shallow(row.element());\n      each(row.cells(), function (cell) {\n        var clonedCell = $_7sdoc4mhjnlpb2zt.deep(cell.element());\n        setIfNot(clonedCell, 'colspan', cell.colspan(), 1);\n        setIfNot(clonedCell, 'rowspan', cell.rowspan(), 1);\n        $_5hzj77mdjnlpb2yp.append(tr, clonedCell);\n      });\n      return tr;\n    });\n    return rows;\n  };\n  var $_ekkk7tnwjnlpb3ax = {\n    render: render,\n    copy: copy$2\n  };\n\n  var repeat = function (repititions, f) {\n    var r = [];\n    for (var i = 0; i < repititions; i++) {\n      r.push(f(i));\n    }\n    return r;\n  };\n  var range$1 = function (start, end) {\n    var r = [];\n    for (var i = start; i < end; i++) {\n      r.push(i);\n    }\n    return r;\n  };\n  var unique = function (xs, comparator) {\n    var result = [];\n    each(xs, function (x, i) {\n      if (i < xs.length - 1 && !comparator(x, xs[i + 1])) {\n        result.push(x);\n      } else if (i === xs.length - 1) {\n        result.push(x);\n      }\n    });\n    return result;\n  };\n  var deduce = function (xs, index) {\n    if (index < 0 || index >= xs.length - 1)\n      return Option.none();\n    var current = xs[index].fold(function () {\n      var rest = reverse(xs.slice(0, index));\n      return findMap(rest, function (a, i) {\n        return a.map(function (aa) {\n          return {\n            value: aa,\n            delta: i + 1\n          };\n        });\n      });\n    }, function (c) {\n      return Option.some({\n        value: c,\n        delta: 0\n      });\n    });\n    var next = xs[index + 1].fold(function () {\n      var rest = xs.slice(index + 1);\n      return findMap(rest, function (a, i) {\n        return a.map(function (aa) {\n          return {\n            value: aa,\n            delta: i + 1\n          };\n        });\n      });\n    }, function (n) {\n      return Option.some({\n        value: n,\n        delta: 1\n      });\n    });\n    return current.bind(function (c) {\n      return next.map(function (n) {\n        var extras = n.delta + c.delta;\n        return Math.abs(n.value - c.value) / extras;\n      });\n    });\n  };\n  var $_95ie8gnzjnlpb3ci = {\n    repeat: repeat,\n    range: range$1,\n    unique: unique,\n    deduce: deduce\n  };\n\n  var columns = function (warehouse) {\n    var grid = warehouse.grid();\n    var cols = $_95ie8gnzjnlpb3ci.range(0, grid.columns());\n    var rows = $_95ie8gnzjnlpb3ci.range(0, grid.rows());\n    return map(cols, function (col) {\n      var getBlock = function () {\n        return bind(rows, function (r) {\n          return $_ein1yumajnlpb2y1.getAt(warehouse, r, col).filter(function (detail) {\n            return detail.column() === col;\n          }).fold(constant([]), function (detail) {\n            return [detail];\n          });\n        });\n      };\n      var isSingle = function (detail) {\n        return detail.colspan() === 1;\n      };\n      var getFallback = function () {\n        return $_ein1yumajnlpb2y1.getAt(warehouse, 0, col);\n      };\n      return decide(getBlock, isSingle, getFallback);\n    });\n  };\n  var decide = function (getBlock, isSingle, getFallback) {\n    var inBlock = getBlock();\n    var singleInBlock = find(inBlock, isSingle);\n    var detailOption = singleInBlock.orThunk(function () {\n      return Option.from(inBlock[0]).orThunk(getFallback);\n    });\n    return detailOption.map(function (detail) {\n      return detail.element();\n    });\n  };\n  var rows$1 = function (warehouse) {\n    var grid = warehouse.grid();\n    var rows = $_95ie8gnzjnlpb3ci.range(0, grid.rows());\n    var cols = $_95ie8gnzjnlpb3ci.range(0, grid.columns());\n    return map(rows, function (row) {\n      var getBlock = function () {\n        return bind(cols, function (c) {\n          return $_ein1yumajnlpb2y1.getAt(warehouse, row, c).filter(function (detail) {\n            return detail.row() === row;\n          }).fold(constant([]), function (detail) {\n            return [detail];\n          });\n        });\n      };\n      var isSingle = function (detail) {\n        return detail.rowspan() === 1;\n      };\n      var getFallback = function () {\n        return $_ein1yumajnlpb2y1.getAt(warehouse, row, 0);\n      };\n      return decide(getBlock, isSingle, getFallback);\n    });\n  };\n  var $_7erelxnyjnlpb3c4 = {\n    columns: columns,\n    rows: rows$1\n  };\n\n  var col = function (column, x, y, w, h) {\n    var blocker = Element$$1.fromTag('div');\n    $_g8mvdembjnlpb2ya.setAll(blocker, {\n      position: 'absolute',\n      left: x - w / 2 + 'px',\n      top: y + 'px',\n      height: h + 'px',\n      width: w + 'px'\n    });\n    $_9u6utvm2jnlpb2wv.setAll(blocker, {\n      'data-column': column,\n      'role': 'presentation'\n    });\n    return blocker;\n  };\n  var row$1 = function (row, x, y, w, h) {\n    var blocker = Element$$1.fromTag('div');\n    $_g8mvdembjnlpb2ya.setAll(blocker, {\n      position: 'absolute',\n      left: x + 'px',\n      top: y - h / 2 + 'px',\n      height: h + 'px',\n      width: w + 'px'\n    });\n    $_9u6utvm2jnlpb2wv.setAll(blocker, {\n      'data-row': row,\n      'role': 'presentation'\n    });\n    return blocker;\n  };\n  var $_4g9efto0jnlpb3cs = {\n    col: col,\n    row: row$1\n  };\n\n  var css = function (namespace) {\n    var dashNamespace = namespace.replace(/\\./g, '-');\n    var resolve = function (str) {\n      return dashNamespace + '-' + str;\n    };\n    return { resolve: resolve };\n  };\n\n  var styles = css('ephox-snooker');\n  var $_68goq0o1jnlpb3cz = { resolve: styles.resolve };\n\n  function Toggler (turnOff, turnOn, initial) {\n    var active = initial || false;\n    var on = function () {\n      turnOn();\n      active = true;\n    };\n    var off = function () {\n      turnOff();\n      active = false;\n    };\n    var toggle = function () {\n      var f = active ? off : on;\n      f();\n    };\n    var isOn = function () {\n      return active;\n    };\n    return {\n      on: on,\n      off: off,\n      toggle: toggle,\n      isOn: isOn\n    };\n  }\n\n  var read = function (element, attr) {\n    var value = $_9u6utvm2jnlpb2wv.get(element, attr);\n    return value === undefined || value === '' ? [] : value.split(' ');\n  };\n  var add = function (element, attr, id) {\n    var old = read(element, attr);\n    var nu = old.concat([id]);\n    $_9u6utvm2jnlpb2wv.set(element, attr, nu.join(' '));\n    return true;\n  };\n  var remove$3 = function (element, attr, id) {\n    var nu = filter(read(element, attr), function (v) {\n      return v !== id;\n    });\n    if (nu.length > 0)\n      $_9u6utvm2jnlpb2wv.set(element, attr, nu.join(' '));\n    else\n      $_9u6utvm2jnlpb2wv.remove(element, attr);\n    return false;\n  };\n  var $_e2xnpfo6jnlpb3df = {\n    read: read,\n    add: add,\n    remove: remove$3\n  };\n\n  var supports = function (element) {\n    return element.dom().classList !== undefined;\n  };\n  var get$7 = function (element) {\n    return $_e2xnpfo6jnlpb3df.read(element, 'class');\n  };\n  var add$1 = function (element, clazz) {\n    return $_e2xnpfo6jnlpb3df.add(element, 'class', clazz);\n  };\n  var remove$4 = function (element, clazz) {\n    return $_e2xnpfo6jnlpb3df.remove(element, 'class', clazz);\n  };\n  var toggle = function (element, clazz) {\n    if (contains(get$7(element), clazz)) {\n      return remove$4(element, clazz);\n    } else {\n      return add$1(element, clazz);\n    }\n  };\n  var $_apsphgo5jnlpb3dc = {\n    get: get$7,\n    add: add$1,\n    remove: remove$4,\n    toggle: toggle,\n    supports: supports\n  };\n\n  var add$2 = function (element, clazz) {\n    if ($_apsphgo5jnlpb3dc.supports(element))\n      element.dom().classList.add(clazz);\n    else\n      $_apsphgo5jnlpb3dc.add(element, clazz);\n  };\n  var cleanClass = function (element) {\n    var classList = $_apsphgo5jnlpb3dc.supports(element) ? element.dom().classList : $_apsphgo5jnlpb3dc.get(element);\n    if (classList.length === 0) {\n      $_9u6utvm2jnlpb2wv.remove(element, 'class');\n    }\n  };\n  var remove$5 = function (element, clazz) {\n    if ($_apsphgo5jnlpb3dc.supports(element)) {\n      var classList = element.dom().classList;\n      classList.remove(clazz);\n    } else\n      $_apsphgo5jnlpb3dc.remove(element, clazz);\n    cleanClass(element);\n  };\n  var toggle$1 = function (element, clazz) {\n    return $_apsphgo5jnlpb3dc.supports(element) ? element.dom().classList.toggle(clazz) : $_apsphgo5jnlpb3dc.toggle(element, clazz);\n  };\n  var toggler = function (element, clazz) {\n    var hasClasslist = $_apsphgo5jnlpb3dc.supports(element);\n    var classList = element.dom().classList;\n    var off = function () {\n      if (hasClasslist)\n        classList.remove(clazz);\n      else\n        $_apsphgo5jnlpb3dc.remove(element, clazz);\n    };\n    var on = function () {\n      if (hasClasslist)\n        classList.add(clazz);\n      else\n        $_apsphgo5jnlpb3dc.add(element, clazz);\n    };\n    return Toggler(off, on, has$2(element, clazz));\n  };\n  var has$2 = function (element, clazz) {\n    return $_apsphgo5jnlpb3dc.supports(element) && element.dom().classList.contains(clazz);\n  };\n  var $_fy8l6zo3jnlpb3d8 = {\n    add: add$2,\n    remove: remove$5,\n    toggle: toggle$1,\n    toggler: toggler,\n    has: has$2\n  };\n\n  var resizeBar = $_68goq0o1jnlpb3cz.resolve('resizer-bar');\n  var resizeRowBar = $_68goq0o1jnlpb3cz.resolve('resizer-rows');\n  var resizeColBar = $_68goq0o1jnlpb3cz.resolve('resizer-cols');\n  var BAR_THICKNESS = 7;\n  var clear = function (wire) {\n    var previous = $_97aehqm4jnlpb2x5.descendants(wire.parent(), '.' + resizeBar);\n    each(previous, $_cybn8qmejnlpb2yr.remove);\n  };\n  var drawBar = function (wire, positions, create) {\n    var origin = wire.origin();\n    each(positions, function (cpOption, i) {\n      cpOption.each(function (cp) {\n        var bar = create(origin, cp);\n        $_fy8l6zo3jnlpb3d8.add(bar, resizeBar);\n        $_5hzj77mdjnlpb2yp.append(wire.parent(), bar);\n      });\n    });\n  };\n  var refreshCol = function (wire, colPositions, position, tableHeight) {\n    drawBar(wire, colPositions, function (origin, cp) {\n      var colBar = $_4g9efto0jnlpb3cs.col(cp.col(), cp.x() - origin.left(), position.top() - origin.top(), BAR_THICKNESS, tableHeight);\n      $_fy8l6zo3jnlpb3d8.add(colBar, resizeColBar);\n      return colBar;\n    });\n  };\n  var refreshRow = function (wire, rowPositions, position, tableWidth) {\n    drawBar(wire, rowPositions, function (origin, cp) {\n      var rowBar = $_4g9efto0jnlpb3cs.row(cp.row(), position.left() - origin.left(), cp.y() - origin.top(), tableWidth, BAR_THICKNESS);\n      $_fy8l6zo3jnlpb3d8.add(rowBar, resizeRowBar);\n      return rowBar;\n    });\n  };\n  var refreshGrid = function (wire, table, rows, cols, hdirection, vdirection) {\n    var position = $_2ipv1snfjnlpb37b.absolute(table);\n    var rowPositions = rows.length > 0 ? hdirection.positions(rows, table) : [];\n    refreshRow(wire, rowPositions, position, $_2s7b62nbjnlpb36o.getOuter(table));\n    var colPositions = cols.length > 0 ? vdirection.positions(cols, table) : [];\n    refreshCol(wire, colPositions, position, $_6kvman9jnlpb36h.getOuter(table));\n  };\n  var refresh = function (wire, table, hdirection, vdirection) {\n    clear(wire);\n    var list = $_g8jea2lbjnlpb2sm.fromTable(table);\n    var warehouse = $_ein1yumajnlpb2y1.generate(list);\n    var rows = $_7erelxnyjnlpb3c4.rows(warehouse);\n    var cols = $_7erelxnyjnlpb3c4.columns(warehouse);\n    refreshGrid(wire, table, rows, cols, hdirection, vdirection);\n  };\n  var each$2 = function (wire, f) {\n    var bars = $_97aehqm4jnlpb2x5.descendants(wire.parent(), '.' + resizeBar);\n    each(bars, f);\n  };\n  var hide = function (wire) {\n    each$2(wire, function (bar) {\n      $_g8mvdembjnlpb2ya.set(bar, 'display', 'none');\n    });\n  };\n  var show = function (wire) {\n    each$2(wire, function (bar) {\n      $_g8mvdembjnlpb2ya.set(bar, 'display', 'block');\n    });\n  };\n  var isRowBar = function (element) {\n    return $_fy8l6zo3jnlpb3d8.has(element, resizeRowBar);\n  };\n  var isColBar = function (element) {\n    return $_fy8l6zo3jnlpb3d8.has(element, resizeColBar);\n  };\n  var $_cr2z98nxjnlpb3bk = {\n    refresh: refresh,\n    hide: hide,\n    show: show,\n    destroy: clear,\n    isRowBar: isRowBar,\n    isColBar: isColBar\n  };\n\n  var fromWarehouse = function (warehouse, generators) {\n    return $_83n6k9ntjnlpb3ai.toGrid(warehouse, generators, false);\n  };\n  var deriveRows = function (rendered, generators) {\n    var findRow = function (details) {\n      var rowOfCells = findMap(details, function (detail) {\n        return $_2pl1nljjnlpb2ur.parent(detail.element()).map(function (row) {\n          var isNew = $_2pl1nljjnlpb2ur.parent(row).isNone();\n          return $_csuubelcjnlpb2sv.elementnew(row, isNew);\n        });\n      });\n      return rowOfCells.getOrThunk(function () {\n        return $_csuubelcjnlpb2sv.elementnew(generators.row(), true);\n      });\n    };\n    return map(rendered, function (details) {\n      var row = findRow(details.details());\n      return $_csuubelcjnlpb2sv.rowdatanew(row.element(), details.details(), details.section(), row.isNew());\n    });\n  };\n  var toDetailList = function (grid, generators) {\n    var rendered = $_83n6k9ntjnlpb3ai.toDetails(grid, $_3k22killjnlpb2vb.eq);\n    return deriveRows(rendered, generators);\n  };\n  var findInWarehouse = function (warehouse, element) {\n    var all = flatten(map(warehouse.all(), function (r) {\n      return r.cells();\n    }));\n    return find(all, function (e) {\n      return $_3k22killjnlpb2vb.eq(element, e.element());\n    });\n  };\n  var run = function (operation, extract, adjustment, postAction, genWrappers) {\n    return function (wire, table, target, generators, direction) {\n      var input = $_g8jea2lbjnlpb2sm.fromTable(table);\n      var warehouse = $_ein1yumajnlpb2y1.generate(input);\n      var output = extract(warehouse, target).map(function (info) {\n        var model = fromWarehouse(warehouse, generators);\n        var result = operation(model, info, $_3k22killjnlpb2vb.eq, genWrappers(generators));\n        var grid = toDetailList(result.grid(), generators);\n        return {\n          grid: constant(grid),\n          cursor: result.cursor\n        };\n      });\n      return output.fold(function () {\n        return Option.none();\n      }, function (out) {\n        var newElements = $_ekkk7tnwjnlpb3ax.render(table, out.grid());\n        adjustment(table, out.grid(), direction);\n        postAction(table);\n        $_cr2z98nxjnlpb3bk.refresh(wire, table, $_6u52cqnejnlpb36x.height, direction);\n        return Option.some({\n          cursor: out.cursor,\n          newRows: newElements.newRows,\n          newCells: newElements.newCells\n        });\n      });\n    };\n  };\n  var onCell = function (warehouse, target) {\n    return $_em4z2mldjnlpb2sz.cell(target.element()).bind(function (cell) {\n      return findInWarehouse(warehouse, cell);\n    });\n  };\n  var onPaste = function (warehouse, target) {\n    return $_em4z2mldjnlpb2sz.cell(target.element()).bind(function (cell) {\n      return findInWarehouse(warehouse, cell).map(function (details) {\n        return merge$1(details, {\n          generators: target.generators,\n          clipboard: target.clipboard\n        });\n      });\n    });\n  };\n  var onPasteRows = function (warehouse, target) {\n    var details = map(target.selection(), function (cell) {\n      return $_em4z2mldjnlpb2sz.cell(cell).bind(function (lc) {\n        return findInWarehouse(warehouse, lc);\n      });\n    });\n    var cells = cat(details);\n    return cells.length > 0 ? Option.some(merge$1({ cells: cells }, {\n      generators: target.generators,\n      clipboard: target.clipboard\n    })) : Option.none();\n  };\n  var onMergable = function (warehouse, target) {\n    return target.mergable();\n  };\n  var onUnmergable = function (warehouse, target) {\n    return target.unmergable();\n  };\n  var onCells = function (warehouse, target) {\n    var details = map(target.selection(), function (cell) {\n      return $_em4z2mldjnlpb2sz.cell(cell).bind(function (lc) {\n        return findInWarehouse(warehouse, lc);\n      });\n    });\n    var cells = cat(details);\n    return cells.length > 0 ? Option.some(cells) : Option.none();\n  };\n  var $_dkrxmunqjnlpb39s = {\n    run: run,\n    toDetailList: toDetailList,\n    onCell: onCell,\n    onCells: onCells,\n    onPaste: onPaste,\n    onPasteRows: onPasteRows,\n    onMergable: onMergable,\n    onUnmergable: onUnmergable\n  };\n\n  var value$1 = function (o) {\n    var is = function (v) {\n      return o === v;\n    };\n    var or = function (opt) {\n      return value$1(o);\n    };\n    var orThunk = function (f) {\n      return value$1(o);\n    };\n    var map = function (f) {\n      return value$1(f(o));\n    };\n    var each = function (f) {\n      f(o);\n    };\n    var bind = function (f) {\n      return f(o);\n    };\n    var fold = function (_, onValue) {\n      return onValue(o);\n    };\n    var exists = function (f) {\n      return f(o);\n    };\n    var forall = function (f) {\n      return f(o);\n    };\n    var toOption = function () {\n      return Option.some(o);\n    };\n    return {\n      is: is,\n      isValue: always,\n      isError: never,\n      getOr: constant(o),\n      getOrThunk: constant(o),\n      getOrDie: constant(o),\n      or: or,\n      orThunk: orThunk,\n      fold: fold,\n      map: map,\n      each: each,\n      bind: bind,\n      exists: exists,\n      forall: forall,\n      toOption: toOption\n    };\n  };\n  var error = function (message) {\n    var getOrThunk = function (f) {\n      return f();\n    };\n    var getOrDie = function () {\n      return die(String(message))();\n    };\n    var or = function (opt) {\n      return opt;\n    };\n    var orThunk = function (f) {\n      return f();\n    };\n    var map = function (f) {\n      return error(message);\n    };\n    var bind = function (f) {\n      return error(message);\n    };\n    var fold = function (onError, _) {\n      return onError(message);\n    };\n    return {\n      is: never,\n      isValue: never,\n      isError: always,\n      getOr: identity,\n      getOrThunk: getOrThunk,\n      getOrDie: getOrDie,\n      or: or,\n      orThunk: orThunk,\n      fold: fold,\n      map: map,\n      each: noop,\n      bind: bind,\n      exists: never,\n      forall: always,\n      toOption: Option.none\n    };\n  };\n  var Result = {\n    value: value$1,\n    error: error\n  };\n\n  var measure = function (startAddress, gridA, gridB) {\n    if (startAddress.row() >= gridA.length || startAddress.column() > $_avmeb4nvjnlpb3at.cellLength(gridA[0]))\n      return Result.error('invalid start address out of table bounds, row: ' + startAddress.row() + ', column: ' + startAddress.column());\n    var rowRemainder = gridA.slice(startAddress.row());\n    var colRemainder = rowRemainder[0].cells().slice(startAddress.column());\n    var colRequired = $_avmeb4nvjnlpb3at.cellLength(gridB[0]);\n    var rowRequired = gridB.length;\n    return Result.value({\n      rowDelta: constant(rowRemainder.length - rowRequired),\n      colDelta: constant(colRemainder.length - colRequired)\n    });\n  };\n  var measureWidth = function (gridA, gridB) {\n    var colLengthA = $_avmeb4nvjnlpb3at.cellLength(gridA[0]);\n    var colLengthB = $_avmeb4nvjnlpb3at.cellLength(gridB[0]);\n    return {\n      rowDelta: constant(0),\n      colDelta: constant(colLengthA - colLengthB)\n    };\n  };\n  var fill = function (cells, generator) {\n    return map(cells, function () {\n      return $_csuubelcjnlpb2sv.elementnew(generator.cell(), true);\n    });\n  };\n  var rowFill = function (grid, amount, generator) {\n    return grid.concat($_95ie8gnzjnlpb3ci.repeat(amount, function (_row) {\n      return $_avmeb4nvjnlpb3at.setCells(grid[grid.length - 1], fill(grid[grid.length - 1].cells(), generator));\n    }));\n  };\n  var colFill = function (grid, amount, generator) {\n    return map(grid, function (row) {\n      return $_avmeb4nvjnlpb3at.setCells(row, row.cells().concat(fill($_95ie8gnzjnlpb3ci.range(0, amount), generator)));\n    });\n  };\n  var tailor = function (gridA, delta, generator) {\n    var fillCols = delta.colDelta() < 0 ? colFill : identity;\n    var fillRows = delta.rowDelta() < 0 ? rowFill : identity;\n    var modifiedCols = fillCols(gridA, Math.abs(delta.colDelta()), generator);\n    var tailoredGrid = fillRows(modifiedCols, Math.abs(delta.rowDelta()), generator);\n    return tailoredGrid;\n  };\n  var $_1s1cajo8jnlpb3do = {\n    measure: measure,\n    measureWidth: measureWidth,\n    tailor: tailor\n  };\n\n  var merge$2 = function (grid, bounds, comparator, substitution) {\n    if (grid.length === 0)\n      return grid;\n    for (var i = bounds.startRow(); i <= bounds.finishRow(); i++) {\n      for (var j = bounds.startCol(); j <= bounds.finishCol(); j++) {\n        $_avmeb4nvjnlpb3at.mutateCell(grid[i], j, $_csuubelcjnlpb2sv.elementnew(substitution(), false));\n      }\n    }\n    return grid;\n  };\n  var unmerge = function (grid, target, comparator, substitution) {\n    var first = true;\n    for (var i = 0; i < grid.length; i++) {\n      for (var j = 0; j < $_avmeb4nvjnlpb3at.cellLength(grid[0]); j++) {\n        var current = $_avmeb4nvjnlpb3at.getCellElement(grid[i], j);\n        var isToReplace = comparator(current, target);\n        if (isToReplace === true && first === false) {\n          $_avmeb4nvjnlpb3at.mutateCell(grid[i], j, $_csuubelcjnlpb2sv.elementnew(substitution(), true));\n        } else if (isToReplace === true) {\n          first = false;\n        }\n      }\n    }\n    return grid;\n  };\n  var uniqueCells = function (row, comparator) {\n    return foldl(row, function (rest, cell) {\n      return exists(rest, function (currentCell) {\n        return comparator(currentCell.element(), cell.element());\n      }) ? rest : rest.concat([cell]);\n    }, []);\n  };\n  var splitRows = function (grid, index, comparator, substitution) {\n    if (index > 0 && index < grid.length) {\n      var rowPrevCells = grid[index - 1].cells();\n      var cells = uniqueCells(rowPrevCells, comparator);\n      each(cells, function (cell) {\n        var replacement = Option.none();\n        for (var i = index; i < grid.length; i++) {\n          for (var j = 0; j < $_avmeb4nvjnlpb3at.cellLength(grid[0]); j++) {\n            var current = grid[i].cells()[j];\n            var isToReplace = comparator(current.element(), cell.element());\n            if (isToReplace) {\n              if (replacement.isNone()) {\n                replacement = Option.some(substitution());\n              }\n              replacement.each(function (sub) {\n                $_avmeb4nvjnlpb3at.mutateCell(grid[i], j, $_csuubelcjnlpb2sv.elementnew(sub, true));\n              });\n            }\n          }\n        }\n      });\n    }\n    return grid;\n  };\n  var $_dod35voajnlpb3e0 = {\n    merge: merge$2,\n    unmerge: unmerge,\n    splitRows: splitRows\n  };\n\n  var isSpanning = function (grid, row, col, comparator) {\n    var candidate = $_avmeb4nvjnlpb3at.getCell(grid[row], col);\n    var matching = curry(comparator, candidate.element());\n    var currentRow = grid[row];\n    return grid.length > 1 && $_avmeb4nvjnlpb3at.cellLength(currentRow) > 1 && (col > 0 && matching($_avmeb4nvjnlpb3at.getCellElement(currentRow, col - 1)) || col < currentRow.length - 1 && matching($_avmeb4nvjnlpb3at.getCellElement(currentRow, col + 1)) || row > 0 && matching($_avmeb4nvjnlpb3at.getCellElement(grid[row - 1], col)) || row < grid.length - 1 && matching($_avmeb4nvjnlpb3at.getCellElement(grid[row + 1], col)));\n  };\n  var mergeTables = function (startAddress, gridA, gridB, generator, comparator) {\n    var startRow = startAddress.row();\n    var startCol = startAddress.column();\n    var mergeHeight = gridB.length;\n    var mergeWidth = $_avmeb4nvjnlpb3at.cellLength(gridB[0]);\n    var endRow = startRow + mergeHeight;\n    var endCol = startCol + mergeWidth;\n    for (var r = startRow; r < endRow; r++) {\n      for (var c = startCol; c < endCol; c++) {\n        if (isSpanning(gridA, r, c, comparator)) {\n          $_dod35voajnlpb3e0.unmerge(gridA, $_avmeb4nvjnlpb3at.getCellElement(gridA[r], c), comparator, generator.cell);\n        }\n        var newCell = $_avmeb4nvjnlpb3at.getCellElement(gridB[r - startRow], c - startCol);\n        var replacement = generator.replace(newCell);\n        $_avmeb4nvjnlpb3at.mutateCell(gridA[r], c, $_csuubelcjnlpb2sv.elementnew(replacement, true));\n      }\n    }\n    return gridA;\n  };\n  var merge$3 = function (startAddress, gridA, gridB, generator, comparator) {\n    var result = $_1s1cajo8jnlpb3do.measure(startAddress, gridA, gridB);\n    return result.map(function (delta) {\n      var fittedGrid = $_1s1cajo8jnlpb3do.tailor(gridA, delta, generator);\n      return mergeTables(startAddress, fittedGrid, gridB, generator, comparator);\n    });\n  };\n  var insert = function (index, gridA, gridB, generator, comparator) {\n    $_dod35voajnlpb3e0.splitRows(gridA, index, comparator, generator.cell);\n    var delta = $_1s1cajo8jnlpb3do.measureWidth(gridB, gridA);\n    var fittedNewGrid = $_1s1cajo8jnlpb3do.tailor(gridB, delta, generator);\n    var secondDelta = $_1s1cajo8jnlpb3do.measureWidth(gridA, fittedNewGrid);\n    var fittedOldGrid = $_1s1cajo8jnlpb3do.tailor(gridA, secondDelta, generator);\n    return fittedOldGrid.slice(0, index).concat(fittedNewGrid).concat(fittedOldGrid.slice(index, fittedOldGrid.length));\n  };\n  var $_iqv78o7jnlpb3dj = {\n    merge: merge$3,\n    insert: insert\n  };\n\n  var insertRowAt = function (grid, index, example, comparator, substitution) {\n    var before = grid.slice(0, index);\n    var after = grid.slice(index);\n    var between = $_avmeb4nvjnlpb3at.mapCells(grid[example], function (ex, c) {\n      var withinSpan = index > 0 && index < grid.length && comparator($_avmeb4nvjnlpb3at.getCellElement(grid[index - 1], c), $_avmeb4nvjnlpb3at.getCellElement(grid[index], c));\n      var ret = withinSpan ? $_avmeb4nvjnlpb3at.getCell(grid[index], c) : $_csuubelcjnlpb2sv.elementnew(substitution(ex.element(), comparator), true);\n      return ret;\n    });\n    return before.concat([between]).concat(after);\n  };\n  var insertColumnAt = function (grid, index, example, comparator, substitution) {\n    return map(grid, function (row) {\n      var withinSpan = index > 0 && index < $_avmeb4nvjnlpb3at.cellLength(row) && comparator($_avmeb4nvjnlpb3at.getCellElement(row, index - 1), $_avmeb4nvjnlpb3at.getCellElement(row, index));\n      var sub = withinSpan ? $_avmeb4nvjnlpb3at.getCell(row, index) : $_csuubelcjnlpb2sv.elementnew(substitution($_avmeb4nvjnlpb3at.getCellElement(row, example), comparator), true);\n      return $_avmeb4nvjnlpb3at.addCell(row, index, sub);\n    });\n  };\n  var splitCellIntoColumns = function (grid, exampleRow, exampleCol, comparator, substitution) {\n    var index = exampleCol + 1;\n    return map(grid, function (row, i) {\n      var isTargetCell = i === exampleRow;\n      var sub = isTargetCell ? $_csuubelcjnlpb2sv.elementnew(substitution($_avmeb4nvjnlpb3at.getCellElement(row, exampleCol), comparator), true) : $_avmeb4nvjnlpb3at.getCell(row, exampleCol);\n      return $_avmeb4nvjnlpb3at.addCell(row, index, sub);\n    });\n  };\n  var splitCellIntoRows = function (grid, exampleRow, exampleCol, comparator, substitution) {\n    var index = exampleRow + 1;\n    var before = grid.slice(0, index);\n    var after = grid.slice(index);\n    var between = $_avmeb4nvjnlpb3at.mapCells(grid[exampleRow], function (ex, i) {\n      var isTargetCell = i === exampleCol;\n      return isTargetCell ? $_csuubelcjnlpb2sv.elementnew(substitution(ex.element(), comparator), true) : ex;\n    });\n    return before.concat([between]).concat(after);\n  };\n  var deleteColumnsAt = function (grid, start, finish) {\n    var rows = map(grid, function (row) {\n      var cells = row.cells().slice(0, start).concat(row.cells().slice(finish + 1));\n      return $_csuubelcjnlpb2sv.rowcells(cells, row.section());\n    });\n    return filter(rows, function (row) {\n      return row.cells().length > 0;\n    });\n  };\n  var deleteRowsAt = function (grid, start, finish) {\n    return grid.slice(0, start).concat(grid.slice(finish + 1));\n  };\n  var $_8e5qwrobjnlpb3e8 = {\n    insertRowAt: insertRowAt,\n    insertColumnAt: insertColumnAt,\n    splitCellIntoColumns: splitCellIntoColumns,\n    splitCellIntoRows: splitCellIntoRows,\n    deleteRowsAt: deleteRowsAt,\n    deleteColumnsAt: deleteColumnsAt\n  };\n\n  var replaceIn = function (grid, targets, comparator, substitution) {\n    var isTarget = function (cell) {\n      return exists(targets, function (target) {\n        return comparator(cell.element(), target.element());\n      });\n    };\n    return map(grid, function (row) {\n      return $_avmeb4nvjnlpb3at.mapCells(row, function (cell) {\n        return isTarget(cell) ? $_csuubelcjnlpb2sv.elementnew(substitution(cell.element(), comparator), true) : cell;\n      });\n    });\n  };\n  var notStartRow = function (grid, rowIndex, colIndex, comparator) {\n    return $_avmeb4nvjnlpb3at.getCellElement(grid[rowIndex], colIndex) !== undefined && (rowIndex > 0 && comparator($_avmeb4nvjnlpb3at.getCellElement(grid[rowIndex - 1], colIndex), $_avmeb4nvjnlpb3at.getCellElement(grid[rowIndex], colIndex)));\n  };\n  var notStartColumn = function (row, index, comparator) {\n    return index > 0 && comparator($_avmeb4nvjnlpb3at.getCellElement(row, index - 1), $_avmeb4nvjnlpb3at.getCellElement(row, index));\n  };\n  var replaceColumn = function (grid, index, comparator, substitution) {\n    var targets = bind(grid, function (row, i) {\n      var alreadyAdded = notStartRow(grid, i, index, comparator) || notStartColumn(row, index, comparator);\n      return alreadyAdded ? [] : [$_avmeb4nvjnlpb3at.getCell(row, index)];\n    });\n    return replaceIn(grid, targets, comparator, substitution);\n  };\n  var replaceRow = function (grid, index, comparator, substitution) {\n    var targetRow = grid[index];\n    var targets = bind(targetRow.cells(), function (item, i) {\n      var alreadyAdded = notStartRow(grid, index, i, comparator) || notStartColumn(targetRow, i, comparator);\n      return alreadyAdded ? [] : [item];\n    });\n    return replaceIn(grid, targets, comparator, substitution);\n  };\n  var $_69d1pfocjnlpb3ei = {\n    replaceColumn: replaceColumn,\n    replaceRow: replaceRow\n  };\n\n  var none$1 = function () {\n    return folder(function (n, o, l, m, r) {\n      return n();\n    });\n  };\n  var only = function (index) {\n    return folder(function (n, o, l, m, r) {\n      return o(index);\n    });\n  };\n  var left = function (index, next) {\n    return folder(function (n, o, l, m, r) {\n      return l(index, next);\n    });\n  };\n  var middle = function (prev, index, next) {\n    return folder(function (n, o, l, m, r) {\n      return m(prev, index, next);\n    });\n  };\n  var right = function (prev, index) {\n    return folder(function (n, o, l, m, r) {\n      return r(prev, index);\n    });\n  };\n  var folder = function (fold) {\n    return { fold: fold };\n  };\n  var $_4ks4roofjnlpb3ex = {\n    none: none$1,\n    only: only,\n    left: left,\n    middle: middle,\n    right: right\n  };\n\n  var neighbours$1 = function (input, index) {\n    if (input.length === 0)\n      return $_4ks4roofjnlpb3ex.none();\n    if (input.length === 1)\n      return $_4ks4roofjnlpb3ex.only(0);\n    if (index === 0)\n      return $_4ks4roofjnlpb3ex.left(0, 1);\n    if (index === input.length - 1)\n      return $_4ks4roofjnlpb3ex.right(index - 1, index);\n    if (index > 0 && index < input.length - 1)\n      return $_4ks4roofjnlpb3ex.middle(index - 1, index, index + 1);\n    return $_4ks4roofjnlpb3ex.none();\n  };\n  var determine = function (input, column, step, tableSize) {\n    var result = input.slice(0);\n    var context = neighbours$1(input, column);\n    var zero = function (array) {\n      return map(array, constant(0));\n    };\n    var onNone = constant(zero(result));\n    var onOnly = function (index) {\n      return tableSize.singleColumnWidth(result[index], step);\n    };\n    var onChange = function (index, next) {\n      if (step >= 0) {\n        var newNext = Math.max(tableSize.minCellWidth(), result[next] - step);\n        return zero(result.slice(0, index)).concat([\n          step,\n          newNext - result[next]\n        ]).concat(zero(result.slice(next + 1)));\n      } else {\n        var newThis = Math.max(tableSize.minCellWidth(), result[index] + step);\n        var diffx = result[index] - newThis;\n        return zero(result.slice(0, index)).concat([\n          newThis - result[index],\n          diffx\n        ]).concat(zero(result.slice(next + 1)));\n      }\n    };\n    var onLeft = onChange;\n    var onMiddle = function (prev, index, next) {\n      return onChange(index, next);\n    };\n    var onRight = function (prev, index) {\n      if (step >= 0) {\n        return zero(result.slice(0, index)).concat([step]);\n      } else {\n        var size = Math.max(tableSize.minCellWidth(), result[index] + step);\n        return zero(result.slice(0, index)).concat([size - result[index]]);\n      }\n    };\n    return context.fold(onNone, onOnly, onLeft, onMiddle, onRight);\n  };\n  var $_dns8meoejnlpb3er = { determine: determine };\n\n  var getSpan$1 = function (cell, type) {\n    return $_9u6utvm2jnlpb2wv.has(cell, type) && parseInt($_9u6utvm2jnlpb2wv.get(cell, type), 10) > 1;\n  };\n  var hasColspan = function (cell) {\n    return getSpan$1(cell, 'colspan');\n  };\n  var hasRowspan = function (cell) {\n    return getSpan$1(cell, 'rowspan');\n  };\n  var getInt = function (element, property) {\n    return parseInt($_g8mvdembjnlpb2ya.get(element, property), 10);\n  };\n  var $_eoi5lkohjnlpb3f8 = {\n    hasColspan: hasColspan,\n    hasRowspan: hasRowspan,\n    minWidth: constant(10),\n    minHeight: constant(10),\n    getInt: getInt\n  };\n\n  var getRaw$1 = function (cell, property, getter) {\n    return $_g8mvdembjnlpb2ya.getRaw(cell, property).fold(function () {\n      return getter(cell) + 'px';\n    }, function (raw) {\n      return raw;\n    });\n  };\n  var getRawW = function (cell) {\n    return getRaw$1(cell, 'width', $_8c9k1dn7jnlpb35o.getPixelWidth);\n  };\n  var getRawH = function (cell) {\n    return getRaw$1(cell, 'height', $_8c9k1dn7jnlpb35o.getHeight);\n  };\n  var getWidthFrom = function (warehouse, direction, getWidth, fallback, tableSize) {\n    var columns = $_7erelxnyjnlpb3c4.columns(warehouse);\n    var backups = map(columns, function (cellOption) {\n      return cellOption.map(direction.edge);\n    });\n    return map(columns, function (cellOption, c) {\n      var columnCell = cellOption.filter(not($_eoi5lkohjnlpb3f8.hasColspan));\n      return columnCell.fold(function () {\n        var deduced = $_95ie8gnzjnlpb3ci.deduce(backups, c);\n        return fallback(deduced);\n      }, function (cell) {\n        return getWidth(cell, tableSize);\n      });\n    });\n  };\n  var getDeduced = function (deduced) {\n    return deduced.map(function (d) {\n      return d + 'px';\n    }).getOr('');\n  };\n  var getRawWidths = function (warehouse, direction) {\n    return getWidthFrom(warehouse, direction, getRawW, getDeduced);\n  };\n  var getPercentageWidths = function (warehouse, direction, tableSize) {\n    return getWidthFrom(warehouse, direction, $_8c9k1dn7jnlpb35o.getPercentageWidth, function (deduced) {\n      return deduced.fold(function () {\n        return tableSize.minCellWidth();\n      }, function (cellWidth) {\n        return cellWidth / tableSize.pixelWidth() * 100;\n      });\n    }, tableSize);\n  };\n  var getPixelWidths = function (warehouse, direction, tableSize) {\n    return getWidthFrom(warehouse, direction, $_8c9k1dn7jnlpb35o.getPixelWidth, function (deduced) {\n      return deduced.getOrThunk(tableSize.minCellWidth);\n    }, tableSize);\n  };\n  var getHeightFrom = function (warehouse, direction, getHeight, fallback) {\n    var rows = $_7erelxnyjnlpb3c4.rows(warehouse);\n    var backups = map(rows, function (cellOption) {\n      return cellOption.map(direction.edge);\n    });\n    return map(rows, function (cellOption, c) {\n      var rowCell = cellOption.filter(not($_eoi5lkohjnlpb3f8.hasRowspan));\n      return rowCell.fold(function () {\n        var deduced = $_95ie8gnzjnlpb3ci.deduce(backups, c);\n        return fallback(deduced);\n      }, function (cell) {\n        return getHeight(cell);\n      });\n    });\n  };\n  var getPixelHeights = function (warehouse, direction) {\n    return getHeightFrom(warehouse, direction, $_8c9k1dn7jnlpb35o.getHeight, function (deduced) {\n      return deduced.getOrThunk($_eoi5lkohjnlpb3f8.minHeight);\n    });\n  };\n  var getRawHeights = function (warehouse, direction) {\n    return getHeightFrom(warehouse, direction, getRawH, getDeduced);\n  };\n  var $_g1addgogjnlpb3ez = {\n    getRawWidths: getRawWidths,\n    getPixelWidths: getPixelWidths,\n    getPercentageWidths: getPercentageWidths,\n    getPixelHeights: getPixelHeights,\n    getRawHeights: getRawHeights\n  };\n\n  var total = function (start, end, measures) {\n    var r = 0;\n    for (var i = start; i < end; i++) {\n      r += measures[i] !== undefined ? measures[i] : 0;\n    }\n    return r;\n  };\n  var recalculateWidth = function (warehouse, widths) {\n    var all = $_ein1yumajnlpb2y1.justCells(warehouse);\n    return map(all, function (cell) {\n      var width = total(cell.column(), cell.column() + cell.colspan(), widths);\n      return {\n        element: cell.element,\n        width: constant(width),\n        colspan: cell.colspan\n      };\n    });\n  };\n  var recalculateHeight = function (warehouse, heights) {\n    var all = $_ein1yumajnlpb2y1.justCells(warehouse);\n    return map(all, function (cell) {\n      var height = total(cell.row(), cell.row() + cell.rowspan(), heights);\n      return {\n        element: cell.element,\n        height: constant(height),\n        rowspan: cell.rowspan\n      };\n    });\n  };\n  var matchRowHeight = function (warehouse, heights) {\n    return map(warehouse.all(), function (row, i) {\n      return {\n        element: row.element,\n        height: constant(heights[i])\n      };\n    });\n  };\n  var $_ew57pqoijnlpb3fg = {\n    recalculateWidth: recalculateWidth,\n    recalculateHeight: recalculateHeight,\n    matchRowHeight: matchRowHeight\n  };\n\n  var percentageSize = function (width, element) {\n    var floatWidth = parseFloat(width);\n    var pixelWidth = $_2s7b62nbjnlpb36o.get(element);\n    var getCellDelta = function (delta) {\n      return delta / pixelWidth * 100;\n    };\n    var singleColumnWidth = function (width, _delta) {\n      return [100 - width];\n    };\n    var minCellWidth = function () {\n      return $_eoi5lkohjnlpb3f8.minWidth() / pixelWidth * 100;\n    };\n    var setTableWidth = function (table, _newWidths, delta) {\n      var total = floatWidth + delta;\n      $_8c9k1dn7jnlpb35o.setPercentageWidth(table, total);\n    };\n    return {\n      width: constant(floatWidth),\n      pixelWidth: constant(pixelWidth),\n      getWidths: $_g1addgogjnlpb3ez.getPercentageWidths,\n      getCellDelta: getCellDelta,\n      singleColumnWidth: singleColumnWidth,\n      minCellWidth: minCellWidth,\n      setElementWidth: $_8c9k1dn7jnlpb35o.setPercentageWidth,\n      setTableWidth: setTableWidth\n    };\n  };\n  var pixelSize = function (width) {\n    var intWidth = parseInt(width, 10);\n    var getCellDelta = identity;\n    var singleColumnWidth = function (width, delta) {\n      var newNext = Math.max($_eoi5lkohjnlpb3f8.minWidth(), width + delta);\n      return [newNext - width];\n    };\n    var setTableWidth = function (table, newWidths, _delta) {\n      var total = foldr(newWidths, function (b, a) {\n        return b + a;\n      }, 0);\n      $_8c9k1dn7jnlpb35o.setPixelWidth(table, total);\n    };\n    return {\n      width: constant(intWidth),\n      pixelWidth: constant(intWidth),\n      getWidths: $_g1addgogjnlpb3ez.getPixelWidths,\n      getCellDelta: getCellDelta,\n      singleColumnWidth: singleColumnWidth,\n      minCellWidth: $_eoi5lkohjnlpb3f8.minWidth,\n      setElementWidth: $_8c9k1dn7jnlpb35o.setPixelWidth,\n      setTableWidth: setTableWidth\n    };\n  };\n  var chooseSize = function (element, width) {\n    if ($_8c9k1dn7jnlpb35o.percentageBasedSizeRegex().test(width)) {\n      var percentMatch = $_8c9k1dn7jnlpb35o.percentageBasedSizeRegex().exec(width);\n      return percentageSize(percentMatch[1], element);\n    } else if ($_8c9k1dn7jnlpb35o.pixelBasedSizeRegex().test(width)) {\n      var pixelMatch = $_8c9k1dn7jnlpb35o.pixelBasedSizeRegex().exec(width);\n      return pixelSize(pixelMatch[1]);\n    } else {\n      var fallbackWidth = $_2s7b62nbjnlpb36o.get(element);\n      return pixelSize(fallbackWidth);\n    }\n  };\n  var getTableSize = function (element) {\n    var width = $_8c9k1dn7jnlpb35o.getRawWidth(element);\n    return width.fold(function () {\n      var fallbackWidth = $_2s7b62nbjnlpb36o.get(element);\n      return pixelSize(fallbackWidth);\n    }, function (width) {\n      return chooseSize(element, width);\n    });\n  };\n  var $_3yegniojjnlpb3fo = { getTableSize: getTableSize };\n\n  var getWarehouse$1 = function (list) {\n    return $_ein1yumajnlpb2y1.generate(list);\n  };\n  var sumUp = function (newSize) {\n    return foldr(newSize, function (b, a) {\n      return b + a;\n    }, 0);\n  };\n  var getTableWarehouse = function (table) {\n    var list = $_g8jea2lbjnlpb2sm.fromTable(table);\n    return getWarehouse$1(list);\n  };\n  var adjustWidth = function (table, delta, index, direction) {\n    var tableSize = $_3yegniojjnlpb3fo.getTableSize(table);\n    var step = tableSize.getCellDelta(delta);\n    var warehouse = getTableWarehouse(table);\n    var widths = tableSize.getWidths(warehouse, direction, tableSize);\n    var deltas = $_dns8meoejnlpb3er.determine(widths, index, step, tableSize);\n    var newWidths = map(deltas, function (dx, i) {\n      return dx + widths[i];\n    });\n    var newSizes = $_ew57pqoijnlpb3fg.recalculateWidth(warehouse, newWidths);\n    each(newSizes, function (cell) {\n      tableSize.setElementWidth(cell.element(), cell.width());\n    });\n    if (index === warehouse.grid().columns() - 1) {\n      tableSize.setTableWidth(table, newWidths, step);\n    }\n  };\n  var adjustHeight = function (table, delta, index, direction) {\n    var warehouse = getTableWarehouse(table);\n    var heights = $_g1addgogjnlpb3ez.getPixelHeights(warehouse, direction);\n    var newHeights = map(heights, function (dy, i) {\n      return index === i ? Math.max(delta + dy, $_eoi5lkohjnlpb3f8.minHeight()) : dy;\n    });\n    var newCellSizes = $_ew57pqoijnlpb3fg.recalculateHeight(warehouse, newHeights);\n    var newRowSizes = $_ew57pqoijnlpb3fg.matchRowHeight(warehouse, newHeights);\n    each(newRowSizes, function (row) {\n      $_8c9k1dn7jnlpb35o.setHeight(row.element(), row.height());\n    });\n    each(newCellSizes, function (cell) {\n      $_8c9k1dn7jnlpb35o.setHeight(cell.element(), cell.height());\n    });\n    var total = sumUp(newHeights);\n    $_8c9k1dn7jnlpb35o.setHeight(table, total);\n  };\n  var adjustWidthTo = function (table, list, direction) {\n    var tableSize = $_3yegniojjnlpb3fo.getTableSize(table);\n    var warehouse = getWarehouse$1(list);\n    var widths = tableSize.getWidths(warehouse, direction, tableSize);\n    var newSizes = $_ew57pqoijnlpb3fg.recalculateWidth(warehouse, widths);\n    each(newSizes, function (cell) {\n      tableSize.setElementWidth(cell.element(), cell.width());\n    });\n    var total = foldr(widths, function (b, a) {\n      return a + b;\n    }, 0);\n    if (newSizes.length > 0) {\n      tableSize.setElementWidth(table, total);\n    }\n  };\n  var $_ed8i3sodjnlpb3em = {\n    adjustWidth: adjustWidth,\n    adjustHeight: adjustHeight,\n    adjustWidthTo: adjustWidthTo\n  };\n\n  var prune = function (table) {\n    var cells = $_em4z2mldjnlpb2sz.cells(table);\n    if (cells.length === 0)\n      $_cybn8qmejnlpb2yr.remove(table);\n  };\n  var outcome = Immutable('grid', 'cursor');\n  var elementFromGrid = function (grid, row, column) {\n    return findIn(grid, row, column).orThunk(function () {\n      return findIn(grid, 0, 0);\n    });\n  };\n  var findIn = function (grid, row, column) {\n    return Option.from(grid[row]).bind(function (r) {\n      return Option.from(r.cells()[column]).bind(function (c) {\n        return Option.from(c.element());\n      });\n    });\n  };\n  var bundle = function (grid, row, column) {\n    return outcome(grid, findIn(grid, row, column));\n  };\n  var uniqueRows = function (details) {\n    return foldl(details, function (rest, detail) {\n      return exists(rest, function (currentDetail) {\n        return currentDetail.row() === detail.row();\n      }) ? rest : rest.concat([detail]);\n    }, []).sort(function (detailA, detailB) {\n      return detailA.row() - detailB.row();\n    });\n  };\n  var uniqueColumns = function (details) {\n    return foldl(details, function (rest, detail) {\n      return exists(rest, function (currentDetail) {\n        return currentDetail.column() === detail.column();\n      }) ? rest : rest.concat([detail]);\n    }, []).sort(function (detailA, detailB) {\n      return detailA.column() - detailB.column();\n    });\n  };\n  var insertRowBefore = function (grid, detail, comparator, genWrappers) {\n    var example = detail.row();\n    var targetIndex = detail.row();\n    var newGrid = $_8e5qwrobjnlpb3e8.insertRowAt(grid, targetIndex, example, comparator, genWrappers.getOrInit);\n    return bundle(newGrid, targetIndex, detail.column());\n  };\n  var insertRowsBefore = function (grid, details, comparator, genWrappers) {\n    var example = details[0].row();\n    var targetIndex = details[0].row();\n    var rows = uniqueRows(details);\n    var newGrid = foldl(rows, function (newGrid, _row) {\n      return $_8e5qwrobjnlpb3e8.insertRowAt(newGrid, targetIndex, example, comparator, genWrappers.getOrInit);\n    }, grid);\n    return bundle(newGrid, targetIndex, details[0].column());\n  };\n  var insertRowAfter = function (grid, detail, comparator, genWrappers) {\n    var example = detail.row();\n    var targetIndex = detail.row() + detail.rowspan();\n    var newGrid = $_8e5qwrobjnlpb3e8.insertRowAt(grid, targetIndex, example, comparator, genWrappers.getOrInit);\n    return bundle(newGrid, targetIndex, detail.column());\n  };\n  var insertRowsAfter = function (grid, details, comparator, genWrappers) {\n    var rows = uniqueRows(details);\n    var example = rows[rows.length - 1].row();\n    var targetIndex = rows[rows.length - 1].row() + rows[rows.length - 1].rowspan();\n    var newGrid = foldl(rows, function (newGrid, _row) {\n      return $_8e5qwrobjnlpb3e8.insertRowAt(newGrid, targetIndex, example, comparator, genWrappers.getOrInit);\n    }, grid);\n    return bundle(newGrid, targetIndex, details[0].column());\n  };\n  var insertColumnBefore = function (grid, detail, comparator, genWrappers) {\n    var example = detail.column();\n    var targetIndex = detail.column();\n    var newGrid = $_8e5qwrobjnlpb3e8.insertColumnAt(grid, targetIndex, example, comparator, genWrappers.getOrInit);\n    return bundle(newGrid, detail.row(), targetIndex);\n  };\n  var insertColumnsBefore = function (grid, details, comparator, genWrappers) {\n    var columns = uniqueColumns(details);\n    var example = columns[0].column();\n    var targetIndex = columns[0].column();\n    var newGrid = foldl(columns, function (newGrid, _row) {\n      return $_8e5qwrobjnlpb3e8.insertColumnAt(newGrid, targetIndex, example, comparator, genWrappers.getOrInit);\n    }, grid);\n    return bundle(newGrid, details[0].row(), targetIndex);\n  };\n  var insertColumnAfter = function (grid, detail, comparator, genWrappers) {\n    var example = detail.column();\n    var targetIndex = detail.column() + detail.colspan();\n    var newGrid = $_8e5qwrobjnlpb3e8.insertColumnAt(grid, targetIndex, example, comparator, genWrappers.getOrInit);\n    return bundle(newGrid, detail.row(), targetIndex);\n  };\n  var insertColumnsAfter = function (grid, details, comparator, genWrappers) {\n    var example = details[details.length - 1].column();\n    var targetIndex = details[details.length - 1].column() + details[details.length - 1].colspan();\n    var columns = uniqueColumns(details);\n    var newGrid = foldl(columns, function (newGrid, _row) {\n      return $_8e5qwrobjnlpb3e8.insertColumnAt(newGrid, targetIndex, example, comparator, genWrappers.getOrInit);\n    }, grid);\n    return bundle(newGrid, details[0].row(), targetIndex);\n  };\n  var makeRowHeader = function (grid, detail, comparator, genWrappers) {\n    var newGrid = $_69d1pfocjnlpb3ei.replaceRow(grid, detail.row(), comparator, genWrappers.replaceOrInit);\n    return bundle(newGrid, detail.row(), detail.column());\n  };\n  var makeColumnHeader = function (grid, detail, comparator, genWrappers) {\n    var newGrid = $_69d1pfocjnlpb3ei.replaceColumn(grid, detail.column(), comparator, genWrappers.replaceOrInit);\n    return bundle(newGrid, detail.row(), detail.column());\n  };\n  var unmakeRowHeader = function (grid, detail, comparator, genWrappers) {\n    var newGrid = $_69d1pfocjnlpb3ei.replaceRow(grid, detail.row(), comparator, genWrappers.replaceOrInit);\n    return bundle(newGrid, detail.row(), detail.column());\n  };\n  var unmakeColumnHeader = function (grid, detail, comparator, genWrappers) {\n    var newGrid = $_69d1pfocjnlpb3ei.replaceColumn(grid, detail.column(), comparator, genWrappers.replaceOrInit);\n    return bundle(newGrid, detail.row(), detail.column());\n  };\n  var splitCellIntoColumns$1 = function (grid, detail, comparator, genWrappers) {\n    var newGrid = $_8e5qwrobjnlpb3e8.splitCellIntoColumns(grid, detail.row(), detail.column(), comparator, genWrappers.getOrInit);\n    return bundle(newGrid, detail.row(), detail.column());\n  };\n  var splitCellIntoRows$1 = function (grid, detail, comparator, genWrappers) {\n    var newGrid = $_8e5qwrobjnlpb3e8.splitCellIntoRows(grid, detail.row(), detail.column(), comparator, genWrappers.getOrInit);\n    return bundle(newGrid, detail.row(), detail.column());\n  };\n  var eraseColumns = function (grid, details, comparator, _genWrappers) {\n    var columns = uniqueColumns(details);\n    var newGrid = $_8e5qwrobjnlpb3e8.deleteColumnsAt(grid, columns[0].column(), columns[columns.length - 1].column());\n    var cursor = elementFromGrid(newGrid, details[0].row(), details[0].column());\n    return outcome(newGrid, cursor);\n  };\n  var eraseRows = function (grid, details, comparator, _genWrappers) {\n    var rows = uniqueRows(details);\n    var newGrid = $_8e5qwrobjnlpb3e8.deleteRowsAt(grid, rows[0].row(), rows[rows.length - 1].row());\n    var cursor = elementFromGrid(newGrid, details[0].row(), details[0].column());\n    return outcome(newGrid, cursor);\n  };\n  var mergeCells = function (grid, mergable, comparator, _genWrappers) {\n    var cells = mergable.cells();\n    $_18yv0ennjnlpb38t.merge(cells);\n    var newGrid = $_dod35voajnlpb3e0.merge(grid, mergable.bounds(), comparator, constant(cells[0]));\n    return outcome(newGrid, Option.from(cells[0]));\n  };\n  var unmergeCells = function (grid, unmergable, comparator, genWrappers) {\n    var newGrid = foldr(unmergable, function (b, cell) {\n      return $_dod35voajnlpb3e0.unmerge(b, cell, comparator, genWrappers.combine(cell));\n    }, grid);\n    return outcome(newGrid, Option.from(unmergable[0]));\n  };\n  var pasteCells = function (grid, pasteDetails, comparator, genWrappers) {\n    var gridify = function (table, generators) {\n      var list = $_g8jea2lbjnlpb2sm.fromTable(table);\n      var wh = $_ein1yumajnlpb2y1.generate(list);\n      return $_83n6k9ntjnlpb3ai.toGrid(wh, generators, true);\n    };\n    var gridB = gridify(pasteDetails.clipboard(), pasteDetails.generators());\n    var startAddress = $_csuubelcjnlpb2sv.address(pasteDetails.row(), pasteDetails.column());\n    var mergedGrid = $_iqv78o7jnlpb3dj.merge(startAddress, grid, gridB, pasteDetails.generators(), comparator);\n    return mergedGrid.fold(function () {\n      return outcome(grid, Option.some(pasteDetails.element()));\n    }, function (nuGrid) {\n      var cursor = elementFromGrid(nuGrid, pasteDetails.row(), pasteDetails.column());\n      return outcome(nuGrid, cursor);\n    });\n  };\n  var gridifyRows = function (rows, generators, example) {\n    var pasteDetails = $_g8jea2lbjnlpb2sm.fromPastedRows(rows, example);\n    var wh = $_ein1yumajnlpb2y1.generate(pasteDetails);\n    return $_83n6k9ntjnlpb3ai.toGrid(wh, generators, true);\n  };\n  var pasteRowsBefore = function (grid, pasteDetails, comparator, genWrappers) {\n    var example = grid[pasteDetails.cells[0].row()];\n    var index = pasteDetails.cells[0].row();\n    var gridB = gridifyRows(pasteDetails.clipboard(), pasteDetails.generators(), example);\n    var mergedGrid = $_iqv78o7jnlpb3dj.insert(index, grid, gridB, pasteDetails.generators(), comparator);\n    var cursor = elementFromGrid(mergedGrid, pasteDetails.cells[0].row(), pasteDetails.cells[0].column());\n    return outcome(mergedGrid, cursor);\n  };\n  var pasteRowsAfter = function (grid, pasteDetails, comparator, genWrappers) {\n    var example = grid[pasteDetails.cells[0].row()];\n    var index = pasteDetails.cells[pasteDetails.cells.length - 1].row() + pasteDetails.cells[pasteDetails.cells.length - 1].rowspan();\n    var gridB = gridifyRows(pasteDetails.clipboard(), pasteDetails.generators(), example);\n    var mergedGrid = $_iqv78o7jnlpb3dj.insert(index, grid, gridB, pasteDetails.generators(), comparator);\n    var cursor = elementFromGrid(mergedGrid, pasteDetails.cells[0].row(), pasteDetails.cells[0].column());\n    return outcome(mergedGrid, cursor);\n  };\n  var resize = $_ed8i3sodjnlpb3em.adjustWidthTo;\n  var $_r4w4xnjjnlpb37n = {\n    insertRowBefore: $_dkrxmunqjnlpb39s.run(insertRowBefore, $_dkrxmunqjnlpb39s.onCell, noop, noop, $_7dlzawnkjnlpb384.modification),\n    insertRowsBefore: $_dkrxmunqjnlpb39s.run(insertRowsBefore, $_dkrxmunqjnlpb39s.onCells, noop, noop, $_7dlzawnkjnlpb384.modification),\n    insertRowAfter: $_dkrxmunqjnlpb39s.run(insertRowAfter, $_dkrxmunqjnlpb39s.onCell, noop, noop, $_7dlzawnkjnlpb384.modification),\n    insertRowsAfter: $_dkrxmunqjnlpb39s.run(insertRowsAfter, $_dkrxmunqjnlpb39s.onCells, noop, noop, $_7dlzawnkjnlpb384.modification),\n    insertColumnBefore: $_dkrxmunqjnlpb39s.run(insertColumnBefore, $_dkrxmunqjnlpb39s.onCell, resize, noop, $_7dlzawnkjnlpb384.modification),\n    insertColumnsBefore: $_dkrxmunqjnlpb39s.run(insertColumnsBefore, $_dkrxmunqjnlpb39s.onCells, resize, noop, $_7dlzawnkjnlpb384.modification),\n    insertColumnAfter: $_dkrxmunqjnlpb39s.run(insertColumnAfter, $_dkrxmunqjnlpb39s.onCell, resize, noop, $_7dlzawnkjnlpb384.modification),\n    insertColumnsAfter: $_dkrxmunqjnlpb39s.run(insertColumnsAfter, $_dkrxmunqjnlpb39s.onCells, resize, noop, $_7dlzawnkjnlpb384.modification),\n    splitCellIntoColumns: $_dkrxmunqjnlpb39s.run(splitCellIntoColumns$1, $_dkrxmunqjnlpb39s.onCell, resize, noop, $_7dlzawnkjnlpb384.modification),\n    splitCellIntoRows: $_dkrxmunqjnlpb39s.run(splitCellIntoRows$1, $_dkrxmunqjnlpb39s.onCell, noop, noop, $_7dlzawnkjnlpb384.modification),\n    eraseColumns: $_dkrxmunqjnlpb39s.run(eraseColumns, $_dkrxmunqjnlpb39s.onCells, resize, prune, $_7dlzawnkjnlpb384.modification),\n    eraseRows: $_dkrxmunqjnlpb39s.run(eraseRows, $_dkrxmunqjnlpb39s.onCells, noop, prune, $_7dlzawnkjnlpb384.modification),\n    makeColumnHeader: $_dkrxmunqjnlpb39s.run(makeColumnHeader, $_dkrxmunqjnlpb39s.onCell, noop, noop, $_7dlzawnkjnlpb384.transform('row', 'th')),\n    unmakeColumnHeader: $_dkrxmunqjnlpb39s.run(unmakeColumnHeader, $_dkrxmunqjnlpb39s.onCell, noop, noop, $_7dlzawnkjnlpb384.transform(null, 'td')),\n    makeRowHeader: $_dkrxmunqjnlpb39s.run(makeRowHeader, $_dkrxmunqjnlpb39s.onCell, noop, noop, $_7dlzawnkjnlpb384.transform('col', 'th')),\n    unmakeRowHeader: $_dkrxmunqjnlpb39s.run(unmakeRowHeader, $_dkrxmunqjnlpb39s.onCell, noop, noop, $_7dlzawnkjnlpb384.transform(null, 'td')),\n    mergeCells: $_dkrxmunqjnlpb39s.run(mergeCells, $_dkrxmunqjnlpb39s.onMergable, noop, noop, $_7dlzawnkjnlpb384.merging),\n    unmergeCells: $_dkrxmunqjnlpb39s.run(unmergeCells, $_dkrxmunqjnlpb39s.onUnmergable, resize, noop, $_7dlzawnkjnlpb384.merging),\n    pasteCells: $_dkrxmunqjnlpb39s.run(pasteCells, $_dkrxmunqjnlpb39s.onPaste, resize, noop, $_7dlzawnkjnlpb384.modification),\n    pasteRowsBefore: $_dkrxmunqjnlpb39s.run(pasteRowsBefore, $_dkrxmunqjnlpb39s.onPasteRows, noop, noop, $_7dlzawnkjnlpb384.modification),\n    pasteRowsAfter: $_dkrxmunqjnlpb39s.run(pasteRowsAfter, $_dkrxmunqjnlpb39s.onPasteRows, noop, noop, $_7dlzawnkjnlpb384.modification)\n  };\n\n  var getBody$1 = function (editor) {\n    return Element$$1.fromDom(editor.getBody());\n  };\n  var getPixelWidth$1 = function (elm) {\n    return elm.getBoundingClientRect().width;\n  };\n  var getPixelHeight = function (elm) {\n    return elm.getBoundingClientRect().height;\n  };\n  var getIsRoot = function (editor) {\n    return function (element) {\n      return $_3k22killjnlpb2vb.eq(element, getBody$1(editor));\n    };\n  };\n  var removePxSuffix = function (size) {\n    return size ? size.replace(/px$/, '') : '';\n  };\n  var addSizeSuffix = function (size) {\n    if (/^[0-9]+$/.test(size)) {\n      size += 'px';\n    }\n    return size;\n  };\n  var removeDataStyle = function (table) {\n    var dataStyleCells = $_97aehqm4jnlpb2x5.descendants(table, 'td[data-mce-style],th[data-mce-style]');\n    $_9u6utvm2jnlpb2wv.remove(table, 'data-mce-style');\n    each(dataStyleCells, function (cell) {\n      $_9u6utvm2jnlpb2wv.remove(cell, 'data-mce-style');\n    });\n  };\n\n  var onDirection = function (isLtr, isRtl) {\n    return function (element) {\n      return getDirection(element) === 'rtl' ? isRtl : isLtr;\n    };\n  };\n  var getDirection = function (element) {\n    return $_g8mvdembjnlpb2ya.get(element, 'direction') === 'rtl' ? 'rtl' : 'ltr';\n  };\n  var $_a1umnbomjnlpb3gg = {\n    onDirection: onDirection,\n    getDirection: getDirection\n  };\n\n  var ltr$1 = { isRtl: constant(false) };\n  var rtl$1 = { isRtl: constant(true) };\n  var directionAt = function (element) {\n    var dir = $_a1umnbomjnlpb3gg.getDirection(element);\n    return dir === 'rtl' ? rtl$1 : ltr$1;\n  };\n  var $_1wn5holjnlpb3g6 = { directionAt: directionAt };\n\n  var defaultTableToolbar = [\n    'tableprops',\n    'tabledelete',\n    '|',\n    'tableinsertrowbefore',\n    'tableinsertrowafter',\n    'tabledeleterow',\n    '|',\n    'tableinsertcolbefore',\n    'tableinsertcolafter',\n    'tabledeletecol'\n  ];\n  var defaultStyles = {\n    'border-collapse': 'collapse',\n    'width': '100%'\n  };\n  var defaultAttributes = { border: '1' };\n  var getDefaultAttributes = function (editor) {\n    return editor.getParam('table_default_attributes', defaultAttributes, 'object');\n  };\n  var getDefaultStyles = function (editor) {\n    return editor.getParam('table_default_styles', defaultStyles, 'object');\n  };\n  var hasTableResizeBars = function (editor) {\n    return editor.getParam('table_resize_bars', true, 'boolean');\n  };\n  var hasTabNavigation = function (editor) {\n    return editor.getParam('table_tab_navigation', true, 'boolean');\n  };\n  var hasAdvancedCellTab = function (editor) {\n    return editor.getParam('table_cell_advtab', true, 'boolean');\n  };\n  var hasAdvancedRowTab = function (editor) {\n    return editor.getParam('table_row_advtab', true, 'boolean');\n  };\n  var hasAdvancedTableTab = function (editor) {\n    return editor.getParam('table_advtab', true, 'boolean');\n  };\n  var hasAppearanceOptions = function (editor) {\n    return editor.getParam('table_appearance_options', true, 'boolean');\n  };\n  var hasTableGrid = function (editor) {\n    return editor.getParam('table_grid', true, 'boolean');\n  };\n  var shouldStyleWithCss = function (editor) {\n    return editor.getParam('table_style_by_css', false, 'boolean');\n  };\n  var getCellClassList = function (editor) {\n    return editor.getParam('table_cell_class_list', [], 'array');\n  };\n  var getRowClassList = function (editor) {\n    return editor.getParam('table_row_class_list', [], 'array');\n  };\n  var getTableClassList = function (editor) {\n    return editor.getParam('table_class_list', [], 'array');\n  };\n  var getColorPickerCallback = function (editor) {\n    return editor.getParam('color_picker_callback');\n  };\n  var isPixelsForced = function (editor) {\n    return editor.getParam('table_responsive_width') === false;\n  };\n  var getCloneElements = function (editor) {\n    var cloneElements = editor.getParam('table_clone_elements');\n    if (isString(cloneElements)) {\n      return Option.some(cloneElements.split(/[ ,]/));\n    } else if (Array.isArray(cloneElements)) {\n      return Option.some(cloneElements);\n    } else {\n      return Option.none();\n    }\n  };\n  var hasObjectResizing = function (editor) {\n    var objectResizing = editor.getParam('object_resizing', true);\n    return objectResizing === 'table' || objectResizing;\n  };\n  var getToolbar = function (editor) {\n    var toolbar = editor.getParam('table_toolbar', defaultTableToolbar);\n    if (toolbar === '' || toolbar === false) {\n      return [];\n    } else if (isString(toolbar)) {\n      return toolbar.split(/[ ,]/);\n    } else if (isArray(toolbar)) {\n      return toolbar;\n    } else {\n      return [];\n    }\n  };\n\n  var fireNewRow = function (editor, row) {\n    return editor.fire('newrow', { node: row });\n  };\n  var fireNewCell = function (editor, cell) {\n    return editor.fire('newcell', { node: cell });\n  };\n  var fireObjectResizeStart = function (editor, target, width, height) {\n    editor.fire('ObjectResizeStart', {\n      target: target,\n      width: width,\n      height: height\n    });\n  };\n  var fireObjectResized = function (editor, target, width, height) {\n    editor.fire('ObjectResized', {\n      target: target,\n      width: width,\n      height: height\n    });\n  };\n\n  var TableActions = function (editor, lazyWire) {\n    var isTableBody = function (editor) {\n      return $_erx5tem3jnlpb2x3.name(getBody$1(editor)) === 'table';\n    };\n    var lastRowGuard = function (table) {\n      var size = $_flksaxnijnlpb37k.getGridSize(table);\n      return isTableBody(editor) === false || size.rows() > 1;\n    };\n    var lastColumnGuard = function (table) {\n      var size = $_flksaxnijnlpb37k.getGridSize(table);\n      return isTableBody(editor) === false || size.columns() > 1;\n    };\n    var cloneFormats = getCloneElements(editor);\n    var execute = function (operation, guard, mutate, lazyWire) {\n      return function (table, target) {\n        removeDataStyle(table);\n        var wire = lazyWire();\n        var doc = Element$$1.fromDom(editor.getDoc());\n        var direction = TableDirection($_1wn5holjnlpb3g6.directionAt);\n        var generators = $_f80632mgjnlpb2z3.cellOperations(mutate, doc, cloneFormats);\n        return guard(table) ? operation(wire, table, target, generators, direction).bind(function (result) {\n          each(result.newRows(), function (row) {\n            fireNewRow(editor, row.dom());\n          });\n          each(result.newCells(), function (cell) {\n            fireNewCell(editor, cell.dom());\n          });\n          return result.cursor().map(function (cell) {\n            var rng = editor.dom.createRng();\n            rng.setStart(cell.dom(), 0);\n            rng.setEnd(cell.dom(), 0);\n            return rng;\n          });\n        }) : Option.none();\n      };\n    };\n    var deleteRow = execute($_r4w4xnjjnlpb37n.eraseRows, lastRowGuard, noop, lazyWire);\n    var deleteColumn = execute($_r4w4xnjjnlpb37n.eraseColumns, lastColumnGuard, noop, lazyWire);\n    var insertRowsBefore = execute($_r4w4xnjjnlpb37n.insertRowsBefore, always, noop, lazyWire);\n    var insertRowsAfter = execute($_r4w4xnjjnlpb37n.insertRowsAfter, always, noop, lazyWire);\n    var insertColumnsBefore = execute($_r4w4xnjjnlpb37n.insertColumnsBefore, always, $_8eufztn6jnlpb35m.halve, lazyWire);\n    var insertColumnsAfter = execute($_r4w4xnjjnlpb37n.insertColumnsAfter, always, $_8eufztn6jnlpb35m.halve, lazyWire);\n    var mergeCells = execute($_r4w4xnjjnlpb37n.mergeCells, always, noop, lazyWire);\n    var unmergeCells = execute($_r4w4xnjjnlpb37n.unmergeCells, always, noop, lazyWire);\n    var pasteRowsBefore = execute($_r4w4xnjjnlpb37n.pasteRowsBefore, always, noop, lazyWire);\n    var pasteRowsAfter = execute($_r4w4xnjjnlpb37n.pasteRowsAfter, always, noop, lazyWire);\n    var pasteCells = execute($_r4w4xnjjnlpb37n.pasteCells, always, noop, lazyWire);\n    return {\n      deleteRow: deleteRow,\n      deleteColumn: deleteColumn,\n      insertRowsBefore: insertRowsBefore,\n      insertRowsAfter: insertRowsAfter,\n      insertColumnsBefore: insertColumnsBefore,\n      insertColumnsAfter: insertColumnsAfter,\n      mergeCells: mergeCells,\n      unmergeCells: unmergeCells,\n      pasteRowsBefore: pasteRowsBefore,\n      pasteRowsAfter: pasteRowsAfter,\n      pasteCells: pasteCells\n    };\n  };\n\n  var copyRows = function (table, target, generators) {\n    var list = $_g8jea2lbjnlpb2sm.fromTable(table);\n    var house = $_ein1yumajnlpb2y1.generate(list);\n    var details = $_dkrxmunqjnlpb39s.onCells(house, target);\n    return details.map(function (selectedCells) {\n      var grid = $_83n6k9ntjnlpb3ai.toGrid(house, generators, false);\n      var slicedGrid = grid.slice(selectedCells[0].row(), selectedCells[selectedCells.length - 1].row() + selectedCells[selectedCells.length - 1].rowspan());\n      var slicedDetails = $_dkrxmunqjnlpb39s.toDetailList(slicedGrid, generators);\n      return $_ekkk7tnwjnlpb3ax.copy(slicedDetails);\n    });\n  };\n  var $_c8ht2doqjnlpb3h7 = { copyRows: copyRows };\n\n  var global$1 = tinymce.util.Tools.resolve('tinymce.util.Tools');\n\n  var getTDTHOverallStyle = function (dom, elm, name) {\n    var cells = dom.select('td,th', elm);\n    var firstChildStyle;\n    var checkChildren = function (firstChildStyle, elms) {\n      for (var i = 0; i < elms.length; i++) {\n        var currentStyle = dom.getStyle(elms[i], name);\n        if (typeof firstChildStyle === 'undefined') {\n          firstChildStyle = currentStyle;\n        }\n        if (firstChildStyle !== currentStyle) {\n          return '';\n        }\n      }\n      return firstChildStyle;\n    };\n    firstChildStyle = checkChildren(firstChildStyle, cells);\n    return firstChildStyle;\n  };\n  var applyAlign = function (editor, elm, name) {\n    if (name) {\n      editor.formatter.apply('align' + name, {}, elm);\n    }\n  };\n  var applyVAlign = function (editor, elm, name) {\n    if (name) {\n      editor.formatter.apply('valign' + name, {}, elm);\n    }\n  };\n  var unApplyAlign = function (editor, elm) {\n    global$1.each('left center right'.split(' '), function (name) {\n      editor.formatter.remove('align' + name, {}, elm);\n    });\n  };\n  var unApplyVAlign = function (editor, elm) {\n    global$1.each('top middle bottom'.split(' '), function (name) {\n      editor.formatter.remove('valign' + name, {}, elm);\n    });\n  };\n  var $_fl09twotjnlpb3hi = {\n    applyAlign: applyAlign,\n    applyVAlign: applyVAlign,\n    unApplyAlign: unApplyAlign,\n    unApplyVAlign: unApplyVAlign,\n    getTDTHOverallStyle: getTDTHOverallStyle\n  };\n\n  var buildListItems = function (inputList, itemCallback, startItems) {\n    var appendItems = function (values, output) {\n      output = output || [];\n      global$1.each(values, function (item) {\n        var menuItem = { text: item.text || item.title };\n        if (item.menu) {\n          menuItem.menu = appendItems(item.menu);\n        } else {\n          menuItem.value = item.value;\n          if (itemCallback) {\n            itemCallback(menuItem);\n          }\n        }\n        output.push(menuItem);\n      });\n      return output;\n    };\n    return appendItems(inputList, startItems || []);\n  };\n  function styleFieldHasFocus(e) {\n    return e.control.rootControl.find('#style')[0].getEl().isEqualNode(document.activeElement);\n  }\n  var syncAdvancedStyleFields = function (editor, evt) {\n    if (styleFieldHasFocus(evt)) {\n      updateAdvancedFields(editor, evt);\n    } else {\n      updateStyleField(editor, evt);\n    }\n  };\n  var updateStyleField = function (editor, evt) {\n    var dom = editor.dom;\n    var rootControl = evt.control.rootControl;\n    var data = rootControl.toJSON();\n    var css = dom.parseStyle(data.style);\n    css['border-style'] = data.borderStyle;\n    css['border-color'] = data.borderColor;\n    css['background-color'] = data.backgroundColor;\n    css.width = data.width ? addSizeSuffix(data.width) : '';\n    css.height = data.height ? addSizeSuffix(data.height) : '';\n    rootControl.find('#style').value(dom.serializeStyle(dom.parseStyle(dom.serializeStyle(css))));\n  };\n  var updateAdvancedFields = function (editor, evt) {\n    var dom = editor.dom;\n    var rootControl = evt.control.rootControl;\n    var data = rootControl.toJSON();\n    var css = dom.parseStyle(data.style);\n    rootControl.find('#borderStyle').value(css['border-style'] || '');\n    rootControl.find('#borderColor').value(css['border-color'] || '');\n    rootControl.find('#backgroundColor').value(css['background-color'] || '');\n    rootControl.find('#width').value(css.width || '');\n    rootControl.find('#height').value(css.height || '');\n  };\n  var extractAdvancedStyles = function (dom, elm) {\n    var css = dom.parseStyle(dom.getAttrib(elm, 'style'));\n    var data = {};\n    if (css['border-style']) {\n      data.borderStyle = css['border-style'];\n    }\n    if (css['border-color']) {\n      data.borderColor = css['border-color'];\n    }\n    if (css['background-color']) {\n      data.backgroundColor = css['background-color'];\n    }\n    data.style = dom.serializeStyle(css);\n    return data;\n  };\n  var createStyleForm = function (editor) {\n    var createColorPickAction = function () {\n      var colorPickerCallback = getColorPickerCallback(editor);\n      if (colorPickerCallback) {\n        return function (evt) {\n          return colorPickerCallback.call(editor, function (value) {\n            evt.control.value(value).fire('change');\n          }, evt.control.value());\n        };\n      }\n    };\n    return {\n      title: 'Advanced',\n      type: 'form',\n      defaults: { onchange: curry(updateStyleField, editor) },\n      items: [\n        {\n          label: 'Style',\n          name: 'style',\n          type: 'textbox',\n          onchange: curry(updateAdvancedFields, editor)\n        },\n        {\n          type: 'form',\n          padding: 0,\n          formItemDefaults: {\n            layout: 'grid',\n            alignH: [\n              'start',\n              'right'\n            ]\n          },\n          defaults: { size: 7 },\n          items: [\n            {\n              label: 'Border style',\n              type: 'listbox',\n              name: 'borderStyle',\n              width: 90,\n              onselect: curry(updateStyleField, editor),\n              values: [\n                {\n                  text: 'Select...',\n                  value: ''\n                },\n                {\n                  text: 'Solid',\n                  value: 'solid'\n                },\n                {\n                  text: 'Dotted',\n                  value: 'dotted'\n                },\n                {\n                  text: 'Dashed',\n                  value: 'dashed'\n                },\n                {\n                  text: 'Double',\n                  value: 'double'\n                },\n                {\n                  text: 'Groove',\n                  value: 'groove'\n                },\n                {\n                  text: 'Ridge',\n                  value: 'ridge'\n                },\n                {\n                  text: 'Inset',\n                  value: 'inset'\n                },\n                {\n                  text: 'Outset',\n                  value: 'outset'\n                },\n                {\n                  text: 'None',\n                  value: 'none'\n                },\n                {\n                  text: 'Hidden',\n                  value: 'hidden'\n                }\n              ]\n            },\n            {\n              label: 'Border color',\n              type: 'colorbox',\n              name: 'borderColor',\n              onaction: createColorPickAction()\n            },\n            {\n              label: 'Background color',\n              type: 'colorbox',\n              name: 'backgroundColor',\n              onaction: createColorPickAction()\n            }\n          ]\n        }\n      ]\n    };\n  };\n  var $_ce2naoujnlpb3hk = {\n    createStyleForm: createStyleForm,\n    buildListItems: buildListItems,\n    updateStyleField: updateStyleField,\n    extractAdvancedStyles: extractAdvancedStyles,\n    updateAdvancedFields: updateAdvancedFields,\n    syncAdvancedStyleFields: syncAdvancedStyleFields\n  };\n\n  var updateStyles = function (elm, cssText) {\n    delete elm.dataset.mceStyle;\n    elm.style.cssText += ';' + cssText;\n  };\n  var extractDataFromElement = function (editor, elm) {\n    var dom = editor.dom;\n    var data = {\n      width: dom.getStyle(elm, 'width') || dom.getAttrib(elm, 'width'),\n      height: dom.getStyle(elm, 'height') || dom.getAttrib(elm, 'height'),\n      scope: dom.getAttrib(elm, 'scope'),\n      class: dom.getAttrib(elm, 'class'),\n      type: elm.nodeName.toLowerCase(),\n      style: '',\n      align: '',\n      valign: ''\n    };\n    global$1.each('left center right'.split(' '), function (name) {\n      if (editor.formatter.matchNode(elm, 'align' + name)) {\n        data.align = name;\n      }\n    });\n    global$1.each('top middle bottom'.split(' '), function (name) {\n      if (editor.formatter.matchNode(elm, 'valign' + name)) {\n        data.valign = name;\n      }\n    });\n    if (hasAdvancedCellTab(editor)) {\n      global$1.extend(data, $_ce2naoujnlpb3hk.extractAdvancedStyles(dom, elm));\n    }\n    return data;\n  };\n  var onSubmitCellForm = function (editor, cells, evt) {\n    var dom = editor.dom;\n    var data;\n    function setAttrib(elm, name, value) {\n      if (cells.length === 1 || value) {\n        dom.setAttrib(elm, name, value);\n      }\n    }\n    function setStyle(elm, name, value) {\n      if (cells.length === 1 || value) {\n        dom.setStyle(elm, name, value);\n      }\n    }\n    if (hasAdvancedCellTab(editor)) {\n      $_ce2naoujnlpb3hk.syncAdvancedStyleFields(editor, evt);\n    }\n    data = evt.control.rootControl.toJSON();\n    editor.undoManager.transact(function () {\n      global$1.each(cells, function (cellElm) {\n        setAttrib(cellElm, 'scope', data.scope);\n        if (cells.length === 1) {\n          setAttrib(cellElm, 'style', data.style);\n        } else {\n          updateStyles(cellElm, data.style);\n        }\n        setAttrib(cellElm, 'class', data.class);\n        setStyle(cellElm, 'width', addSizeSuffix(data.width));\n        setStyle(cellElm, 'height', addSizeSuffix(data.height));\n        if (data.type && cellElm.nodeName.toLowerCase() !== data.type) {\n          cellElm = dom.rename(cellElm, data.type);\n        }\n        if (cells.length === 1) {\n          $_fl09twotjnlpb3hi.unApplyAlign(editor, cellElm);\n          $_fl09twotjnlpb3hi.unApplyVAlign(editor, cellElm);\n        }\n        if (data.align) {\n          $_fl09twotjnlpb3hi.applyAlign(editor, cellElm, data.align);\n        }\n        if (data.valign) {\n          $_fl09twotjnlpb3hi.applyVAlign(editor, cellElm, data.valign);\n        }\n      });\n      editor.focus();\n    });\n  };\n  var open = function (editor) {\n    var cellElm, data, classListCtrl, cells = [];\n    cells = editor.dom.select('td[data-mce-selected],th[data-mce-selected]');\n    cellElm = editor.dom.getParent(editor.selection.getStart(), 'td,th');\n    if (!cells.length && cellElm) {\n      cells.push(cellElm);\n    }\n    cellElm = cellElm || cells[0];\n    if (!cellElm) {\n      return;\n    }\n    if (cells.length > 1) {\n      data = {\n        width: '',\n        height: '',\n        scope: '',\n        class: '',\n        align: '',\n        valign: '',\n        style: '',\n        type: cellElm.nodeName.toLowerCase()\n      };\n    } else {\n      data = extractDataFromElement(editor, cellElm);\n    }\n    if (getCellClassList(editor).length > 0) {\n      classListCtrl = {\n        name: 'class',\n        type: 'listbox',\n        label: 'Class',\n        values: $_ce2naoujnlpb3hk.buildListItems(getCellClassList(editor), function (item) {\n          if (item.value) {\n            item.textStyle = function () {\n              return editor.formatter.getCssText({\n                block: 'td',\n                classes: [item.value]\n              });\n            };\n          }\n        })\n      };\n    }\n    var generalCellForm = {\n      type: 'form',\n      layout: 'flex',\n      direction: 'column',\n      labelGapCalc: 'children',\n      padding: 0,\n      items: [\n        {\n          type: 'form',\n          layout: 'grid',\n          columns: 2,\n          labelGapCalc: false,\n          padding: 0,\n          defaults: {\n            type: 'textbox',\n            maxWidth: 50\n          },\n          items: [\n            {\n              label: 'Width',\n              name: 'width',\n              onchange: curry($_ce2naoujnlpb3hk.updateStyleField, editor)\n            },\n            {\n              label: 'Height',\n              name: 'height',\n              onchange: curry($_ce2naoujnlpb3hk.updateStyleField, editor)\n            },\n            {\n              label: 'Cell type',\n              name: 'type',\n              type: 'listbox',\n              text: 'None',\n              minWidth: 90,\n              maxWidth: null,\n              values: [\n                {\n                  text: 'Cell',\n                  value: 'td'\n                },\n                {\n                  text: 'Header cell',\n                  value: 'th'\n                }\n              ]\n            },\n            {\n              label: 'Scope',\n              name: 'scope',\n              type: 'listbox',\n              text: 'None',\n              minWidth: 90,\n              maxWidth: null,\n              values: [\n                {\n                  text: 'None',\n                  value: ''\n                },\n                {\n                  text: 'Row',\n                  value: 'row'\n                },\n                {\n                  text: 'Column',\n                  value: 'col'\n                },\n                {\n                  text: 'Row group',\n                  value: 'rowgroup'\n                },\n                {\n                  text: 'Column group',\n                  value: 'colgroup'\n                }\n              ]\n            },\n            {\n              label: 'H Align',\n              name: 'align',\n              type: 'listbox',\n              text: 'None',\n              minWidth: 90,\n              maxWidth: null,\n              values: [\n                {\n                  text: 'None',\n                  value: ''\n                },\n                {\n                  text: 'Left',\n                  value: 'left'\n                },\n                {\n                  text: 'Center',\n                  value: 'center'\n                },\n                {\n                  text: 'Right',\n                  value: 'right'\n                }\n              ]\n            },\n            {\n              label: 'V Align',\n              name: 'valign',\n              type: 'listbox',\n              text: 'None',\n              minWidth: 90,\n              maxWidth: null,\n              values: [\n                {\n                  text: 'None',\n                  value: ''\n                },\n                {\n                  text: 'Top',\n                  value: 'top'\n                },\n                {\n                  text: 'Middle',\n                  value: 'middle'\n                },\n                {\n                  text: 'Bottom',\n                  value: 'bottom'\n                }\n              ]\n            }\n          ]\n        },\n        classListCtrl\n      ]\n    };\n    if (hasAdvancedCellTab(editor)) {\n      editor.windowManager.open({\n        title: 'Cell properties',\n        bodyType: 'tabpanel',\n        data: data,\n        body: [\n          {\n            title: 'General',\n            type: 'form',\n            items: generalCellForm\n          },\n          $_ce2naoujnlpb3hk.createStyleForm(editor)\n        ],\n        onsubmit: curry(onSubmitCellForm, editor, cells)\n      });\n    } else {\n      editor.windowManager.open({\n        title: 'Cell properties',\n        data: data,\n        body: generalCellForm,\n        onsubmit: curry(onSubmitCellForm, editor, cells)\n      });\n    }\n  };\n  var $_c9662posjnlpb3hc = { open: open };\n\n  var extractDataFromElement$1 = function (editor, elm) {\n    var dom = editor.dom;\n    var data = {\n      height: dom.getStyle(elm, 'height') || dom.getAttrib(elm, 'height'),\n      scope: dom.getAttrib(elm, 'scope'),\n      class: dom.getAttrib(elm, 'class'),\n      align: '',\n      style: '',\n      type: elm.parentNode.nodeName.toLowerCase()\n    };\n    global$1.each('left center right'.split(' '), function (name) {\n      if (editor.formatter.matchNode(elm, 'align' + name)) {\n        data.align = name;\n      }\n    });\n    if (hasAdvancedRowTab(editor)) {\n      global$1.extend(data, $_ce2naoujnlpb3hk.extractAdvancedStyles(dom, elm));\n    }\n    return data;\n  };\n  var switchRowType = function (dom, rowElm, toType) {\n    var tableElm = dom.getParent(rowElm, 'table');\n    var oldParentElm = rowElm.parentNode;\n    var parentElm = dom.select(toType, tableElm)[0];\n    if (!parentElm) {\n      parentElm = dom.create(toType);\n      if (tableElm.firstChild) {\n        if (tableElm.firstChild.nodeName === 'CAPTION') {\n          dom.insertAfter(parentElm, tableElm.firstChild);\n        } else {\n          tableElm.insertBefore(parentElm, tableElm.firstChild);\n        }\n      } else {\n        tableElm.appendChild(parentElm);\n      }\n    }\n    parentElm.appendChild(rowElm);\n    if (!oldParentElm.hasChildNodes()) {\n      dom.remove(oldParentElm);\n    }\n  };\n  function onSubmitRowForm(editor, rows, oldData, evt) {\n    var dom = editor.dom;\n    function setAttrib(elm, name, value) {\n      if (rows.length === 1 || value) {\n        dom.setAttrib(elm, name, value);\n      }\n    }\n    function setStyle(elm, name, value) {\n      if (rows.length === 1 || value) {\n        dom.setStyle(elm, name, value);\n      }\n    }\n    if (hasAdvancedRowTab(editor)) {\n      $_ce2naoujnlpb3hk.syncAdvancedStyleFields(editor, evt);\n    }\n    var data = evt.control.rootControl.toJSON();\n    editor.undoManager.transact(function () {\n      global$1.each(rows, function (rowElm) {\n        setAttrib(rowElm, 'scope', data.scope);\n        setAttrib(rowElm, 'style', data.style);\n        setAttrib(rowElm, 'class', data.class);\n        setStyle(rowElm, 'height', addSizeSuffix(data.height));\n        if (data.type !== rowElm.parentNode.nodeName.toLowerCase()) {\n          switchRowType(editor.dom, rowElm, data.type);\n        }\n        if (data.align !== oldData.align) {\n          $_fl09twotjnlpb3hi.unApplyAlign(editor, rowElm);\n          $_fl09twotjnlpb3hi.applyAlign(editor, rowElm, data.align);\n        }\n      });\n      editor.focus();\n    });\n  }\n  var open$1 = function (editor) {\n    var dom = editor.dom;\n    var tableElm, cellElm, rowElm, classListCtrl, data;\n    var rows = [];\n    var generalRowForm;\n    tableElm = dom.getParent(editor.selection.getStart(), 'table');\n    cellElm = dom.getParent(editor.selection.getStart(), 'td,th');\n    global$1.each(tableElm.rows, function (row) {\n      global$1.each(row.cells, function (cell) {\n        if (dom.getAttrib(cell, 'data-mce-selected') || cell === cellElm) {\n          rows.push(row);\n          return false;\n        }\n      });\n    });\n    rowElm = rows[0];\n    if (!rowElm) {\n      return;\n    }\n    if (rows.length > 1) {\n      data = {\n        height: '',\n        scope: '',\n        style: '',\n        class: '',\n        align: '',\n        type: rowElm.parentNode.nodeName.toLowerCase()\n      };\n    } else {\n      data = extractDataFromElement$1(editor, rowElm);\n    }\n    if (getRowClassList(editor).length > 0) {\n      classListCtrl = {\n        name: 'class',\n        type: 'listbox',\n        label: 'Class',\n        values: $_ce2naoujnlpb3hk.buildListItems(getRowClassList(editor), function (item) {\n          if (item.value) {\n            item.textStyle = function () {\n              return editor.formatter.getCssText({\n                block: 'tr',\n                classes: [item.value]\n              });\n            };\n          }\n        })\n      };\n    }\n    generalRowForm = {\n      type: 'form',\n      columns: 2,\n      padding: 0,\n      defaults: { type: 'textbox' },\n      items: [\n        {\n          type: 'listbox',\n          name: 'type',\n          label: 'Row type',\n          text: 'Header',\n          maxWidth: null,\n          values: [\n            {\n              text: 'Header',\n              value: 'thead'\n            },\n            {\n              text: 'Body',\n              value: 'tbody'\n            },\n            {\n              text: 'Footer',\n              value: 'tfoot'\n            }\n          ]\n        },\n        {\n          type: 'listbox',\n          name: 'align',\n          label: 'Alignment',\n          text: 'None',\n          maxWidth: null,\n          values: [\n            {\n              text: 'None',\n              value: ''\n            },\n            {\n              text: 'Left',\n              value: 'left'\n            },\n            {\n              text: 'Center',\n              value: 'center'\n            },\n            {\n              text: 'Right',\n              value: 'right'\n            }\n          ]\n        },\n        {\n          label: 'Height',\n          name: 'height'\n        },\n        classListCtrl\n      ]\n    };\n    if (hasAdvancedRowTab(editor)) {\n      editor.windowManager.open({\n        title: 'Row properties',\n        data: data,\n        bodyType: 'tabpanel',\n        body: [\n          {\n            title: 'General',\n            type: 'form',\n            items: generalRowForm\n          },\n          $_ce2naoujnlpb3hk.createStyleForm(editor)\n        ],\n        onsubmit: curry(onSubmitRowForm, editor, rows, data)\n      });\n    } else {\n      editor.windowManager.open({\n        title: 'Row properties',\n        data: data,\n        body: generalRowForm,\n        onsubmit: curry(onSubmitRowForm, editor, rows, data)\n      });\n    }\n  };\n  var $_bi4bv9ovjnlpb3hs = { open: open$1 };\n\n  var global$2 = tinymce.util.Tools.resolve('tinymce.Env');\n\n  var DefaultRenderOptions = {\n    styles: {\n      'border-collapse': 'collapse',\n      width: '100%'\n    },\n    attributes: { border: '1' },\n    percentages: true\n  };\n  var makeTable = function () {\n    return Element$$1.fromTag('table');\n  };\n  var tableBody = function () {\n    return Element$$1.fromTag('tbody');\n  };\n  var tableRow = function () {\n    return Element$$1.fromTag('tr');\n  };\n  var tableHeaderCell = function () {\n    return Element$$1.fromTag('th');\n  };\n  var tableCell = function () {\n    return Element$$1.fromTag('td');\n  };\n  var render$1 = function (rows, columns, rowHeaders, columnHeaders, renderOpts) {\n    if (renderOpts === void 0) {\n      renderOpts = DefaultRenderOptions;\n    }\n    var table = makeTable();\n    $_g8mvdembjnlpb2ya.setAll(table, renderOpts.styles);\n    $_9u6utvm2jnlpb2wv.setAll(table, renderOpts.attributes);\n    var tbody = tableBody();\n    $_5hzj77mdjnlpb2yp.append(table, tbody);\n    var trs = [];\n    for (var i = 0; i < rows; i++) {\n      var tr = tableRow();\n      for (var j = 0; j < columns; j++) {\n        var td = i < rowHeaders || j < columnHeaders ? tableHeaderCell() : tableCell();\n        if (j < columnHeaders) {\n          $_9u6utvm2jnlpb2wv.set(td, 'scope', 'row');\n        }\n        if (i < rowHeaders) {\n          $_9u6utvm2jnlpb2wv.set(td, 'scope', 'col');\n        }\n        $_5hzj77mdjnlpb2yp.append(td, Element$$1.fromTag('br'));\n        if (renderOpts.percentages) {\n          $_g8mvdembjnlpb2ya.set(td, 'width', 100 / columns + '%');\n        }\n        $_5hzj77mdjnlpb2yp.append(tr, td);\n      }\n      trs.push(tr);\n    }\n    $_a9wtnkmfjnlpb2yu.append(tbody, trs);\n    return table;\n  };\n\n  var get$8 = function (element) {\n    return element.dom().innerHTML;\n  };\n  var set$5 = function (element, content) {\n    var owner = $_2pl1nljjnlpb2ur.owner(element);\n    var docDom = owner.dom();\n    var fragment = Element$$1.fromDom(docDom.createDocumentFragment());\n    var contentElements = $_1ebm76mmjnlpb30a.fromHtml(content, docDom);\n    $_a9wtnkmfjnlpb2yu.append(fragment, contentElements);\n    $_cybn8qmejnlpb2yr.empty(element);\n    $_5hzj77mdjnlpb2yp.append(element, fragment);\n  };\n  var getOuter$2 = function (element) {\n    var container = Element$$1.fromTag('div');\n    var clone = Element$$1.fromDom(element.dom().cloneNode(true));\n    $_5hzj77mdjnlpb2yp.append(container, clone);\n    return get$8(container);\n  };\n  var $_d2j8ikp1jnlpb3jb = {\n    get: get$8,\n    set: set$5,\n    getOuter: getOuter$2\n  };\n\n  var placeCaretInCell = function (editor, cell) {\n    editor.selection.select(cell.dom(), true);\n    editor.selection.collapse(true);\n  };\n  var selectFirstCellInTable = function (editor, tableElm) {\n    $_gdszrpm7jnlpb2xk.descendant(tableElm, 'td,th').each(curry(placeCaretInCell, editor));\n  };\n  var fireEvents = function (editor, table) {\n    each($_97aehqm4jnlpb2x5.descendants(table, 'tr'), function (row) {\n      fireNewRow(editor, row.dom());\n      each($_97aehqm4jnlpb2x5.descendants(row, 'th,td'), function (cell) {\n        fireNewCell(editor, cell.dom());\n      });\n    });\n  };\n  var isPercentage = function (width) {\n    return isString(width) && width.indexOf('%') !== -1;\n  };\n  var insert$1 = function (editor, columns, rows) {\n    var defaultStyles = getDefaultStyles(editor);\n    var options = {\n      styles: defaultStyles,\n      attributes: getDefaultAttributes(editor),\n      percentages: isPercentage(defaultStyles.width) && !isPixelsForced(editor)\n    };\n    var table = render$1(rows, columns, 0, 0, options);\n    $_9u6utvm2jnlpb2wv.set(table, 'data-mce-id', '__mce');\n    var html = $_d2j8ikp1jnlpb3jb.getOuter(table);\n    editor.insertContent(html);\n    return $_gdszrpm7jnlpb2xk.descendant(getBody$1(editor), 'table[data-mce-id=\"__mce\"]').map(function (table) {\n      if (isPixelsForced(editor)) {\n        $_g8mvdembjnlpb2ya.set(table, 'width', $_g8mvdembjnlpb2ya.get(table, 'width'));\n      }\n      $_9u6utvm2jnlpb2wv.remove(table, 'data-mce-id');\n      fireEvents(editor, table);\n      selectFirstCellInTable(editor, table);\n      return table.dom();\n    }).getOr(null);\n  };\n  var $_azkpjfoyjnlpb3ij = { insert: insert$1 };\n\n  function styleTDTH(dom, elm, name, value) {\n    if (elm.tagName === 'TD' || elm.tagName === 'TH') {\n      dom.setStyle(elm, name, value);\n    } else {\n      if (elm.children) {\n        for (var i = 0; i < elm.children.length; i++) {\n          styleTDTH(dom, elm.children[i], name, value);\n        }\n      }\n    }\n  }\n  var extractDataFromElement$2 = function (editor, tableElm) {\n    var dom = editor.dom;\n    var data = {\n      width: dom.getStyle(tableElm, 'width') || dom.getAttrib(tableElm, 'width'),\n      height: dom.getStyle(tableElm, 'height') || dom.getAttrib(tableElm, 'height'),\n      cellspacing: dom.getStyle(tableElm, 'border-spacing') || dom.getAttrib(tableElm, 'cellspacing'),\n      cellpadding: dom.getAttrib(tableElm, 'data-mce-cell-padding') || dom.getAttrib(tableElm, 'cellpadding') || $_fl09twotjnlpb3hi.getTDTHOverallStyle(editor.dom, tableElm, 'padding'),\n      border: dom.getAttrib(tableElm, 'data-mce-border') || dom.getAttrib(tableElm, 'border') || $_fl09twotjnlpb3hi.getTDTHOverallStyle(editor.dom, tableElm, 'border'),\n      borderColor: dom.getAttrib(tableElm, 'data-mce-border-color'),\n      caption: !!dom.select('caption', tableElm)[0],\n      class: dom.getAttrib(tableElm, 'class')\n    };\n    global$1.each('left center right'.split(' '), function (name) {\n      if (editor.formatter.matchNode(tableElm, 'align' + name)) {\n        data.align = name;\n      }\n    });\n    if (hasAdvancedTableTab(editor)) {\n      global$1.extend(data, $_ce2naoujnlpb3hk.extractAdvancedStyles(dom, tableElm));\n    }\n    return data;\n  };\n  var applyDataToElement = function (editor, tableElm, data) {\n    var dom = editor.dom;\n    var attrs = {};\n    var styles = {};\n    attrs.class = data.class;\n    styles.height = addSizeSuffix(data.height);\n    if (dom.getAttrib(tableElm, 'width') && !shouldStyleWithCss(editor)) {\n      attrs.width = removePxSuffix(data.width);\n    } else {\n      styles.width = addSizeSuffix(data.width);\n    }\n    if (shouldStyleWithCss(editor)) {\n      styles['border-width'] = addSizeSuffix(data.border);\n      styles['border-spacing'] = addSizeSuffix(data.cellspacing);\n      global$1.extend(attrs, {\n        'data-mce-border-color': data.borderColor,\n        'data-mce-cell-padding': data.cellpadding,\n        'data-mce-border': data.border\n      });\n    } else {\n      global$1.extend(attrs, {\n        border: data.border,\n        cellpadding: data.cellpadding,\n        cellspacing: data.cellspacing\n      });\n    }\n    if (shouldStyleWithCss(editor)) {\n      if (tableElm.children) {\n        for (var i = 0; i < tableElm.children.length; i++) {\n          styleTDTH(dom, tableElm.children[i], {\n            'border-width': addSizeSuffix(data.border),\n            'border-color': data.borderColor,\n            'padding': addSizeSuffix(data.cellpadding)\n          });\n        }\n      }\n    }\n    if (data.style) {\n      global$1.extend(styles, dom.parseStyle(data.style));\n    } else {\n      styles = global$1.extend({}, dom.parseStyle(dom.getAttrib(tableElm, 'style')), styles);\n    }\n    attrs.style = dom.serializeStyle(styles);\n    dom.setAttribs(tableElm, attrs);\n  };\n  var onSubmitTableForm = function (editor, tableElm, evt) {\n    var dom = editor.dom;\n    var captionElm;\n    var data;\n    if (hasAdvancedTableTab(editor)) {\n      $_ce2naoujnlpb3hk.syncAdvancedStyleFields(editor, evt);\n    }\n    data = evt.control.rootControl.toJSON();\n    if (data.class === false) {\n      delete data.class;\n    }\n    editor.undoManager.transact(function () {\n      if (!tableElm) {\n        tableElm = $_azkpjfoyjnlpb3ij.insert(editor, data.cols || 1, data.rows || 1);\n      }\n      applyDataToElement(editor, tableElm, data);\n      captionElm = dom.select('caption', tableElm)[0];\n      if (captionElm && !data.caption) {\n        dom.remove(captionElm);\n      }\n      if (!captionElm && data.caption) {\n        captionElm = dom.create('caption');\n        captionElm.innerHTML = !global$2.ie ? '<br data-mce-bogus=\"1\"/>' : '\\xA0';\n        tableElm.insertBefore(captionElm, tableElm.firstChild);\n      }\n      $_fl09twotjnlpb3hi.unApplyAlign(editor, tableElm);\n      if (data.align) {\n        $_fl09twotjnlpb3hi.applyAlign(editor, tableElm, data.align);\n      }\n      editor.focus();\n      editor.addVisual();\n    });\n  };\n  var open$2 = function (editor, isProps) {\n    var dom = editor.dom;\n    var tableElm, colsCtrl, rowsCtrl, classListCtrl, data = {}, generalTableForm;\n    if (isProps === true) {\n      tableElm = dom.getParent(editor.selection.getStart(), 'table');\n      if (tableElm) {\n        data = extractDataFromElement$2(editor, tableElm);\n      }\n    } else {\n      colsCtrl = {\n        label: 'Cols',\n        name: 'cols'\n      };\n      rowsCtrl = {\n        label: 'Rows',\n        name: 'rows'\n      };\n    }\n    if (getTableClassList(editor).length > 0) {\n      if (data.class) {\n        data.class = data.class.replace(/\\s*mce\\-item\\-table\\s*/g, '');\n      }\n      classListCtrl = {\n        name: 'class',\n        type: 'listbox',\n        label: 'Class',\n        values: $_ce2naoujnlpb3hk.buildListItems(getTableClassList(editor), function (item) {\n          if (item.value) {\n            item.textStyle = function () {\n              return editor.formatter.getCssText({\n                block: 'table',\n                classes: [item.value]\n              });\n            };\n          }\n        })\n      };\n    }\n    generalTableForm = {\n      type: 'form',\n      layout: 'flex',\n      direction: 'column',\n      labelGapCalc: 'children',\n      padding: 0,\n      items: [\n        {\n          type: 'form',\n          labelGapCalc: false,\n          padding: 0,\n          layout: 'grid',\n          columns: 2,\n          defaults: {\n            type: 'textbox',\n            maxWidth: 50\n          },\n          items: hasAppearanceOptions(editor) ? [\n            colsCtrl,\n            rowsCtrl,\n            {\n              label: 'Width',\n              name: 'width',\n              onchange: curry($_ce2naoujnlpb3hk.updateStyleField, editor)\n            },\n            {\n              label: 'Height',\n              name: 'height',\n              onchange: curry($_ce2naoujnlpb3hk.updateStyleField, editor)\n            },\n            {\n              label: 'Cell spacing',\n              name: 'cellspacing'\n            },\n            {\n              label: 'Cell padding',\n              name: 'cellpadding'\n            },\n            {\n              label: 'Border',\n              name: 'border'\n            },\n            {\n              label: 'Caption',\n              name: 'caption',\n              type: 'checkbox'\n            }\n          ] : [\n            colsCtrl,\n            rowsCtrl,\n            {\n              label: 'Width',\n              name: 'width',\n              onchange: curry($_ce2naoujnlpb3hk.updateStyleField, editor)\n            },\n            {\n              label: 'Height',\n              name: 'height',\n              onchange: curry($_ce2naoujnlpb3hk.updateStyleField, editor)\n            }\n          ]\n        },\n        {\n          label: 'Alignment',\n          name: 'align',\n          type: 'listbox',\n          text: 'None',\n          values: [\n            {\n              text: 'None',\n              value: ''\n            },\n            {\n              text: 'Left',\n              value: 'left'\n            },\n            {\n              text: 'Center',\n              value: 'center'\n            },\n            {\n              text: 'Right',\n              value: 'right'\n            }\n          ]\n        },\n        classListCtrl\n      ]\n    };\n    if (hasAdvancedTableTab(editor)) {\n      editor.windowManager.open({\n        title: 'Table properties',\n        data: data,\n        bodyType: 'tabpanel',\n        body: [\n          {\n            title: 'General',\n            type: 'form',\n            items: generalTableForm\n          },\n          $_ce2naoujnlpb3hk.createStyleForm(editor)\n        ],\n        onsubmit: curry(onSubmitTableForm, editor, tableElm)\n      });\n    } else {\n      editor.windowManager.open({\n        title: 'Table properties',\n        data: data,\n        body: generalTableForm,\n        onsubmit: curry(onSubmitTableForm, editor, tableElm)\n      });\n    }\n  };\n  var $_ackveiowjnlpb3i0 = { open: open$2 };\n\n  var each$3 = global$1.each;\n  var registerCommands = function (editor, actions, cellSelection, selections, clipboardRows) {\n    var isRoot = getIsRoot(editor);\n    var eraseTable = function () {\n      var cell = Element$$1.fromDom(editor.dom.getParent(editor.selection.getStart(), 'th,td'));\n      var table = $_em4z2mldjnlpb2sz.table(cell, isRoot);\n      table.filter(not(isRoot)).each(function (table) {\n        var cursor = Element$$1.fromText('');\n        $_5hzj77mdjnlpb2yp.after(table, cursor);\n        $_cybn8qmejnlpb2yr.remove(table);\n        var rng = editor.dom.createRng();\n        rng.setStart(cursor.dom(), 0);\n        rng.setEnd(cursor.dom(), 0);\n        editor.selection.setRng(rng);\n      });\n    };\n    var getSelectionStartCell = function () {\n      return Element$$1.fromDom(editor.dom.getParent(editor.selection.getStart(), 'th,td'));\n    };\n    var getTableFromCell = function (cell) {\n      return $_em4z2mldjnlpb2sz.table(cell, isRoot);\n    };\n    var getSize = function (table) {\n      return {\n        width: getPixelWidth$1(table.dom()),\n        height: getPixelWidth$1(table.dom())\n      };\n    };\n    var resizeChange = function (editor, oldSize, table) {\n      var newSize = getSize(table);\n      if (oldSize.width !== newSize.width || oldSize.height !== newSize.height) {\n        fireObjectResizeStart(editor, table.dom(), oldSize.width, oldSize.height);\n        fireObjectResized(editor, table.dom(), newSize.width, newSize.height);\n      }\n    };\n    var actOnSelection = function (execute) {\n      var cell = getSelectionStartCell();\n      var table = getTableFromCell(cell);\n      table.each(function (table) {\n        var targets = $_39kmudmnjnlpb30f.forMenu(selections, table, cell);\n        var beforeSize = getSize(table);\n        execute(table, targets).each(function (rng) {\n          resizeChange(editor, beforeSize, table);\n          editor.selection.setRng(rng);\n          editor.focus();\n          cellSelection.clear(table);\n          removeDataStyle(table);\n        });\n      });\n    };\n    var copyRowSelection = function (execute) {\n      var cell = getSelectionStartCell();\n      var table = getTableFromCell(cell);\n      return table.bind(function (table) {\n        var doc = Element$$1.fromDom(editor.getDoc());\n        var targets = $_39kmudmnjnlpb30f.forMenu(selections, table, cell);\n        var generators = $_f80632mgjnlpb2z3.cellOperations(noop, doc, Option.none());\n        return $_c8ht2doqjnlpb3h7.copyRows(table, targets, generators);\n      });\n    };\n    var pasteOnSelection = function (execute) {\n      clipboardRows.get().each(function (rows) {\n        var clonedRows = map(rows, function (row) {\n          return $_7sdoc4mhjnlpb2zt.deep(row);\n        });\n        var cell = getSelectionStartCell();\n        var table = getTableFromCell(cell);\n        table.bind(function (table) {\n          var doc = Element$$1.fromDom(editor.getDoc());\n          var generators = $_f80632mgjnlpb2z3.paste(doc);\n          var targets = $_39kmudmnjnlpb30f.pasteRows(selections, table, cell, clonedRows, generators);\n          execute(table, targets).each(function (rng) {\n            editor.selection.setRng(rng);\n            editor.focus();\n            cellSelection.clear(table);\n          });\n        });\n      });\n    };\n    each$3({\n      mceTableSplitCells: function () {\n        actOnSelection(actions.unmergeCells);\n      },\n      mceTableMergeCells: function () {\n        actOnSelection(actions.mergeCells);\n      },\n      mceTableInsertRowBefore: function () {\n        actOnSelection(actions.insertRowsBefore);\n      },\n      mceTableInsertRowAfter: function () {\n        actOnSelection(actions.insertRowsAfter);\n      },\n      mceTableInsertColBefore: function () {\n        actOnSelection(actions.insertColumnsBefore);\n      },\n      mceTableInsertColAfter: function () {\n        actOnSelection(actions.insertColumnsAfter);\n      },\n      mceTableDeleteCol: function () {\n        actOnSelection(actions.deleteColumn);\n      },\n      mceTableDeleteRow: function () {\n        actOnSelection(actions.deleteRow);\n      },\n      mceTableCutRow: function (grid) {\n        clipboardRows.set(copyRowSelection());\n        actOnSelection(actions.deleteRow);\n      },\n      mceTableCopyRow: function (grid) {\n        clipboardRows.set(copyRowSelection());\n      },\n      mceTablePasteRowBefore: function (grid) {\n        pasteOnSelection(actions.pasteRowsBefore);\n      },\n      mceTablePasteRowAfter: function (grid) {\n        pasteOnSelection(actions.pasteRowsAfter);\n      },\n      mceTableDelete: eraseTable\n    }, function (func, name) {\n      editor.addCommand(name, func);\n    });\n    each$3({\n      mceInsertTable: curry($_ackveiowjnlpb3i0.open, editor),\n      mceTableProps: curry($_ackveiowjnlpb3i0.open, editor, true),\n      mceTableRowProps: curry($_bi4bv9ovjnlpb3hs.open, editor),\n      mceTableCellProps: curry($_c9662posjnlpb3hc.open, editor)\n    }, function (func, name) {\n      editor.addCommand(name, function (ui, val) {\n        func(val);\n      });\n    });\n  };\n  var $_cs1v9popjnlpb3gp = { registerCommands: registerCommands };\n\n  var only$1 = function (element) {\n    var parent = Option.from(element.dom().documentElement).map(Element$$1.fromDom).getOr(element);\n    return {\n      parent: constant(parent),\n      view: constant(element),\n      origin: constant(Position(0, 0))\n    };\n  };\n  var detached = function (editable, chrome) {\n    var origin = curry($_2ipv1snfjnlpb37b.absolute, chrome);\n    return {\n      parent: constant(chrome),\n      view: constant(editable),\n      origin: origin\n    };\n  };\n  var body$1 = function (editable, chrome) {\n    return {\n      parent: constant(chrome),\n      view: constant(editable),\n      origin: constant(Position(0, 0))\n    };\n  };\n  var $_3sofg5p3jnlpb3jp = {\n    only: only$1,\n    detached: detached,\n    body: body$1\n  };\n\n  function Event (fields) {\n    var struct = Immutable.apply(null, fields);\n    var handlers = [];\n    var bind$$1 = function (handler) {\n      if (handler === undefined) {\n        throw 'Event bind error: undefined handler';\n      }\n      handlers.push(handler);\n    };\n    var unbind = function (handler) {\n      handlers = filter(handlers, function (h) {\n        return h !== handler;\n      });\n    };\n    var trigger = function () {\n      var event = struct.apply(null, arguments);\n      each(handlers, function (handler) {\n        handler(event);\n      });\n    };\n    return {\n      bind: bind$$1,\n      unbind: unbind,\n      trigger: trigger\n    };\n  }\n\n  var create = function (typeDefs) {\n    var registry = map$1(typeDefs, function (event) {\n      return {\n        bind: event.bind,\n        unbind: event.unbind\n      };\n    });\n    var trigger = map$1(typeDefs, function (event) {\n      return event.trigger;\n    });\n    return {\n      registry: registry,\n      trigger: trigger\n    };\n  };\n  var $_1h053sp6jnlpb3kj = { create: create };\n\n  var mode = exactly([\n    'compare',\n    'extract',\n    'mutate',\n    'sink'\n  ]);\n  var sink = exactly([\n    'element',\n    'start',\n    'stop',\n    'destroy'\n  ]);\n  var api$3 = exactly([\n    'forceDrop',\n    'drop',\n    'move',\n    'delayDrop'\n  ]);\n  var $_giccoxpajnlpb3lt = {\n    mode: mode,\n    sink: sink,\n    api: api$3\n  };\n\n  var styles$1 = css('ephox-dragster');\n  var $_ey51h9pcjnlpb3md = { resolve: styles$1.resolve };\n\n  function Blocker (options) {\n    var settings = merge$1({ 'layerClass': $_ey51h9pcjnlpb3md.resolve('blocker') }, options);\n    var div = Element$$1.fromTag('div');\n    $_9u6utvm2jnlpb2wv.set(div, 'role', 'presentation');\n    $_g8mvdembjnlpb2ya.setAll(div, {\n      position: 'fixed',\n      left: '0px',\n      top: '0px',\n      width: '100%',\n      height: '100%'\n    });\n    $_fy8l6zo3jnlpb3d8.add(div, $_ey51h9pcjnlpb3md.resolve('blocker'));\n    $_fy8l6zo3jnlpb3d8.add(div, settings.layerClass);\n    var element = function () {\n      return div;\n    };\n    var destroy = function () {\n      $_cybn8qmejnlpb2yr.remove(div);\n    };\n    return {\n      element: element,\n      destroy: destroy\n    };\n  }\n\n  var mkEvent = function (target, x, y, stop, prevent, kill, raw) {\n    return {\n      'target': constant(target),\n      'x': constant(x),\n      'y': constant(y),\n      'stop': stop,\n      'prevent': prevent,\n      'kill': kill,\n      'raw': constant(raw)\n    };\n  };\n  var handle = function (filter, handler) {\n    return function (rawEvent) {\n      if (!filter(rawEvent))\n        return;\n      var target = Element$$1.fromDom(rawEvent.target);\n      var stop = function () {\n        rawEvent.stopPropagation();\n      };\n      var prevent = function () {\n        rawEvent.preventDefault();\n      };\n      var kill = compose(prevent, stop);\n      var evt = mkEvent(target, rawEvent.clientX, rawEvent.clientY, stop, prevent, kill, rawEvent);\n      handler(evt);\n    };\n  };\n  var binder = function (element, event, filter, handler, useCapture) {\n    var wrapped = handle(filter, handler);\n    element.dom().addEventListener(event, wrapped, useCapture);\n    return { unbind: curry(unbind, element, event, wrapped, useCapture) };\n  };\n  var bind$1 = function (element, event, filter, handler) {\n    return binder(element, event, filter, handler, false);\n  };\n  var capture = function (element, event, filter, handler) {\n    return binder(element, event, filter, handler, true);\n  };\n  var unbind = function (element, event, handler, useCapture) {\n    element.dom().removeEventListener(event, handler, useCapture);\n  };\n  var $_7kzx7cpejnlpb3mk = {\n    bind: bind$1,\n    capture: capture\n  };\n\n  var filter$1 = constant(true);\n  var bind$2 = function (element, event, handler) {\n    return $_7kzx7cpejnlpb3mk.bind(element, event, filter$1, handler);\n  };\n  var capture$1 = function (element, event, handler) {\n    return $_7kzx7cpejnlpb3mk.capture(element, event, filter$1, handler);\n  };\n  var $_4o4bswpdjnlpb3mh = {\n    bind: bind$2,\n    capture: capture$1\n  };\n\n  var compare = function (old, nu) {\n    return Position(nu.left() - old.left(), nu.top() - old.top());\n  };\n  var extract$1 = function (event) {\n    return Option.some(Position(event.x(), event.y()));\n  };\n  var mutate$1 = function (mutation, info) {\n    mutation.mutate(info.left(), info.top());\n  };\n  var sink$1 = function (dragApi, settings) {\n    var blocker = Blocker(settings);\n    var mdown = $_4o4bswpdjnlpb3mh.bind(blocker.element(), 'mousedown', dragApi.forceDrop);\n    var mup = $_4o4bswpdjnlpb3mh.bind(blocker.element(), 'mouseup', dragApi.drop);\n    var mmove = $_4o4bswpdjnlpb3mh.bind(blocker.element(), 'mousemove', dragApi.move);\n    var mout = $_4o4bswpdjnlpb3mh.bind(blocker.element(), 'mouseout', dragApi.delayDrop);\n    var destroy = function () {\n      blocker.destroy();\n      mup.unbind();\n      mmove.unbind();\n      mout.unbind();\n      mdown.unbind();\n    };\n    var start = function (parent) {\n      $_5hzj77mdjnlpb2yp.append(parent, blocker.element());\n    };\n    var stop = function () {\n      $_cybn8qmejnlpb2yr.remove(blocker.element());\n    };\n    return $_giccoxpajnlpb3lt.sink({\n      element: blocker.element,\n      start: start,\n      stop: stop,\n      destroy: destroy\n    });\n  };\n  var MouseDrag = $_giccoxpajnlpb3lt.mode({\n    compare: compare,\n    extract: extract$1,\n    sink: sink$1,\n    mutate: mutate$1\n  });\n\n  function InDrag () {\n    var previous = Option.none();\n    var reset = function () {\n      previous = Option.none();\n    };\n    var update = function (mode, nu) {\n      var result = previous.map(function (old) {\n        return mode.compare(old, nu);\n      });\n      previous = Option.some(nu);\n      return result;\n    };\n    var onEvent = function (event, mode) {\n      var dataOption = mode.extract(event);\n      dataOption.each(function (data) {\n        var offset = update(mode, data);\n        offset.each(function (d) {\n          events.trigger.move(d);\n        });\n      });\n    };\n    var events = $_1h053sp6jnlpb3kj.create({ move: Event(['info']) });\n    return {\n      onEvent: onEvent,\n      reset: reset,\n      events: events.registry\n    };\n  }\n\n  function NoDrag (anchor) {\n    var onEvent = function (event, mode) {\n    };\n    return {\n      onEvent: onEvent,\n      reset: noop\n    };\n  }\n\n  function Movement () {\n    var noDragState = NoDrag();\n    var inDragState = InDrag();\n    var dragState = noDragState;\n    var on = function () {\n      dragState.reset();\n      dragState = inDragState;\n    };\n    var off = function () {\n      dragState.reset();\n      dragState = noDragState;\n    };\n    var onEvent = function (event, mode) {\n      dragState.onEvent(event, mode);\n    };\n    var isOn = function () {\n      return dragState === inDragState;\n    };\n    return {\n      on: on,\n      off: off,\n      isOn: isOn,\n      onEvent: onEvent,\n      events: inDragState.events\n    };\n  }\n\n  var last$3 = function (fn, rate) {\n    var timer = null;\n    var cancel = function () {\n      if (timer !== null) {\n        clearTimeout(timer);\n        timer = null;\n      }\n    };\n    var throttle = function () {\n      var args = [];\n      for (var _i = 0; _i < arguments.length; _i++) {\n        args[_i] = arguments[_i];\n      }\n      if (timer !== null)\n        clearTimeout(timer);\n      timer = setTimeout(function () {\n        fn.apply(null, args);\n        timer = null;\n      }, rate);\n    };\n    return {\n      cancel: cancel,\n      throttle: throttle\n    };\n  };\n\n  var setup = function (mutation, mode, settings) {\n    var active = false;\n    var events = $_1h053sp6jnlpb3kj.create({\n      start: Event([]),\n      stop: Event([])\n    });\n    var movement = Movement();\n    var drop = function () {\n      sink.stop();\n      if (movement.isOn()) {\n        movement.off();\n        events.trigger.stop();\n      }\n    };\n    var throttledDrop = last$3(drop, 200);\n    var go = function (parent) {\n      sink.start(parent);\n      movement.on();\n      events.trigger.start();\n    };\n    var mousemove = function (event, ui) {\n      throttledDrop.cancel();\n      movement.onEvent(event, mode);\n    };\n    movement.events.move.bind(function (event) {\n      mode.mutate(mutation, event.info());\n    });\n    var on = function () {\n      active = true;\n    };\n    var off = function () {\n      active = false;\n    };\n    var runIfActive = function (f) {\n      return function () {\n        var args = Array.prototype.slice.call(arguments, 0);\n        if (active) {\n          return f.apply(null, args);\n        }\n      };\n    };\n    var sink = mode.sink($_giccoxpajnlpb3lt.api({\n      forceDrop: drop,\n      drop: runIfActive(drop),\n      move: runIfActive(mousemove),\n      delayDrop: runIfActive(throttledDrop.throttle)\n    }), settings);\n    var destroy = function () {\n      sink.destroy();\n    };\n    return {\n      element: sink.element,\n      go: go,\n      on: on,\n      off: off,\n      destroy: destroy,\n      events: events.registry\n    };\n  };\n  var $_b0ft8spfjnlpb3mo = { setup: setup };\n\n  var transform$1 = function (mutation, options) {\n    var settings = options !== undefined ? options : {};\n    var mode = settings.mode !== undefined ? settings.mode : MouseDrag;\n    return $_b0ft8spfjnlpb3mo.setup(mutation, mode, options);\n  };\n  var $_fs34odp8jnlpb3lh = { transform: transform$1 };\n\n  function Mutation () {\n    var events = $_1h053sp6jnlpb3kj.create({\n      'drag': Event([\n        'xDelta',\n        'yDelta'\n      ])\n    });\n    var mutate = function (x, y) {\n      events.trigger.drag(x, y);\n    };\n    return {\n      mutate: mutate,\n      events: events.registry\n    };\n  }\n\n  function BarMutation () {\n    var events = $_1h053sp6jnlpb3kj.create({\n      drag: Event([\n        'xDelta',\n        'yDelta',\n        'target'\n      ])\n    });\n    var target = Option.none();\n    var delegate = Mutation();\n    delegate.events.drag.bind(function (event) {\n      target.each(function (t) {\n        events.trigger.drag(event.xDelta(), event.yDelta(), t);\n      });\n    });\n    var assign = function (t) {\n      target = Option.some(t);\n    };\n    var get = function () {\n      return target;\n    };\n    return {\n      assign: assign,\n      get: get,\n      mutate: delegate.mutate,\n      events: events.registry\n    };\n  }\n\n  var any = function (selector) {\n    return $_gdszrpm7jnlpb2xk.first(selector).isSome();\n  };\n  var ancestor$2 = function (scope, selector, isRoot) {\n    return $_gdszrpm7jnlpb2xk.ancestor(scope, selector, isRoot).isSome();\n  };\n  var sibling$2 = function (scope, selector) {\n    return $_gdszrpm7jnlpb2xk.sibling(scope, selector).isSome();\n  };\n  var child$3 = function (scope, selector) {\n    return $_gdszrpm7jnlpb2xk.child(scope, selector).isSome();\n  };\n  var descendant$2 = function (scope, selector) {\n    return $_gdszrpm7jnlpb2xk.descendant(scope, selector).isSome();\n  };\n  var closest$2 = function (scope, selector, isRoot) {\n    return $_gdszrpm7jnlpb2xk.closest(scope, selector, isRoot).isSome();\n  };\n  var $_5b9d06pmjnlpb3np = {\n    any: any,\n    ancestor: ancestor$2,\n    sibling: sibling$2,\n    child: child$3,\n    descendant: descendant$2,\n    closest: closest$2\n  };\n\n  var resizeBarDragging = $_68goq0o1jnlpb3cz.resolve('resizer-bar-dragging');\n  function BarManager (wire, direction, hdirection) {\n    var mutation = BarMutation();\n    var resizing = $_fs34odp8jnlpb3lh.transform(mutation, {});\n    var hoverTable = Option.none();\n    var getResizer = function (element, type) {\n      return Option.from($_9u6utvm2jnlpb2wv.get(element, type));\n    };\n    mutation.events.drag.bind(function (event) {\n      getResizer(event.target(), 'data-row').each(function (_dataRow) {\n        var currentRow = $_eoi5lkohjnlpb3f8.getInt(event.target(), 'top');\n        $_g8mvdembjnlpb2ya.set(event.target(), 'top', currentRow + event.yDelta() + 'px');\n      });\n      getResizer(event.target(), 'data-column').each(function (_dataCol) {\n        var currentCol = $_eoi5lkohjnlpb3f8.getInt(event.target(), 'left');\n        $_g8mvdembjnlpb2ya.set(event.target(), 'left', currentCol + event.xDelta() + 'px');\n      });\n    });\n    var getDelta = function (target, direction) {\n      var newX = $_eoi5lkohjnlpb3f8.getInt(target, direction);\n      var oldX = parseInt($_9u6utvm2jnlpb2wv.get(target, 'data-initial-' + direction), 10);\n      return newX - oldX;\n    };\n    resizing.events.stop.bind(function () {\n      mutation.get().each(function (target) {\n        hoverTable.each(function (table) {\n          getResizer(target, 'data-row').each(function (row) {\n            var delta = getDelta(target, 'top');\n            $_9u6utvm2jnlpb2wv.remove(target, 'data-initial-top');\n            events.trigger.adjustHeight(table, delta, parseInt(row, 10));\n          });\n          getResizer(target, 'data-column').each(function (column) {\n            var delta = getDelta(target, 'left');\n            $_9u6utvm2jnlpb2wv.remove(target, 'data-initial-left');\n            events.trigger.adjustWidth(table, delta, parseInt(column, 10));\n          });\n          $_cr2z98nxjnlpb3bk.refresh(wire, table, hdirection, direction);\n        });\n      });\n    });\n    var handler = function (target, direction) {\n      events.trigger.startAdjust();\n      mutation.assign(target);\n      $_9u6utvm2jnlpb2wv.set(target, 'data-initial-' + direction, parseInt($_g8mvdembjnlpb2ya.get(target, direction), 10));\n      $_fy8l6zo3jnlpb3d8.add(target, resizeBarDragging);\n      $_g8mvdembjnlpb2ya.set(target, 'opacity', '0.2');\n      resizing.go(wire.parent());\n    };\n    var mousedown = $_4o4bswpdjnlpb3mh.bind(wire.parent(), 'mousedown', function (event) {\n      if ($_cr2z98nxjnlpb3bk.isRowBar(event.target()))\n        handler(event.target(), 'top');\n      if ($_cr2z98nxjnlpb3bk.isColBar(event.target()))\n        handler(event.target(), 'left');\n    });\n    var isRoot = function (e) {\n      return $_3k22killjnlpb2vb.eq(e, wire.view());\n    };\n    var mouseover = $_4o4bswpdjnlpb3mh.bind(wire.view(), 'mouseover', function (event) {\n      if ($_erx5tem3jnlpb2x3.name(event.target()) === 'table' || $_5b9d06pmjnlpb3np.closest(event.target(), 'table', isRoot)) {\n        hoverTable = $_erx5tem3jnlpb2x3.name(event.target()) === 'table' ? Option.some(event.target()) : $_gdszrpm7jnlpb2xk.ancestor(event.target(), 'table', isRoot);\n        hoverTable.each(function (ht) {\n          $_cr2z98nxjnlpb3bk.refresh(wire, ht, hdirection, direction);\n        });\n      } else if ($_1ie4uvm6jnlpb2xf.inBody(event.target())) {\n        $_cr2z98nxjnlpb3bk.destroy(wire);\n      }\n    });\n    var destroy = function () {\n      mousedown.unbind();\n      mouseover.unbind();\n      resizing.destroy();\n      $_cr2z98nxjnlpb3bk.destroy(wire);\n    };\n    var refresh = function (tbl) {\n      $_cr2z98nxjnlpb3bk.refresh(wire, tbl, hdirection, direction);\n    };\n    var events = $_1h053sp6jnlpb3kj.create({\n      adjustHeight: Event([\n        'table',\n        'delta',\n        'row'\n      ]),\n      adjustWidth: Event([\n        'table',\n        'delta',\n        'column'\n      ]),\n      startAdjust: Event([])\n    });\n    return {\n      destroy: destroy,\n      refresh: refresh,\n      on: resizing.on,\n      off: resizing.off,\n      hideBars: curry($_cr2z98nxjnlpb3bk.hide, wire),\n      showBars: curry($_cr2z98nxjnlpb3bk.show, wire),\n      events: events.registry\n    };\n  }\n\n  function TableResize (wire, vdirection) {\n    var hdirection = $_6u52cqnejnlpb36x.height;\n    var manager = BarManager(wire, vdirection, hdirection);\n    var events = $_1h053sp6jnlpb3kj.create({\n      beforeResize: Event(['table']),\n      afterResize: Event(['table']),\n      startDrag: Event([])\n    });\n    manager.events.adjustHeight.bind(function (event) {\n      events.trigger.beforeResize(event.table());\n      var delta = hdirection.delta(event.delta(), event.table());\n      $_ed8i3sodjnlpb3em.adjustHeight(event.table(), delta, event.row(), hdirection);\n      events.trigger.afterResize(event.table());\n    });\n    manager.events.startAdjust.bind(function (event) {\n      events.trigger.startDrag();\n    });\n    manager.events.adjustWidth.bind(function (event) {\n      events.trigger.beforeResize(event.table());\n      var delta = vdirection.delta(event.delta(), event.table());\n      $_ed8i3sodjnlpb3em.adjustWidth(event.table(), delta, event.column(), vdirection);\n      events.trigger.afterResize(event.table());\n    });\n    return {\n      on: manager.on,\n      off: manager.off,\n      hideBars: manager.hideBars,\n      showBars: manager.showBars,\n      destroy: manager.destroy,\n      events: events.registry\n    };\n  }\n\n  var createContainer = function () {\n    var container = Element$$1.fromTag('div');\n    $_g8mvdembjnlpb2ya.setAll(container, {\n      position: 'static',\n      height: '0',\n      width: '0',\n      padding: '0',\n      margin: '0',\n      border: '0'\n    });\n    $_5hzj77mdjnlpb2yp.append($_1ie4uvm6jnlpb2xf.body(), container);\n    return container;\n  };\n  var get$9 = function (editor, container) {\n    return editor.inline ? $_3sofg5p3jnlpb3jp.body(getBody$1(editor), createContainer()) : $_3sofg5p3jnlpb3jp.only(Element$$1.fromDom(editor.getDoc()));\n  };\n  var remove$6 = function (editor, wire) {\n    if (editor.inline) {\n      $_cybn8qmejnlpb2yr.remove(wire.parent());\n    }\n  };\n  var $_f0se2dpnjnlpb3nr = {\n    get: get$9,\n    remove: remove$6\n  };\n\n  var ResizeHandler = function (editor) {\n    var selectionRng = Option.none();\n    var resize = Option.none();\n    var wire = Option.none();\n    var percentageBasedSizeRegex = /(\\d+(\\.\\d+)?)%/;\n    var startW, startRawW;\n    var isTable = function (elm) {\n      return elm.nodeName === 'TABLE';\n    };\n    var getRawWidth = function (elm) {\n      return editor.dom.getStyle(elm, 'width') || editor.dom.getAttrib(elm, 'width');\n    };\n    var lazyResize = function () {\n      return resize;\n    };\n    var lazyWire = function () {\n      return wire.getOr($_3sofg5p3jnlpb3jp.only(Element$$1.fromDom(editor.getBody())));\n    };\n    var destroy = function () {\n      resize.each(function (sz) {\n        sz.destroy();\n      });\n      wire.each(function (w) {\n        $_f0se2dpnjnlpb3nr.remove(editor, w);\n      });\n    };\n    editor.on('init', function () {\n      var direction = TableDirection($_1wn5holjnlpb3g6.directionAt);\n      var rawWire = $_f0se2dpnjnlpb3nr.get(editor);\n      wire = Option.some(rawWire);\n      if (hasObjectResizing(editor) && hasTableResizeBars(editor)) {\n        var sz = TableResize(rawWire, direction);\n        sz.on();\n        sz.events.startDrag.bind(function (event) {\n          selectionRng = Option.some(editor.selection.getRng());\n        });\n        sz.events.beforeResize.bind(function (event) {\n          var rawTable = event.table().dom();\n          fireObjectResizeStart(editor, rawTable, getPixelWidth$1(rawTable), getPixelHeight(rawTable));\n        });\n        sz.events.afterResize.bind(function (event) {\n          var table = event.table();\n          var rawTable = table.dom();\n          removeDataStyle(table);\n          selectionRng.each(function (rng) {\n            editor.selection.setRng(rng);\n            editor.focus();\n          });\n          fireObjectResized(editor, rawTable, getPixelWidth$1(rawTable), getPixelHeight(rawTable));\n          editor.undoManager.add();\n        });\n        resize = Option.some(sz);\n      }\n    });\n    editor.on('ObjectResizeStart', function (e) {\n      var targetElm = e.target;\n      if (isTable(targetElm)) {\n        startW = e.width;\n        startRawW = getRawWidth(targetElm);\n      }\n    });\n    editor.on('ObjectResized', function (e) {\n      var targetElm = e.target;\n      if (isTable(targetElm)) {\n        var table = targetElm;\n        if (percentageBasedSizeRegex.test(startRawW)) {\n          var percentW = parseFloat(percentageBasedSizeRegex.exec(startRawW)[1]);\n          var targetPercentW = e.width * percentW / startW;\n          editor.dom.setStyle(table, 'width', targetPercentW + '%');\n        } else {\n          var newCellSizes_1 = [];\n          global$1.each(table.rows, function (row) {\n            global$1.each(row.cells, function (cell) {\n              var width = editor.dom.getStyle(cell, 'width', true);\n              newCellSizes_1.push({\n                cell: cell,\n                width: width\n              });\n            });\n          });\n          global$1.each(newCellSizes_1, function (newCellSize) {\n            editor.dom.setStyle(newCellSize.cell, 'width', newCellSize.width);\n            editor.dom.setAttrib(newCellSize.cell, 'width', null);\n          });\n        }\n      }\n    });\n    return {\n      lazyResize: lazyResize,\n      lazyWire: lazyWire,\n      destroy: destroy\n    };\n  };\n\n  var none$2 = function (current) {\n    return folder$1(function (n, f, m, l) {\n      return n(current);\n    });\n  };\n  var first$5 = function (current) {\n    return folder$1(function (n, f, m, l) {\n      return f(current);\n    });\n  };\n  var middle$1 = function (current, target) {\n    return folder$1(function (n, f, m, l) {\n      return m(current, target);\n    });\n  };\n  var last$4 = function (current) {\n    return folder$1(function (n, f, m, l) {\n      return l(current);\n    });\n  };\n  var folder$1 = function (fold) {\n    return { fold: fold };\n  };\n  var $_eqlswpqjnlpb3oy = {\n    none: none$2,\n    first: first$5,\n    middle: middle$1,\n    last: last$4\n  };\n\n  var detect$4 = function (current, isRoot) {\n    return $_em4z2mldjnlpb2sz.table(current, isRoot).bind(function (table) {\n      var all = $_em4z2mldjnlpb2sz.cells(table);\n      var index = findIndex(all, function (x) {\n        return $_3k22killjnlpb2vb.eq(current, x);\n      });\n      return index.map(function (ind) {\n        return {\n          index: constant(ind),\n          all: constant(all)\n        };\n      });\n    });\n  };\n  var next = function (current, isRoot) {\n    var detection = detect$4(current, isRoot);\n    return detection.fold(function () {\n      return $_eqlswpqjnlpb3oy.none(current);\n    }, function (info) {\n      return info.index() + 1 < info.all().length ? $_eqlswpqjnlpb3oy.middle(current, info.all()[info.index() + 1]) : $_eqlswpqjnlpb3oy.last(current);\n    });\n  };\n  var prev = function (current, isRoot) {\n    var detection = detect$4(current, isRoot);\n    return detection.fold(function () {\n      return $_eqlswpqjnlpb3oy.none();\n    }, function (info) {\n      return info.index() - 1 >= 0 ? $_eqlswpqjnlpb3oy.middle(current, info.all()[info.index() - 1]) : $_eqlswpqjnlpb3oy.first(current);\n    });\n  };\n  var $_fg7b7hppjnlpb3oq = {\n    next: next,\n    prev: prev\n  };\n\n  var adt = Adt.generate([\n    { 'before': ['element'] },\n    {\n      'on': [\n        'element',\n        'offset'\n      ]\n    },\n    { after: ['element'] }\n  ]);\n  var cata$1 = function (subject, onBefore, onOn, onAfter) {\n    return subject.fold(onBefore, onOn, onAfter);\n  };\n  var getStart = function (situ) {\n    return situ.fold(identity, identity, identity);\n  };\n  var $_1jbfrupsjnlpb3p6 = {\n    before: adt.before,\n    on: adt.on,\n    after: adt.after,\n    cata: cata$1,\n    getStart: getStart\n  };\n\n  var type$2 = Adt.generate([\n    { domRange: ['rng'] },\n    {\n      relative: [\n        'startSitu',\n        'finishSitu'\n      ]\n    },\n    {\n      exact: [\n        'start',\n        'soffset',\n        'finish',\n        'foffset'\n      ]\n    }\n  ]);\n  var range$2 = Immutable('start', 'soffset', 'finish', 'foffset');\n  var exactFromRange = function (simRange) {\n    return type$2.exact(simRange.start(), simRange.soffset(), simRange.finish(), simRange.foffset());\n  };\n  var getStart$1 = function (selection) {\n    return selection.match({\n      domRange: function (rng) {\n        return Element$$1.fromDom(rng.startContainer);\n      },\n      relative: function (startSitu, finishSitu) {\n        return $_1jbfrupsjnlpb3p6.getStart(startSitu);\n      },\n      exact: function (start, soffset, finish, foffset) {\n        return start;\n      }\n    });\n  };\n  var getWin = function (selection) {\n    var start = getStart$1(selection);\n    return $_2pl1nljjnlpb2ur.defaultView(start);\n  };\n  var $_3nispmprjnlpb3p0 = {\n    domRange: type$2.domRange,\n    relative: type$2.relative,\n    exact: type$2.exact,\n    exactFromRange: exactFromRange,\n    range: range$2,\n    getWin: getWin\n  };\n\n  var makeRange = function (start, soffset, finish, foffset) {\n    var doc = $_2pl1nljjnlpb2ur.owner(start);\n    var rng = doc.dom().createRange();\n    rng.setStart(start.dom(), soffset);\n    rng.setEnd(finish.dom(), foffset);\n    return rng;\n  };\n  var commonAncestorContainer = function (start, soffset, finish, foffset) {\n    var r = makeRange(start, soffset, finish, foffset);\n    return Element$$1.fromDom(r.commonAncestorContainer);\n  };\n  var after$2 = function (start, soffset, finish, foffset) {\n    var r = makeRange(start, soffset, finish, foffset);\n    var same = $_3k22killjnlpb2vb.eq(start, finish) && soffset === foffset;\n    return r.collapsed && !same;\n  };\n  var $_3zlyaipujnlpb3pi = {\n    after: after$2,\n    commonAncestorContainer: commonAncestorContainer\n  };\n\n  var fromElements = function (elements, scope) {\n    var doc = scope || document;\n    var fragment = doc.createDocumentFragment();\n    each(elements, function (element) {\n      fragment.appendChild(element.dom());\n    });\n    return Element$$1.fromDom(fragment);\n  };\n  var $_4brybspvjnlpb3pk = { fromElements: fromElements };\n\n  var selectNodeContents = function (win, element) {\n    var rng = win.document.createRange();\n    selectNodeContentsUsing(rng, element);\n    return rng;\n  };\n  var selectNodeContentsUsing = function (rng, element) {\n    rng.selectNodeContents(element.dom());\n  };\n  var isWithin$1 = function (outerRange, innerRange) {\n    return innerRange.compareBoundaryPoints(outerRange.END_TO_START, outerRange) < 1 && innerRange.compareBoundaryPoints(outerRange.START_TO_END, outerRange) > -1;\n  };\n  var create$1 = function (win) {\n    return win.document.createRange();\n  };\n  var setStart = function (rng, situ) {\n    situ.fold(function (e) {\n      rng.setStartBefore(e.dom());\n    }, function (e, o) {\n      rng.setStart(e.dom(), o);\n    }, function (e) {\n      rng.setStartAfter(e.dom());\n    });\n  };\n  var setFinish = function (rng, situ) {\n    situ.fold(function (e) {\n      rng.setEndBefore(e.dom());\n    }, function (e, o) {\n      rng.setEnd(e.dom(), o);\n    }, function (e) {\n      rng.setEndAfter(e.dom());\n    });\n  };\n  var replaceWith = function (rng, fragment) {\n    deleteContents(rng);\n    rng.insertNode(fragment.dom());\n  };\n  var relativeToNative = function (win, startSitu, finishSitu) {\n    var range = win.document.createRange();\n    setStart(range, startSitu);\n    setFinish(range, finishSitu);\n    return range;\n  };\n  var exactToNative = function (win, start, soffset, finish, foffset) {\n    var rng = win.document.createRange();\n    rng.setStart(start.dom(), soffset);\n    rng.setEnd(finish.dom(), foffset);\n    return rng;\n  };\n  var deleteContents = function (rng) {\n    rng.deleteContents();\n  };\n  var cloneFragment = function (rng) {\n    var fragment = rng.cloneContents();\n    return Element$$1.fromDom(fragment);\n  };\n  var toRect = function (rect) {\n    return {\n      left: constant(rect.left),\n      top: constant(rect.top),\n      right: constant(rect.right),\n      bottom: constant(rect.bottom),\n      width: constant(rect.width),\n      height: constant(rect.height)\n    };\n  };\n  var getFirstRect = function (rng) {\n    var rects = rng.getClientRects();\n    var rect = rects.length > 0 ? rects[0] : rng.getBoundingClientRect();\n    return rect.width > 0 || rect.height > 0 ? Option.some(rect).map(toRect) : Option.none();\n  };\n  var getBounds$1 = function (rng) {\n    var rect = rng.getBoundingClientRect();\n    return rect.width > 0 || rect.height > 0 ? Option.some(rect).map(toRect) : Option.none();\n  };\n  var toString = function (rng) {\n    return rng.toString();\n  };\n  var $_3bxnj0pwjnlpb3po = {\n    create: create$1,\n    replaceWith: replaceWith,\n    selectNodeContents: selectNodeContents,\n    selectNodeContentsUsing: selectNodeContentsUsing,\n    relativeToNative: relativeToNative,\n    exactToNative: exactToNative,\n    deleteContents: deleteContents,\n    cloneFragment: cloneFragment,\n    getFirstRect: getFirstRect,\n    getBounds: getBounds$1,\n    isWithin: isWithin$1,\n    toString: toString\n  };\n\n  var adt$1 = Adt.generate([\n    {\n      ltr: [\n        'start',\n        'soffset',\n        'finish',\n        'foffset'\n      ]\n    },\n    {\n      rtl: [\n        'start',\n        'soffset',\n        'finish',\n        'foffset'\n      ]\n    }\n  ]);\n  var fromRange = function (win, type, range) {\n    return type(Element$$1.fromDom(range.startContainer), range.startOffset, Element$$1.fromDom(range.endContainer), range.endOffset);\n  };\n  var getRanges = function (win, selection) {\n    return selection.match({\n      domRange: function (rng) {\n        return {\n          ltr: constant(rng),\n          rtl: Option.none\n        };\n      },\n      relative: function (startSitu, finishSitu) {\n        return {\n          ltr: cached(function () {\n            return $_3bxnj0pwjnlpb3po.relativeToNative(win, startSitu, finishSitu);\n          }),\n          rtl: cached(function () {\n            return Option.some($_3bxnj0pwjnlpb3po.relativeToNative(win, finishSitu, startSitu));\n          })\n        };\n      },\n      exact: function (start, soffset, finish, foffset) {\n        return {\n          ltr: cached(function () {\n            return $_3bxnj0pwjnlpb3po.exactToNative(win, start, soffset, finish, foffset);\n          }),\n          rtl: cached(function () {\n            return Option.some($_3bxnj0pwjnlpb3po.exactToNative(win, finish, foffset, start, soffset));\n          })\n        };\n      }\n    });\n  };\n  var doDiagnose = function (win, ranges) {\n    var rng = ranges.ltr();\n    if (rng.collapsed) {\n      var reversed = ranges.rtl().filter(function (rev) {\n        return rev.collapsed === false;\n      });\n      return reversed.map(function (rev) {\n        return adt$1.rtl(Element$$1.fromDom(rev.endContainer), rev.endOffset, Element$$1.fromDom(rev.startContainer), rev.startOffset);\n      }).getOrThunk(function () {\n        return fromRange(win, adt$1.ltr, rng);\n      });\n    } else {\n      return fromRange(win, adt$1.ltr, rng);\n    }\n  };\n  var diagnose = function (win, selection) {\n    var ranges = getRanges(win, selection);\n    return doDiagnose(win, ranges);\n  };\n  var asLtrRange = function (win, selection) {\n    var diagnosis = diagnose(win, selection);\n    return diagnosis.match({\n      ltr: function (start, soffset, finish, foffset) {\n        var rng = win.document.createRange();\n        rng.setStart(start.dom(), soffset);\n        rng.setEnd(finish.dom(), foffset);\n        return rng;\n      },\n      rtl: function (start, soffset, finish, foffset) {\n        var rng = win.document.createRange();\n        rng.setStart(finish.dom(), foffset);\n        rng.setEnd(start.dom(), soffset);\n        return rng;\n      }\n    });\n  };\n  var $_960to1pxjnlpb3pz = {\n    ltr: adt$1.ltr,\n    rtl: adt$1.rtl,\n    diagnose: diagnose,\n    asLtrRange: asLtrRange\n  };\n\n  var searchForPoint = function (rectForOffset, x, y, maxX, length) {\n    if (length === 0)\n      return 0;\n    else if (x === maxX)\n      return length - 1;\n    var xDelta = maxX;\n    for (var i = 1; i < length; i++) {\n      var rect = rectForOffset(i);\n      var curDeltaX = Math.abs(x - rect.left);\n      if (y <= rect.bottom) {\n        if (y < rect.top || curDeltaX > xDelta) {\n          return i - 1;\n        } else {\n          xDelta = curDeltaX;\n        }\n      }\n    }\n    return 0;\n  };\n  var inRect = function (rect, x, y) {\n    return x >= rect.left && x <= rect.right && y >= rect.top && y <= rect.bottom;\n  };\n  var $_j9perq0jnlpb3qr = {\n    inRect: inRect,\n    searchForPoint: searchForPoint\n  };\n\n  var locateOffset = function (doc, textnode, x, y, rect) {\n    var rangeForOffset = function (offset) {\n      var r = doc.dom().createRange();\n      r.setStart(textnode.dom(), offset);\n      r.collapse(true);\n      return r;\n    };\n    var rectForOffset = function (offset) {\n      var r = rangeForOffset(offset);\n      return r.getBoundingClientRect();\n    };\n    var length = $_3lolvomkjnlpb304.get(textnode).length;\n    var offset = $_j9perq0jnlpb3qr.searchForPoint(rectForOffset, x, y, rect.right, length);\n    return rangeForOffset(offset);\n  };\n  var locate = function (doc, node, x, y) {\n    var r = doc.dom().createRange();\n    r.selectNode(node.dom());\n    var rects = r.getClientRects();\n    var foundRect = findMap(rects, function (rect) {\n      return $_j9perq0jnlpb3qr.inRect(rect, x, y) ? Option.some(rect) : Option.none();\n    });\n    return foundRect.map(function (rect) {\n      return locateOffset(doc, node, x, y, rect);\n    });\n  };\n  var $_3rp2ysq1jnlpb3qs = { locate: locate };\n\n  var searchInChildren = function (doc, node, x, y) {\n    var r = doc.dom().createRange();\n    var nodes = $_2pl1nljjnlpb2ur.children(node);\n    return findMap(nodes, function (n) {\n      r.selectNode(n.dom());\n      return $_j9perq0jnlpb3qr.inRect(r.getBoundingClientRect(), x, y) ? locateNode(doc, n, x, y) : Option.none();\n    });\n  };\n  var locateNode = function (doc, node, x, y) {\n    var locator = $_erx5tem3jnlpb2x3.isText(node) ? $_3rp2ysq1jnlpb3qs.locate : searchInChildren;\n    return locator(doc, node, x, y);\n  };\n  var locate$1 = function (doc, node, x, y) {\n    var r = doc.dom().createRange();\n    r.selectNode(node.dom());\n    var rect = r.getBoundingClientRect();\n    var boundedX = Math.max(rect.left, Math.min(rect.right, x));\n    var boundedY = Math.max(rect.top, Math.min(rect.bottom, y));\n    return locateNode(doc, node, boundedX, boundedY);\n  };\n  var $_dhcohjpzjnlpb3ql = { locate: locate$1 };\n\n  var COLLAPSE_TO_LEFT = true;\n  var COLLAPSE_TO_RIGHT = false;\n  var getCollapseDirection = function (rect, x) {\n    return x - rect.left < rect.right - x ? COLLAPSE_TO_LEFT : COLLAPSE_TO_RIGHT;\n  };\n  var createCollapsedNode = function (doc, target, collapseDirection) {\n    var r = doc.dom().createRange();\n    r.selectNode(target.dom());\n    r.collapse(collapseDirection);\n    return r;\n  };\n  var locateInElement = function (doc, node, x) {\n    var cursorRange = doc.dom().createRange();\n    cursorRange.selectNode(node.dom());\n    var rect = cursorRange.getBoundingClientRect();\n    var collapseDirection = getCollapseDirection(rect, x);\n    var f = collapseDirection === COLLAPSE_TO_LEFT ? $_7srx6vmijnlpb2zw.first : $_7srx6vmijnlpb2zw.last;\n    return f(node).map(function (target) {\n      return createCollapsedNode(doc, target, collapseDirection);\n    });\n  };\n  var locateInEmpty = function (doc, node, x) {\n    var rect = node.dom().getBoundingClientRect();\n    var collapseDirection = getCollapseDirection(rect, x);\n    return Option.some(createCollapsedNode(doc, node, collapseDirection));\n  };\n  var search = function (doc, node, x) {\n    var f = $_2pl1nljjnlpb2ur.children(node).length === 0 ? locateInEmpty : locateInElement;\n    return f(doc, node, x);\n  };\n  var $_ex3n38q2jnlpb3qy = { search: search };\n\n  var caretPositionFromPoint = function (doc, x, y) {\n    return Option.from(doc.dom().caretPositionFromPoint(x, y)).bind(function (pos) {\n      if (pos.offsetNode === null)\n        return Option.none();\n      var r = doc.dom().createRange();\n      r.setStart(pos.offsetNode, pos.offset);\n      r.collapse();\n      return Option.some(r);\n    });\n  };\n  var caretRangeFromPoint = function (doc, x, y) {\n    return Option.from(doc.dom().caretRangeFromPoint(x, y));\n  };\n  var searchTextNodes = function (doc, node, x, y) {\n    var r = doc.dom().createRange();\n    r.selectNode(node.dom());\n    var rect = r.getBoundingClientRect();\n    var boundedX = Math.max(rect.left, Math.min(rect.right, x));\n    var boundedY = Math.max(rect.top, Math.min(rect.bottom, y));\n    return $_dhcohjpzjnlpb3ql.locate(doc, node, boundedX, boundedY);\n  };\n  var searchFromPoint = function (doc, x, y) {\n    return Element$$1.fromPoint(doc, x, y).bind(function (elem) {\n      var fallback = function () {\n        return $_ex3n38q2jnlpb3qy.search(doc, elem, x);\n      };\n      return $_2pl1nljjnlpb2ur.children(elem).length === 0 ? fallback() : searchTextNodes(doc, elem, x, y).orThunk(fallback);\n    });\n  };\n  var availableSearch = document.caretPositionFromPoint ? caretPositionFromPoint : document.caretRangeFromPoint ? caretRangeFromPoint : searchFromPoint;\n  var fromPoint$1 = function (win, x, y) {\n    var doc = Element$$1.fromDom(win.document);\n    return availableSearch(doc, x, y).map(function (rng) {\n      return $_3nispmprjnlpb3p0.range(Element$$1.fromDom(rng.startContainer), rng.startOffset, Element$$1.fromDom(rng.endContainer), rng.endOffset);\n    });\n  };\n  var $_ctcznhpyjnlpb3qg = { fromPoint: fromPoint$1 };\n\n  var withinContainer = function (win, ancestor, outerRange, selector) {\n    var innerRange = $_3bxnj0pwjnlpb3po.create(win);\n    var self = $_1mxomdlfjnlpb2tz.is(ancestor, selector) ? [ancestor] : [];\n    var elements = self.concat($_97aehqm4jnlpb2x5.descendants(ancestor, selector));\n    return filter(elements, function (elem) {\n      $_3bxnj0pwjnlpb3po.selectNodeContentsUsing(innerRange, elem);\n      return $_3bxnj0pwjnlpb3po.isWithin(outerRange, innerRange);\n    });\n  };\n  var find$3 = function (win, selection, selector) {\n    var outerRange = $_960to1pxjnlpb3pz.asLtrRange(win, selection);\n    var ancestor = Element$$1.fromDom(outerRange.commonAncestorContainer);\n    return $_erx5tem3jnlpb2x3.isElement(ancestor) ? withinContainer(win, ancestor, outerRange, selector) : [];\n  };\n  var $_a1llruq3jnlpb3r1 = { find: find$3 };\n\n  var beforeSpecial = function (element, offset) {\n    var name = $_erx5tem3jnlpb2x3.name(element);\n    if ('input' === name)\n      return $_1jbfrupsjnlpb3p6.after(element);\n    else if (!contains([\n        'br',\n        'img'\n      ], name))\n      return $_1jbfrupsjnlpb3p6.on(element, offset);\n    else\n      return offset === 0 ? $_1jbfrupsjnlpb3p6.before(element) : $_1jbfrupsjnlpb3p6.after(element);\n  };\n  var preprocessRelative = function (startSitu, finishSitu) {\n    var start = startSitu.fold($_1jbfrupsjnlpb3p6.before, beforeSpecial, $_1jbfrupsjnlpb3p6.after);\n    var finish = finishSitu.fold($_1jbfrupsjnlpb3p6.before, beforeSpecial, $_1jbfrupsjnlpb3p6.after);\n    return $_3nispmprjnlpb3p0.relative(start, finish);\n  };\n  var preprocessExact = function (start, soffset, finish, foffset) {\n    var startSitu = beforeSpecial(start, soffset);\n    var finishSitu = beforeSpecial(finish, foffset);\n    return $_3nispmprjnlpb3p0.relative(startSitu, finishSitu);\n  };\n  var preprocess = function (selection) {\n    return selection.match({\n      domRange: function (rng) {\n        var start = Element$$1.fromDom(rng.startContainer);\n        var finish = Element$$1.fromDom(rng.endContainer);\n        return preprocessExact(start, rng.startOffset, finish, rng.endOffset);\n      },\n      relative: preprocessRelative,\n      exact: preprocessExact\n    });\n  };\n  var $_73jk3jq4jnlpb3r6 = {\n    beforeSpecial: beforeSpecial,\n    preprocess: preprocess,\n    preprocessRelative: preprocessRelative,\n    preprocessExact: preprocessExact\n  };\n\n  var doSetNativeRange = function (win, rng) {\n    Option.from(win.getSelection()).each(function (selection) {\n      selection.removeAllRanges();\n      selection.addRange(rng);\n    });\n  };\n  var doSetRange = function (win, start, soffset, finish, foffset) {\n    var rng = $_3bxnj0pwjnlpb3po.exactToNative(win, start, soffset, finish, foffset);\n    doSetNativeRange(win, rng);\n  };\n  var findWithin = function (win, selection, selector) {\n    return $_a1llruq3jnlpb3r1.find(win, selection, selector);\n  };\n  var setLegacyRtlRange = function (win, selection, start, soffset, finish, foffset) {\n    selection.collapse(start.dom(), soffset);\n    selection.extend(finish.dom(), foffset);\n  };\n  var setRangeFromRelative = function (win, relative) {\n    return $_960to1pxjnlpb3pz.diagnose(win, relative).match({\n      ltr: function (start, soffset, finish, foffset) {\n        doSetRange(win, start, soffset, finish, foffset);\n      },\n      rtl: function (start, soffset, finish, foffset) {\n        var selection = win.getSelection();\n        if (selection.setBaseAndExtent) {\n          selection.setBaseAndExtent(start.dom(), soffset, finish.dom(), foffset);\n        } else if (selection.extend) {\n          try {\n            setLegacyRtlRange(win, selection, start, soffset, finish, foffset);\n          } catch (e) {\n            doSetRange(win, finish, foffset, start, soffset);\n          }\n        } else {\n          doSetRange(win, finish, foffset, start, soffset);\n        }\n      }\n    });\n  };\n  var setExact = function (win, start, soffset, finish, foffset) {\n    var relative = $_73jk3jq4jnlpb3r6.preprocessExact(start, soffset, finish, foffset);\n    setRangeFromRelative(win, relative);\n  };\n  var setRelative = function (win, startSitu, finishSitu) {\n    var relative = $_73jk3jq4jnlpb3r6.preprocessRelative(startSitu, finishSitu);\n    setRangeFromRelative(win, relative);\n  };\n  var toNative = function (selection) {\n    var win = $_3nispmprjnlpb3p0.getWin(selection).dom();\n    var getDomRange = function (start, soffset, finish, foffset) {\n      return $_3bxnj0pwjnlpb3po.exactToNative(win, start, soffset, finish, foffset);\n    };\n    var filtered = $_73jk3jq4jnlpb3r6.preprocess(selection);\n    return $_960to1pxjnlpb3pz.diagnose(win, filtered).match({\n      ltr: getDomRange,\n      rtl: getDomRange\n    });\n  };\n  var readRange = function (selection) {\n    if (selection.rangeCount > 0) {\n      var firstRng = selection.getRangeAt(0);\n      var lastRng = selection.getRangeAt(selection.rangeCount - 1);\n      return Option.some($_3nispmprjnlpb3p0.range(Element$$1.fromDom(firstRng.startContainer), firstRng.startOffset, Element$$1.fromDom(lastRng.endContainer), lastRng.endOffset));\n    } else {\n      return Option.none();\n    }\n  };\n  var doGetExact = function (selection) {\n    var anchorNode = Element$$1.fromDom(selection.anchorNode);\n    var focusNode = Element$$1.fromDom(selection.focusNode);\n    return $_3zlyaipujnlpb3pi.after(anchorNode, selection.anchorOffset, focusNode, selection.focusOffset) ? Option.some($_3nispmprjnlpb3p0.range(Element$$1.fromDom(selection.anchorNode), selection.anchorOffset, Element$$1.fromDom(selection.focusNode), selection.focusOffset)) : readRange(selection);\n  };\n  var setToElement = function (win, element) {\n    var rng = $_3bxnj0pwjnlpb3po.selectNodeContents(win, element);\n    doSetNativeRange(win, rng);\n  };\n  var forElement = function (win, element) {\n    var rng = $_3bxnj0pwjnlpb3po.selectNodeContents(win, element);\n    return $_3nispmprjnlpb3p0.range(Element$$1.fromDom(rng.startContainer), rng.startOffset, Element$$1.fromDom(rng.endContainer), rng.endOffset);\n  };\n  var getExact = function (win) {\n    return Option.from(win.getSelection()).filter(function (sel) {\n      return sel.rangeCount > 0;\n    }).bind(doGetExact);\n  };\n  var get$10 = function (win) {\n    return getExact(win).map(function (range) {\n      return $_3nispmprjnlpb3p0.exact(range.start(), range.soffset(), range.finish(), range.foffset());\n    });\n  };\n  var getFirstRect$1 = function (win, selection) {\n    var rng = $_960to1pxjnlpb3pz.asLtrRange(win, selection);\n    return $_3bxnj0pwjnlpb3po.getFirstRect(rng);\n  };\n  var getBounds$2 = function (win, selection) {\n    var rng = $_960to1pxjnlpb3pz.asLtrRange(win, selection);\n    return $_3bxnj0pwjnlpb3po.getBounds(rng);\n  };\n  var getAtPoint = function (win, x, y) {\n    return $_ctcznhpyjnlpb3qg.fromPoint(win, x, y);\n  };\n  var getAsString = function (win, selection) {\n    var rng = $_960to1pxjnlpb3pz.asLtrRange(win, selection);\n    return $_3bxnj0pwjnlpb3po.toString(rng);\n  };\n  var clear$1 = function (win) {\n    var selection = win.getSelection();\n    selection.removeAllRanges();\n  };\n  var clone$2 = function (win, selection) {\n    var rng = $_960to1pxjnlpb3pz.asLtrRange(win, selection);\n    return $_3bxnj0pwjnlpb3po.cloneFragment(rng);\n  };\n  var replace$1 = function (win, selection, elements) {\n    var rng = $_960to1pxjnlpb3pz.asLtrRange(win, selection);\n    var fragment = $_4brybspvjnlpb3pk.fromElements(elements, win.document);\n    $_3bxnj0pwjnlpb3po.replaceWith(rng, fragment);\n  };\n  var deleteAt = function (win, selection) {\n    var rng = $_960to1pxjnlpb3pz.asLtrRange(win, selection);\n    $_3bxnj0pwjnlpb3po.deleteContents(rng);\n  };\n  var isCollapsed = function (start, soffset, finish, foffset) {\n    return $_3k22killjnlpb2vb.eq(start, finish) && soffset === foffset;\n  };\n  var $_brx5r2ptjnlpb3pc = {\n    setExact: setExact,\n    getExact: getExact,\n    get: get$10,\n    setRelative: setRelative,\n    toNative: toNative,\n    setToElement: setToElement,\n    clear: clear$1,\n    clone: clone$2,\n    replace: replace$1,\n    deleteAt: deleteAt,\n    forElement: forElement,\n    getFirstRect: getFirstRect$1,\n    getBounds: getBounds$2,\n    getAtPoint: getAtPoint,\n    findWithin: findWithin,\n    getAsString: getAsString,\n    isCollapsed: isCollapsed\n  };\n\n  var global$3 = tinymce.util.Tools.resolve('tinymce.util.VK');\n\n  var forward = function (editor, isRoot, cell, lazyWire) {\n    return go(editor, isRoot, $_fg7b7hppjnlpb3oq.next(cell), lazyWire);\n  };\n  var backward = function (editor, isRoot, cell, lazyWire) {\n    return go(editor, isRoot, $_fg7b7hppjnlpb3oq.prev(cell), lazyWire);\n  };\n  var getCellFirstCursorPosition = function (editor, cell) {\n    var selection = $_3nispmprjnlpb3p0.exact(cell, 0, cell, 0);\n    return $_brx5r2ptjnlpb3pc.toNative(selection);\n  };\n  var getNewRowCursorPosition = function (editor, table) {\n    var rows = $_97aehqm4jnlpb2x5.descendants(table, 'tr');\n    return last(rows).bind(function (last$$1) {\n      return $_gdszrpm7jnlpb2xk.descendant(last$$1, 'td,th').map(function (first) {\n        return getCellFirstCursorPosition(editor, first);\n      });\n    });\n  };\n  var go = function (editor, isRoot, cell, actions, lazyWire) {\n    return cell.fold(Option.none, Option.none, function (current, next) {\n      return $_7srx6vmijnlpb2zw.first(next).map(function (cell) {\n        return getCellFirstCursorPosition(editor, cell);\n      });\n    }, function (current) {\n      return $_em4z2mldjnlpb2sz.table(current, isRoot).bind(function (table) {\n        var targets = $_39kmudmnjnlpb30f.noMenu(current);\n        editor.undoManager.transact(function () {\n          actions.insertRowsAfter(table, targets);\n        });\n        return getNewRowCursorPosition(editor, table);\n      });\n    });\n  };\n  var rootElements = [\n    'table',\n    'li',\n    'dl'\n  ];\n  var handle$1 = function (event, editor, actions, lazyWire) {\n    if (event.keyCode === global$3.TAB) {\n      var body_1 = getBody$1(editor);\n      var isRoot_1 = function (element) {\n        var name = $_erx5tem3jnlpb2x3.name(element);\n        return $_3k22killjnlpb2vb.eq(element, body_1) || contains(rootElements, name);\n      };\n      var rng = editor.selection.getRng();\n      if (rng.collapsed) {\n        var start = Element$$1.fromDom(rng.startContainer);\n        $_em4z2mldjnlpb2sz.cell(start, isRoot_1).each(function (cell) {\n          event.preventDefault();\n          var navigation = event.shiftKey ? backward : forward;\n          var rng = navigation(editor, isRoot_1, cell, actions, lazyWire);\n          rng.each(function (range$$1) {\n            editor.selection.setRng(range$$1);\n          });\n        });\n      }\n    }\n  };\n  var $_yn0xrpojnlpb3o5 = { handle: handle$1 };\n\n  var response = Immutable('selection', 'kill');\n  var $_bfyx6nq8jnlpb3sm = { response: response };\n\n  var isKey = function (key) {\n    return function (keycode) {\n      return keycode === key;\n    };\n  };\n  var isUp = isKey(38);\n  var isDown = isKey(40);\n  var isNavigation = function (keycode) {\n    return keycode >= 37 && keycode <= 40;\n  };\n  var $_97y5leq9jnlpb3so = {\n    ltr: {\n      isBackward: isKey(37),\n      isForward: isKey(39)\n    },\n    rtl: {\n      isBackward: isKey(39),\n      isForward: isKey(37)\n    },\n    isUp: isUp,\n    isDown: isDown,\n    isNavigation: isNavigation\n  };\n\n  var convertToRange = function (win, selection) {\n    var rng = $_960to1pxjnlpb3pz.asLtrRange(win, selection);\n    return {\n      start: constant(Element$$1.fromDom(rng.startContainer)),\n      soffset: constant(rng.startOffset),\n      finish: constant(Element$$1.fromDom(rng.endContainer)),\n      foffset: constant(rng.endOffset)\n    };\n  };\n  var makeSitus = function (start, soffset, finish, foffset) {\n    return {\n      start: constant($_1jbfrupsjnlpb3p6.on(start, soffset)),\n      finish: constant($_1jbfrupsjnlpb3p6.on(finish, foffset))\n    };\n  };\n  var $_cq8cz4qbjnlpb3t5 = {\n    convertToRange: convertToRange,\n    makeSitus: makeSitus\n  };\n\n  var isSafari = $_4aebialqjnlpb2vq.detect().browser.isSafari();\n  var get$11 = function (_doc) {\n    var doc = _doc !== undefined ? _doc.dom() : document;\n    var x = doc.body.scrollLeft || doc.documentElement.scrollLeft;\n    var y = doc.body.scrollTop || doc.documentElement.scrollTop;\n    return Position(x, y);\n  };\n  var to = function (x, y, _doc) {\n    var doc = _doc !== undefined ? _doc.dom() : document;\n    var win = doc.defaultView;\n    win.scrollTo(x, y);\n  };\n  var by = function (x, y, _doc) {\n    var doc = _doc !== undefined ? _doc.dom() : document;\n    var win = doc.defaultView;\n    win.scrollBy(x, y);\n  };\n  var setToElement$1 = function (win, element) {\n    var pos = $_2ipv1snfjnlpb37b.absolute(element);\n    var doc = Element$$1.fromDom(win.document);\n    to(pos.left(), pos.top(), doc);\n  };\n  var preserve$1 = function (doc, f) {\n    var before = get$11(doc);\n    f();\n    var after = get$11(doc);\n    if (before.top() !== after.top() || before.left() !== after.left()) {\n      to(before.left(), before.top(), doc);\n    }\n  };\n  var capture$2 = function (doc) {\n    var previous = Option.none();\n    var save = function () {\n      previous = Option.some(get$11(doc));\n    };\n    var restore = function () {\n      previous.each(function (p) {\n        to(p.left(), p.top(), doc);\n      });\n    };\n    save();\n    return {\n      save: save,\n      restore: restore\n    };\n  };\n  var intoView = function (element, alignToTop) {\n    if (isSafari && isFunction(element.dom().scrollIntoViewIfNeeded)) {\n      element.dom().scrollIntoViewIfNeeded(false);\n    } else {\n      element.dom().scrollIntoView(alignToTop);\n    }\n  };\n  var intoViewIfNeeded = function (element, container) {\n    var containerBox = container.dom().getBoundingClientRect();\n    var elementBox = element.dom().getBoundingClientRect();\n    if (elementBox.top < containerBox.top) {\n      intoView(element, true);\n    } else if (elementBox.bottom > containerBox.bottom) {\n      intoView(element, false);\n    }\n  };\n  var scrollBarWidth = function () {\n    var scrollDiv = Element$$1.fromHtml('<div style=\"width: 100px; height: 100px; overflow: scroll; position: absolute; top: -9999px;\"></div>');\n    $_5hzj77mdjnlpb2yp.after($_1ie4uvm6jnlpb2xf.body(), scrollDiv);\n    var w = scrollDiv.dom().offsetWidth - scrollDiv.dom().clientWidth;\n    $_cybn8qmejnlpb2yr.remove(scrollDiv);\n    return w;\n  };\n  var $_t8063qcjnlpb3tf = {\n    get: get$11,\n    to: to,\n    by: by,\n    preserve: preserve$1,\n    capture: capture$2,\n    intoView: intoView,\n    intoViewIfNeeded: intoViewIfNeeded,\n    setToElement: setToElement$1,\n    scrollBarWidth: scrollBarWidth\n  };\n\n  function WindowBridge (win) {\n    var elementFromPoint = function (x, y) {\n      return Element$$1.fromPoint(Element$$1.fromDom(win.document), x, y);\n    };\n    var getRect = function (element) {\n      return element.dom().getBoundingClientRect();\n    };\n    var getRangedRect = function (start, soffset, finish, foffset) {\n      var sel = $_3nispmprjnlpb3p0.exact(start, soffset, finish, foffset);\n      return $_brx5r2ptjnlpb3pc.getFirstRect(win, sel).map(function (structRect) {\n        return map$1(structRect, apply);\n      });\n    };\n    var getSelection = function () {\n      return $_brx5r2ptjnlpb3pc.get(win).map(function (exactAdt) {\n        return $_cq8cz4qbjnlpb3t5.convertToRange(win, exactAdt);\n      });\n    };\n    var fromSitus = function (situs) {\n      var relative = $_3nispmprjnlpb3p0.relative(situs.start(), situs.finish());\n      return $_cq8cz4qbjnlpb3t5.convertToRange(win, relative);\n    };\n    var situsFromPoint = function (x, y) {\n      return $_brx5r2ptjnlpb3pc.getAtPoint(win, x, y).map(function (exact) {\n        return {\n          start: constant($_1jbfrupsjnlpb3p6.on(exact.start(), exact.soffset())),\n          finish: constant($_1jbfrupsjnlpb3p6.on(exact.finish(), exact.foffset()))\n        };\n      });\n    };\n    var clearSelection = function () {\n      $_brx5r2ptjnlpb3pc.clear(win);\n    };\n    var selectContents = function (element) {\n      $_brx5r2ptjnlpb3pc.setToElement(win, element);\n    };\n    var setSelection = function (sel) {\n      $_brx5r2ptjnlpb3pc.setExact(win, sel.start(), sel.soffset(), sel.finish(), sel.foffset());\n    };\n    var setRelativeSelection = function (start, finish) {\n      $_brx5r2ptjnlpb3pc.setRelative(win, start, finish);\n    };\n    var getInnerHeight = function () {\n      return win.innerHeight;\n    };\n    var getScrollY = function () {\n      var pos = $_t8063qcjnlpb3tf.get(Element$$1.fromDom(win.document));\n      return pos.top();\n    };\n    var scrollBy = function (x, y) {\n      $_t8063qcjnlpb3tf.by(x, y, Element$$1.fromDom(win.document));\n    };\n    return {\n      elementFromPoint: elementFromPoint,\n      getRect: getRect,\n      getRangedRect: getRangedRect,\n      getSelection: getSelection,\n      fromSitus: fromSitus,\n      situsFromPoint: situsFromPoint,\n      clearSelection: clearSelection,\n      setSelection: setSelection,\n      setRelativeSelection: setRelativeSelection,\n      selectContents: selectContents,\n      getInnerHeight: getInnerHeight,\n      getScrollY: getScrollY,\n      scrollBy: scrollBy\n    };\n  }\n\n  var sync = function (container, isRoot, start, soffset, finish, foffset, selectRange) {\n    if (!($_3k22killjnlpb2vb.eq(start, finish) && soffset === foffset)) {\n      return $_gdszrpm7jnlpb2xk.closest(start, 'td,th', isRoot).bind(function (s) {\n        return $_gdszrpm7jnlpb2xk.closest(finish, 'td,th', isRoot).bind(function (f) {\n          return detect$5(container, isRoot, s, f, selectRange);\n        });\n      });\n    } else {\n      return Option.none();\n    }\n  };\n  var detect$5 = function (container, isRoot, start, finish, selectRange) {\n    if (!$_3k22killjnlpb2vb.eq(start, finish)) {\n      return $_3c1t0amqjnlpb319.identify(start, finish, isRoot).bind(function (cellSel) {\n        var boxes = cellSel.boxes().getOr([]);\n        if (boxes.length > 0) {\n          selectRange(container, boxes, cellSel.start(), cellSel.finish());\n          return Option.some($_bfyx6nq8jnlpb3sm.response(Option.some($_cq8cz4qbjnlpb3t5.makeSitus(start, 0, start, $_bqkyudmjjnlpb300.getEnd(start))), true));\n        } else {\n          return Option.none();\n        }\n      });\n    } else {\n      return Option.none();\n    }\n  };\n  var update = function (rows, columns, container, selected, annotations) {\n    var updateSelection = function (newSels) {\n      annotations.clear(container);\n      annotations.selectRange(container, newSels.boxes(), newSels.start(), newSels.finish());\n      return newSels.boxes();\n    };\n    return $_3c1t0amqjnlpb319.shiftSelection(selected, rows, columns, annotations.firstSelectedSelector(), annotations.lastSelectedSelector()).map(updateSelection);\n  };\n  var $_58lt4vqdjnlpb3tq = {\n    sync: sync,\n    detect: detect$5,\n    update: update\n  };\n\n  var nu$3 = MixedBag([\n    'left',\n    'top',\n    'right',\n    'bottom'\n  ], []);\n  var moveDown = function (caret, amount) {\n    return nu$3({\n      left: caret.left(),\n      top: caret.top() + amount,\n      right: caret.right(),\n      bottom: caret.bottom() + amount\n    });\n  };\n  var moveUp = function (caret, amount) {\n    return nu$3({\n      left: caret.left(),\n      top: caret.top() - amount,\n      right: caret.right(),\n      bottom: caret.bottom() - amount\n    });\n  };\n  var moveBottomTo = function (caret, bottom) {\n    var height = caret.bottom() - caret.top();\n    return nu$3({\n      left: caret.left(),\n      top: bottom - height,\n      right: caret.right(),\n      bottom: bottom\n    });\n  };\n  var moveTopTo = function (caret, top) {\n    var height = caret.bottom() - caret.top();\n    return nu$3({\n      left: caret.left(),\n      top: top,\n      right: caret.right(),\n      bottom: top + height\n    });\n  };\n  var translate = function (caret, xDelta, yDelta) {\n    return nu$3({\n      left: caret.left() + xDelta,\n      top: caret.top() + yDelta,\n      right: caret.right() + xDelta,\n      bottom: caret.bottom() + yDelta\n    });\n  };\n  var getTop$1 = function (caret) {\n    return caret.top();\n  };\n  var getBottom = function (caret) {\n    return caret.bottom();\n  };\n  var toString$1 = function (caret) {\n    return '(' + caret.left() + ', ' + caret.top() + ') -> (' + caret.right() + ', ' + caret.bottom() + ')';\n  };\n  var $_2vydjpqgjnlpb3v6 = {\n    nu: nu$3,\n    moveUp: moveUp,\n    moveDown: moveDown,\n    moveBottomTo: moveBottomTo,\n    moveTopTo: moveTopTo,\n    getTop: getTop$1,\n    getBottom: getBottom,\n    translate: translate,\n    toString: toString$1\n  };\n\n  var getPartialBox = function (bridge, element, offset) {\n    if (offset >= 0 && offset < $_bqkyudmjjnlpb300.getEnd(element))\n      return bridge.getRangedRect(element, offset, element, offset + 1);\n    else if (offset > 0)\n      return bridge.getRangedRect(element, offset - 1, element, offset);\n    return Option.none();\n  };\n  var toCaret = function (rect) {\n    return $_2vydjpqgjnlpb3v6.nu({\n      left: rect.left,\n      top: rect.top,\n      right: rect.right,\n      bottom: rect.bottom\n    });\n  };\n  var getElemBox = function (bridge, element) {\n    return Option.some(bridge.getRect(element));\n  };\n  var getBoxAt = function (bridge, element, offset) {\n    if ($_erx5tem3jnlpb2x3.isElement(element))\n      return getElemBox(bridge, element).map(toCaret);\n    else if ($_erx5tem3jnlpb2x3.isText(element))\n      return getPartialBox(bridge, element, offset).map(toCaret);\n    else\n      return Option.none();\n  };\n  var getEntireBox = function (bridge, element) {\n    if ($_erx5tem3jnlpb2x3.isElement(element))\n      return getElemBox(bridge, element).map(toCaret);\n    else if ($_erx5tem3jnlpb2x3.isText(element))\n      return bridge.getRangedRect(element, 0, element, $_bqkyudmjjnlpb300.getEnd(element)).map(toCaret);\n    else\n      return Option.none();\n  };\n  var $_5ajb76qhjnlpb3va = {\n    getBoxAt: getBoxAt,\n    getEntireBox: getEntireBox\n  };\n\n  var traverse = Immutable('item', 'mode');\n  var backtrack = function (universe, item, direction, _transition) {\n    var transition = _transition !== undefined ? _transition : sidestep;\n    return universe.property().parent(item).map(function (p) {\n      return traverse(p, transition);\n    });\n  };\n  var sidestep = function (universe, item, direction, _transition) {\n    var transition = _transition !== undefined ? _transition : advance;\n    return direction.sibling(universe, item).map(function (p) {\n      return traverse(p, transition);\n    });\n  };\n  var advance = function (universe, item, direction, _transition) {\n    var transition = _transition !== undefined ? _transition : advance;\n    var children = universe.property().children(item);\n    var result = direction.first(children);\n    return result.map(function (r) {\n      return traverse(r, transition);\n    });\n  };\n  var successors = [\n    {\n      current: backtrack,\n      next: sidestep,\n      fallback: Option.none()\n    },\n    {\n      current: sidestep,\n      next: advance,\n      fallback: Option.some(backtrack)\n    },\n    {\n      current: advance,\n      next: advance,\n      fallback: Option.some(sidestep)\n    }\n  ];\n  var go$1 = function (universe, item, mode, direction, rules) {\n    var rules = rules !== undefined ? rules : successors;\n    var ruleOpt = find(rules, function (succ) {\n      return succ.current === mode;\n    });\n    return ruleOpt.bind(function (rule) {\n      return rule.current(universe, item, direction, rule.next).orThunk(function () {\n        return rule.fallback.bind(function (fb) {\n          return go$1(universe, item, fb, direction);\n        });\n      });\n    });\n  };\n  var $_3d298hqmjnlpb3wp = {\n    backtrack: backtrack,\n    sidestep: sidestep,\n    advance: advance,\n    go: go$1\n  };\n\n  var left$1 = function () {\n    var sibling = function (universe, item) {\n      return universe.query().prevSibling(item);\n    };\n    var first = function (children) {\n      return children.length > 0 ? Option.some(children[children.length - 1]) : Option.none();\n    };\n    return {\n      sibling: sibling,\n      first: first\n    };\n  };\n  var right$1 = function () {\n    var sibling = function (universe, item) {\n      return universe.query().nextSibling(item);\n    };\n    var first = function (children) {\n      return children.length > 0 ? Option.some(children[0]) : Option.none();\n    };\n    return {\n      sibling: sibling,\n      first: first\n    };\n  };\n  var $_6dc67rqnjnlpb3wy = {\n    left: left$1,\n    right: right$1\n  };\n\n  var hone = function (universe, item, predicate, mode, direction, isRoot) {\n    var next = $_3d298hqmjnlpb3wp.go(universe, item, mode, direction);\n    return next.bind(function (n) {\n      if (isRoot(n.item()))\n        return Option.none();\n      else\n        return predicate(n.item()) ? Option.some(n.item()) : hone(universe, n.item(), predicate, n.mode(), direction, isRoot);\n    });\n  };\n  var left$2 = function (universe, item, predicate, isRoot) {\n    return hone(universe, item, predicate, $_3d298hqmjnlpb3wp.sidestep, $_6dc67rqnjnlpb3wy.left(), isRoot);\n  };\n  var right$2 = function (universe, item, predicate, isRoot) {\n    return hone(universe, item, predicate, $_3d298hqmjnlpb3wp.sidestep, $_6dc67rqnjnlpb3wy.right(), isRoot);\n  };\n  var $_fogvzzqljnlpb3wl = {\n    left: left$2,\n    right: right$2\n  };\n\n  var isLeaf = function (universe, element) {\n    return universe.property().children(element).length === 0;\n  };\n  var before$2 = function (universe, item, isRoot) {\n    return seekLeft(universe, item, curry(isLeaf, universe), isRoot);\n  };\n  var after$3 = function (universe, item, isRoot) {\n    return seekRight(universe, item, curry(isLeaf, universe), isRoot);\n  };\n  var seekLeft = function (universe, item, predicate, isRoot) {\n    return $_fogvzzqljnlpb3wl.left(universe, item, predicate, isRoot);\n  };\n  var seekRight = function (universe, item, predicate, isRoot) {\n    return $_fogvzzqljnlpb3wl.right(universe, item, predicate, isRoot);\n  };\n  var walkers = function () {\n    return {\n      left: $_6dc67rqnjnlpb3wy.left,\n      right: $_6dc67rqnjnlpb3wy.right\n    };\n  };\n  var walk = function (universe, item, mode, direction, _rules) {\n    return $_3d298hqmjnlpb3wp.go(universe, item, mode, direction, _rules);\n  };\n  var $_77hw2eqkjnlpb3wh = {\n    before: before$2,\n    after: after$3,\n    seekLeft: seekLeft,\n    seekRight: seekRight,\n    walkers: walkers,\n    walk: walk,\n    backtrack: $_3d298hqmjnlpb3wp.backtrack,\n    sidestep: $_3d298hqmjnlpb3wp.sidestep,\n    advance: $_3d298hqmjnlpb3wp.advance\n  };\n\n  var universe$2 = DomUniverse();\n  var gather = function (element, prune, transform) {\n    return $_77hw2eqkjnlpb3wh.gather(universe$2, element, prune, transform);\n  };\n  var before$3 = function (element, isRoot) {\n    return $_77hw2eqkjnlpb3wh.before(universe$2, element, isRoot);\n  };\n  var after$4 = function (element, isRoot) {\n    return $_77hw2eqkjnlpb3wh.after(universe$2, element, isRoot);\n  };\n  var seekLeft$1 = function (element, predicate, isRoot) {\n    return $_77hw2eqkjnlpb3wh.seekLeft(universe$2, element, predicate, isRoot);\n  };\n  var seekRight$1 = function (element, predicate, isRoot) {\n    return $_77hw2eqkjnlpb3wh.seekRight(universe$2, element, predicate, isRoot);\n  };\n  var walkers$1 = function () {\n    return $_77hw2eqkjnlpb3wh.walkers();\n  };\n  var walk$1 = function (item, mode, direction, _rules) {\n    return $_77hw2eqkjnlpb3wh.walk(universe$2, item, mode, direction, _rules);\n  };\n  var $_3mk9c4qjjnlpb3wc = {\n    gather: gather,\n    before: before$3,\n    after: after$4,\n    seekLeft: seekLeft$1,\n    seekRight: seekRight$1,\n    walkers: walkers$1,\n    walk: walk$1\n  };\n\n  var JUMP_SIZE = 5;\n  var NUM_RETRIES = 100;\n  var adt$2 = Adt.generate([\n    { 'none': [] },\n    { 'retry': ['caret'] }\n  ]);\n  var isOutside = function (caret, box) {\n    return caret.left() < box.left() || Math.abs(box.right() - caret.left()) < 1 || caret.left() > box.right();\n  };\n  var inOutsideBlock = function (bridge, element, caret) {\n    return $_1nfdlmm8jnlpb2xl.closest(element, $_7dfae7nojnlpb39j.isBlock).fold(constant(false), function (cell) {\n      return $_5ajb76qhjnlpb3va.getEntireBox(bridge, cell).exists(function (box) {\n        return isOutside(caret, box);\n      });\n    });\n  };\n  var adjustDown = function (bridge, element, guessBox, original, caret) {\n    var lowerCaret = $_2vydjpqgjnlpb3v6.moveDown(caret, JUMP_SIZE);\n    if (Math.abs(guessBox.bottom() - original.bottom()) < 1)\n      return adt$2.retry(lowerCaret);\n    else if (guessBox.top() > caret.bottom())\n      return adt$2.retry(lowerCaret);\n    else if (guessBox.top() === caret.bottom())\n      return adt$2.retry($_2vydjpqgjnlpb3v6.moveDown(caret, 1));\n    else\n      return inOutsideBlock(bridge, element, caret) ? adt$2.retry($_2vydjpqgjnlpb3v6.translate(lowerCaret, JUMP_SIZE, 0)) : adt$2.none();\n  };\n  var adjustUp = function (bridge, element, guessBox, original, caret) {\n    var higherCaret = $_2vydjpqgjnlpb3v6.moveUp(caret, JUMP_SIZE);\n    if (Math.abs(guessBox.top() - original.top()) < 1)\n      return adt$2.retry(higherCaret);\n    else if (guessBox.bottom() < caret.top())\n      return adt$2.retry(higherCaret);\n    else if (guessBox.bottom() === caret.top())\n      return adt$2.retry($_2vydjpqgjnlpb3v6.moveUp(caret, 1));\n    else\n      return inOutsideBlock(bridge, element, caret) ? adt$2.retry($_2vydjpqgjnlpb3v6.translate(higherCaret, JUMP_SIZE, 0)) : adt$2.none();\n  };\n  var upMovement = {\n    point: $_2vydjpqgjnlpb3v6.getTop,\n    adjuster: adjustUp,\n    move: $_2vydjpqgjnlpb3v6.moveUp,\n    gather: $_3mk9c4qjjnlpb3wc.before\n  };\n  var downMovement = {\n    point: $_2vydjpqgjnlpb3v6.getBottom,\n    adjuster: adjustDown,\n    move: $_2vydjpqgjnlpb3v6.moveDown,\n    gather: $_3mk9c4qjjnlpb3wc.after\n  };\n  var isAtTable = function (bridge, x, y) {\n    return bridge.elementFromPoint(x, y).filter(function (elm) {\n      return $_erx5tem3jnlpb2x3.name(elm) === 'table';\n    }).isSome();\n  };\n  var adjustForTable = function (bridge, movement, original, caret, numRetries) {\n    return adjustTil(bridge, movement, original, movement.move(caret, JUMP_SIZE), numRetries);\n  };\n  var adjustTil = function (bridge, movement, original, caret, numRetries) {\n    if (numRetries === 0)\n      return Option.some(caret);\n    if (isAtTable(bridge, caret.left(), movement.point(caret)))\n      return adjustForTable(bridge, movement, original, caret, numRetries - 1);\n    return bridge.situsFromPoint(caret.left(), movement.point(caret)).bind(function (guess) {\n      return guess.start().fold(Option.none, function (element, offset) {\n        return $_5ajb76qhjnlpb3va.getEntireBox(bridge, element, offset).bind(function (guessBox) {\n          return movement.adjuster(bridge, element, guessBox, original, caret).fold(Option.none, function (newCaret) {\n            return adjustTil(bridge, movement, original, newCaret, numRetries - 1);\n          });\n        }).orThunk(function () {\n          return Option.some(caret);\n        });\n      }, Option.none);\n    });\n  };\n  var ieTryDown = function (bridge, caret) {\n    return bridge.situsFromPoint(caret.left(), caret.bottom() + JUMP_SIZE);\n  };\n  var ieTryUp = function (bridge, caret) {\n    return bridge.situsFromPoint(caret.left(), caret.top() - JUMP_SIZE);\n  };\n  var checkScroll = function (movement, adjusted, bridge) {\n    if (movement.point(adjusted) > bridge.getInnerHeight())\n      return Option.some(movement.point(adjusted) - bridge.getInnerHeight());\n    else if (movement.point(adjusted) < 0)\n      return Option.some(-movement.point(adjusted));\n    else\n      return Option.none();\n  };\n  var retry = function (movement, bridge, caret) {\n    var moved = movement.move(caret, JUMP_SIZE);\n    var adjusted = adjustTil(bridge, movement, caret, moved, NUM_RETRIES).getOr(moved);\n    return checkScroll(movement, adjusted, bridge).fold(function () {\n      return bridge.situsFromPoint(adjusted.left(), movement.point(adjusted));\n    }, function (delta) {\n      bridge.scrollBy(0, delta);\n      return bridge.situsFromPoint(adjusted.left(), movement.point(adjusted) - delta);\n    });\n  };\n  var $_4fb5qlqijnlpb3vj = {\n    tryUp: curry(retry, upMovement),\n    tryDown: curry(retry, downMovement),\n    ieTryUp: ieTryUp,\n    ieTryDown: ieTryDown,\n    getJumpSize: constant(JUMP_SIZE)\n  };\n\n  var adt$3 = Adt.generate([\n    { 'none': ['message'] },\n    { 'success': [] },\n    { 'failedUp': ['cell'] },\n    { 'failedDown': ['cell'] }\n  ]);\n  var isOverlapping = function (bridge, before, after) {\n    var beforeBounds = bridge.getRect(before);\n    var afterBounds = bridge.getRect(after);\n    return afterBounds.right > beforeBounds.left && afterBounds.left < beforeBounds.right;\n  };\n  var verify = function (bridge, before, beforeOffset, after, afterOffset, failure, isRoot) {\n    return $_gdszrpm7jnlpb2xk.closest(after, 'td,th', isRoot).bind(function (afterCell) {\n      return $_gdszrpm7jnlpb2xk.closest(before, 'td,th', isRoot).map(function (beforeCell) {\n        if (!$_3k22killjnlpb2vb.eq(afterCell, beforeCell)) {\n          return $_5iw3l3mrjnlpb31x.sharedOne(isRow, [\n            afterCell,\n            beforeCell\n          ]).fold(function () {\n            return isOverlapping(bridge, beforeCell, afterCell) ? adt$3.success() : failure(beforeCell);\n          }, function (sharedRow) {\n            return failure(beforeCell);\n          });\n        } else {\n          return $_3k22killjnlpb2vb.eq(after, afterCell) && $_bqkyudmjjnlpb300.getEnd(afterCell) === afterOffset ? failure(beforeCell) : adt$3.none('in same cell');\n        }\n      });\n    }).getOr(adt$3.none('default'));\n  };\n  var isRow = function (elem) {\n    return $_gdszrpm7jnlpb2xk.closest(elem, 'tr');\n  };\n  var cata$2 = function (subject, onNone, onSuccess, onFailedUp, onFailedDown) {\n    return subject.fold(onNone, onSuccess, onFailedUp, onFailedDown);\n  };\n  var $_57y4nlqojnlpb3x2 = {\n    verify: verify,\n    cata: cata$2,\n    adt: adt$3\n  };\n\n  var point = Immutable('element', 'offset');\n  var delta = Immutable('element', 'deltaOffset');\n  var range$3 = Immutable('element', 'start', 'finish');\n  var points = Immutable('begin', 'end');\n  var text = Immutable('element', 'text');\n  var $_8t1dqfqqjnlpb3y6 = {\n    point: point,\n    delta: delta,\n    range: range$3,\n    points: points,\n    text: text\n  };\n\n  var inAncestor = Immutable('ancestor', 'descendants', 'element', 'index');\n  var inParent = Immutable('parent', 'children', 'element', 'index');\n  var childOf = function (element, ancestor) {\n    return $_1nfdlmm8jnlpb2xl.closest(element, function (elem) {\n      return $_2pl1nljjnlpb2ur.parent(elem).exists(function (parent) {\n        return $_3k22killjnlpb2vb.eq(parent, ancestor);\n      });\n    });\n  };\n  var indexInParent = function (element) {\n    return $_2pl1nljjnlpb2ur.parent(element).bind(function (parent) {\n      var children = $_2pl1nljjnlpb2ur.children(parent);\n      return indexOf$1(children, element).map(function (index) {\n        return inParent(parent, children, element, index);\n      });\n    });\n  };\n  var indexOf$1 = function (elements, element) {\n    return findIndex(elements, curry($_3k22killjnlpb2vb.eq, element));\n  };\n  var selectorsInParent = function (element, selector) {\n    return $_2pl1nljjnlpb2ur.parent(element).bind(function (parent) {\n      var children = $_97aehqm4jnlpb2x5.children(parent, selector);\n      return indexOf$1(children, element).map(function (index) {\n        return inParent(parent, children, element, index);\n      });\n    });\n  };\n  var descendantsInAncestor = function (element, ancestorSelector, descendantSelector) {\n    return $_gdszrpm7jnlpb2xk.closest(element, ancestorSelector).bind(function (ancestor) {\n      var descendants = $_97aehqm4jnlpb2x5.descendants(ancestor, descendantSelector);\n      return indexOf$1(descendants, element).map(function (index) {\n        return inAncestor(ancestor, descendants, element, index);\n      });\n    });\n  };\n  var $_1r36udqrjnlpb3ya = {\n    childOf: childOf,\n    indexOf: indexOf$1,\n    indexInParent: indexInParent,\n    selectorsInParent: selectorsInParent,\n    descendantsInAncestor: descendantsInAncestor\n  };\n\n  var isBr = function (elem) {\n    return $_erx5tem3jnlpb2x3.name(elem) === 'br';\n  };\n  var gatherer = function (cand, gather, isRoot) {\n    return gather(cand, isRoot).bind(function (target) {\n      return $_erx5tem3jnlpb2x3.isText(target) && $_3lolvomkjnlpb304.get(target).trim().length === 0 ? gatherer(target, gather, isRoot) : Option.some(target);\n    });\n  };\n  var handleBr = function (isRoot, element, direction) {\n    return direction.traverse(element).orThunk(function () {\n      return gatherer(element, direction.gather, isRoot);\n    }).map(direction.relative);\n  };\n  var findBr = function (element, offset) {\n    return $_2pl1nljjnlpb2ur.child(element, offset).filter(isBr).orThunk(function () {\n      return $_2pl1nljjnlpb2ur.child(element, offset - 1).filter(isBr);\n    });\n  };\n  var handleParent = function (isRoot, element, offset, direction) {\n    return findBr(element, offset).bind(function (br) {\n      return direction.traverse(br).fold(function () {\n        return gatherer(br, direction.gather, isRoot).map(direction.relative);\n      }, function (adjacent) {\n        return $_1r36udqrjnlpb3ya.indexInParent(adjacent).map(function (info) {\n          return $_1jbfrupsjnlpb3p6.on(info.parent(), info.index());\n        });\n      });\n    });\n  };\n  var tryBr = function (isRoot, element, offset, direction) {\n    var target = isBr(element) ? handleBr(isRoot, element, direction) : handleParent(isRoot, element, offset, direction);\n    return target.map(function (tgt) {\n      return {\n        start: constant(tgt),\n        finish: constant(tgt)\n      };\n    });\n  };\n  var process = function (analysis) {\n    return $_57y4nlqojnlpb3x2.cata(analysis, function (message) {\n      return Option.none();\n    }, function () {\n      return Option.none();\n    }, function (cell) {\n      return Option.some($_8t1dqfqqjnlpb3y6.point(cell, 0));\n    }, function (cell) {\n      return Option.some($_8t1dqfqqjnlpb3y6.point(cell, $_bqkyudmjjnlpb300.getEnd(cell)));\n    });\n  };\n  var $_ez71ihqpjnlpb3xg = {\n    tryBr: tryBr,\n    process: process\n  };\n\n  var MAX_RETRIES = 20;\n  var platform$1 = $_4aebialqjnlpb2vq.detect();\n  var findSpot = function (bridge, isRoot, direction) {\n    return bridge.getSelection().bind(function (sel) {\n      return $_ez71ihqpjnlpb3xg.tryBr(isRoot, sel.finish(), sel.foffset(), direction).fold(function () {\n        return Option.some($_8t1dqfqqjnlpb3y6.point(sel.finish(), sel.foffset()));\n      }, function (brNeighbour) {\n        var range = bridge.fromSitus(brNeighbour);\n        var analysis = $_57y4nlqojnlpb3x2.verify(bridge, sel.finish(), sel.foffset(), range.finish(), range.foffset(), direction.failure, isRoot);\n        return $_ez71ihqpjnlpb3xg.process(analysis);\n      });\n    });\n  };\n  var scan = function (bridge, isRoot, element, offset, direction, numRetries) {\n    if (numRetries === 0)\n      return Option.none();\n    return tryCursor(bridge, isRoot, element, offset, direction).bind(function (situs) {\n      var range = bridge.fromSitus(situs);\n      var analysis = $_57y4nlqojnlpb3x2.verify(bridge, element, offset, range.finish(), range.foffset(), direction.failure, isRoot);\n      return $_57y4nlqojnlpb3x2.cata(analysis, function () {\n        return Option.none();\n      }, function () {\n        return Option.some(situs);\n      }, function (cell) {\n        if ($_3k22killjnlpb2vb.eq(element, cell) && offset === 0)\n          return tryAgain(bridge, element, offset, $_2vydjpqgjnlpb3v6.moveUp, direction);\n        else\n          return scan(bridge, isRoot, cell, 0, direction, numRetries - 1);\n      }, function (cell) {\n        if ($_3k22killjnlpb2vb.eq(element, cell) && offset === $_bqkyudmjjnlpb300.getEnd(cell))\n          return tryAgain(bridge, element, offset, $_2vydjpqgjnlpb3v6.moveDown, direction);\n        else\n          return scan(bridge, isRoot, cell, $_bqkyudmjjnlpb300.getEnd(cell), direction, numRetries - 1);\n      });\n    });\n  };\n  var tryAgain = function (bridge, element, offset, move, direction) {\n    return $_5ajb76qhjnlpb3va.getBoxAt(bridge, element, offset).bind(function (box) {\n      return tryAt(bridge, direction, move(box, $_4fb5qlqijnlpb3vj.getJumpSize()));\n    });\n  };\n  var tryAt = function (bridge, direction, box) {\n    if (platform$1.browser.isChrome() || platform$1.browser.isSafari() || platform$1.browser.isFirefox() || platform$1.browser.isEdge())\n      return direction.otherRetry(bridge, box);\n    else if (platform$1.browser.isIE())\n      return direction.ieRetry(bridge, box);\n    else\n      return Option.none();\n  };\n  var tryCursor = function (bridge, isRoot, element, offset, direction) {\n    return $_5ajb76qhjnlpb3va.getBoxAt(bridge, element, offset).bind(function (box) {\n      return tryAt(bridge, direction, box);\n    });\n  };\n  var handle$2 = function (bridge, isRoot, direction) {\n    return findSpot(bridge, isRoot, direction).bind(function (spot) {\n      return scan(bridge, isRoot, spot.element(), spot.offset(), direction, MAX_RETRIES).map(bridge.fromSitus);\n    });\n  };\n  var $_gi8dt7qfjnlpb3uu = { handle: handle$2 };\n\n  var any$1 = function (predicate) {\n    return $_1nfdlmm8jnlpb2xl.first(predicate).isSome();\n  };\n  var ancestor$3 = function (scope, predicate, isRoot) {\n    return $_1nfdlmm8jnlpb2xl.ancestor(scope, predicate, isRoot).isSome();\n  };\n  var closest$3 = function (scope, predicate, isRoot) {\n    return $_1nfdlmm8jnlpb2xl.closest(scope, predicate, isRoot).isSome();\n  };\n  var sibling$3 = function (scope, predicate) {\n    return $_1nfdlmm8jnlpb2xl.sibling(scope, predicate).isSome();\n  };\n  var child$4 = function (scope, predicate) {\n    return $_1nfdlmm8jnlpb2xl.child(scope, predicate).isSome();\n  };\n  var descendant$3 = function (scope, predicate) {\n    return $_1nfdlmm8jnlpb2xl.descendant(scope, predicate).isSome();\n  };\n  var $_4l0x9cqsjnlpb3yj = {\n    any: any$1,\n    ancestor: ancestor$3,\n    closest: closest$3,\n    sibling: sibling$3,\n    child: child$4,\n    descendant: descendant$3\n  };\n\n  var detection = $_4aebialqjnlpb2vq.detect();\n  var inSameTable = function (elem, table) {\n    return $_4l0x9cqsjnlpb3yj.ancestor(elem, function (e) {\n      return $_2pl1nljjnlpb2ur.parent(e).exists(function (p) {\n        return $_3k22killjnlpb2vb.eq(p, table);\n      });\n    });\n  };\n\n  var simulate = function (bridge, isRoot, direction, initial, anchor) {\n    return $_gdszrpm7jnlpb2xk.closest(initial, 'td,th', isRoot).bind(function (start) {\n      return $_gdszrpm7jnlpb2xk.closest(start, 'table', isRoot).bind(function (table) {\n        if (!inSameTable(anchor, table))\n          return Option.none();\n        return $_gi8dt7qfjnlpb3uu.handle(bridge, isRoot, direction).bind(function (range) {\n          return $_gdszrpm7jnlpb2xk.closest(range.finish(), 'td,th', isRoot).map(function (finish) {\n            return {\n              start: constant(start),\n              finish: constant(finish),\n              range: constant(range)\n            };\n          });\n        });\n      });\n    });\n  };\n  var navigate = function (bridge, isRoot, direction, initial, anchor, precheck) {\n    if (detection.browser.isIE()) {\n      return Option.none();\n    } else {\n      return precheck(initial, isRoot).orThunk(function () {\n        return simulate(bridge, isRoot, direction, initial, anchor).map(function (info) {\n          var range = info.range();\n          return $_bfyx6nq8jnlpb3sm.response(Option.some($_cq8cz4qbjnlpb3t5.makeSitus(range.start(), range.soffset(), range.finish(), range.foffset())), true);\n        });\n      });\n    }\n  };\n  var firstUpCheck = function (initial, isRoot) {\n    return $_gdszrpm7jnlpb2xk.closest(initial, 'tr', isRoot).bind(function (startRow) {\n      return $_gdszrpm7jnlpb2xk.closest(startRow, 'table', isRoot).bind(function (table) {\n        var rows = $_97aehqm4jnlpb2x5.descendants(table, 'tr');\n        if ($_3k22killjnlpb2vb.eq(startRow, rows[0])) {\n          return $_3mk9c4qjjnlpb3wc.seekLeft(table, function (element) {\n            return $_7srx6vmijnlpb2zw.last(element).isSome();\n          }, isRoot).map(function (last) {\n            var lastOffset = $_bqkyudmjjnlpb300.getEnd(last);\n            return $_bfyx6nq8jnlpb3sm.response(Option.some($_cq8cz4qbjnlpb3t5.makeSitus(last, lastOffset, last, lastOffset)), true);\n          });\n        } else {\n          return Option.none();\n        }\n      });\n    });\n  };\n  var lastDownCheck = function (initial, isRoot) {\n    return $_gdszrpm7jnlpb2xk.closest(initial, 'tr', isRoot).bind(function (startRow) {\n      return $_gdszrpm7jnlpb2xk.closest(startRow, 'table', isRoot).bind(function (table) {\n        var rows = $_97aehqm4jnlpb2x5.descendants(table, 'tr');\n        if ($_3k22killjnlpb2vb.eq(startRow, rows[rows.length - 1])) {\n          return $_3mk9c4qjjnlpb3wc.seekRight(table, function (element) {\n            return $_7srx6vmijnlpb2zw.first(element).isSome();\n          }, isRoot).map(function (first) {\n            return $_bfyx6nq8jnlpb3sm.response(Option.some($_cq8cz4qbjnlpb3t5.makeSitus(first, 0, first, 0)), true);\n          });\n        } else {\n          return Option.none();\n        }\n      });\n    });\n  };\n  var select = function (bridge, container, isRoot, direction, initial, anchor, selectRange) {\n    return simulate(bridge, isRoot, direction, initial, anchor).bind(function (info) {\n      return $_58lt4vqdjnlpb3tq.detect(container, isRoot, info.start(), info.finish(), selectRange);\n    });\n  };\n  var $_dxvqovqejnlpb3u5 = {\n    navigate: navigate,\n    select: select,\n    firstUpCheck: firstUpCheck,\n    lastDownCheck: lastDownCheck\n  };\n\n  var findCell = function (target, isRoot) {\n    return $_gdszrpm7jnlpb2xk.closest(target, 'td,th', isRoot);\n  };\n  function MouseSelection (bridge, container, isRoot, annotations) {\n    var cursor = Option.none();\n    var clearState = function () {\n      cursor = Option.none();\n    };\n    var mousedown = function (event) {\n      annotations.clear(container);\n      cursor = findCell(event.target(), isRoot);\n    };\n    var mouseover = function (event) {\n      cursor.each(function (start) {\n        annotations.clear(container);\n        findCell(event.target(), isRoot).each(function (finish) {\n          $_3c1t0amqjnlpb319.identify(start, finish, isRoot).each(function (cellSel) {\n            var boxes = cellSel.boxes().getOr([]);\n            if (boxes.length > 1 || boxes.length === 1 && !$_3k22killjnlpb2vb.eq(start, finish)) {\n              annotations.selectRange(container, boxes, cellSel.start(), cellSel.finish());\n              bridge.selectContents(finish);\n            }\n          });\n        });\n      });\n    };\n    var mouseup = function () {\n      cursor.each(clearState);\n    };\n    return {\n      mousedown: mousedown,\n      mouseover: mouseover,\n      mouseup: mouseup\n    };\n  }\n\n  var $_eg9t6dqujnlpb3yt = {\n    down: {\n      traverse: $_2pl1nljjnlpb2ur.nextSibling,\n      gather: $_3mk9c4qjjnlpb3wc.after,\n      relative: $_1jbfrupsjnlpb3p6.before,\n      otherRetry: $_4fb5qlqijnlpb3vj.tryDown,\n      ieRetry: $_4fb5qlqijnlpb3vj.ieTryDown,\n      failure: $_57y4nlqojnlpb3x2.adt.failedDown\n    },\n    up: {\n      traverse: $_2pl1nljjnlpb2ur.prevSibling,\n      gather: $_3mk9c4qjjnlpb3wc.before,\n      relative: $_1jbfrupsjnlpb3p6.before,\n      otherRetry: $_4fb5qlqijnlpb3vj.tryUp,\n      ieRetry: $_4fb5qlqijnlpb3vj.ieTryUp,\n      failure: $_57y4nlqojnlpb3x2.adt.failedUp\n    }\n  };\n\n  var rc = Immutable('rows', 'cols');\n  var mouse = function (win, container, isRoot, annotations) {\n    var bridge = WindowBridge(win);\n    var handlers = MouseSelection(bridge, container, isRoot, annotations);\n    return {\n      mousedown: handlers.mousedown,\n      mouseover: handlers.mouseover,\n      mouseup: handlers.mouseup\n    };\n  };\n  var keyboard = function (win, container, isRoot, annotations) {\n    var bridge = WindowBridge(win);\n    var clearToNavigate = function () {\n      annotations.clear(container);\n      return Option.none();\n    };\n    var keydown = function (event, start, soffset, finish, foffset, direction) {\n      var keycode = event.raw().which;\n      var shiftKey = event.raw().shiftKey === true;\n      var handler = $_3c1t0amqjnlpb319.retrieve(container, annotations.selectedSelector()).fold(function () {\n        if ($_97y5leq9jnlpb3so.isDown(keycode) && shiftKey) {\n          return curry($_dxvqovqejnlpb3u5.select, bridge, container, isRoot, $_eg9t6dqujnlpb3yt.down, finish, start, annotations.selectRange);\n        } else if ($_97y5leq9jnlpb3so.isUp(keycode) && shiftKey) {\n          return curry($_dxvqovqejnlpb3u5.select, bridge, container, isRoot, $_eg9t6dqujnlpb3yt.up, finish, start, annotations.selectRange);\n        } else if ($_97y5leq9jnlpb3so.isDown(keycode)) {\n          return curry($_dxvqovqejnlpb3u5.navigate, bridge, isRoot, $_eg9t6dqujnlpb3yt.down, finish, start, $_dxvqovqejnlpb3u5.lastDownCheck);\n        } else if ($_97y5leq9jnlpb3so.isUp(keycode)) {\n          return curry($_dxvqovqejnlpb3u5.navigate, bridge, isRoot, $_eg9t6dqujnlpb3yt.up, finish, start, $_dxvqovqejnlpb3u5.firstUpCheck);\n        } else {\n          return Option.none;\n        }\n      }, function (selected) {\n        var update = function (attempts) {\n          return function () {\n            var navigation = findMap(attempts, function (delta) {\n              return $_58lt4vqdjnlpb3tq.update(delta.rows(), delta.cols(), container, selected, annotations);\n            });\n            return navigation.fold(function () {\n              return $_3c1t0amqjnlpb319.getEdges(container, annotations.firstSelectedSelector(), annotations.lastSelectedSelector()).map(function (edges) {\n                var relative = $_97y5leq9jnlpb3so.isDown(keycode) || direction.isForward(keycode) ? $_1jbfrupsjnlpb3p6.after : $_1jbfrupsjnlpb3p6.before;\n                bridge.setRelativeSelection($_1jbfrupsjnlpb3p6.on(edges.first(), 0), relative(edges.table()));\n                annotations.clear(container);\n                return $_bfyx6nq8jnlpb3sm.response(Option.none(), true);\n              });\n            }, function (_) {\n              return Option.some($_bfyx6nq8jnlpb3sm.response(Option.none(), true));\n            });\n          };\n        };\n        if ($_97y5leq9jnlpb3so.isDown(keycode) && shiftKey)\n          return update([rc(+1, 0)]);\n        else if ($_97y5leq9jnlpb3so.isUp(keycode) && shiftKey)\n          return update([rc(-1, 0)]);\n        else if (direction.isBackward(keycode) && shiftKey)\n          return update([\n            rc(0, -1),\n            rc(-1, 0)\n          ]);\n        else if (direction.isForward(keycode) && shiftKey)\n          return update([\n            rc(0, +1),\n            rc(+1, 0)\n          ]);\n        else if ($_97y5leq9jnlpb3so.isNavigation(keycode) && shiftKey === false)\n          return clearToNavigate;\n        else\n          return Option.none;\n      });\n      return handler();\n    };\n    var keyup = function (event, start, soffset, finish, foffset) {\n      return $_3c1t0amqjnlpb319.retrieve(container, annotations.selectedSelector()).fold(function () {\n        var keycode = event.raw().which;\n        var shiftKey = event.raw().shiftKey === true;\n        if (shiftKey === false)\n          return Option.none();\n        if ($_97y5leq9jnlpb3so.isNavigation(keycode))\n          return $_58lt4vqdjnlpb3tq.sync(container, isRoot, start, soffset, finish, foffset, annotations.selectRange);\n        else\n          return Option.none();\n      }, Option.none);\n    };\n    return {\n      keydown: keydown,\n      keyup: keyup\n    };\n  };\n  var $_19y0u4q7jnlpb3s9 = {\n    mouse: mouse,\n    keyboard: keyboard\n  };\n\n  var add$3 = function (element, classes) {\n    each(classes, function (x) {\n      $_fy8l6zo3jnlpb3d8.add(element, x);\n    });\n  };\n  var remove$7 = function (element, classes) {\n    each(classes, function (x) {\n      $_fy8l6zo3jnlpb3d8.remove(element, x);\n    });\n  };\n  var toggle$2 = function (element, classes) {\n    each(classes, function (x) {\n      $_fy8l6zo3jnlpb3d8.toggle(element, x);\n    });\n  };\n  var hasAll = function (element, classes) {\n    return forall(classes, function (clazz) {\n      return $_fy8l6zo3jnlpb3d8.has(element, clazz);\n    });\n  };\n  var hasAny = function (element, classes) {\n    return exists(classes, function (clazz) {\n      return $_fy8l6zo3jnlpb3d8.has(element, clazz);\n    });\n  };\n  var getNative = function (element) {\n    var classList = element.dom().classList;\n    var r = new Array(classList.length);\n    for (var i = 0; i < classList.length; i++) {\n      r[i] = classList.item(i);\n    }\n    return r;\n  };\n  var get$12 = function (element) {\n    return $_apsphgo5jnlpb3dc.supports(element) ? getNative(element) : $_apsphgo5jnlpb3dc.get(element);\n  };\n  var $_78lgmeqxjnlpb3zf = {\n    add: add$3,\n    remove: remove$7,\n    toggle: toggle$2,\n    hasAll: hasAll,\n    hasAny: hasAny,\n    get: get$12\n  };\n\n  var addClass = function (clazz) {\n    return function (element) {\n      $_fy8l6zo3jnlpb3d8.add(element, clazz);\n    };\n  };\n  var removeClass = function (clazz) {\n    return function (element) {\n      $_fy8l6zo3jnlpb3d8.remove(element, clazz);\n    };\n  };\n  var removeClasses = function (classes) {\n    return function (element) {\n      $_78lgmeqxjnlpb3zf.remove(element, classes);\n    };\n  };\n  var hasClass = function (clazz) {\n    return function (element) {\n      return $_fy8l6zo3jnlpb3d8.has(element, clazz);\n    };\n  };\n  var $_au0x5fqwjnlpb3ze = {\n    addClass: addClass,\n    removeClass: removeClass,\n    removeClasses: removeClasses,\n    hasClass: hasClass\n  };\n\n  var byClass = function (ephemera) {\n    var addSelectionClass = $_au0x5fqwjnlpb3ze.addClass(ephemera.selected());\n    var removeSelectionClasses = $_au0x5fqwjnlpb3ze.removeClasses([\n      ephemera.selected(),\n      ephemera.lastSelected(),\n      ephemera.firstSelected()\n    ]);\n    var clear = function (container) {\n      var sels = $_97aehqm4jnlpb2x5.descendants(container, ephemera.selectedSelector());\n      each(sels, removeSelectionClasses);\n    };\n    var selectRange = function (container, cells, start, finish) {\n      clear(container);\n      each(cells, addSelectionClass);\n      $_fy8l6zo3jnlpb3d8.add(start, ephemera.firstSelected());\n      $_fy8l6zo3jnlpb3d8.add(finish, ephemera.lastSelected());\n    };\n    return {\n      clear: clear,\n      selectRange: selectRange,\n      selectedSelector: ephemera.selectedSelector,\n      firstSelectedSelector: ephemera.firstSelectedSelector,\n      lastSelectedSelector: ephemera.lastSelectedSelector\n    };\n  };\n  var byAttr = function (ephemera) {\n    var removeSelectionAttributes = function (element) {\n      $_9u6utvm2jnlpb2wv.remove(element, ephemera.selected());\n      $_9u6utvm2jnlpb2wv.remove(element, ephemera.firstSelected());\n      $_9u6utvm2jnlpb2wv.remove(element, ephemera.lastSelected());\n    };\n    var addSelectionAttribute = function (element) {\n      $_9u6utvm2jnlpb2wv.set(element, ephemera.selected(), '1');\n    };\n    var clear = function (container) {\n      var sels = $_97aehqm4jnlpb2x5.descendants(container, ephemera.selectedSelector());\n      each(sels, removeSelectionAttributes);\n    };\n    var selectRange = function (container, cells, start, finish) {\n      clear(container);\n      each(cells, addSelectionAttribute);\n      $_9u6utvm2jnlpb2wv.set(start, ephemera.firstSelected(), '1');\n      $_9u6utvm2jnlpb2wv.set(finish, ephemera.lastSelected(), '1');\n    };\n    return {\n      clear: clear,\n      selectRange: selectRange,\n      selectedSelector: ephemera.selectedSelector,\n      firstSelectedSelector: ephemera.firstSelectedSelector,\n      lastSelectedSelector: ephemera.lastSelectedSelector\n    };\n  };\n  var $_b4r73tqvjnlpb3z1 = {\n    byClass: byClass,\n    byAttr: byAttr\n  };\n\n  var hasInternalTarget = function (e) {\n    return $_fy8l6zo3jnlpb3d8.has(Element$$1.fromDom(e.target), 'ephox-snooker-resizer-bar') === false;\n  };\n  function CellSelection$1 (editor, lazyResize) {\n    var handlerStruct = MixedBag([\n      'mousedown',\n      'mouseover',\n      'mouseup',\n      'keyup',\n      'keydown'\n    ], []);\n    var handlers = Option.none();\n    var annotations = $_b4r73tqvjnlpb3z1.byAttr($_5gt7rrn2jnlpb34p);\n    editor.on('init', function (e) {\n      var win = editor.getWin();\n      var body = getBody$1(editor);\n      var isRoot = getIsRoot(editor);\n      var syncSelection = function () {\n        var sel = editor.selection;\n        var start = Element$$1.fromDom(sel.getStart());\n        var end = Element$$1.fromDom(sel.getEnd());\n        var shared = $_5iw3l3mrjnlpb31x.sharedOne($_em4z2mldjnlpb2sz.table, [\n          start,\n          end\n        ]);\n        shared.fold(function () {\n          annotations.clear(body);\n        }, noop);\n      };\n      var mouseHandlers = $_19y0u4q7jnlpb3s9.mouse(win, body, isRoot, annotations);\n      var keyHandlers = $_19y0u4q7jnlpb3s9.keyboard(win, body, isRoot, annotations);\n      var hasShiftKey = function (event) {\n        return event.raw().shiftKey === true;\n      };\n      var handleResponse = function (event, response) {\n        if (!hasShiftKey(event)) {\n          return;\n        }\n        if (response.kill()) {\n          event.kill();\n        }\n        response.selection().each(function (ns) {\n          var relative = $_3nispmprjnlpb3p0.relative(ns.start(), ns.finish());\n          var rng = $_960to1pxjnlpb3pz.asLtrRange(win, relative);\n          editor.selection.setRng(rng);\n        });\n      };\n      var keyup = function (event) {\n        var wrappedEvent = wrapEvent(event);\n        if (wrappedEvent.raw().shiftKey && $_97y5leq9jnlpb3so.isNavigation(wrappedEvent.raw().which)) {\n          var rng = editor.selection.getRng();\n          var start = Element$$1.fromDom(rng.startContainer);\n          var end = Element$$1.fromDom(rng.endContainer);\n          keyHandlers.keyup(wrappedEvent, start, rng.startOffset, end, rng.endOffset).each(function (response) {\n            handleResponse(wrappedEvent, response);\n          });\n        }\n      };\n      var keydown = function (event) {\n        var wrappedEvent = wrapEvent(event);\n        lazyResize().each(function (resize) {\n          resize.hideBars();\n        });\n        var rng = editor.selection.getRng();\n        var startContainer = Element$$1.fromDom(editor.selection.getStart());\n        var start = Element$$1.fromDom(rng.startContainer);\n        var end = Element$$1.fromDom(rng.endContainer);\n        var direction = $_1wn5holjnlpb3g6.directionAt(startContainer).isRtl() ? $_97y5leq9jnlpb3so.rtl : $_97y5leq9jnlpb3so.ltr;\n        keyHandlers.keydown(wrappedEvent, start, rng.startOffset, end, rng.endOffset, direction).each(function (response) {\n          handleResponse(wrappedEvent, response);\n        });\n        lazyResize().each(function (resize) {\n          resize.showBars();\n        });\n      };\n      var isMouseEvent = function (event) {\n        return event.hasOwnProperty('x') && event.hasOwnProperty('y');\n      };\n      var wrapEvent = function (event) {\n        var target = Element$$1.fromDom(event.target);\n        var stop = function () {\n          event.stopPropagation();\n        };\n        var prevent = function () {\n          event.preventDefault();\n        };\n        var kill = compose(prevent, stop);\n        return {\n          target: constant(target),\n          x: constant(isMouseEvent(event) ? event.x : null),\n          y: constant(isMouseEvent(event) ? event.y : null),\n          stop: stop,\n          prevent: prevent,\n          kill: kill,\n          raw: constant(event)\n        };\n      };\n      var isLeftMouse = function (raw) {\n        return raw.button === 0;\n      };\n      var isLeftButtonPressed = function (raw) {\n        if (raw.buttons === undefined) {\n          return true;\n        }\n        return (raw.buttons & 1) !== 0;\n      };\n      var mouseDown = function (e) {\n        if (isLeftMouse(e) && hasInternalTarget(e)) {\n          mouseHandlers.mousedown(wrapEvent(e));\n        }\n      };\n      var mouseOver = function (e) {\n        if (isLeftButtonPressed(e) && hasInternalTarget(e)) {\n          mouseHandlers.mouseover(wrapEvent(e));\n        }\n      };\n      var mouseUp = function (e) {\n        if (isLeftMouse(e) && hasInternalTarget(e)) {\n          mouseHandlers.mouseup(wrapEvent(e));\n        }\n      };\n      editor.on('mousedown', mouseDown);\n      editor.on('mouseover', mouseOver);\n      editor.on('mouseup', mouseUp);\n      editor.on('keyup', keyup);\n      editor.on('keydown', keydown);\n      editor.on('nodechange', syncSelection);\n      handlers = Option.some(handlerStruct({\n        mousedown: mouseDown,\n        mouseover: mouseOver,\n        mouseup: mouseUp,\n        keyup: keyup,\n        keydown: keydown\n      }));\n    });\n    var destroy = function () {\n      handlers.each(function (handlers) {\n      });\n    };\n    return {\n      clear: annotations.clear,\n      destroy: destroy\n    };\n  }\n\n  var Selections = function (editor) {\n    var get = function () {\n      var body = getBody$1(editor);\n      return $_8c8t99mpjnlpb310.retrieve(body, $_5gt7rrn2jnlpb34p.selectedSelector()).fold(function () {\n        if (editor.selection.getStart() === undefined) {\n          return $_35kl4cn3jnlpb34v.none();\n        } else {\n          return $_35kl4cn3jnlpb34v.single(editor.selection);\n        }\n      }, function (cells) {\n        return $_35kl4cn3jnlpb34v.multiple(cells);\n      });\n    };\n    return { get: get };\n  };\n\n  var each$4 = global$1.each;\n  var addButtons = function (editor) {\n    var menuItems = [];\n    each$4('inserttable tableprops deletetable | cell row column'.split(' '), function (name) {\n      if (name === '|') {\n        menuItems.push({ text: '-' });\n      } else {\n        menuItems.push(editor.menuItems[name]);\n      }\n    });\n    editor.addButton('table', {\n      type: 'menubutton',\n      title: 'Table',\n      menu: menuItems\n    });\n    function cmd(command) {\n      return function () {\n        editor.execCommand(command);\n      };\n    }\n    editor.addButton('tableprops', {\n      title: 'Table properties',\n      onclick: cmd('mceTableProps'),\n      icon: 'table'\n    });\n    editor.addButton('tabledelete', {\n      title: 'Delete table',\n      onclick: cmd('mceTableDelete')\n    });\n    editor.addButton('tablecellprops', {\n      title: 'Cell properties',\n      onclick: cmd('mceTableCellProps')\n    });\n    editor.addButton('tablemergecells', {\n      title: 'Merge cells',\n      onclick: cmd('mceTableMergeCells')\n    });\n    editor.addButton('tablesplitcells', {\n      title: 'Split cell',\n      onclick: cmd('mceTableSplitCells')\n    });\n    editor.addButton('tableinsertrowbefore', {\n      title: 'Insert row before',\n      onclick: cmd('mceTableInsertRowBefore')\n    });\n    editor.addButton('tableinsertrowafter', {\n      title: 'Insert row after',\n      onclick: cmd('mceTableInsertRowAfter')\n    });\n    editor.addButton('tabledeleterow', {\n      title: 'Delete row',\n      onclick: cmd('mceTableDeleteRow')\n    });\n    editor.addButton('tablerowprops', {\n      title: 'Row properties',\n      onclick: cmd('mceTableRowProps')\n    });\n    editor.addButton('tablecutrow', {\n      title: 'Cut row',\n      onclick: cmd('mceTableCutRow')\n    });\n    editor.addButton('tablecopyrow', {\n      title: 'Copy row',\n      onclick: cmd('mceTableCopyRow')\n    });\n    editor.addButton('tablepasterowbefore', {\n      title: 'Paste row before',\n      onclick: cmd('mceTablePasteRowBefore')\n    });\n    editor.addButton('tablepasterowafter', {\n      title: 'Paste row after',\n      onclick: cmd('mceTablePasteRowAfter')\n    });\n    editor.addButton('tableinsertcolbefore', {\n      title: 'Insert column before',\n      onclick: cmd('mceTableInsertColBefore')\n    });\n    editor.addButton('tableinsertcolafter', {\n      title: 'Insert column after',\n      onclick: cmd('mceTableInsertColAfter')\n    });\n    editor.addButton('tabledeletecol', {\n      title: 'Delete column',\n      onclick: cmd('mceTableDeleteCol')\n    });\n  };\n  var addToolbars = function (editor) {\n    var isTable = function (table) {\n      var selectorMatched = editor.dom.is(table, 'table') && editor.getBody().contains(table);\n      return selectorMatched;\n    };\n    var toolbar = getToolbar(editor);\n    if (toolbar.length > 0) {\n      editor.addContextToolbar(isTable, toolbar.join(' '));\n    }\n  };\n  var $_fgs8hlqzjnlpb3zp = {\n    addButtons: addButtons,\n    addToolbars: addToolbars\n  };\n\n  var addMenuItems = function (editor, selections) {\n    var targets = Option.none();\n    var tableCtrls = [];\n    var cellCtrls = [];\n    var mergeCtrls = [];\n    var unmergeCtrls = [];\n    var noTargetDisable = function (ctrl) {\n      ctrl.disabled(true);\n    };\n    var ctrlEnable = function (ctrl) {\n      ctrl.disabled(false);\n    };\n    var pushTable = function () {\n      var self = this;\n      tableCtrls.push(self);\n      targets.fold(function () {\n        noTargetDisable(self);\n      }, function (targets) {\n        ctrlEnable(self);\n      });\n    };\n    var pushCell = function () {\n      var self = this;\n      cellCtrls.push(self);\n      targets.fold(function () {\n        noTargetDisable(self);\n      }, function (targets) {\n        ctrlEnable(self);\n      });\n    };\n    var pushMerge = function () {\n      var self = this;\n      mergeCtrls.push(self);\n      targets.fold(function () {\n        noTargetDisable(self);\n      }, function (targets) {\n        self.disabled(targets.mergable().isNone());\n      });\n    };\n    var pushUnmerge = function () {\n      var self = this;\n      unmergeCtrls.push(self);\n      targets.fold(function () {\n        noTargetDisable(self);\n      }, function (targets) {\n        self.disabled(targets.unmergable().isNone());\n      });\n    };\n    var setDisabledCtrls = function () {\n      targets.fold(function () {\n        each(tableCtrls, noTargetDisable);\n        each(cellCtrls, noTargetDisable);\n        each(mergeCtrls, noTargetDisable);\n        each(unmergeCtrls, noTargetDisable);\n      }, function (targets) {\n        each(tableCtrls, ctrlEnable);\n        each(cellCtrls, ctrlEnable);\n        each(mergeCtrls, function (mergeCtrl) {\n          mergeCtrl.disabled(targets.mergable().isNone());\n        });\n        each(unmergeCtrls, function (unmergeCtrl) {\n          unmergeCtrl.disabled(targets.unmergable().isNone());\n        });\n      });\n    };\n    editor.on('init', function () {\n      editor.on('nodechange', function (e) {\n        var cellOpt = Option.from(editor.dom.getParent(editor.selection.getStart(), 'th,td'));\n        targets = cellOpt.bind(function (cellDom) {\n          var cell = Element$$1.fromDom(cellDom);\n          var table = $_em4z2mldjnlpb2sz.table(cell);\n          return table.map(function (table) {\n            return $_39kmudmnjnlpb30f.forMenu(selections, table, cell);\n          });\n        });\n        setDisabledCtrls();\n      });\n    });\n    var generateTableGrid = function () {\n      var html = '';\n      html = '<table role=\"grid\" class=\"mce-grid mce-grid-border\" aria-readonly=\"true\">';\n      for (var y = 0; y < 10; y++) {\n        html += '<tr>';\n        for (var x = 0; x < 10; x++) {\n          html += '<td role=\"gridcell\" tabindex=\"-1\"><a id=\"mcegrid' + (y * 10 + x) + '\" href=\"#\" ' + 'data-mce-x=\"' + x + '\" data-mce-y=\"' + y + '\"></a></td>';\n        }\n        html += '</tr>';\n      }\n      html += '</table>';\n      html += '<div class=\"mce-text-center\" role=\"presentation\">1 x 1</div>';\n      return html;\n    };\n    var selectGrid = function (editor, tx, ty, control) {\n      var table = control.getEl().getElementsByTagName('table')[0];\n      var x, y, focusCell, cell, active;\n      var rtl = control.isRtl() || control.parent().rel === 'tl-tr';\n      table.nextSibling.innerHTML = tx + 1 + ' x ' + (ty + 1);\n      if (rtl) {\n        tx = 9 - tx;\n      }\n      for (y = 0; y < 10; y++) {\n        for (x = 0; x < 10; x++) {\n          cell = table.rows[y].childNodes[x].firstChild;\n          active = (rtl ? x >= tx : x <= tx) && y <= ty;\n          editor.dom.toggleClass(cell, 'mce-active', active);\n          if (active) {\n            focusCell = cell;\n          }\n        }\n      }\n      return focusCell.parentNode;\n    };\n    var insertTable = hasTableGrid(editor) === false ? {\n      text: 'Table',\n      icon: 'table',\n      context: 'table',\n      onclick: cmd('mceInsertTable')\n    } : {\n      text: 'Table',\n      icon: 'table',\n      context: 'table',\n      ariaHideMenu: true,\n      onclick: function (e) {\n        if (e.aria) {\n          this.parent().hideAll();\n          e.stopImmediatePropagation();\n          editor.execCommand('mceInsertTable');\n        }\n      },\n      onshow: function () {\n        selectGrid(editor, 0, 0, this.menu.items()[0]);\n      },\n      onhide: function () {\n        var elements = this.menu.items()[0].getEl().getElementsByTagName('a');\n        editor.dom.removeClass(elements, 'mce-active');\n        editor.dom.addClass(elements[0], 'mce-active');\n      },\n      menu: [{\n          type: 'container',\n          html: generateTableGrid(),\n          onPostRender: function () {\n            this.lastX = this.lastY = 0;\n          },\n          onmousemove: function (e) {\n            var target = e.target;\n            var x, y;\n            if (target.tagName.toUpperCase() === 'A') {\n              x = parseInt(target.getAttribute('data-mce-x'), 10);\n              y = parseInt(target.getAttribute('data-mce-y'), 10);\n              if (this.isRtl() || this.parent().rel === 'tl-tr') {\n                x = 9 - x;\n              }\n              if (x !== this.lastX || y !== this.lastY) {\n                selectGrid(editor, x, y, e.control);\n                this.lastX = x;\n                this.lastY = y;\n              }\n            }\n          },\n          onclick: function (e) {\n            var self = this;\n            if (e.target.tagName.toUpperCase() === 'A') {\n              e.preventDefault();\n              e.stopPropagation();\n              self.parent().cancel();\n              editor.undoManager.transact(function () {\n                $_azkpjfoyjnlpb3ij.insert(editor, self.lastX + 1, self.lastY + 1);\n              });\n              editor.addVisual();\n            }\n          }\n        }]\n    };\n    function cmd(command) {\n      return function () {\n        editor.execCommand(command);\n      };\n    }\n    var tableProperties = {\n      text: 'Table properties',\n      context: 'table',\n      onPostRender: pushTable,\n      onclick: cmd('mceTableProps')\n    };\n    var deleteTable = {\n      text: 'Delete table',\n      context: 'table',\n      onPostRender: pushTable,\n      cmd: 'mceTableDelete'\n    };\n    var row = {\n      text: 'Row',\n      context: 'table',\n      menu: [\n        {\n          text: 'Insert row before',\n          onclick: cmd('mceTableInsertRowBefore'),\n          onPostRender: pushCell\n        },\n        {\n          text: 'Insert row after',\n          onclick: cmd('mceTableInsertRowAfter'),\n          onPostRender: pushCell\n        },\n        {\n          text: 'Delete row',\n          onclick: cmd('mceTableDeleteRow'),\n          onPostRender: pushCell\n        },\n        {\n          text: 'Row properties',\n          onclick: cmd('mceTableRowProps'),\n          onPostRender: pushCell\n        },\n        { text: '-' },\n        {\n          text: 'Cut row',\n          onclick: cmd('mceTableCutRow'),\n          onPostRender: pushCell\n        },\n        {\n          text: 'Copy row',\n          onclick: cmd('mceTableCopyRow'),\n          onPostRender: pushCell\n        },\n        {\n          text: 'Paste row before',\n          onclick: cmd('mceTablePasteRowBefore'),\n          onPostRender: pushCell\n        },\n        {\n          text: 'Paste row after',\n          onclick: cmd('mceTablePasteRowAfter'),\n          onPostRender: pushCell\n        }\n      ]\n    };\n    var column = {\n      text: 'Column',\n      context: 'table',\n      menu: [\n        {\n          text: 'Insert column before',\n          onclick: cmd('mceTableInsertColBefore'),\n          onPostRender: pushCell\n        },\n        {\n          text: 'Insert column after',\n          onclick: cmd('mceTableInsertColAfter'),\n          onPostRender: pushCell\n        },\n        {\n          text: 'Delete column',\n          onclick: cmd('mceTableDeleteCol'),\n          onPostRender: pushCell\n        }\n      ]\n    };\n    var cell = {\n      separator: 'before',\n      text: 'Cell',\n      context: 'table',\n      menu: [\n        {\n          text: 'Cell properties',\n          onclick: cmd('mceTableCellProps'),\n          onPostRender: pushCell\n        },\n        {\n          text: 'Merge cells',\n          onclick: cmd('mceTableMergeCells'),\n          onPostRender: pushMerge\n        },\n        {\n          text: 'Split cell',\n          onclick: cmd('mceTableSplitCells'),\n          onPostRender: pushUnmerge\n        }\n      ]\n    };\n    editor.addMenuItem('inserttable', insertTable);\n    editor.addMenuItem('tableprops', tableProperties);\n    editor.addMenuItem('deletetable', deleteTable);\n    editor.addMenuItem('row', row);\n    editor.addMenuItem('column', column);\n    editor.addMenuItem('cell', cell);\n  };\n  var $_3b6cvbr0jnlpb3zw = { addMenuItems: addMenuItems };\n\n  var getClipboardRows = function (clipboardRows) {\n    return clipboardRows.get().fold(function () {\n      return;\n    }, function (rows) {\n      return map(rows, function (row) {\n        return row.dom();\n      });\n    });\n  };\n  var setClipboardRows = function (rows, clipboardRows) {\n    var sugarRows = map(rows, Element$$1.fromDom);\n    clipboardRows.set(Option.from(sugarRows));\n  };\n  var getApi = function (editor, clipboardRows) {\n    return {\n      insertTable: function (columns, rows) {\n        return $_azkpjfoyjnlpb3ij.insert(editor, columns, rows);\n      },\n      setClipboardRows: function (rows) {\n        return setClipboardRows(rows, clipboardRows);\n      },\n      getClipboardRows: function () {\n        return getClipboardRows(clipboardRows);\n      }\n    };\n  };\n\n  function Plugin(editor) {\n    var resizeHandler = ResizeHandler(editor);\n    var cellSelection = CellSelection$1(editor, resizeHandler.lazyResize);\n    var actions = TableActions(editor, resizeHandler.lazyWire);\n    var selections = Selections(editor);\n    var clipboardRows = Cell(Option.none());\n    $_cs1v9popjnlpb3gp.registerCommands(editor, actions, cellSelection, selections, clipboardRows);\n    $_aaekm8l0jnlpb2qo.registerEvents(editor, selections, actions, cellSelection);\n    $_3b6cvbr0jnlpb3zw.addMenuItems(editor, selections);\n    $_fgs8hlqzjnlpb3zp.addButtons(editor);\n    $_fgs8hlqzjnlpb3zp.addToolbars(editor);\n    editor.on('PreInit', function () {\n      editor.serializer.addTempAttr($_5gt7rrn2jnlpb34p.firstSelected());\n      editor.serializer.addTempAttr($_5gt7rrn2jnlpb34p.lastSelected());\n    });\n    if (hasTabNavigation(editor)) {\n      editor.on('keydown', function (e) {\n        $_yn0xrpojnlpb3o5.handle(e, editor, actions, resizeHandler.lazyWire);\n      });\n    }\n    editor.on('remove', function () {\n      resizeHandler.destroy();\n      cellSelection.destroy();\n    });\n    return getApi(editor, clipboardRows);\n  }\n  global.add('table', Plugin);\n  function Plugin$1 () {\n  }\n\n  return Plugin$1;\n\n}());\n})();\n"]}]}