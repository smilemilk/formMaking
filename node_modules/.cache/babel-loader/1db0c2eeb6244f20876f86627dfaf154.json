{"remainingRequest":"/Users/shanliguo/Documents/workstudy/vue-form-making/node_modules/babel-loader/lib/index.js!/Users/shanliguo/Documents/workstudy/vue-form-making/node_modules/eslint-loader/index.js??ref--13-0!/Users/shanliguo/Documents/workstudy/vue-form-making/src/lib/tinymce/plugins/insertdatetime/plugin.js","dependencies":[{"path":"/Users/shanliguo/Documents/workstudy/vue-form-making/src/lib/tinymce/plugins/insertdatetime/plugin.js","mtime":1551936176000},{"path":"/Users/shanliguo/Documents/workstudy/vue-form-making/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/shanliguo/Documents/workstudy/vue-form-making/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/shanliguo/Documents/workstudy/vue-form-making/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":["(function () {\n  var insertdatetime = function () {\n    'use strict';\n\n    var Cell = function (initial) {\n      var value = initial;\n\n      var get = function () {\n        return value;\n      };\n\n      var set = function (v) {\n        value = v;\n      };\n\n      var clone = function () {\n        return Cell(get());\n      };\n\n      return {\n        get: get,\n        set: set,\n        clone: clone\n      };\n    };\n\n    var global = tinymce.util.Tools.resolve('tinymce.PluginManager');\n\n    var getDateFormat = function (editor) {\n      return editor.getParam('insertdatetime_dateformat', editor.translate('%Y-%m-%d'));\n    };\n\n    var getTimeFormat = function (editor) {\n      return editor.getParam('insertdatetime_timeformat', editor.translate('%H:%M:%S'));\n    };\n\n    var getFormats = function (editor) {\n      return editor.getParam('insertdatetime_formats', ['%H:%M:%S', '%Y-%m-%d', '%I:%M:%S %p', '%D']);\n    };\n\n    var getDefaultDateTime = function (editor) {\n      var formats = getFormats(editor);\n      return formats.length > 0 ? formats[0] : getTimeFormat(editor);\n    };\n\n    var shouldInsertTimeElement = function (editor) {\n      return editor.getParam('insertdatetime_element', false);\n    };\n\n    var $_ewvf16fhjnlpb200 = {\n      getDateFormat: getDateFormat,\n      getTimeFormat: getTimeFormat,\n      getFormats: getFormats,\n      getDefaultDateTime: getDefaultDateTime,\n      shouldInsertTimeElement: shouldInsertTimeElement\n    };\n    var daysShort = 'Sun Mon Tue Wed Thu Fri Sat Sun'.split(' ');\n    var daysLong = 'Sunday Monday Tuesday Wednesday Thursday Friday Saturday Sunday'.split(' ');\n    var monthsShort = 'Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec'.split(' ');\n    var monthsLong = 'January February March April May June July August September October November December'.split(' ');\n\n    var addZeros = function (value, len) {\n      value = '' + value;\n\n      if (value.length < len) {\n        for (var i = 0; i < len - value.length; i++) {\n          value = '0' + value;\n        }\n      }\n\n      return value;\n    };\n\n    var getDateTime = function (editor, fmt, date) {\n      date = date || new Date();\n      fmt = fmt.replace('%D', '%m/%d/%Y');\n      fmt = fmt.replace('%r', '%I:%M:%S %p');\n      fmt = fmt.replace('%Y', '' + date.getFullYear());\n      fmt = fmt.replace('%y', '' + date.getYear());\n      fmt = fmt.replace('%m', addZeros(date.getMonth() + 1, 2));\n      fmt = fmt.replace('%d', addZeros(date.getDate(), 2));\n      fmt = fmt.replace('%H', '' + addZeros(date.getHours(), 2));\n      fmt = fmt.replace('%M', '' + addZeros(date.getMinutes(), 2));\n      fmt = fmt.replace('%S', '' + addZeros(date.getSeconds(), 2));\n      fmt = fmt.replace('%I', '' + ((date.getHours() + 11) % 12 + 1));\n      fmt = fmt.replace('%p', '' + (date.getHours() < 12 ? 'AM' : 'PM'));\n      fmt = fmt.replace('%B', '' + editor.translate(monthsLong[date.getMonth()]));\n      fmt = fmt.replace('%b', '' + editor.translate(monthsShort[date.getMonth()]));\n      fmt = fmt.replace('%A', '' + editor.translate(daysLong[date.getDay()]));\n      fmt = fmt.replace('%a', '' + editor.translate(daysShort[date.getDay()]));\n      fmt = fmt.replace('%%', '%');\n      return fmt;\n    };\n\n    var updateElement = function (editor, timeElm, computerTime, userTime) {\n      var newTimeElm = editor.dom.create('time', {\n        datetime: computerTime\n      }, userTime);\n      timeElm.parentNode.insertBefore(newTimeElm, timeElm);\n      editor.dom.remove(timeElm);\n      editor.selection.select(newTimeElm, true);\n      editor.selection.collapse(false);\n    };\n\n    var insertDateTime = function (editor, format) {\n      if ($_ewvf16fhjnlpb200.shouldInsertTimeElement(editor)) {\n        var userTime = getDateTime(editor, format);\n        var computerTime = void 0;\n\n        if (/%[HMSIp]/.test(format)) {\n          computerTime = getDateTime(editor, '%Y-%m-%dT%H:%M');\n        } else {\n          computerTime = getDateTime(editor, '%Y-%m-%d');\n        }\n\n        var timeElm = editor.dom.getParent(editor.selection.getStart(), 'time');\n\n        if (timeElm) {\n          updateElement(editor, timeElm, computerTime, userTime);\n        } else {\n          editor.insertContent('<time datetime=\"' + computerTime + '\">' + userTime + '</time>');\n        }\n      } else {\n        editor.insertContent(getDateTime(editor, format));\n      }\n    };\n\n    var $_8otsu9fijnlpb202 = {\n      insertDateTime: insertDateTime,\n      getDateTime: getDateTime\n    };\n\n    var register = function (editor) {\n      editor.addCommand('mceInsertDate', function () {\n        $_8otsu9fijnlpb202.insertDateTime(editor, $_ewvf16fhjnlpb200.getDateFormat(editor));\n      });\n      editor.addCommand('mceInsertTime', function () {\n        $_8otsu9fijnlpb202.insertDateTime(editor, $_ewvf16fhjnlpb200.getTimeFormat(editor));\n      });\n    };\n\n    var $_f598p9fgjnlpb1zz = {\n      register: register\n    };\n    var global$1 = tinymce.util.Tools.resolve('tinymce.util.Tools');\n\n    var createMenuItems = function (editor, lastFormatState) {\n      var formats = $_ewvf16fhjnlpb200.getFormats(editor);\n      return global$1.map(formats, function (fmt) {\n        return {\n          text: $_8otsu9fijnlpb202.getDateTime(editor, fmt),\n          onclick: function () {\n            lastFormatState.set(fmt);\n            $_8otsu9fijnlpb202.insertDateTime(editor, fmt);\n          }\n        };\n      });\n    };\n\n    var register$1 = function (editor, lastFormatState) {\n      var menuItems = createMenuItems(editor, lastFormatState);\n      editor.addButton('insertdatetime', {\n        type: 'splitbutton',\n        title: 'Insert date/time',\n        menu: menuItems,\n        onclick: function () {\n          var lastFormat = lastFormatState.get();\n          $_8otsu9fijnlpb202.insertDateTime(editor, lastFormat ? lastFormat : $_ewvf16fhjnlpb200.getDefaultDateTime(editor));\n        }\n      });\n      editor.addMenuItem('insertdatetime', {\n        icon: 'date',\n        text: 'Date/time',\n        menu: menuItems,\n        context: 'insert'\n      });\n    };\n\n    var $_23ak17fjjnlpb205 = {\n      register: register$1\n    };\n    global.add('insertdatetime', function (editor) {\n      var lastFormatState = Cell(null);\n      $_f598p9fgjnlpb1zz.register(editor);\n      $_23ak17fjjnlpb205.register(editor, lastFormatState);\n    });\n\n    function Plugin() {}\n\n    return Plugin;\n  }();\n})();",{"version":3,"sources":["/Users/shanliguo/Documents/workstudy/vue-form-making/src/lib/tinymce/plugins/insertdatetime/plugin.js"],"names":["insertdatetime","Cell","initial","value","get","set","v","clone","global","tinymce","util","Tools","resolve","getDateFormat","editor","getParam","translate","getTimeFormat","getFormats","getDefaultDateTime","formats","length","shouldInsertTimeElement","$_ewvf16fhjnlpb200","daysShort","split","daysLong","monthsShort","monthsLong","addZeros","len","i","getDateTime","fmt","date","Date","replace","getFullYear","getYear","getMonth","getDate","getHours","getMinutes","getSeconds","getDay","updateElement","timeElm","computerTime","userTime","newTimeElm","dom","create","datetime","parentNode","insertBefore","remove","selection","select","collapse","insertDateTime","format","test","getParent","getStart","insertContent","$_8otsu9fijnlpb202","register","addCommand","$_f598p9fgjnlpb1zz","global$1","createMenuItems","lastFormatState","map","text","onclick","register$1","menuItems","addButton","type","title","menu","lastFormat","addMenuItem","icon","context","$_23ak17fjjnlpb205","add","Plugin"],"mappings":"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","sourcesContent":["(function () {\nvar insertdatetime = (function () {\n  'use strict';\n\n  var Cell = function (initial) {\n    var value = initial;\n    var get = function () {\n      return value;\n    };\n    var set = function (v) {\n      value = v;\n    };\n    var clone = function () {\n      return Cell(get());\n    };\n    return {\n      get: get,\n      set: set,\n      clone: clone\n    };\n  };\n\n  var global = tinymce.util.Tools.resolve('tinymce.PluginManager');\n\n  var getDateFormat = function (editor) {\n    return editor.getParam('insertdatetime_dateformat', editor.translate('%Y-%m-%d'));\n  };\n  var getTimeFormat = function (editor) {\n    return editor.getParam('insertdatetime_timeformat', editor.translate('%H:%M:%S'));\n  };\n  var getFormats = function (editor) {\n    return editor.getParam('insertdatetime_formats', [\n      '%H:%M:%S',\n      '%Y-%m-%d',\n      '%I:%M:%S %p',\n      '%D'\n    ]);\n  };\n  var getDefaultDateTime = function (editor) {\n    var formats = getFormats(editor);\n    return formats.length > 0 ? formats[0] : getTimeFormat(editor);\n  };\n  var shouldInsertTimeElement = function (editor) {\n    return editor.getParam('insertdatetime_element', false);\n  };\n  var $_ewvf16fhjnlpb200 = {\n    getDateFormat: getDateFormat,\n    getTimeFormat: getTimeFormat,\n    getFormats: getFormats,\n    getDefaultDateTime: getDefaultDateTime,\n    shouldInsertTimeElement: shouldInsertTimeElement\n  };\n\n  var daysShort = 'Sun Mon Tue Wed Thu Fri Sat Sun'.split(' ');\n  var daysLong = 'Sunday Monday Tuesday Wednesday Thursday Friday Saturday Sunday'.split(' ');\n  var monthsShort = 'Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec'.split(' ');\n  var monthsLong = 'January February March April May June July August September October November December'.split(' ');\n  var addZeros = function (value, len) {\n    value = '' + value;\n    if (value.length < len) {\n      for (var i = 0; i < len - value.length; i++) {\n        value = '0' + value;\n      }\n    }\n    return value;\n  };\n  var getDateTime = function (editor, fmt, date) {\n    date = date || new Date();\n    fmt = fmt.replace('%D', '%m/%d/%Y');\n    fmt = fmt.replace('%r', '%I:%M:%S %p');\n    fmt = fmt.replace('%Y', '' + date.getFullYear());\n    fmt = fmt.replace('%y', '' + date.getYear());\n    fmt = fmt.replace('%m', addZeros(date.getMonth() + 1, 2));\n    fmt = fmt.replace('%d', addZeros(date.getDate(), 2));\n    fmt = fmt.replace('%H', '' + addZeros(date.getHours(), 2));\n    fmt = fmt.replace('%M', '' + addZeros(date.getMinutes(), 2));\n    fmt = fmt.replace('%S', '' + addZeros(date.getSeconds(), 2));\n    fmt = fmt.replace('%I', '' + ((date.getHours() + 11) % 12 + 1));\n    fmt = fmt.replace('%p', '' + (date.getHours() < 12 ? 'AM' : 'PM'));\n    fmt = fmt.replace('%B', '' + editor.translate(monthsLong[date.getMonth()]));\n    fmt = fmt.replace('%b', '' + editor.translate(monthsShort[date.getMonth()]));\n    fmt = fmt.replace('%A', '' + editor.translate(daysLong[date.getDay()]));\n    fmt = fmt.replace('%a', '' + editor.translate(daysShort[date.getDay()]));\n    fmt = fmt.replace('%%', '%');\n    return fmt;\n  };\n  var updateElement = function (editor, timeElm, computerTime, userTime) {\n    var newTimeElm = editor.dom.create('time', { datetime: computerTime }, userTime);\n    timeElm.parentNode.insertBefore(newTimeElm, timeElm);\n    editor.dom.remove(timeElm);\n    editor.selection.select(newTimeElm, true);\n    editor.selection.collapse(false);\n  };\n  var insertDateTime = function (editor, format) {\n    if ($_ewvf16fhjnlpb200.shouldInsertTimeElement(editor)) {\n      var userTime = getDateTime(editor, format);\n      var computerTime = void 0;\n      if (/%[HMSIp]/.test(format)) {\n        computerTime = getDateTime(editor, '%Y-%m-%dT%H:%M');\n      } else {\n        computerTime = getDateTime(editor, '%Y-%m-%d');\n      }\n      var timeElm = editor.dom.getParent(editor.selection.getStart(), 'time');\n      if (timeElm) {\n        updateElement(editor, timeElm, computerTime, userTime);\n      } else {\n        editor.insertContent('<time datetime=\"' + computerTime + '\">' + userTime + '</time>');\n      }\n    } else {\n      editor.insertContent(getDateTime(editor, format));\n    }\n  };\n  var $_8otsu9fijnlpb202 = {\n    insertDateTime: insertDateTime,\n    getDateTime: getDateTime\n  };\n\n  var register = function (editor) {\n    editor.addCommand('mceInsertDate', function () {\n      $_8otsu9fijnlpb202.insertDateTime(editor, $_ewvf16fhjnlpb200.getDateFormat(editor));\n    });\n    editor.addCommand('mceInsertTime', function () {\n      $_8otsu9fijnlpb202.insertDateTime(editor, $_ewvf16fhjnlpb200.getTimeFormat(editor));\n    });\n  };\n  var $_f598p9fgjnlpb1zz = { register: register };\n\n  var global$1 = tinymce.util.Tools.resolve('tinymce.util.Tools');\n\n  var createMenuItems = function (editor, lastFormatState) {\n    var formats = $_ewvf16fhjnlpb200.getFormats(editor);\n    return global$1.map(formats, function (fmt) {\n      return {\n        text: $_8otsu9fijnlpb202.getDateTime(editor, fmt),\n        onclick: function () {\n          lastFormatState.set(fmt);\n          $_8otsu9fijnlpb202.insertDateTime(editor, fmt);\n        }\n      };\n    });\n  };\n  var register$1 = function (editor, lastFormatState) {\n    var menuItems = createMenuItems(editor, lastFormatState);\n    editor.addButton('insertdatetime', {\n      type: 'splitbutton',\n      title: 'Insert date/time',\n      menu: menuItems,\n      onclick: function () {\n        var lastFormat = lastFormatState.get();\n        $_8otsu9fijnlpb202.insertDateTime(editor, lastFormat ? lastFormat : $_ewvf16fhjnlpb200.getDefaultDateTime(editor));\n      }\n    });\n    editor.addMenuItem('insertdatetime', {\n      icon: 'date',\n      text: 'Date/time',\n      menu: menuItems,\n      context: 'insert'\n    });\n  };\n  var $_23ak17fjjnlpb205 = { register: register$1 };\n\n  global.add('insertdatetime', function (editor) {\n    var lastFormatState = Cell(null);\n    $_f598p9fgjnlpb1zz.register(editor);\n    $_23ak17fjjnlpb205.register(editor, lastFormatState);\n  });\n  function Plugin () {\n  }\n\n  return Plugin;\n\n}());\n})();\n"]}]}