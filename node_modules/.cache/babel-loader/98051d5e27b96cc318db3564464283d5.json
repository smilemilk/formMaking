{"remainingRequest":"/Users/shanliguo/Documents/workstudy/vue-form-making/node_modules/babel-loader/lib/index.js!/Users/shanliguo/Documents/workstudy/vue-form-making/node_modules/eslint-loader/index.js??ref--13-0!/Users/shanliguo/Documents/workstudy/vue-form-making/src/lib/tinymce/plugins/lists/plugin.js","dependencies":[{"path":"/Users/shanliguo/Documents/workstudy/vue-form-making/src/lib/tinymce/plugins/lists/plugin.js","mtime":1551936176000},{"path":"/Users/shanliguo/Documents/workstudy/vue-form-making/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/shanliguo/Documents/workstudy/vue-form-making/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/shanliguo/Documents/workstudy/vue-form-making/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":["(function () {\n  var lists = function () {\n    'use strict';\n\n    var global = tinymce.util.Tools.resolve('tinymce.PluginManager');\n    var global$1 = tinymce.util.Tools.resolve('tinymce.dom.RangeUtils');\n    var global$2 = tinymce.util.Tools.resolve('tinymce.dom.TreeWalker');\n    var global$3 = tinymce.util.Tools.resolve('tinymce.util.VK');\n    var global$4 = tinymce.util.Tools.resolve('tinymce.dom.BookmarkManager');\n    var global$5 = tinymce.util.Tools.resolve('tinymce.util.Tools');\n    var global$6 = tinymce.util.Tools.resolve('tinymce.dom.DOMUtils');\n\n    var isTextNode = function (node) {\n      return node && node.nodeType === 3;\n    };\n\n    var isListNode = function (node) {\n      return node && /^(OL|UL|DL)$/.test(node.nodeName);\n    };\n\n    var isListItemNode = function (node) {\n      return node && /^(LI|DT|DD)$/.test(node.nodeName);\n    };\n\n    var isTableCellNode = function (node) {\n      return node && /^(TH|TD)$/.test(node.nodeName);\n    };\n\n    var isBr = function (node) {\n      return node && node.nodeName === 'BR';\n    };\n\n    var isFirstChild = function (node) {\n      return node.parentNode.firstChild === node;\n    };\n\n    var isLastChild = function (node) {\n      return node.parentNode.lastChild === node;\n    };\n\n    var isTextBlock = function (editor, node) {\n      return node && !!editor.schema.getTextBlockElements()[node.nodeName];\n    };\n\n    var isBlock = function (node, blockElements) {\n      return node && node.nodeName in blockElements;\n    };\n\n    var isBogusBr = function (dom, node) {\n      if (!isBr(node)) {\n        return false;\n      }\n\n      if (dom.isBlock(node.nextSibling) && !isBr(node.previousSibling)) {\n        return true;\n      }\n\n      return false;\n    };\n\n    var isEmpty = function (dom, elm, keepBookmarks) {\n      var empty = dom.isEmpty(elm);\n\n      if (keepBookmarks && dom.select('span[data-mce-type=bookmark]', elm).length > 0) {\n        return false;\n      }\n\n      return empty;\n    };\n\n    var isChildOfBody = function (dom, elm) {\n      return dom.isChildOf(elm, dom.getRoot());\n    };\n\n    var $_ckmbxtgljnlpb24s = {\n      isTextNode: isTextNode,\n      isListNode: isListNode,\n      isListItemNode: isListItemNode,\n      isTableCellNode: isTableCellNode,\n      isBr: isBr,\n      isFirstChild: isFirstChild,\n      isLastChild: isLastChild,\n      isTextBlock: isTextBlock,\n      isBlock: isBlock,\n      isBogusBr: isBogusBr,\n      isEmpty: isEmpty,\n      isChildOfBody: isChildOfBody\n    };\n\n    var getNormalizedEndPoint = function (container, offset) {\n      var node = global$1.getNode(container, offset);\n\n      if ($_ckmbxtgljnlpb24s.isListItemNode(container) && $_ckmbxtgljnlpb24s.isTextNode(node)) {\n        var textNodeOffset = offset >= container.childNodes.length ? node.data.length : 0;\n        return {\n          container: node,\n          offset: textNodeOffset\n        };\n      }\n\n      return {\n        container: container,\n        offset: offset\n      };\n    };\n\n    var normalizeRange = function (rng) {\n      var outRng = rng.cloneRange();\n      var rangeStart = getNormalizedEndPoint(rng.startContainer, rng.startOffset);\n      outRng.setStart(rangeStart.container, rangeStart.offset);\n      var rangeEnd = getNormalizedEndPoint(rng.endContainer, rng.endOffset);\n      outRng.setEnd(rangeEnd.container, rangeEnd.offset);\n      return outRng;\n    };\n\n    var $_ck4mpggkjnlpb24r = {\n      getNormalizedEndPoint: getNormalizedEndPoint,\n      normalizeRange: normalizeRange\n    };\n    var DOM = global$6.DOM;\n\n    var createBookmark = function (rng) {\n      var bookmark = {};\n\n      var setupEndPoint = function (start) {\n        var offsetNode, container, offset;\n        container = rng[start ? 'startContainer' : 'endContainer'];\n        offset = rng[start ? 'startOffset' : 'endOffset'];\n\n        if (container.nodeType === 1) {\n          offsetNode = DOM.create('span', {\n            'data-mce-type': 'bookmark'\n          });\n\n          if (container.hasChildNodes()) {\n            offset = Math.min(offset, container.childNodes.length - 1);\n\n            if (start) {\n              container.insertBefore(offsetNode, container.childNodes[offset]);\n            } else {\n              DOM.insertAfter(offsetNode, container.childNodes[offset]);\n            }\n          } else {\n            container.appendChild(offsetNode);\n          }\n\n          container = offsetNode;\n          offset = 0;\n        }\n\n        bookmark[start ? 'startContainer' : 'endContainer'] = container;\n        bookmark[start ? 'startOffset' : 'endOffset'] = offset;\n      };\n\n      setupEndPoint(true);\n\n      if (!rng.collapsed) {\n        setupEndPoint();\n      }\n\n      return bookmark;\n    };\n\n    var resolveBookmark = function (bookmark) {\n      function restoreEndPoint(start) {\n        var container, offset, node;\n\n        var nodeIndex = function (container) {\n          var node = container.parentNode.firstChild,\n              idx = 0;\n\n          while (node) {\n            if (node === container) {\n              return idx;\n            }\n\n            if (node.nodeType !== 1 || node.getAttribute('data-mce-type') !== 'bookmark') {\n              idx++;\n            }\n\n            node = node.nextSibling;\n          }\n\n          return -1;\n        };\n\n        container = node = bookmark[start ? 'startContainer' : 'endContainer'];\n        offset = bookmark[start ? 'startOffset' : 'endOffset'];\n\n        if (!container) {\n          return;\n        }\n\n        if (container.nodeType === 1) {\n          offset = nodeIndex(container);\n          container = container.parentNode;\n          DOM.remove(node);\n\n          if (!container.hasChildNodes() && DOM.isBlock(container)) {\n            container.appendChild(DOM.create('br'));\n          }\n        }\n\n        bookmark[start ? 'startContainer' : 'endContainer'] = container;\n        bookmark[start ? 'startOffset' : 'endOffset'] = offset;\n      }\n\n      restoreEndPoint(true);\n      restoreEndPoint();\n      var rng = DOM.createRng();\n      rng.setStart(bookmark.startContainer, bookmark.startOffset);\n\n      if (bookmark.endContainer) {\n        rng.setEnd(bookmark.endContainer, bookmark.endOffset);\n      }\n\n      return $_ck4mpggkjnlpb24r.normalizeRange(rng);\n    };\n\n    var $_b9d8gigjjnlpb24o = {\n      createBookmark: createBookmark,\n      resolveBookmark: resolveBookmark\n    };\n    var DOM$1 = global$6.DOM;\n\n    var normalizeList = function (dom, ul) {\n      var sibling;\n      var parentNode = ul.parentNode;\n\n      if (parentNode.nodeName === 'LI' && parentNode.firstChild === ul) {\n        sibling = parentNode.previousSibling;\n\n        if (sibling && sibling.nodeName === 'LI') {\n          sibling.appendChild(ul);\n\n          if ($_ckmbxtgljnlpb24s.isEmpty(dom, parentNode)) {\n            DOM$1.remove(parentNode);\n          }\n        } else {\n          DOM$1.setStyle(parentNode, 'listStyleType', 'none');\n        }\n      }\n\n      if ($_ckmbxtgljnlpb24s.isListNode(parentNode)) {\n        sibling = parentNode.previousSibling;\n\n        if (sibling && sibling.nodeName === 'LI') {\n          sibling.appendChild(ul);\n        }\n      }\n    };\n\n    var normalizeLists = function (dom, element) {\n      global$5.each(global$5.grep(dom.select('ol,ul', element)), function (ul) {\n        normalizeList(dom, ul);\n      });\n    };\n\n    var $_52bjalgmjnlpb24u = {\n      normalizeList: normalizeList,\n      normalizeLists: normalizeLists\n    };\n    var global$7 = tinymce.util.Tools.resolve('tinymce.dom.DomQuery');\n\n    var getParentList = function (editor) {\n      var selectionStart = editor.selection.getStart(true);\n      return editor.dom.getParent(selectionStart, 'OL,UL,DL', getClosestListRootElm(editor, selectionStart));\n    };\n\n    var isParentListSelected = function (parentList, selectedBlocks) {\n      return parentList && selectedBlocks.length === 1 && selectedBlocks[0] === parentList;\n    };\n\n    var findSubLists = function (parentList) {\n      return global$5.grep(parentList.querySelectorAll('ol,ul,dl'), function (elm) {\n        return $_ckmbxtgljnlpb24s.isListNode(elm);\n      });\n    };\n\n    var getSelectedSubLists = function (editor) {\n      var parentList = getParentList(editor);\n      var selectedBlocks = editor.selection.getSelectedBlocks();\n\n      if (isParentListSelected(parentList, selectedBlocks)) {\n        return findSubLists(parentList);\n      } else {\n        return global$5.grep(selectedBlocks, function (elm) {\n          return $_ckmbxtgljnlpb24s.isListNode(elm) && parentList !== elm;\n        });\n      }\n    };\n\n    var findParentListItemsNodes = function (editor, elms) {\n      var listItemsElms = global$5.map(elms, function (elm) {\n        var parentLi = editor.dom.getParent(elm, 'li,dd,dt', getClosestListRootElm(editor, elm));\n        return parentLi ? parentLi : elm;\n      });\n      return global$7.unique(listItemsElms);\n    };\n\n    var getSelectedListItems = function (editor) {\n      var selectedBlocks = editor.selection.getSelectedBlocks();\n      return global$5.grep(findParentListItemsNodes(editor, selectedBlocks), function (block) {\n        return $_ckmbxtgljnlpb24s.isListItemNode(block);\n      });\n    };\n\n    var getClosestListRootElm = function (editor, elm) {\n      var parentTableCell = editor.dom.getParents(elm, 'TD,TH');\n      var root = parentTableCell.length > 0 ? parentTableCell[0] : editor.getBody();\n      return root;\n    };\n\n    var $_2e86yngnjnlpb24w = {\n      getParentList: getParentList,\n      getSelectedSubLists: getSelectedSubLists,\n      getSelectedListItems: getSelectedListItems,\n      getClosestListRootElm: getClosestListRootElm\n    };\n    var global$8 = tinymce.util.Tools.resolve('tinymce.Env');\n    var DOM$2 = global$6.DOM;\n\n    var createNewTextBlock = function (editor, contentNode, blockName) {\n      var node, textBlock;\n      var fragment = DOM$2.createFragment();\n      var hasContentNode;\n      var blockElements = editor.schema.getBlockElements();\n\n      if (editor.settings.forced_root_block) {\n        blockName = blockName || editor.settings.forced_root_block;\n      }\n\n      if (blockName) {\n        textBlock = DOM$2.create(blockName);\n\n        if (textBlock.tagName === editor.settings.forced_root_block) {\n          DOM$2.setAttribs(textBlock, editor.settings.forced_root_block_attrs);\n        }\n\n        if (!$_ckmbxtgljnlpb24s.isBlock(contentNode.firstChild, blockElements)) {\n          fragment.appendChild(textBlock);\n        }\n      }\n\n      if (contentNode) {\n        while (node = contentNode.firstChild) {\n          var nodeName = node.nodeName;\n\n          if (!hasContentNode && (nodeName !== 'SPAN' || node.getAttribute('data-mce-type') !== 'bookmark')) {\n            hasContentNode = true;\n          }\n\n          if ($_ckmbxtgljnlpb24s.isBlock(node, blockElements)) {\n            fragment.appendChild(node);\n            textBlock = null;\n          } else {\n            if (blockName) {\n              if (!textBlock) {\n                textBlock = DOM$2.create(blockName);\n                fragment.appendChild(textBlock);\n              }\n\n              textBlock.appendChild(node);\n            } else {\n              fragment.appendChild(node);\n            }\n          }\n        }\n      }\n\n      if (!editor.settings.forced_root_block) {\n        fragment.appendChild(DOM$2.create('br'));\n      } else {\n        if (!hasContentNode && (!global$8.ie || global$8.ie > 10)) {\n          textBlock.appendChild(DOM$2.create('br', {\n            'data-mce-bogus': '1'\n          }));\n        }\n      }\n\n      return fragment;\n    };\n\n    var $_2xsspsgqjnlpb253 = {\n      createNewTextBlock: createNewTextBlock\n    };\n    var DOM$3 = global$6.DOM;\n\n    var splitList = function (editor, ul, li, newBlock) {\n      var tmpRng, fragment, bookmarks, node;\n\n      var removeAndKeepBookmarks = function (targetNode) {\n        global$5.each(bookmarks, function (node) {\n          targetNode.parentNode.insertBefore(node, li.parentNode);\n        });\n        DOM$3.remove(targetNode);\n      };\n\n      bookmarks = DOM$3.select('span[data-mce-type=\"bookmark\"]', ul);\n      newBlock = newBlock || $_2xsspsgqjnlpb253.createNewTextBlock(editor, li);\n      tmpRng = DOM$3.createRng();\n      tmpRng.setStartAfter(li);\n      tmpRng.setEndAfter(ul);\n      fragment = tmpRng.extractContents();\n\n      for (node = fragment.firstChild; node; node = node.firstChild) {\n        if (node.nodeName === 'LI' && editor.dom.isEmpty(node)) {\n          DOM$3.remove(node);\n          break;\n        }\n      }\n\n      if (!editor.dom.isEmpty(fragment)) {\n        DOM$3.insertAfter(fragment, ul);\n      }\n\n      DOM$3.insertAfter(newBlock, ul);\n\n      if ($_ckmbxtgljnlpb24s.isEmpty(editor.dom, li.parentNode)) {\n        removeAndKeepBookmarks(li.parentNode);\n      }\n\n      DOM$3.remove(li);\n\n      if ($_ckmbxtgljnlpb24s.isEmpty(editor.dom, ul)) {\n        DOM$3.remove(ul);\n      }\n    };\n\n    var $_efs4awgpjnlpb24z = {\n      splitList: splitList\n    };\n    var DOM$4 = global$6.DOM;\n\n    var removeEmptyLi = function (dom, li) {\n      if ($_ckmbxtgljnlpb24s.isEmpty(dom, li)) {\n        DOM$4.remove(li);\n      }\n    };\n\n    var outdent = function (editor, li) {\n      var ul = li.parentNode;\n      var ulParent, newBlock;\n\n      if (ul) {\n        ulParent = ul.parentNode;\n      } else {\n        removeEmptyLi(editor.dom, li);\n        return true;\n      }\n\n      if (ul === editor.getBody()) {\n        return true;\n      }\n\n      if (li.nodeName === 'DD') {\n        DOM$4.rename(li, 'DT');\n        return true;\n      }\n\n      if ($_ckmbxtgljnlpb24s.isFirstChild(li) && $_ckmbxtgljnlpb24s.isLastChild(li)) {\n        if (ulParent.nodeName === 'LI') {\n          DOM$4.insertAfter(li, ulParent);\n          removeEmptyLi(editor.dom, ulParent);\n          DOM$4.remove(ul);\n        } else if ($_ckmbxtgljnlpb24s.isListNode(ulParent)) {\n          DOM$4.remove(ul, true);\n        } else {\n          ulParent.insertBefore($_2xsspsgqjnlpb253.createNewTextBlock(editor, li), ul);\n          DOM$4.remove(ul);\n        }\n\n        return true;\n      } else if ($_ckmbxtgljnlpb24s.isFirstChild(li)) {\n        if (ulParent.nodeName === 'LI') {\n          DOM$4.insertAfter(li, ulParent);\n          li.appendChild(ul);\n          removeEmptyLi(editor.dom, ulParent);\n        } else if ($_ckmbxtgljnlpb24s.isListNode(ulParent)) {\n          ulParent.insertBefore(li, ul);\n        } else {\n          ulParent.insertBefore($_2xsspsgqjnlpb253.createNewTextBlock(editor, li), ul);\n          DOM$4.remove(li);\n        }\n\n        return true;\n      } else if ($_ckmbxtgljnlpb24s.isLastChild(li)) {\n        if (ulParent.nodeName === 'LI') {\n          DOM$4.insertAfter(li, ulParent);\n        } else if ($_ckmbxtgljnlpb24s.isListNode(ulParent)) {\n          DOM$4.insertAfter(li, ul);\n        } else {\n          DOM$4.insertAfter($_2xsspsgqjnlpb253.createNewTextBlock(editor, li), ul);\n          DOM$4.remove(li);\n        }\n\n        return true;\n      }\n\n      if (ulParent.nodeName === 'LI') {\n        ul = ulParent;\n        newBlock = $_2xsspsgqjnlpb253.createNewTextBlock(editor, li, 'LI');\n      } else if ($_ckmbxtgljnlpb24s.isListNode(ulParent)) {\n        newBlock = $_2xsspsgqjnlpb253.createNewTextBlock(editor, li, 'LI');\n      } else {\n        newBlock = $_2xsspsgqjnlpb253.createNewTextBlock(editor, li);\n      }\n\n      $_efs4awgpjnlpb24z.splitList(editor, ul, li, newBlock);\n      $_52bjalgmjnlpb24u.normalizeLists(editor.dom, ul.parentNode);\n      return true;\n    };\n\n    var outdentSelection = function (editor) {\n      var listElements = $_2e86yngnjnlpb24w.getSelectedListItems(editor);\n\n      if (listElements.length) {\n        var bookmark = $_b9d8gigjjnlpb24o.createBookmark(editor.selection.getRng());\n        var i = void 0,\n            y = void 0;\n        var root = $_2e86yngnjnlpb24w.getClosestListRootElm(editor, editor.selection.getStart(true));\n        i = listElements.length;\n\n        while (i--) {\n          var node = listElements[i].parentNode;\n\n          while (node && node !== root) {\n            y = listElements.length;\n\n            while (y--) {\n              if (listElements[y] === node) {\n                listElements.splice(i, 1);\n                break;\n              }\n            }\n\n            node = node.parentNode;\n          }\n        }\n\n        for (i = 0; i < listElements.length; i++) {\n          if (!outdent(editor, listElements[i]) && i === 0) {\n            break;\n          }\n        }\n\n        editor.selection.setRng($_b9d8gigjjnlpb24o.resolveBookmark(bookmark));\n        editor.nodeChanged();\n        return true;\n      }\n    };\n\n    var $_etcyqoghjnlpb24k = {\n      outdent: outdent,\n      outdentSelection: outdentSelection\n    };\n\n    var updateListStyle = function (dom, el, detail) {\n      var type = detail['list-style-type'] ? detail['list-style-type'] : null;\n      dom.setStyle(el, 'list-style-type', type);\n    };\n\n    var setAttribs = function (elm, attrs) {\n      global$5.each(attrs, function (value, key) {\n        elm.setAttribute(key, value);\n      });\n    };\n\n    var updateListAttrs = function (dom, el, detail) {\n      setAttribs(el, detail['list-attributes']);\n      global$5.each(dom.select('li', el), function (li) {\n        setAttribs(li, detail['list-item-attributes']);\n      });\n    };\n\n    var updateListWithDetails = function (dom, el, detail) {\n      updateListStyle(dom, el, detail);\n      updateListAttrs(dom, el, detail);\n    };\n\n    var removeStyles = function (dom, element, styles) {\n      global$5.each(styles, function (style) {\n        var _a;\n\n        return dom.setStyle(element, (_a = {}, _a[style] = '', _a));\n      });\n    };\n\n    var getEndPointNode = function (editor, rng, start, root) {\n      var container, offset;\n      container = rng[start ? 'startContainer' : 'endContainer'];\n      offset = rng[start ? 'startOffset' : 'endOffset'];\n\n      if (container.nodeType === 1) {\n        container = container.childNodes[Math.min(offset, container.childNodes.length - 1)] || container;\n      }\n\n      if (!start && $_ckmbxtgljnlpb24s.isBr(container.nextSibling)) {\n        container = container.nextSibling;\n      }\n\n      while (container.parentNode !== root) {\n        if ($_ckmbxtgljnlpb24s.isTextBlock(editor, container)) {\n          return container;\n        }\n\n        if (/^(TD|TH)$/.test(container.parentNode.nodeName)) {\n          return container;\n        }\n\n        container = container.parentNode;\n      }\n\n      return container;\n    };\n\n    var getSelectedTextBlocks = function (editor, rng, root) {\n      var textBlocks = [],\n          dom = editor.dom;\n      var startNode = getEndPointNode(editor, rng, true, root);\n      var endNode = getEndPointNode(editor, rng, false, root);\n      var block;\n      var siblings = [];\n\n      for (var node = startNode; node; node = node.nextSibling) {\n        siblings.push(node);\n\n        if (node === endNode) {\n          break;\n        }\n      }\n\n      global$5.each(siblings, function (node) {\n        if ($_ckmbxtgljnlpb24s.isTextBlock(editor, node)) {\n          textBlocks.push(node);\n          block = null;\n          return;\n        }\n\n        if (dom.isBlock(node) || $_ckmbxtgljnlpb24s.isBr(node)) {\n          if ($_ckmbxtgljnlpb24s.isBr(node)) {\n            dom.remove(node);\n          }\n\n          block = null;\n          return;\n        }\n\n        var nextSibling = node.nextSibling;\n\n        if (global$4.isBookmarkNode(node)) {\n          if ($_ckmbxtgljnlpb24s.isTextBlock(editor, nextSibling) || !nextSibling && node.parentNode === root) {\n            block = null;\n            return;\n          }\n        }\n\n        if (!block) {\n          block = dom.create('p');\n          node.parentNode.insertBefore(block, node);\n          textBlocks.push(block);\n        }\n\n        block.appendChild(node);\n      });\n      return textBlocks;\n    };\n\n    var hasCompatibleStyle = function (dom, sib, detail) {\n      var sibStyle = dom.getStyle(sib, 'list-style-type');\n      var detailStyle = detail ? detail['list-style-type'] : '';\n      detailStyle = detailStyle === null ? '' : detailStyle;\n      return sibStyle === detailStyle;\n    };\n\n    var applyList = function (editor, listName, detail) {\n      if (detail === void 0) {\n        detail = {};\n      }\n\n      var rng = editor.selection.getRng(true);\n      var bookmark;\n      var listItemName = 'LI';\n      var root = $_2e86yngnjnlpb24w.getClosestListRootElm(editor, editor.selection.getStart(true));\n      var dom = editor.dom;\n\n      if (dom.getContentEditable(editor.selection.getNode()) === 'false') {\n        return;\n      }\n\n      listName = listName.toUpperCase();\n\n      if (listName === 'DL') {\n        listItemName = 'DT';\n      }\n\n      bookmark = $_b9d8gigjjnlpb24o.createBookmark(rng);\n      global$5.each(getSelectedTextBlocks(editor, rng, root), function (block) {\n        var listBlock, sibling;\n        sibling = block.previousSibling;\n\n        if (sibling && $_ckmbxtgljnlpb24s.isListNode(sibling) && sibling.nodeName === listName && hasCompatibleStyle(dom, sibling, detail)) {\n          listBlock = sibling;\n          block = dom.rename(block, listItemName);\n          sibling.appendChild(block);\n        } else {\n          listBlock = dom.create(listName);\n          block.parentNode.insertBefore(listBlock, block);\n          listBlock.appendChild(block);\n          block = dom.rename(block, listItemName);\n        }\n\n        removeStyles(dom, block, ['margin', 'margin-right', 'margin-bottom', 'margin-left', 'margin-top', 'padding', 'padding-right', 'padding-bottom', 'padding-left', 'padding-top']);\n        updateListWithDetails(dom, listBlock, detail);\n        mergeWithAdjacentLists(editor.dom, listBlock);\n      });\n      editor.selection.setRng($_b9d8gigjjnlpb24o.resolveBookmark(bookmark));\n    };\n\n    var removeList = function (editor) {\n      var bookmark = $_b9d8gigjjnlpb24o.createBookmark(editor.selection.getRng(true));\n      var root = $_2e86yngnjnlpb24w.getClosestListRootElm(editor, editor.selection.getStart(true));\n      var listItems = $_2e86yngnjnlpb24w.getSelectedListItems(editor);\n      var emptyListItems = global$5.grep(listItems, function (li) {\n        return editor.dom.isEmpty(li);\n      });\n      listItems = global$5.grep(listItems, function (li) {\n        return !editor.dom.isEmpty(li);\n      });\n      global$5.each(emptyListItems, function (li) {\n        if ($_ckmbxtgljnlpb24s.isEmpty(editor.dom, li)) {\n          $_etcyqoghjnlpb24k.outdent(editor, li);\n          return;\n        }\n      });\n      global$5.each(listItems, function (li) {\n        var node, rootList;\n\n        if (li.parentNode === editor.getBody()) {\n          return;\n        }\n\n        for (node = li; node && node !== root; node = node.parentNode) {\n          if ($_ckmbxtgljnlpb24s.isListNode(node)) {\n            rootList = node;\n          }\n        }\n\n        $_efs4awgpjnlpb24z.splitList(editor, rootList, li);\n        $_52bjalgmjnlpb24u.normalizeLists(editor.dom, rootList.parentNode);\n      });\n      editor.selection.setRng($_b9d8gigjjnlpb24o.resolveBookmark(bookmark));\n    };\n\n    var isValidLists = function (list1, list2) {\n      return list1 && list2 && $_ckmbxtgljnlpb24s.isListNode(list1) && list1.nodeName === list2.nodeName;\n    };\n\n    var hasSameListStyle = function (dom, list1, list2) {\n      var targetStyle = dom.getStyle(list1, 'list-style-type', true);\n      var style = dom.getStyle(list2, 'list-style-type', true);\n      return targetStyle === style;\n    };\n\n    var hasSameClasses = function (elm1, elm2) {\n      return elm1.className === elm2.className;\n    };\n\n    var shouldMerge = function (dom, list1, list2) {\n      return isValidLists(list1, list2) && hasSameListStyle(dom, list1, list2) && hasSameClasses(list1, list2);\n    };\n\n    var mergeWithAdjacentLists = function (dom, listBlock) {\n      var sibling, node;\n      sibling = listBlock.nextSibling;\n\n      if (shouldMerge(dom, listBlock, sibling)) {\n        while (node = sibling.firstChild) {\n          listBlock.appendChild(node);\n        }\n\n        dom.remove(sibling);\n      }\n\n      sibling = listBlock.previousSibling;\n\n      if (shouldMerge(dom, listBlock, sibling)) {\n        while (node = sibling.lastChild) {\n          listBlock.insertBefore(node, listBlock.firstChild);\n        }\n\n        dom.remove(sibling);\n      }\n    };\n\n    var updateList = function (dom, list, listName, detail) {\n      if (list.nodeName !== listName) {\n        var newList = dom.rename(list, listName);\n        updateListWithDetails(dom, newList, detail);\n      } else {\n        updateListWithDetails(dom, list, detail);\n      }\n    };\n\n    var toggleMultipleLists = function (editor, parentList, lists, listName, detail) {\n      if (parentList.nodeName === listName && !hasListStyleDetail(detail)) {\n        removeList(editor);\n      } else {\n        var bookmark = $_b9d8gigjjnlpb24o.createBookmark(editor.selection.getRng(true));\n        global$5.each([parentList].concat(lists), function (elm) {\n          updateList(editor.dom, elm, listName, detail);\n        });\n        editor.selection.setRng($_b9d8gigjjnlpb24o.resolveBookmark(bookmark));\n      }\n    };\n\n    var hasListStyleDetail = function (detail) {\n      return 'list-style-type' in detail;\n    };\n\n    var toggleSingleList = function (editor, parentList, listName, detail) {\n      if (parentList === editor.getBody()) {\n        return;\n      }\n\n      if (parentList) {\n        if (parentList.nodeName === listName && !hasListStyleDetail(detail)) {\n          removeList(editor);\n        } else {\n          var bookmark = $_b9d8gigjjnlpb24o.createBookmark(editor.selection.getRng(true));\n          updateListWithDetails(editor.dom, parentList, detail);\n          mergeWithAdjacentLists(editor.dom, editor.dom.rename(parentList, listName));\n          editor.selection.setRng($_b9d8gigjjnlpb24o.resolveBookmark(bookmark));\n        }\n      } else {\n        applyList(editor, listName, detail);\n      }\n    };\n\n    var toggleList = function (editor, listName, detail) {\n      var parentList = $_2e86yngnjnlpb24w.getParentList(editor);\n      var selectedSubLists = $_2e86yngnjnlpb24w.getSelectedSubLists(editor);\n      detail = detail ? detail : {};\n\n      if (parentList && selectedSubLists.length > 0) {\n        toggleMultipleLists(editor, parentList, selectedSubLists, listName, detail);\n      } else {\n        toggleSingleList(editor, parentList, listName, detail);\n      }\n    };\n\n    var $_ctanhjgejnlpb24d = {\n      toggleList: toggleList,\n      removeList: removeList,\n      mergeWithAdjacentLists: mergeWithAdjacentLists\n    };\n\n    var findNextCaretContainer = function (editor, rng, isForward, root) {\n      var node = rng.startContainer;\n      var offset = rng.startOffset;\n      var nonEmptyBlocks, walker;\n\n      if (node.nodeType === 3 && (isForward ? offset < node.data.length : offset > 0)) {\n        return node;\n      }\n\n      nonEmptyBlocks = editor.schema.getNonEmptyElements();\n\n      if (node.nodeType === 1) {\n        node = global$1.getNode(node, offset);\n      }\n\n      walker = new global$2(node, root);\n\n      if (isForward) {\n        if ($_ckmbxtgljnlpb24s.isBogusBr(editor.dom, node)) {\n          walker.next();\n        }\n      }\n\n      while (node = walker[isForward ? 'next' : 'prev2']()) {\n        if (node.nodeName === 'LI' && !node.hasChildNodes()) {\n          return node;\n        }\n\n        if (nonEmptyBlocks[node.nodeName]) {\n          return node;\n        }\n\n        if (node.nodeType === 3 && node.data.length > 0) {\n          return node;\n        }\n      }\n    };\n\n    var hasOnlyOneBlockChild = function (dom, elm) {\n      var childNodes = elm.childNodes;\n      return childNodes.length === 1 && !$_ckmbxtgljnlpb24s.isListNode(childNodes[0]) && dom.isBlock(childNodes[0]);\n    };\n\n    var unwrapSingleBlockChild = function (dom, elm) {\n      if (hasOnlyOneBlockChild(dom, elm)) {\n        dom.remove(elm.firstChild, true);\n      }\n    };\n\n    var moveChildren = function (dom, fromElm, toElm) {\n      var node, targetElm;\n      targetElm = hasOnlyOneBlockChild(dom, toElm) ? toElm.firstChild : toElm;\n      unwrapSingleBlockChild(dom, fromElm);\n\n      if (!$_ckmbxtgljnlpb24s.isEmpty(dom, fromElm, true)) {\n        while (node = fromElm.firstChild) {\n          targetElm.appendChild(node);\n        }\n      }\n    };\n\n    var mergeLiElements = function (dom, fromElm, toElm) {\n      var node, listNode;\n      var ul = fromElm.parentNode;\n\n      if (!$_ckmbxtgljnlpb24s.isChildOfBody(dom, fromElm) || !$_ckmbxtgljnlpb24s.isChildOfBody(dom, toElm)) {\n        return;\n      }\n\n      if ($_ckmbxtgljnlpb24s.isListNode(toElm.lastChild)) {\n        listNode = toElm.lastChild;\n      }\n\n      if (ul === toElm.lastChild) {\n        if ($_ckmbxtgljnlpb24s.isBr(ul.previousSibling)) {\n          dom.remove(ul.previousSibling);\n        }\n      }\n\n      node = toElm.lastChild;\n\n      if (node && $_ckmbxtgljnlpb24s.isBr(node) && fromElm.hasChildNodes()) {\n        dom.remove(node);\n      }\n\n      if ($_ckmbxtgljnlpb24s.isEmpty(dom, toElm, true)) {\n        dom.$(toElm).empty();\n      }\n\n      moveChildren(dom, fromElm, toElm);\n\n      if (listNode) {\n        toElm.appendChild(listNode);\n      }\n\n      dom.remove(fromElm);\n\n      if ($_ckmbxtgljnlpb24s.isEmpty(dom, ul) && ul !== dom.getRoot()) {\n        dom.remove(ul);\n      }\n    };\n\n    var mergeIntoEmptyLi = function (editor, fromLi, toLi) {\n      editor.dom.$(toLi).empty();\n      mergeLiElements(editor.dom, fromLi, toLi);\n      editor.selection.setCursorLocation(toLi);\n    };\n\n    var mergeForward = function (editor, rng, fromLi, toLi) {\n      var dom = editor.dom;\n\n      if (dom.isEmpty(toLi)) {\n        mergeIntoEmptyLi(editor, fromLi, toLi);\n      } else {\n        var bookmark = $_b9d8gigjjnlpb24o.createBookmark(rng);\n        mergeLiElements(dom, fromLi, toLi);\n        editor.selection.setRng($_b9d8gigjjnlpb24o.resolveBookmark(bookmark));\n      }\n    };\n\n    var mergeBackward = function (editor, rng, fromLi, toLi) {\n      var bookmark = $_b9d8gigjjnlpb24o.createBookmark(rng);\n      mergeLiElements(editor.dom, fromLi, toLi);\n      var resolvedBookmark = $_b9d8gigjjnlpb24o.resolveBookmark(bookmark);\n      editor.selection.setRng(resolvedBookmark);\n    };\n\n    var backspaceDeleteFromListToListCaret = function (editor, isForward) {\n      var dom = editor.dom,\n          selection = editor.selection;\n      var selectionStartElm = selection.getStart();\n      var root = $_2e86yngnjnlpb24w.getClosestListRootElm(editor, selectionStartElm);\n      var li = dom.getParent(selection.getStart(), 'LI', root);\n      var ul, rng, otherLi;\n\n      if (li) {\n        ul = li.parentNode;\n\n        if (ul === editor.getBody() && $_ckmbxtgljnlpb24s.isEmpty(dom, ul)) {\n          return true;\n        }\n\n        rng = $_ck4mpggkjnlpb24r.normalizeRange(selection.getRng(true));\n        otherLi = dom.getParent(findNextCaretContainer(editor, rng, isForward, root), 'LI', root);\n\n        if (otherLi && otherLi !== li) {\n          if (isForward) {\n            mergeForward(editor, rng, otherLi, li);\n          } else {\n            mergeBackward(editor, rng, li, otherLi);\n          }\n\n          return true;\n        } else if (!otherLi) {\n          if (!isForward) {\n            $_ctanhjgejnlpb24d.removeList(editor);\n            return true;\n          }\n        }\n      }\n\n      return false;\n    };\n\n    var removeBlock = function (dom, block, root) {\n      var parentBlock = dom.getParent(block.parentNode, dom.isBlock, root);\n      dom.remove(block);\n\n      if (parentBlock && dom.isEmpty(parentBlock)) {\n        dom.remove(parentBlock);\n      }\n    };\n\n    var backspaceDeleteIntoListCaret = function (editor, isForward) {\n      var dom = editor.dom;\n      var selectionStartElm = editor.selection.getStart();\n      var root = $_2e86yngnjnlpb24w.getClosestListRootElm(editor, selectionStartElm);\n      var block = dom.getParent(selectionStartElm, dom.isBlock, root);\n\n      if (block && dom.isEmpty(block)) {\n        var rng = $_ck4mpggkjnlpb24r.normalizeRange(editor.selection.getRng(true));\n        var otherLi_1 = dom.getParent(findNextCaretContainer(editor, rng, isForward, root), 'LI', root);\n\n        if (otherLi_1) {\n          editor.undoManager.transact(function () {\n            removeBlock(dom, block, root);\n            $_ctanhjgejnlpb24d.mergeWithAdjacentLists(dom, otherLi_1.parentNode);\n            editor.selection.select(otherLi_1, true);\n            editor.selection.collapse(isForward);\n          });\n          return true;\n        }\n      }\n\n      return false;\n    };\n\n    var backspaceDeleteCaret = function (editor, isForward) {\n      return backspaceDeleteFromListToListCaret(editor, isForward) || backspaceDeleteIntoListCaret(editor, isForward);\n    };\n\n    var backspaceDeleteRange = function (editor) {\n      var selectionStartElm = editor.selection.getStart();\n      var root = $_2e86yngnjnlpb24w.getClosestListRootElm(editor, selectionStartElm);\n      var startListParent = editor.dom.getParent(selectionStartElm, 'LI,DT,DD', root);\n\n      if (startListParent || $_2e86yngnjnlpb24w.getSelectedListItems(editor).length > 0) {\n        editor.undoManager.transact(function () {\n          editor.execCommand('Delete');\n          $_52bjalgmjnlpb24u.normalizeLists(editor.dom, editor.getBody());\n        });\n        return true;\n      }\n\n      return false;\n    };\n\n    var backspaceDelete = function (editor, isForward) {\n      return editor.selection.isCollapsed() ? backspaceDeleteCaret(editor, isForward) : backspaceDeleteRange(editor);\n    };\n\n    var setup = function (editor) {\n      editor.on('keydown', function (e) {\n        if (e.keyCode === global$3.BACKSPACE) {\n          if (backspaceDelete(editor, false)) {\n            e.preventDefault();\n          }\n        } else if (e.keyCode === global$3.DELETE) {\n          if (backspaceDelete(editor, true)) {\n            e.preventDefault();\n          }\n        }\n      });\n    };\n\n    var $_6r254xgajnlpb245 = {\n      setup: setup,\n      backspaceDelete: backspaceDelete\n    };\n\n    var get = function (editor) {\n      return {\n        backspaceDelete: function (isForward) {\n          $_6r254xgajnlpb245.backspaceDelete(editor, isForward);\n        }\n      };\n    };\n\n    var $_6kguj9g9jnlpb243 = {\n      get: get\n    };\n    var DOM$5 = global$6.DOM;\n\n    var mergeLists = function (from, to) {\n      var node;\n\n      if ($_ckmbxtgljnlpb24s.isListNode(from)) {\n        while (node = from.firstChild) {\n          to.appendChild(node);\n        }\n\n        DOM$5.remove(from);\n      }\n    };\n\n    var indent = function (li) {\n      var sibling, newList, listStyle;\n\n      if (li.nodeName === 'DT') {\n        DOM$5.rename(li, 'DD');\n        return true;\n      }\n\n      sibling = li.previousSibling;\n\n      if (sibling && $_ckmbxtgljnlpb24s.isListNode(sibling)) {\n        sibling.appendChild(li);\n        return true;\n      }\n\n      if (sibling && sibling.nodeName === 'LI' && $_ckmbxtgljnlpb24s.isListNode(sibling.lastChild)) {\n        sibling.lastChild.appendChild(li);\n        mergeLists(li.lastChild, sibling.lastChild);\n        return true;\n      }\n\n      sibling = li.nextSibling;\n\n      if (sibling && $_ckmbxtgljnlpb24s.isListNode(sibling)) {\n        sibling.insertBefore(li, sibling.firstChild);\n        return true;\n      }\n\n      sibling = li.previousSibling;\n\n      if (sibling && sibling.nodeName === 'LI') {\n        newList = DOM$5.create(li.parentNode.nodeName);\n        listStyle = DOM$5.getStyle(li.parentNode, 'listStyleType');\n\n        if (listStyle) {\n          DOM$5.setStyle(newList, 'listStyleType', listStyle);\n        }\n\n        sibling.appendChild(newList);\n        newList.appendChild(li);\n        mergeLists(li.lastChild, newList);\n        return true;\n      }\n\n      return false;\n    };\n\n    var indentSelection = function (editor) {\n      var listElements = $_2e86yngnjnlpb24w.getSelectedListItems(editor);\n\n      if (listElements.length) {\n        var bookmark = $_b9d8gigjjnlpb24o.createBookmark(editor.selection.getRng(true));\n\n        for (var i = 0; i < listElements.length; i++) {\n          if (!indent(listElements[i]) && i === 0) {\n            break;\n          }\n        }\n\n        editor.selection.setRng($_b9d8gigjjnlpb24o.resolveBookmark(bookmark));\n        editor.nodeChanged();\n        return true;\n      }\n    };\n\n    var $_9yq141gtjnlpb259 = {\n      indentSelection: indentSelection\n    };\n\n    var queryListCommandState = function (editor, listName) {\n      return function () {\n        var parentList = editor.dom.getParent(editor.selection.getStart(), 'UL,OL,DL');\n        return parentList && parentList.nodeName === listName;\n      };\n    };\n\n    var register = function (editor) {\n      editor.on('BeforeExecCommand', function (e) {\n        var cmd = e.command.toLowerCase();\n        var isHandled;\n\n        if (cmd === 'indent') {\n          if ($_9yq141gtjnlpb259.indentSelection(editor)) {\n            isHandled = true;\n          }\n        } else if (cmd === 'outdent') {\n          if ($_etcyqoghjnlpb24k.outdentSelection(editor)) {\n            isHandled = true;\n          }\n        }\n\n        if (isHandled) {\n          editor.fire('ExecCommand', {\n            command: e.command\n          });\n          e.preventDefault();\n          return true;\n        }\n      });\n      editor.addCommand('InsertUnorderedList', function (ui, detail) {\n        $_ctanhjgejnlpb24d.toggleList(editor, 'UL', detail);\n      });\n      editor.addCommand('InsertOrderedList', function (ui, detail) {\n        $_ctanhjgejnlpb24d.toggleList(editor, 'OL', detail);\n      });\n      editor.addCommand('InsertDefinitionList', function (ui, detail) {\n        $_ctanhjgejnlpb24d.toggleList(editor, 'DL', detail);\n      });\n      editor.addQueryStateHandler('InsertUnorderedList', queryListCommandState(editor, 'UL'));\n      editor.addQueryStateHandler('InsertOrderedList', queryListCommandState(editor, 'OL'));\n      editor.addQueryStateHandler('InsertDefinitionList', queryListCommandState(editor, 'DL'));\n    };\n\n    var $_eje2t6gsjnlpb257 = {\n      register: register\n    };\n\n    var shouldIndentOnTab = function (editor) {\n      return editor.getParam('lists_indent_on_tab', true);\n    };\n\n    var $_qwibdgvjnlpb25d = {\n      shouldIndentOnTab: shouldIndentOnTab\n    };\n\n    var setupTabKey = function (editor) {\n      editor.on('keydown', function (e) {\n        if (e.keyCode !== global$3.TAB || global$3.metaKeyPressed(e)) {\n          return;\n        }\n\n        if (editor.dom.getParent(editor.selection.getStart(), 'LI,DT,DD')) {\n          e.preventDefault();\n\n          if (e.shiftKey) {\n            $_etcyqoghjnlpb24k.outdentSelection(editor);\n          } else {\n            $_9yq141gtjnlpb259.indentSelection(editor);\n          }\n        }\n      });\n    };\n\n    var setup$1 = function (editor) {\n      if ($_qwibdgvjnlpb25d.shouldIndentOnTab(editor)) {\n        setupTabKey(editor);\n      }\n\n      $_6r254xgajnlpb245.setup(editor);\n    };\n\n    var $_e37gx5gujnlpb25c = {\n      setup: setup$1\n    };\n\n    var findIndex = function (list, predicate) {\n      for (var index = 0; index < list.length; index++) {\n        var element = list[index];\n\n        if (predicate(element)) {\n          return index;\n        }\n      }\n\n      return -1;\n    };\n\n    var listState = function (editor, listName) {\n      return function (e) {\n        var ctrl = e.control;\n        editor.on('NodeChange', function (e) {\n          var tableCellIndex = findIndex(e.parents, $_ckmbxtgljnlpb24s.isTableCellNode);\n          var parents = tableCellIndex !== -1 ? e.parents.slice(0, tableCellIndex) : e.parents;\n          var lists = global$5.grep(parents, $_ckmbxtgljnlpb24s.isListNode);\n          ctrl.active(lists.length > 0 && lists[0].nodeName === listName);\n        });\n      };\n    };\n\n    var indentPostRender = function (editor) {\n      return function (e) {\n        var ctrl = e.control;\n        editor.on('nodechange', function () {\n          var listItemBlocks = $_2e86yngnjnlpb24w.getSelectedListItems(editor);\n          var disable = listItemBlocks.length > 0 && $_ckmbxtgljnlpb24s.isFirstChild(listItemBlocks[0]);\n          ctrl.disabled(disable);\n        });\n      };\n    };\n\n    var register$1 = function (editor) {\n      var hasPlugin = function (editor, plugin) {\n        var plugins = editor.settings.plugins ? editor.settings.plugins : '';\n        return global$5.inArray(plugins.split(/[ ,]/), plugin) !== -1;\n      };\n\n      if (!hasPlugin(editor, 'advlist')) {\n        editor.addButton('numlist', {\n          active: false,\n          title: 'Numbered list',\n          cmd: 'InsertOrderedList',\n          onPostRender: listState(editor, 'OL')\n        });\n        editor.addButton('bullist', {\n          active: false,\n          title: 'Bullet list',\n          cmd: 'InsertUnorderedList',\n          onPostRender: listState(editor, 'UL')\n        });\n      }\n\n      editor.addButton('indent', {\n        icon: 'indent',\n        title: 'Increase indent',\n        cmd: 'Indent',\n        onPostRender: indentPostRender(editor)\n      });\n    };\n\n    var $_5vaivwgwjnlpb25k = {\n      register: register$1\n    };\n    global.add('lists', function (editor) {\n      $_e37gx5gujnlpb25c.setup(editor);\n      $_5vaivwgwjnlpb25k.register(editor);\n      $_eje2t6gsjnlpb257.register(editor);\n      return $_6kguj9g9jnlpb243.get(editor);\n    });\n\n    function Plugin() {}\n\n    return Plugin;\n  }();\n})();",{"version":3,"sources":["/Users/shanliguo/Documents/workstudy/vue-form-making/src/lib/tinymce/plugins/lists/plugin.js"],"names":["lists","global","tinymce","util","Tools","resolve","global$1","global$2","global$3","global$4","global$5","global$6","isTextNode","node","nodeType","isListNode","test","nodeName","isListItemNode","isTableCellNode","isBr","isFirstChild","parentNode","firstChild","isLastChild","lastChild","isTextBlock","editor","schema","getTextBlockElements","isBlock","blockElements","isBogusBr","dom","nextSibling","previousSibling","isEmpty","elm","keepBookmarks","empty","select","length","isChildOfBody","isChildOf","getRoot","$_ckmbxtgljnlpb24s","getNormalizedEndPoint","container","offset","getNode","textNodeOffset","childNodes","data","normalizeRange","rng","outRng","cloneRange","rangeStart","startContainer","startOffset","setStart","rangeEnd","endContainer","endOffset","setEnd","$_ck4mpggkjnlpb24r","DOM","createBookmark","bookmark","setupEndPoint","start","offsetNode","create","hasChildNodes","Math","min","insertBefore","insertAfter","appendChild","collapsed","resolveBookmark","restoreEndPoint","nodeIndex","idx","getAttribute","remove","createRng","$_b9d8gigjjnlpb24o","DOM$1","normalizeList","ul","sibling","setStyle","normalizeLists","element","each","grep","$_52bjalgmjnlpb24u","global$7","getParentList","selectionStart","selection","getStart","getParent","getClosestListRootElm","isParentListSelected","parentList","selectedBlocks","findSubLists","querySelectorAll","getSelectedSubLists","getSelectedBlocks","findParentListItemsNodes","elms","listItemsElms","map","parentLi","unique","getSelectedListItems","block","parentTableCell","getParents","root","getBody","$_2e86yngnjnlpb24w","global$8","DOM$2","createNewTextBlock","contentNode","blockName","textBlock","fragment","createFragment","hasContentNode","getBlockElements","settings","forced_root_block","tagName","setAttribs","forced_root_block_attrs","ie","$_2xsspsgqjnlpb253","DOM$3","splitList","li","newBlock","tmpRng","bookmarks","removeAndKeepBookmarks","targetNode","setStartAfter","setEndAfter","extractContents","$_efs4awgpjnlpb24z","DOM$4","removeEmptyLi","outdent","ulParent","rename","outdentSelection","listElements","getRng","i","y","splice","setRng","nodeChanged","$_etcyqoghjnlpb24k","updateListStyle","el","detail","type","attrs","value","key","setAttribute","updateListAttrs","updateListWithDetails","removeStyles","styles","style","_a","getEndPointNode","getSelectedTextBlocks","textBlocks","startNode","endNode","siblings","push","isBookmarkNode","hasCompatibleStyle","sib","sibStyle","getStyle","detailStyle","applyList","listName","listItemName","getContentEditable","toUpperCase","listBlock","mergeWithAdjacentLists","removeList","listItems","emptyListItems","rootList","isValidLists","list1","list2","hasSameListStyle","targetStyle","hasSameClasses","elm1","elm2","className","shouldMerge","updateList","list","newList","toggleMultipleLists","hasListStyleDetail","concat","toggleSingleList","toggleList","selectedSubLists","$_ctanhjgejnlpb24d","findNextCaretContainer","isForward","nonEmptyBlocks","walker","getNonEmptyElements","next","hasOnlyOneBlockChild","unwrapSingleBlockChild","moveChildren","fromElm","toElm","targetElm","mergeLiElements","listNode","$","mergeIntoEmptyLi","fromLi","toLi","setCursorLocation","mergeForward","mergeBackward","resolvedBookmark","backspaceDeleteFromListToListCaret","selectionStartElm","otherLi","removeBlock","parentBlock","backspaceDeleteIntoListCaret","otherLi_1","undoManager","transact","collapse","backspaceDeleteCaret","backspaceDeleteRange","startListParent","execCommand","backspaceDelete","isCollapsed","setup","on","e","keyCode","BACKSPACE","preventDefault","DELETE","$_6r254xgajnlpb245","get","$_6kguj9g9jnlpb243","DOM$5","mergeLists","from","to","indent","listStyle","indentSelection","$_9yq141gtjnlpb259","queryListCommandState","register","cmd","command","toLowerCase","isHandled","fire","addCommand","ui","addQueryStateHandler","$_eje2t6gsjnlpb257","shouldIndentOnTab","getParam","$_qwibdgvjnlpb25d","setupTabKey","TAB","metaKeyPressed","shiftKey","setup$1","$_e37gx5gujnlpb25c","findIndex","predicate","index","listState","ctrl","control","tableCellIndex","parents","slice","active","indentPostRender","listItemBlocks","disable","disabled","register$1","hasPlugin","plugin","plugins","inArray","split","addButton","title","onPostRender","icon","$_5vaivwgwjnlpb25k","add","Plugin"],"mappings":"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","sourcesContent":["(function () {\nvar lists = (function () {\n  'use strict';\n\n  var global = tinymce.util.Tools.resolve('tinymce.PluginManager');\n\n  var global$1 = tinymce.util.Tools.resolve('tinymce.dom.RangeUtils');\n\n  var global$2 = tinymce.util.Tools.resolve('tinymce.dom.TreeWalker');\n\n  var global$3 = tinymce.util.Tools.resolve('tinymce.util.VK');\n\n  var global$4 = tinymce.util.Tools.resolve('tinymce.dom.BookmarkManager');\n\n  var global$5 = tinymce.util.Tools.resolve('tinymce.util.Tools');\n\n  var global$6 = tinymce.util.Tools.resolve('tinymce.dom.DOMUtils');\n\n  var isTextNode = function (node) {\n    return node && node.nodeType === 3;\n  };\n  var isListNode = function (node) {\n    return node && /^(OL|UL|DL)$/.test(node.nodeName);\n  };\n  var isListItemNode = function (node) {\n    return node && /^(LI|DT|DD)$/.test(node.nodeName);\n  };\n  var isTableCellNode = function (node) {\n    return node && /^(TH|TD)$/.test(node.nodeName);\n  };\n  var isBr = function (node) {\n    return node && node.nodeName === 'BR';\n  };\n  var isFirstChild = function (node) {\n    return node.parentNode.firstChild === node;\n  };\n  var isLastChild = function (node) {\n    return node.parentNode.lastChild === node;\n  };\n  var isTextBlock = function (editor, node) {\n    return node && !!editor.schema.getTextBlockElements()[node.nodeName];\n  };\n  var isBlock = function (node, blockElements) {\n    return node && node.nodeName in blockElements;\n  };\n  var isBogusBr = function (dom, node) {\n    if (!isBr(node)) {\n      return false;\n    }\n    if (dom.isBlock(node.nextSibling) && !isBr(node.previousSibling)) {\n      return true;\n    }\n    return false;\n  };\n  var isEmpty = function (dom, elm, keepBookmarks) {\n    var empty = dom.isEmpty(elm);\n    if (keepBookmarks && dom.select('span[data-mce-type=bookmark]', elm).length > 0) {\n      return false;\n    }\n    return empty;\n  };\n  var isChildOfBody = function (dom, elm) {\n    return dom.isChildOf(elm, dom.getRoot());\n  };\n  var $_ckmbxtgljnlpb24s = {\n    isTextNode: isTextNode,\n    isListNode: isListNode,\n    isListItemNode: isListItemNode,\n    isTableCellNode: isTableCellNode,\n    isBr: isBr,\n    isFirstChild: isFirstChild,\n    isLastChild: isLastChild,\n    isTextBlock: isTextBlock,\n    isBlock: isBlock,\n    isBogusBr: isBogusBr,\n    isEmpty: isEmpty,\n    isChildOfBody: isChildOfBody\n  };\n\n  var getNormalizedEndPoint = function (container, offset) {\n    var node = global$1.getNode(container, offset);\n    if ($_ckmbxtgljnlpb24s.isListItemNode(container) && $_ckmbxtgljnlpb24s.isTextNode(node)) {\n      var textNodeOffset = offset >= container.childNodes.length ? node.data.length : 0;\n      return {\n        container: node,\n        offset: textNodeOffset\n      };\n    }\n    return {\n      container: container,\n      offset: offset\n    };\n  };\n  var normalizeRange = function (rng) {\n    var outRng = rng.cloneRange();\n    var rangeStart = getNormalizedEndPoint(rng.startContainer, rng.startOffset);\n    outRng.setStart(rangeStart.container, rangeStart.offset);\n    var rangeEnd = getNormalizedEndPoint(rng.endContainer, rng.endOffset);\n    outRng.setEnd(rangeEnd.container, rangeEnd.offset);\n    return outRng;\n  };\n  var $_ck4mpggkjnlpb24r = {\n    getNormalizedEndPoint: getNormalizedEndPoint,\n    normalizeRange: normalizeRange\n  };\n\n  var DOM = global$6.DOM;\n  var createBookmark = function (rng) {\n    var bookmark = {};\n    var setupEndPoint = function (start) {\n      var offsetNode, container, offset;\n      container = rng[start ? 'startContainer' : 'endContainer'];\n      offset = rng[start ? 'startOffset' : 'endOffset'];\n      if (container.nodeType === 1) {\n        offsetNode = DOM.create('span', { 'data-mce-type': 'bookmark' });\n        if (container.hasChildNodes()) {\n          offset = Math.min(offset, container.childNodes.length - 1);\n          if (start) {\n            container.insertBefore(offsetNode, container.childNodes[offset]);\n          } else {\n            DOM.insertAfter(offsetNode, container.childNodes[offset]);\n          }\n        } else {\n          container.appendChild(offsetNode);\n        }\n        container = offsetNode;\n        offset = 0;\n      }\n      bookmark[start ? 'startContainer' : 'endContainer'] = container;\n      bookmark[start ? 'startOffset' : 'endOffset'] = offset;\n    };\n    setupEndPoint(true);\n    if (!rng.collapsed) {\n      setupEndPoint();\n    }\n    return bookmark;\n  };\n  var resolveBookmark = function (bookmark) {\n    function restoreEndPoint(start) {\n      var container, offset, node;\n      var nodeIndex = function (container) {\n        var node = container.parentNode.firstChild, idx = 0;\n        while (node) {\n          if (node === container) {\n            return idx;\n          }\n          if (node.nodeType !== 1 || node.getAttribute('data-mce-type') !== 'bookmark') {\n            idx++;\n          }\n          node = node.nextSibling;\n        }\n        return -1;\n      };\n      container = node = bookmark[start ? 'startContainer' : 'endContainer'];\n      offset = bookmark[start ? 'startOffset' : 'endOffset'];\n      if (!container) {\n        return;\n      }\n      if (container.nodeType === 1) {\n        offset = nodeIndex(container);\n        container = container.parentNode;\n        DOM.remove(node);\n        if (!container.hasChildNodes() && DOM.isBlock(container)) {\n          container.appendChild(DOM.create('br'));\n        }\n      }\n      bookmark[start ? 'startContainer' : 'endContainer'] = container;\n      bookmark[start ? 'startOffset' : 'endOffset'] = offset;\n    }\n    restoreEndPoint(true);\n    restoreEndPoint();\n    var rng = DOM.createRng();\n    rng.setStart(bookmark.startContainer, bookmark.startOffset);\n    if (bookmark.endContainer) {\n      rng.setEnd(bookmark.endContainer, bookmark.endOffset);\n    }\n    return $_ck4mpggkjnlpb24r.normalizeRange(rng);\n  };\n  var $_b9d8gigjjnlpb24o = {\n    createBookmark: createBookmark,\n    resolveBookmark: resolveBookmark\n  };\n\n  var DOM$1 = global$6.DOM;\n  var normalizeList = function (dom, ul) {\n    var sibling;\n    var parentNode = ul.parentNode;\n    if (parentNode.nodeName === 'LI' && parentNode.firstChild === ul) {\n      sibling = parentNode.previousSibling;\n      if (sibling && sibling.nodeName === 'LI') {\n        sibling.appendChild(ul);\n        if ($_ckmbxtgljnlpb24s.isEmpty(dom, parentNode)) {\n          DOM$1.remove(parentNode);\n        }\n      } else {\n        DOM$1.setStyle(parentNode, 'listStyleType', 'none');\n      }\n    }\n    if ($_ckmbxtgljnlpb24s.isListNode(parentNode)) {\n      sibling = parentNode.previousSibling;\n      if (sibling && sibling.nodeName === 'LI') {\n        sibling.appendChild(ul);\n      }\n    }\n  };\n  var normalizeLists = function (dom, element) {\n    global$5.each(global$5.grep(dom.select('ol,ul', element)), function (ul) {\n      normalizeList(dom, ul);\n    });\n  };\n  var $_52bjalgmjnlpb24u = {\n    normalizeList: normalizeList,\n    normalizeLists: normalizeLists\n  };\n\n  var global$7 = tinymce.util.Tools.resolve('tinymce.dom.DomQuery');\n\n  var getParentList = function (editor) {\n    var selectionStart = editor.selection.getStart(true);\n    return editor.dom.getParent(selectionStart, 'OL,UL,DL', getClosestListRootElm(editor, selectionStart));\n  };\n  var isParentListSelected = function (parentList, selectedBlocks) {\n    return parentList && selectedBlocks.length === 1 && selectedBlocks[0] === parentList;\n  };\n  var findSubLists = function (parentList) {\n    return global$5.grep(parentList.querySelectorAll('ol,ul,dl'), function (elm) {\n      return $_ckmbxtgljnlpb24s.isListNode(elm);\n    });\n  };\n  var getSelectedSubLists = function (editor) {\n    var parentList = getParentList(editor);\n    var selectedBlocks = editor.selection.getSelectedBlocks();\n    if (isParentListSelected(parentList, selectedBlocks)) {\n      return findSubLists(parentList);\n    } else {\n      return global$5.grep(selectedBlocks, function (elm) {\n        return $_ckmbxtgljnlpb24s.isListNode(elm) && parentList !== elm;\n      });\n    }\n  };\n  var findParentListItemsNodes = function (editor, elms) {\n    var listItemsElms = global$5.map(elms, function (elm) {\n      var parentLi = editor.dom.getParent(elm, 'li,dd,dt', getClosestListRootElm(editor, elm));\n      return parentLi ? parentLi : elm;\n    });\n    return global$7.unique(listItemsElms);\n  };\n  var getSelectedListItems = function (editor) {\n    var selectedBlocks = editor.selection.getSelectedBlocks();\n    return global$5.grep(findParentListItemsNodes(editor, selectedBlocks), function (block) {\n      return $_ckmbxtgljnlpb24s.isListItemNode(block);\n    });\n  };\n  var getClosestListRootElm = function (editor, elm) {\n    var parentTableCell = editor.dom.getParents(elm, 'TD,TH');\n    var root = parentTableCell.length > 0 ? parentTableCell[0] : editor.getBody();\n    return root;\n  };\n  var $_2e86yngnjnlpb24w = {\n    getParentList: getParentList,\n    getSelectedSubLists: getSelectedSubLists,\n    getSelectedListItems: getSelectedListItems,\n    getClosestListRootElm: getClosestListRootElm\n  };\n\n  var global$8 = tinymce.util.Tools.resolve('tinymce.Env');\n\n  var DOM$2 = global$6.DOM;\n  var createNewTextBlock = function (editor, contentNode, blockName) {\n    var node, textBlock;\n    var fragment = DOM$2.createFragment();\n    var hasContentNode;\n    var blockElements = editor.schema.getBlockElements();\n    if (editor.settings.forced_root_block) {\n      blockName = blockName || editor.settings.forced_root_block;\n    }\n    if (blockName) {\n      textBlock = DOM$2.create(blockName);\n      if (textBlock.tagName === editor.settings.forced_root_block) {\n        DOM$2.setAttribs(textBlock, editor.settings.forced_root_block_attrs);\n      }\n      if (!$_ckmbxtgljnlpb24s.isBlock(contentNode.firstChild, blockElements)) {\n        fragment.appendChild(textBlock);\n      }\n    }\n    if (contentNode) {\n      while (node = contentNode.firstChild) {\n        var nodeName = node.nodeName;\n        if (!hasContentNode && (nodeName !== 'SPAN' || node.getAttribute('data-mce-type') !== 'bookmark')) {\n          hasContentNode = true;\n        }\n        if ($_ckmbxtgljnlpb24s.isBlock(node, blockElements)) {\n          fragment.appendChild(node);\n          textBlock = null;\n        } else {\n          if (blockName) {\n            if (!textBlock) {\n              textBlock = DOM$2.create(blockName);\n              fragment.appendChild(textBlock);\n            }\n            textBlock.appendChild(node);\n          } else {\n            fragment.appendChild(node);\n          }\n        }\n      }\n    }\n    if (!editor.settings.forced_root_block) {\n      fragment.appendChild(DOM$2.create('br'));\n    } else {\n      if (!hasContentNode && (!global$8.ie || global$8.ie > 10)) {\n        textBlock.appendChild(DOM$2.create('br', { 'data-mce-bogus': '1' }));\n      }\n    }\n    return fragment;\n  };\n  var $_2xsspsgqjnlpb253 = { createNewTextBlock: createNewTextBlock };\n\n  var DOM$3 = global$6.DOM;\n  var splitList = function (editor, ul, li, newBlock) {\n    var tmpRng, fragment, bookmarks, node;\n    var removeAndKeepBookmarks = function (targetNode) {\n      global$5.each(bookmarks, function (node) {\n        targetNode.parentNode.insertBefore(node, li.parentNode);\n      });\n      DOM$3.remove(targetNode);\n    };\n    bookmarks = DOM$3.select('span[data-mce-type=\"bookmark\"]', ul);\n    newBlock = newBlock || $_2xsspsgqjnlpb253.createNewTextBlock(editor, li);\n    tmpRng = DOM$3.createRng();\n    tmpRng.setStartAfter(li);\n    tmpRng.setEndAfter(ul);\n    fragment = tmpRng.extractContents();\n    for (node = fragment.firstChild; node; node = node.firstChild) {\n      if (node.nodeName === 'LI' && editor.dom.isEmpty(node)) {\n        DOM$3.remove(node);\n        break;\n      }\n    }\n    if (!editor.dom.isEmpty(fragment)) {\n      DOM$3.insertAfter(fragment, ul);\n    }\n    DOM$3.insertAfter(newBlock, ul);\n    if ($_ckmbxtgljnlpb24s.isEmpty(editor.dom, li.parentNode)) {\n      removeAndKeepBookmarks(li.parentNode);\n    }\n    DOM$3.remove(li);\n    if ($_ckmbxtgljnlpb24s.isEmpty(editor.dom, ul)) {\n      DOM$3.remove(ul);\n    }\n  };\n  var $_efs4awgpjnlpb24z = { splitList: splitList };\n\n  var DOM$4 = global$6.DOM;\n  var removeEmptyLi = function (dom, li) {\n    if ($_ckmbxtgljnlpb24s.isEmpty(dom, li)) {\n      DOM$4.remove(li);\n    }\n  };\n  var outdent = function (editor, li) {\n    var ul = li.parentNode;\n    var ulParent, newBlock;\n    if (ul) {\n      ulParent = ul.parentNode;\n    } else {\n      removeEmptyLi(editor.dom, li);\n      return true;\n    }\n    if (ul === editor.getBody()) {\n      return true;\n    }\n    if (li.nodeName === 'DD') {\n      DOM$4.rename(li, 'DT');\n      return true;\n    }\n    if ($_ckmbxtgljnlpb24s.isFirstChild(li) && $_ckmbxtgljnlpb24s.isLastChild(li)) {\n      if (ulParent.nodeName === 'LI') {\n        DOM$4.insertAfter(li, ulParent);\n        removeEmptyLi(editor.dom, ulParent);\n        DOM$4.remove(ul);\n      } else if ($_ckmbxtgljnlpb24s.isListNode(ulParent)) {\n        DOM$4.remove(ul, true);\n      } else {\n        ulParent.insertBefore($_2xsspsgqjnlpb253.createNewTextBlock(editor, li), ul);\n        DOM$4.remove(ul);\n      }\n      return true;\n    } else if ($_ckmbxtgljnlpb24s.isFirstChild(li)) {\n      if (ulParent.nodeName === 'LI') {\n        DOM$4.insertAfter(li, ulParent);\n        li.appendChild(ul);\n        removeEmptyLi(editor.dom, ulParent);\n      } else if ($_ckmbxtgljnlpb24s.isListNode(ulParent)) {\n        ulParent.insertBefore(li, ul);\n      } else {\n        ulParent.insertBefore($_2xsspsgqjnlpb253.createNewTextBlock(editor, li), ul);\n        DOM$4.remove(li);\n      }\n      return true;\n    } else if ($_ckmbxtgljnlpb24s.isLastChild(li)) {\n      if (ulParent.nodeName === 'LI') {\n        DOM$4.insertAfter(li, ulParent);\n      } else if ($_ckmbxtgljnlpb24s.isListNode(ulParent)) {\n        DOM$4.insertAfter(li, ul);\n      } else {\n        DOM$4.insertAfter($_2xsspsgqjnlpb253.createNewTextBlock(editor, li), ul);\n        DOM$4.remove(li);\n      }\n      return true;\n    }\n    if (ulParent.nodeName === 'LI') {\n      ul = ulParent;\n      newBlock = $_2xsspsgqjnlpb253.createNewTextBlock(editor, li, 'LI');\n    } else if ($_ckmbxtgljnlpb24s.isListNode(ulParent)) {\n      newBlock = $_2xsspsgqjnlpb253.createNewTextBlock(editor, li, 'LI');\n    } else {\n      newBlock = $_2xsspsgqjnlpb253.createNewTextBlock(editor, li);\n    }\n    $_efs4awgpjnlpb24z.splitList(editor, ul, li, newBlock);\n    $_52bjalgmjnlpb24u.normalizeLists(editor.dom, ul.parentNode);\n    return true;\n  };\n  var outdentSelection = function (editor) {\n    var listElements = $_2e86yngnjnlpb24w.getSelectedListItems(editor);\n    if (listElements.length) {\n      var bookmark = $_b9d8gigjjnlpb24o.createBookmark(editor.selection.getRng());\n      var i = void 0, y = void 0;\n      var root = $_2e86yngnjnlpb24w.getClosestListRootElm(editor, editor.selection.getStart(true));\n      i = listElements.length;\n      while (i--) {\n        var node = listElements[i].parentNode;\n        while (node && node !== root) {\n          y = listElements.length;\n          while (y--) {\n            if (listElements[y] === node) {\n              listElements.splice(i, 1);\n              break;\n            }\n          }\n          node = node.parentNode;\n        }\n      }\n      for (i = 0; i < listElements.length; i++) {\n        if (!outdent(editor, listElements[i]) && i === 0) {\n          break;\n        }\n      }\n      editor.selection.setRng($_b9d8gigjjnlpb24o.resolveBookmark(bookmark));\n      editor.nodeChanged();\n      return true;\n    }\n  };\n  var $_etcyqoghjnlpb24k = {\n    outdent: outdent,\n    outdentSelection: outdentSelection\n  };\n\n  var updateListStyle = function (dom, el, detail) {\n    var type = detail['list-style-type'] ? detail['list-style-type'] : null;\n    dom.setStyle(el, 'list-style-type', type);\n  };\n  var setAttribs = function (elm, attrs) {\n    global$5.each(attrs, function (value, key) {\n      elm.setAttribute(key, value);\n    });\n  };\n  var updateListAttrs = function (dom, el, detail) {\n    setAttribs(el, detail['list-attributes']);\n    global$5.each(dom.select('li', el), function (li) {\n      setAttribs(li, detail['list-item-attributes']);\n    });\n  };\n  var updateListWithDetails = function (dom, el, detail) {\n    updateListStyle(dom, el, detail);\n    updateListAttrs(dom, el, detail);\n  };\n  var removeStyles = function (dom, element, styles) {\n    global$5.each(styles, function (style) {\n      var _a;\n      return dom.setStyle(element, (_a = {}, _a[style] = '', _a));\n    });\n  };\n  var getEndPointNode = function (editor, rng, start, root) {\n    var container, offset;\n    container = rng[start ? 'startContainer' : 'endContainer'];\n    offset = rng[start ? 'startOffset' : 'endOffset'];\n    if (container.nodeType === 1) {\n      container = container.childNodes[Math.min(offset, container.childNodes.length - 1)] || container;\n    }\n    if (!start && $_ckmbxtgljnlpb24s.isBr(container.nextSibling)) {\n      container = container.nextSibling;\n    }\n    while (container.parentNode !== root) {\n      if ($_ckmbxtgljnlpb24s.isTextBlock(editor, container)) {\n        return container;\n      }\n      if (/^(TD|TH)$/.test(container.parentNode.nodeName)) {\n        return container;\n      }\n      container = container.parentNode;\n    }\n    return container;\n  };\n  var getSelectedTextBlocks = function (editor, rng, root) {\n    var textBlocks = [], dom = editor.dom;\n    var startNode = getEndPointNode(editor, rng, true, root);\n    var endNode = getEndPointNode(editor, rng, false, root);\n    var block;\n    var siblings = [];\n    for (var node = startNode; node; node = node.nextSibling) {\n      siblings.push(node);\n      if (node === endNode) {\n        break;\n      }\n    }\n    global$5.each(siblings, function (node) {\n      if ($_ckmbxtgljnlpb24s.isTextBlock(editor, node)) {\n        textBlocks.push(node);\n        block = null;\n        return;\n      }\n      if (dom.isBlock(node) || $_ckmbxtgljnlpb24s.isBr(node)) {\n        if ($_ckmbxtgljnlpb24s.isBr(node)) {\n          dom.remove(node);\n        }\n        block = null;\n        return;\n      }\n      var nextSibling = node.nextSibling;\n      if (global$4.isBookmarkNode(node)) {\n        if ($_ckmbxtgljnlpb24s.isTextBlock(editor, nextSibling) || !nextSibling && node.parentNode === root) {\n          block = null;\n          return;\n        }\n      }\n      if (!block) {\n        block = dom.create('p');\n        node.parentNode.insertBefore(block, node);\n        textBlocks.push(block);\n      }\n      block.appendChild(node);\n    });\n    return textBlocks;\n  };\n  var hasCompatibleStyle = function (dom, sib, detail) {\n    var sibStyle = dom.getStyle(sib, 'list-style-type');\n    var detailStyle = detail ? detail['list-style-type'] : '';\n    detailStyle = detailStyle === null ? '' : detailStyle;\n    return sibStyle === detailStyle;\n  };\n  var applyList = function (editor, listName, detail) {\n    if (detail === void 0) {\n      detail = {};\n    }\n    var rng = editor.selection.getRng(true);\n    var bookmark;\n    var listItemName = 'LI';\n    var root = $_2e86yngnjnlpb24w.getClosestListRootElm(editor, editor.selection.getStart(true));\n    var dom = editor.dom;\n    if (dom.getContentEditable(editor.selection.getNode()) === 'false') {\n      return;\n    }\n    listName = listName.toUpperCase();\n    if (listName === 'DL') {\n      listItemName = 'DT';\n    }\n    bookmark = $_b9d8gigjjnlpb24o.createBookmark(rng);\n    global$5.each(getSelectedTextBlocks(editor, rng, root), function (block) {\n      var listBlock, sibling;\n      sibling = block.previousSibling;\n      if (sibling && $_ckmbxtgljnlpb24s.isListNode(sibling) && sibling.nodeName === listName && hasCompatibleStyle(dom, sibling, detail)) {\n        listBlock = sibling;\n        block = dom.rename(block, listItemName);\n        sibling.appendChild(block);\n      } else {\n        listBlock = dom.create(listName);\n        block.parentNode.insertBefore(listBlock, block);\n        listBlock.appendChild(block);\n        block = dom.rename(block, listItemName);\n      }\n      removeStyles(dom, block, [\n        'margin',\n        'margin-right',\n        'margin-bottom',\n        'margin-left',\n        'margin-top',\n        'padding',\n        'padding-right',\n        'padding-bottom',\n        'padding-left',\n        'padding-top'\n      ]);\n      updateListWithDetails(dom, listBlock, detail);\n      mergeWithAdjacentLists(editor.dom, listBlock);\n    });\n    editor.selection.setRng($_b9d8gigjjnlpb24o.resolveBookmark(bookmark));\n  };\n  var removeList = function (editor) {\n    var bookmark = $_b9d8gigjjnlpb24o.createBookmark(editor.selection.getRng(true));\n    var root = $_2e86yngnjnlpb24w.getClosestListRootElm(editor, editor.selection.getStart(true));\n    var listItems = $_2e86yngnjnlpb24w.getSelectedListItems(editor);\n    var emptyListItems = global$5.grep(listItems, function (li) {\n      return editor.dom.isEmpty(li);\n    });\n    listItems = global$5.grep(listItems, function (li) {\n      return !editor.dom.isEmpty(li);\n    });\n    global$5.each(emptyListItems, function (li) {\n      if ($_ckmbxtgljnlpb24s.isEmpty(editor.dom, li)) {\n        $_etcyqoghjnlpb24k.outdent(editor, li);\n        return;\n      }\n    });\n    global$5.each(listItems, function (li) {\n      var node, rootList;\n      if (li.parentNode === editor.getBody()) {\n        return;\n      }\n      for (node = li; node && node !== root; node = node.parentNode) {\n        if ($_ckmbxtgljnlpb24s.isListNode(node)) {\n          rootList = node;\n        }\n      }\n      $_efs4awgpjnlpb24z.splitList(editor, rootList, li);\n      $_52bjalgmjnlpb24u.normalizeLists(editor.dom, rootList.parentNode);\n    });\n    editor.selection.setRng($_b9d8gigjjnlpb24o.resolveBookmark(bookmark));\n  };\n  var isValidLists = function (list1, list2) {\n    return list1 && list2 && $_ckmbxtgljnlpb24s.isListNode(list1) && list1.nodeName === list2.nodeName;\n  };\n  var hasSameListStyle = function (dom, list1, list2) {\n    var targetStyle = dom.getStyle(list1, 'list-style-type', true);\n    var style = dom.getStyle(list2, 'list-style-type', true);\n    return targetStyle === style;\n  };\n  var hasSameClasses = function (elm1, elm2) {\n    return elm1.className === elm2.className;\n  };\n  var shouldMerge = function (dom, list1, list2) {\n    return isValidLists(list1, list2) && hasSameListStyle(dom, list1, list2) && hasSameClasses(list1, list2);\n  };\n  var mergeWithAdjacentLists = function (dom, listBlock) {\n    var sibling, node;\n    sibling = listBlock.nextSibling;\n    if (shouldMerge(dom, listBlock, sibling)) {\n      while (node = sibling.firstChild) {\n        listBlock.appendChild(node);\n      }\n      dom.remove(sibling);\n    }\n    sibling = listBlock.previousSibling;\n    if (shouldMerge(dom, listBlock, sibling)) {\n      while (node = sibling.lastChild) {\n        listBlock.insertBefore(node, listBlock.firstChild);\n      }\n      dom.remove(sibling);\n    }\n  };\n  var updateList = function (dom, list, listName, detail) {\n    if (list.nodeName !== listName) {\n      var newList = dom.rename(list, listName);\n      updateListWithDetails(dom, newList, detail);\n    } else {\n      updateListWithDetails(dom, list, detail);\n    }\n  };\n  var toggleMultipleLists = function (editor, parentList, lists, listName, detail) {\n    if (parentList.nodeName === listName && !hasListStyleDetail(detail)) {\n      removeList(editor);\n    } else {\n      var bookmark = $_b9d8gigjjnlpb24o.createBookmark(editor.selection.getRng(true));\n      global$5.each([parentList].concat(lists), function (elm) {\n        updateList(editor.dom, elm, listName, detail);\n      });\n      editor.selection.setRng($_b9d8gigjjnlpb24o.resolveBookmark(bookmark));\n    }\n  };\n  var hasListStyleDetail = function (detail) {\n    return 'list-style-type' in detail;\n  };\n  var toggleSingleList = function (editor, parentList, listName, detail) {\n    if (parentList === editor.getBody()) {\n      return;\n    }\n    if (parentList) {\n      if (parentList.nodeName === listName && !hasListStyleDetail(detail)) {\n        removeList(editor);\n      } else {\n        var bookmark = $_b9d8gigjjnlpb24o.createBookmark(editor.selection.getRng(true));\n        updateListWithDetails(editor.dom, parentList, detail);\n        mergeWithAdjacentLists(editor.dom, editor.dom.rename(parentList, listName));\n        editor.selection.setRng($_b9d8gigjjnlpb24o.resolveBookmark(bookmark));\n      }\n    } else {\n      applyList(editor, listName, detail);\n    }\n  };\n  var toggleList = function (editor, listName, detail) {\n    var parentList = $_2e86yngnjnlpb24w.getParentList(editor);\n    var selectedSubLists = $_2e86yngnjnlpb24w.getSelectedSubLists(editor);\n    detail = detail ? detail : {};\n    if (parentList && selectedSubLists.length > 0) {\n      toggleMultipleLists(editor, parentList, selectedSubLists, listName, detail);\n    } else {\n      toggleSingleList(editor, parentList, listName, detail);\n    }\n  };\n  var $_ctanhjgejnlpb24d = {\n    toggleList: toggleList,\n    removeList: removeList,\n    mergeWithAdjacentLists: mergeWithAdjacentLists\n  };\n\n  var findNextCaretContainer = function (editor, rng, isForward, root) {\n    var node = rng.startContainer;\n    var offset = rng.startOffset;\n    var nonEmptyBlocks, walker;\n    if (node.nodeType === 3 && (isForward ? offset < node.data.length : offset > 0)) {\n      return node;\n    }\n    nonEmptyBlocks = editor.schema.getNonEmptyElements();\n    if (node.nodeType === 1) {\n      node = global$1.getNode(node, offset);\n    }\n    walker = new global$2(node, root);\n    if (isForward) {\n      if ($_ckmbxtgljnlpb24s.isBogusBr(editor.dom, node)) {\n        walker.next();\n      }\n    }\n    while (node = walker[isForward ? 'next' : 'prev2']()) {\n      if (node.nodeName === 'LI' && !node.hasChildNodes()) {\n        return node;\n      }\n      if (nonEmptyBlocks[node.nodeName]) {\n        return node;\n      }\n      if (node.nodeType === 3 && node.data.length > 0) {\n        return node;\n      }\n    }\n  };\n  var hasOnlyOneBlockChild = function (dom, elm) {\n    var childNodes = elm.childNodes;\n    return childNodes.length === 1 && !$_ckmbxtgljnlpb24s.isListNode(childNodes[0]) && dom.isBlock(childNodes[0]);\n  };\n  var unwrapSingleBlockChild = function (dom, elm) {\n    if (hasOnlyOneBlockChild(dom, elm)) {\n      dom.remove(elm.firstChild, true);\n    }\n  };\n  var moveChildren = function (dom, fromElm, toElm) {\n    var node, targetElm;\n    targetElm = hasOnlyOneBlockChild(dom, toElm) ? toElm.firstChild : toElm;\n    unwrapSingleBlockChild(dom, fromElm);\n    if (!$_ckmbxtgljnlpb24s.isEmpty(dom, fromElm, true)) {\n      while (node = fromElm.firstChild) {\n        targetElm.appendChild(node);\n      }\n    }\n  };\n  var mergeLiElements = function (dom, fromElm, toElm) {\n    var node, listNode;\n    var ul = fromElm.parentNode;\n    if (!$_ckmbxtgljnlpb24s.isChildOfBody(dom, fromElm) || !$_ckmbxtgljnlpb24s.isChildOfBody(dom, toElm)) {\n      return;\n    }\n    if ($_ckmbxtgljnlpb24s.isListNode(toElm.lastChild)) {\n      listNode = toElm.lastChild;\n    }\n    if (ul === toElm.lastChild) {\n      if ($_ckmbxtgljnlpb24s.isBr(ul.previousSibling)) {\n        dom.remove(ul.previousSibling);\n      }\n    }\n    node = toElm.lastChild;\n    if (node && $_ckmbxtgljnlpb24s.isBr(node) && fromElm.hasChildNodes()) {\n      dom.remove(node);\n    }\n    if ($_ckmbxtgljnlpb24s.isEmpty(dom, toElm, true)) {\n      dom.$(toElm).empty();\n    }\n    moveChildren(dom, fromElm, toElm);\n    if (listNode) {\n      toElm.appendChild(listNode);\n    }\n    dom.remove(fromElm);\n    if ($_ckmbxtgljnlpb24s.isEmpty(dom, ul) && ul !== dom.getRoot()) {\n      dom.remove(ul);\n    }\n  };\n  var mergeIntoEmptyLi = function (editor, fromLi, toLi) {\n    editor.dom.$(toLi).empty();\n    mergeLiElements(editor.dom, fromLi, toLi);\n    editor.selection.setCursorLocation(toLi);\n  };\n  var mergeForward = function (editor, rng, fromLi, toLi) {\n    var dom = editor.dom;\n    if (dom.isEmpty(toLi)) {\n      mergeIntoEmptyLi(editor, fromLi, toLi);\n    } else {\n      var bookmark = $_b9d8gigjjnlpb24o.createBookmark(rng);\n      mergeLiElements(dom, fromLi, toLi);\n      editor.selection.setRng($_b9d8gigjjnlpb24o.resolveBookmark(bookmark));\n    }\n  };\n  var mergeBackward = function (editor, rng, fromLi, toLi) {\n    var bookmark = $_b9d8gigjjnlpb24o.createBookmark(rng);\n    mergeLiElements(editor.dom, fromLi, toLi);\n    var resolvedBookmark = $_b9d8gigjjnlpb24o.resolveBookmark(bookmark);\n    editor.selection.setRng(resolvedBookmark);\n  };\n  var backspaceDeleteFromListToListCaret = function (editor, isForward) {\n    var dom = editor.dom, selection = editor.selection;\n    var selectionStartElm = selection.getStart();\n    var root = $_2e86yngnjnlpb24w.getClosestListRootElm(editor, selectionStartElm);\n    var li = dom.getParent(selection.getStart(), 'LI', root);\n    var ul, rng, otherLi;\n    if (li) {\n      ul = li.parentNode;\n      if (ul === editor.getBody() && $_ckmbxtgljnlpb24s.isEmpty(dom, ul)) {\n        return true;\n      }\n      rng = $_ck4mpggkjnlpb24r.normalizeRange(selection.getRng(true));\n      otherLi = dom.getParent(findNextCaretContainer(editor, rng, isForward, root), 'LI', root);\n      if (otherLi && otherLi !== li) {\n        if (isForward) {\n          mergeForward(editor, rng, otherLi, li);\n        } else {\n          mergeBackward(editor, rng, li, otherLi);\n        }\n        return true;\n      } else if (!otherLi) {\n        if (!isForward) {\n          $_ctanhjgejnlpb24d.removeList(editor);\n          return true;\n        }\n      }\n    }\n    return false;\n  };\n  var removeBlock = function (dom, block, root) {\n    var parentBlock = dom.getParent(block.parentNode, dom.isBlock, root);\n    dom.remove(block);\n    if (parentBlock && dom.isEmpty(parentBlock)) {\n      dom.remove(parentBlock);\n    }\n  };\n  var backspaceDeleteIntoListCaret = function (editor, isForward) {\n    var dom = editor.dom;\n    var selectionStartElm = editor.selection.getStart();\n    var root = $_2e86yngnjnlpb24w.getClosestListRootElm(editor, selectionStartElm);\n    var block = dom.getParent(selectionStartElm, dom.isBlock, root);\n    if (block && dom.isEmpty(block)) {\n      var rng = $_ck4mpggkjnlpb24r.normalizeRange(editor.selection.getRng(true));\n      var otherLi_1 = dom.getParent(findNextCaretContainer(editor, rng, isForward, root), 'LI', root);\n      if (otherLi_1) {\n        editor.undoManager.transact(function () {\n          removeBlock(dom, block, root);\n          $_ctanhjgejnlpb24d.mergeWithAdjacentLists(dom, otherLi_1.parentNode);\n          editor.selection.select(otherLi_1, true);\n          editor.selection.collapse(isForward);\n        });\n        return true;\n      }\n    }\n    return false;\n  };\n  var backspaceDeleteCaret = function (editor, isForward) {\n    return backspaceDeleteFromListToListCaret(editor, isForward) || backspaceDeleteIntoListCaret(editor, isForward);\n  };\n  var backspaceDeleteRange = function (editor) {\n    var selectionStartElm = editor.selection.getStart();\n    var root = $_2e86yngnjnlpb24w.getClosestListRootElm(editor, selectionStartElm);\n    var startListParent = editor.dom.getParent(selectionStartElm, 'LI,DT,DD', root);\n    if (startListParent || $_2e86yngnjnlpb24w.getSelectedListItems(editor).length > 0) {\n      editor.undoManager.transact(function () {\n        editor.execCommand('Delete');\n        $_52bjalgmjnlpb24u.normalizeLists(editor.dom, editor.getBody());\n      });\n      return true;\n    }\n    return false;\n  };\n  var backspaceDelete = function (editor, isForward) {\n    return editor.selection.isCollapsed() ? backspaceDeleteCaret(editor, isForward) : backspaceDeleteRange(editor);\n  };\n  var setup = function (editor) {\n    editor.on('keydown', function (e) {\n      if (e.keyCode === global$3.BACKSPACE) {\n        if (backspaceDelete(editor, false)) {\n          e.preventDefault();\n        }\n      } else if (e.keyCode === global$3.DELETE) {\n        if (backspaceDelete(editor, true)) {\n          e.preventDefault();\n        }\n      }\n    });\n  };\n  var $_6r254xgajnlpb245 = {\n    setup: setup,\n    backspaceDelete: backspaceDelete\n  };\n\n  var get = function (editor) {\n    return {\n      backspaceDelete: function (isForward) {\n        $_6r254xgajnlpb245.backspaceDelete(editor, isForward);\n      }\n    };\n  };\n  var $_6kguj9g9jnlpb243 = { get: get };\n\n  var DOM$5 = global$6.DOM;\n  var mergeLists = function (from, to) {\n    var node;\n    if ($_ckmbxtgljnlpb24s.isListNode(from)) {\n      while (node = from.firstChild) {\n        to.appendChild(node);\n      }\n      DOM$5.remove(from);\n    }\n  };\n  var indent = function (li) {\n    var sibling, newList, listStyle;\n    if (li.nodeName === 'DT') {\n      DOM$5.rename(li, 'DD');\n      return true;\n    }\n    sibling = li.previousSibling;\n    if (sibling && $_ckmbxtgljnlpb24s.isListNode(sibling)) {\n      sibling.appendChild(li);\n      return true;\n    }\n    if (sibling && sibling.nodeName === 'LI' && $_ckmbxtgljnlpb24s.isListNode(sibling.lastChild)) {\n      sibling.lastChild.appendChild(li);\n      mergeLists(li.lastChild, sibling.lastChild);\n      return true;\n    }\n    sibling = li.nextSibling;\n    if (sibling && $_ckmbxtgljnlpb24s.isListNode(sibling)) {\n      sibling.insertBefore(li, sibling.firstChild);\n      return true;\n    }\n    sibling = li.previousSibling;\n    if (sibling && sibling.nodeName === 'LI') {\n      newList = DOM$5.create(li.parentNode.nodeName);\n      listStyle = DOM$5.getStyle(li.parentNode, 'listStyleType');\n      if (listStyle) {\n        DOM$5.setStyle(newList, 'listStyleType', listStyle);\n      }\n      sibling.appendChild(newList);\n      newList.appendChild(li);\n      mergeLists(li.lastChild, newList);\n      return true;\n    }\n    return false;\n  };\n  var indentSelection = function (editor) {\n    var listElements = $_2e86yngnjnlpb24w.getSelectedListItems(editor);\n    if (listElements.length) {\n      var bookmark = $_b9d8gigjjnlpb24o.createBookmark(editor.selection.getRng(true));\n      for (var i = 0; i < listElements.length; i++) {\n        if (!indent(listElements[i]) && i === 0) {\n          break;\n        }\n      }\n      editor.selection.setRng($_b9d8gigjjnlpb24o.resolveBookmark(bookmark));\n      editor.nodeChanged();\n      return true;\n    }\n  };\n  var $_9yq141gtjnlpb259 = { indentSelection: indentSelection };\n\n  var queryListCommandState = function (editor, listName) {\n    return function () {\n      var parentList = editor.dom.getParent(editor.selection.getStart(), 'UL,OL,DL');\n      return parentList && parentList.nodeName === listName;\n    };\n  };\n  var register = function (editor) {\n    editor.on('BeforeExecCommand', function (e) {\n      var cmd = e.command.toLowerCase();\n      var isHandled;\n      if (cmd === 'indent') {\n        if ($_9yq141gtjnlpb259.indentSelection(editor)) {\n          isHandled = true;\n        }\n      } else if (cmd === 'outdent') {\n        if ($_etcyqoghjnlpb24k.outdentSelection(editor)) {\n          isHandled = true;\n        }\n      }\n      if (isHandled) {\n        editor.fire('ExecCommand', { command: e.command });\n        e.preventDefault();\n        return true;\n      }\n    });\n    editor.addCommand('InsertUnorderedList', function (ui, detail) {\n      $_ctanhjgejnlpb24d.toggleList(editor, 'UL', detail);\n    });\n    editor.addCommand('InsertOrderedList', function (ui, detail) {\n      $_ctanhjgejnlpb24d.toggleList(editor, 'OL', detail);\n    });\n    editor.addCommand('InsertDefinitionList', function (ui, detail) {\n      $_ctanhjgejnlpb24d.toggleList(editor, 'DL', detail);\n    });\n    editor.addQueryStateHandler('InsertUnorderedList', queryListCommandState(editor, 'UL'));\n    editor.addQueryStateHandler('InsertOrderedList', queryListCommandState(editor, 'OL'));\n    editor.addQueryStateHandler('InsertDefinitionList', queryListCommandState(editor, 'DL'));\n  };\n  var $_eje2t6gsjnlpb257 = { register: register };\n\n  var shouldIndentOnTab = function (editor) {\n    return editor.getParam('lists_indent_on_tab', true);\n  };\n  var $_qwibdgvjnlpb25d = { shouldIndentOnTab: shouldIndentOnTab };\n\n  var setupTabKey = function (editor) {\n    editor.on('keydown', function (e) {\n      if (e.keyCode !== global$3.TAB || global$3.metaKeyPressed(e)) {\n        return;\n      }\n      if (editor.dom.getParent(editor.selection.getStart(), 'LI,DT,DD')) {\n        e.preventDefault();\n        if (e.shiftKey) {\n          $_etcyqoghjnlpb24k.outdentSelection(editor);\n        } else {\n          $_9yq141gtjnlpb259.indentSelection(editor);\n        }\n      }\n    });\n  };\n  var setup$1 = function (editor) {\n    if ($_qwibdgvjnlpb25d.shouldIndentOnTab(editor)) {\n      setupTabKey(editor);\n    }\n    $_6r254xgajnlpb245.setup(editor);\n  };\n  var $_e37gx5gujnlpb25c = { setup: setup$1 };\n\n  var findIndex = function (list, predicate) {\n    for (var index = 0; index < list.length; index++) {\n      var element = list[index];\n      if (predicate(element)) {\n        return index;\n      }\n    }\n    return -1;\n  };\n  var listState = function (editor, listName) {\n    return function (e) {\n      var ctrl = e.control;\n      editor.on('NodeChange', function (e) {\n        var tableCellIndex = findIndex(e.parents, $_ckmbxtgljnlpb24s.isTableCellNode);\n        var parents = tableCellIndex !== -1 ? e.parents.slice(0, tableCellIndex) : e.parents;\n        var lists = global$5.grep(parents, $_ckmbxtgljnlpb24s.isListNode);\n        ctrl.active(lists.length > 0 && lists[0].nodeName === listName);\n      });\n    };\n  };\n  var indentPostRender = function (editor) {\n    return function (e) {\n      var ctrl = e.control;\n      editor.on('nodechange', function () {\n        var listItemBlocks = $_2e86yngnjnlpb24w.getSelectedListItems(editor);\n        var disable = listItemBlocks.length > 0 && $_ckmbxtgljnlpb24s.isFirstChild(listItemBlocks[0]);\n        ctrl.disabled(disable);\n      });\n    };\n  };\n  var register$1 = function (editor) {\n    var hasPlugin = function (editor, plugin) {\n      var plugins = editor.settings.plugins ? editor.settings.plugins : '';\n      return global$5.inArray(plugins.split(/[ ,]/), plugin) !== -1;\n    };\n    if (!hasPlugin(editor, 'advlist')) {\n      editor.addButton('numlist', {\n        active: false,\n        title: 'Numbered list',\n        cmd: 'InsertOrderedList',\n        onPostRender: listState(editor, 'OL')\n      });\n      editor.addButton('bullist', {\n        active: false,\n        title: 'Bullet list',\n        cmd: 'InsertUnorderedList',\n        onPostRender: listState(editor, 'UL')\n      });\n    }\n    editor.addButton('indent', {\n      icon: 'indent',\n      title: 'Increase indent',\n      cmd: 'Indent',\n      onPostRender: indentPostRender(editor)\n    });\n  };\n  var $_5vaivwgwjnlpb25k = { register: register$1 };\n\n  global.add('lists', function (editor) {\n    $_e37gx5gujnlpb25c.setup(editor);\n    $_5vaivwgwjnlpb25k.register(editor);\n    $_eje2t6gsjnlpb257.register(editor);\n    return $_6kguj9g9jnlpb243.get(editor);\n  });\n  function Plugin () {\n  }\n\n  return Plugin;\n\n}());\n})();\n"]}]}