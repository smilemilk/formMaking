{"remainingRequest":"/Users/shanliguo/Documents/workstudy/vue-form-making/node_modules/babel-loader/lib/index.js!/Users/shanliguo/Documents/workstudy/vue-form-making/node_modules/eslint-loader/index.js??ref--13-0!/Users/shanliguo/Documents/workstudy/vue-form-making/src/components/generateCode.js","dependencies":[{"path":"/Users/shanliguo/Documents/workstudy/vue-form-making/src/components/generateCode.js","mtime":1537952770000},{"path":"/Users/shanliguo/Documents/workstudy/vue-form-making/package.json","mtime":1557727773054},{"path":"/Users/shanliguo/Documents/workstudy/vue-form-making/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/shanliguo/Documents/workstudy/vue-form-making/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/shanliguo/Documents/workstudy/vue-form-making/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.function.name\";\nimport \"core-js/modules/web.dom.iterable\";\n\nfunction findRemoteFunc(list, funcList, tokenFuncList, blankList) {\n  for (var i = 0; i < list.length; i++) {\n    if (list[i].type == 'grid') {\n      list[i].columns.forEach(function (item) {\n        findRemoteFunc(item.list, funcList, tokenFuncList, blankList);\n      });\n    } else {\n      if (list[i].type == 'blank') {\n        if (list[i].model) {\n          blankList.push({\n            name: list[i].model,\n            label: list[i].name\n          });\n        }\n      } else if (list[i].type == 'imgupload') {\n        if (list[i].options.tokenFunc) {\n          tokenFuncList.push({\n            func: list[i].options.tokenFunc,\n            label: list[i].name,\n            model: list[i].model\n          });\n        }\n      } else {\n        if (list[i].options.remote && list[i].options.remoteFunc) {\n          funcList.push({\n            func: list[i].options.remoteFunc,\n            label: list[i].name,\n            model: list[i].model\n          });\n        }\n      }\n    }\n  }\n}\n\nexport default function (data) {\n  var funcList = [];\n  var tokenFuncList = [];\n  var blankList = [];\n  findRemoteFunc(JSON.parse(data).list, funcList, tokenFuncList, blankList);\n  var funcTemplate = '';\n  var blankTemplate = '';\n\n  for (var i = 0; i < funcList.length; i++) {\n    funcTemplate += \"\\n            \".concat(funcList[i].func, \" (resolve) {\\n              // \").concat(funcList[i].label, \" \").concat(funcList[i].model, \"\\n              // \\u83B7\\u53D6\\u5230\\u8FDC\\u7AEF\\u6570\\u636E\\u540E\\u6267\\u884C\\u56DE\\u8C03\\u51FD\\u6570\\n              // resolve(data)\\n            },\\n    \");\n  }\n\n  for (var _i = 0; _i < tokenFuncList.length; _i++) {\n    funcTemplate += \"\\n            \".concat(tokenFuncList[_i].func, \" (resolve) {\\n              // \").concat(tokenFuncList[_i].label, \" \").concat(tokenFuncList[_i].model, \"\\n              // \\u83B7\\u53D6\\u5230token\\u6570\\u636E\\u540E\\u6267\\u884C\\u56DE\\u8C03\\u51FD\\u6570\\n              // resolve(token)\\n            },\\n    \");\n  }\n\n  for (var _i2 = 0; _i2 < blankList.length; _i2++) {\n    blankTemplate += \"\\n        <template slot=\\\"\".concat(blankList[_i2].name, \"\\\" slot-scope=\\\"scope\\\">\\n          <!-- \").concat(blankList[_i2].label, \" -->\\n          <!-- \\u901A\\u8FC7 v-model=\\\"scope.model.\").concat(blankList[_i2].name, \"\\\" \\u7ED1\\u5B9A\\u6570\\u636E -->\\n        </template>\\n    \");\n  }\n\n  return \"<!DOCTYPE html>\\n  <html>\\n  <head>\\n    <meta charset=\\\"UTF-8\\\">\\n    <link rel=\\\"stylesheet\\\" href=\\\"https://unpkg.com/element-ui/lib/theme-chalk/index.css\\\">\\n    <link rel=\\\"stylesheet\\\" href=\\\"https://unpkg.com/form-making/dist/FormMaking.css\\\">\\n  </head>\\n  <body>\\n    <div id=\\\"app\\\">\\n      <fm-generate-form :data=\\\"jsonData\\\" :remote=\\\"remoteFuncs\\\" :value=\\\"editData\\\" ref=\\\"generateForm\\\">\\n        \".concat(blankTemplate, \"\\n      </fm-generate-form>\\n      <el-button type=\\\"primary\\\" @click=\\\"handleSubmit\\\">\\u63D0\\u4EA4</el-button>\\n    </div>\\n    <script src=\\\"https://unpkg.com/vue/dist/vue.js\\\"></script>\\n    <script src=\\\"https://unpkg.com/element-ui/lib/index.js\\\"></script>\\n    <script src=\\\"https://unpkg.com/form-making/dist/FormMaking.umd.js\\\"></script>\\n    <script>\\n      new Vue({\\n        el: '#app',\\n        data: {\\n          jsonData: \").concat(data, \",\\n          editData: {},\\n          remoteFuncs: {\\n            \").concat(funcTemplate, \"\\n          }\\n        },\\n        methods: {\\n          handleSubmit () {\\n            this.$refs.generateForm.getData().then(data => {\\n              // \\u6570\\u636E\\u6821\\u9A8C\\u6210\\u529F\\n              // data \\u4E3A\\u83B7\\u53D6\\u7684\\u8868\\u5355\\u6570\\u636E\\n            }).catch(e => {\\n              // \\u6570\\u636E\\u6821\\u9A8C\\u5931\\u8D25\\n            })\\n          }\\n        }\\n      })\\n    </script>\\n  </body>\\n  </html>\");\n}",{"version":3,"sources":["/Users/shanliguo/Documents/workstudy/vue-form-making/src/components/generateCode.js"],"names":["findRemoteFunc","list","funcList","tokenFuncList","blankList","i","length","type","columns","forEach","item","model","push","name","label","options","tokenFunc","func","remote","remoteFunc","data","JSON","parse","funcTemplate","blankTemplate"],"mappings":"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","sourcesContent":["function findRemoteFunc (list, funcList, tokenFuncList, blankList) {\n  for (let i = 0; i < list.length; i++) {\n    if (list[i].type == 'grid') {\n      list[i].columns.forEach(item => {\n        findRemoteFunc(item.list, funcList, tokenFuncList, blankList)\n      })\n    } else {\n      if (list[i].type == 'blank') {\n        if (list[i].model) {\n          blankList.push({\n            name: list[i].model,\n            label: list[i].name\n          })\n        }\n      } else if (list[i].type == 'imgupload') {\n        if (list[i].options.tokenFunc) {\n          tokenFuncList.push({\n            func: list[i].options.tokenFunc,\n            label: list[i].name,\n            model: list[i].model\n          })\n        }\n      } else {\n        if (list[i].options.remote && list[i].options.remoteFunc) {\n          funcList.push({\n            func: list[i].options.remoteFunc,\n            label: list[i].name,\n            model: list[i].model\n          })\n        }\n      }\n    }\n  }\n}\n\nexport default function (data) {\n\n  const funcList = []\n\n  const tokenFuncList = []\n\n  const blankList = []\n\n  findRemoteFunc(JSON.parse(data).list, funcList, tokenFuncList, blankList)\n\n  let funcTemplate = ''\n\n  let blankTemplate = ''\n\n  for(let i = 0; i < funcList.length; i++) {\n    funcTemplate += `\n            ${funcList[i].func} (resolve) {\n              // ${funcList[i].label} ${funcList[i].model}\n              // 获取到远端数据后执行回调函数\n              // resolve(data)\n            },\n    `\n  }\n\n  for(let i = 0; i < tokenFuncList.length; i++) {\n    funcTemplate += `\n            ${tokenFuncList[i].func} (resolve) {\n              // ${tokenFuncList[i].label} ${tokenFuncList[i].model}\n              // 获取到token数据后执行回调函数\n              // resolve(token)\n            },\n    `\n  }\n\n  for (let i = 0; i < blankList.length; i++) {\n    blankTemplate += `\n        <template slot=\"${blankList[i].name}\" slot-scope=\"scope\">\n          <!-- ${blankList[i].label} -->\n          <!-- 通过 v-model=\"scope.model.${blankList[i].name}\" 绑定数据 -->\n        </template>\n    `\n  }\n\n  return `<!DOCTYPE html>\n  <html>\n  <head>\n    <meta charset=\"UTF-8\">\n    <link rel=\"stylesheet\" href=\"https://unpkg.com/element-ui/lib/theme-chalk/index.css\">\n    <link rel=\"stylesheet\" href=\"https://unpkg.com/form-making/dist/FormMaking.css\">\n  </head>\n  <body>\n    <div id=\"app\">\n      <fm-generate-form :data=\"jsonData\" :remote=\"remoteFuncs\" :value=\"editData\" ref=\"generateForm\">\n        ${blankTemplate}\n      </fm-generate-form>\n      <el-button type=\"primary\" @click=\"handleSubmit\">提交</el-button>\n    </div>\n    <script src=\"https://unpkg.com/vue/dist/vue.js\"></script>\n    <script src=\"https://unpkg.com/element-ui/lib/index.js\"></script>\n    <script src=\"https://unpkg.com/form-making/dist/FormMaking.umd.js\"></script>\n    <script>\n      new Vue({\n        el: '#app',\n        data: {\n          jsonData: ${data},\n          editData: {},\n          remoteFuncs: {\n            ${funcTemplate}\n          }\n        },\n        methods: {\n          handleSubmit () {\n            this.$refs.generateForm.getData().then(data => {\n              // 数据校验成功\n              // data 为获取的表单数据\n            }).catch(e => {\n              // 数据校验失败\n            })\n          }\n        }\n      })\n    </script>\n  </body>\n  </html>`\n}"]}]}