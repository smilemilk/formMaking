{"remainingRequest":"/Users/shanliguo/Documents/workstudy/vue-form-making/node_modules/babel-loader/lib/index.js!/Users/shanliguo/Documents/workstudy/vue-form-making/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/shanliguo/Documents/workstudy/vue-form-making/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/shanliguo/Documents/workstudy/vue-form-making/src/components/GenerateForm.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/shanliguo/Documents/workstudy/vue-form-making/src/components/GenerateForm.vue","mtime":1553766967000},{"path":"/Users/shanliguo/Documents/workstudy/vue-form-making/package.json","mtime":1557727773054},{"path":"/Users/shanliguo/Documents/workstudy/vue-form-making/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/shanliguo/Documents/workstudy/vue-form-making/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/shanliguo/Documents/workstudy/vue-form-making/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/shanliguo/Documents/workstudy/vue-form-making/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import _objectSpread from \"/Users/shanliguo/Documents/workstudy/vue-form-making/node_modules/@babel/runtime-corejs2/helpers/esm/objectSpread\";\nimport _toConsumableArray from \"/Users/shanliguo/Documents/workstudy/vue-form-making/node_modules/@babel/runtime-corejs2/helpers/esm/toConsumableArray\";\nimport \"core-js/modules/es6.object.keys\";\nimport \"core-js/modules/web.dom.iterable\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport GenetateFormItem from \"./GenerateFormItem\";\nimport { loadJs } from \"../util/index.js\";\nexport default {\n  name: 'fm-generate-form',\n  components: {\n    GenetateFormItem: GenetateFormItem\n  },\n  props: ['data', 'remote', 'value', 'insite'],\n  data: function data() {\n    return {\n      models: {},\n      rules: {}\n    };\n  },\n  created: function created() {\n    this.generateModle(this.data.list);\n  },\n  mounted: function mounted() {},\n  methods: {\n    generateModle: function generateModle(genList) {\n      var _this = this;\n\n      for (var i = 0; i < genList.length; i++) {\n        if (genList[i].type === 'grid') {\n          genList[i].columns.forEach(function (item) {\n            _this.generateModle(item.list);\n          });\n        } else {\n          if (this.value && Object.keys(this.value).indexOf(genList[i].model) >= 0) {\n            this.models[genList[i].model] = this.value[genList[i].model];\n          } else {\n            if (genList[i].type === 'blank') {\n              this.models[genList[i].model] = genList[i].options.defaultType === 'String' ? '' : genList[i].options.defaultType === 'Object' ? {} : [];\n            } else {\n              this.models[genList[i].model] = genList[i].options.defaultValue;\n            }\n          }\n\n          if (this.rules[genList[i].model]) {\n            this.rules[genList[i].model] = [].concat(_toConsumableArray(this.rules[genList[i].model]), _toConsumableArray(genList[i].rules.map(function (item) {\n              if (item.pattern) {\n                return _objectSpread({}, item, {\n                  pattern: eval(item.pattern)\n                });\n              } else {\n                return _objectSpread({}, item);\n              }\n            })));\n          } else {\n            this.rules[genList[i].model] = _toConsumableArray(genList[i].rules.map(function (item) {\n              if (item.pattern) {\n                return _objectSpread({}, item, {\n                  pattern: eval(item.pattern)\n                });\n              } else {\n                return _objectSpread({}, item);\n              }\n            }));\n          }\n        }\n      }\n    },\n    getData: function getData() {\n      var _this2 = this;\n\n      return new Promise(function (resolve, reject) {\n        _this2.$refs.generateForm.validate(function (valid) {\n          if (valid) {\n            resolve(_this2.models);\n          } else {\n            reject(new Error('表单数据校验失败').message);\n          }\n        });\n      });\n    },\n    refresh: function refresh() {}\n  },\n  watch: {\n    data: {\n      deep: true,\n      handler: function handler(val) {\n        this.generateModle(val.list);\n      }\n    },\n    value: {\n      deep: true,\n      handler: function handler(val) {\n        console.log(JSON.stringify(val));\n        this.models = _objectSpread({}, this.models, val);\n      }\n    }\n  }\n};",{"version":3,"sources":["GenerateForm.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div>\n    <el-form ref=\"generateForm\" \n      :size=\"data.config.size\"\n      :model=\"models\" :rules=\"rules\" :label-position=\"data.config.labelPosition\" :label-width=\"data.config.labelWidth + 'px'\">\n      <template v-for=\"item in data.list\">\n\n        <template v-if=\"item.type == 'grid'\">\n          <el-row\n            :key=\"item.key\"\n            type=\"flex\"\n            :gutter=\"item.options.gutter ? item.options.gutter : 0\"\n            :justify=\"item.options.justify\"\n            :align=\"item.options.align\"\n          >\n            <el-col v-for=\"(col, colIndex) in item.columns\" :key=\"colIndex\" :span=\"col.span\">\n              \n\n              <template v-for=\"citem in col.list\" >\n                <el-form-item v-if=\"citem.type=='blank'\" :label=\"citem.name\" :prop=\"citem.model\" :key=\"citem.key\">\n                  <slot :name=\"citem.model\" :model=\"models\"></slot>\n                </el-form-item>\n                <genetate-form-item v-else :key=\"citem.key\" :models.sync=\"models\" :remote=\"remote\" :rules=\"rules\" :widget=\"citem\"></genetate-form-item>\n              </template>\n            </el-col>\n          </el-row>\n        </template>\n\n        <template v-else-if=\"item.type == 'blank'\">\n          <el-form-item :label=\"item.name\" :prop=\"item.model\" :key=\"item.key\">\n            <slot :name=\"item.model\" :model=\"models\"></slot>\n          </el-form-item>\n        </template>\n\n        <template v-else>\n          <genetate-form-item :key=\"item.key\" :models.sync=\"models\" :rules=\"rules\" :widget=\"item\" :remote=\"remote\"></genetate-form-item>\n        </template>\n        \n      </template>\n    </el-form>\n  </div>\n</template>\n\n<script>\nimport GenetateFormItem from './GenerateFormItem'\nimport {loadJs} from '../util/index.js'\n\nexport default {\n  name: 'fm-generate-form',\n  components: {\n    GenetateFormItem\n  },\n  props: ['data', 'remote', 'value', 'insite'],\n  data () {\n    return {\n      models: {},\n      rules: {}\n    }\n  },\n  created () {\n    this.generateModle(this.data.list)\n  },\n  mounted () {\n  },\n  methods: {\n    generateModle (genList) {\n      for (let i = 0; i < genList.length; i++) {\n        if (genList[i].type === 'grid') {\n          genList[i].columns.forEach(item => {\n            this.generateModle(item.list)\n          })\n        } else {\n          if (this.value && Object.keys(this.value).indexOf(genList[i].model) >= 0) {\n            this.models[genList[i].model] = this.value[genList[i].model]\n          } else {\n            if (genList[i].type === 'blank') {\n              this.models[genList[i].model] = genList[i].options.defaultType === 'String' ? '' : (genList[i].options.defaultType === 'Object' ? {} : [])\n            } else {\n              this.models[genList[i].model] = genList[i].options.defaultValue\n            }      \n          }\n          \n          if (this.rules[genList[i].model]) {\n            \n            this.rules[genList[i].model] = [...this.rules[genList[i].model], ...genList[i].rules.map(item => {\n              if (item.pattern) {\n                return {...item, pattern: eval(item.pattern)}\n              } else {\n                return {...item}\n              }\n            })]\n          } else {\n            \n            this.rules[genList[i].model] = [...genList[i].rules.map(item => {\n              if (item.pattern) {\n                return {...item, pattern: eval(item.pattern)}\n              } else {\n                return {...item}\n              }\n            })]\n          }      \n        }\n      }\n    },\n    getData () {\n      return new Promise((resolve, reject) => {\n        this.$refs.generateForm.validate(valid => {\n          if (valid) {\n            resolve(this.models)\n          } else {\n            reject(new Error('表单数据校验失败').message)\n          }\n        })\n      })\n    },\n    refresh () {\n      \n    }\n  },\n  watch: {\n    data: {\n      deep: true,\n      handler (val) {\n        this.generateModle(val.list)\n      }\n    },\n    value: {\n      deep: true,\n      handler (val) {\n        console.log(JSON.stringify(val))\n        this.models = {...this.models, ...val}\n      }\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\">\n// @import '../styles/cover.scss';\n</style>\n"],"sourceRoot":"src/components"}]}